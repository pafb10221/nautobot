
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://docs.nautobot.com/projects/core/en/stable/code-reference/nautobot/apps/utils.html">
      
      
        <link rel="prev" href="urls.html">
      
      
        <link rel="next" href="views.html">
      
      <link rel="icon" href="../../../assets/favicon.ico">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.1.21">
    
    
      
        <title>nautobot.apps.utils - Nautobot Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.eebd395e.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.ecc896b0.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../../assets/extra.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="black" data-md-color-accent="indigo">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#nautobot.apps.utils" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../../index.html" title="Nautobot Documentation" class="md-header__button md-logo" aria-label="Nautobot Documentation" data-md-component="logo">
      
  <img src="../../../assets/nautobot_logo.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Nautobot Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              nautobot.apps.utils
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
          
            
            
            
            <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="black" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
            
              <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22Z"/></svg>
              </label>
            
          
            
            
            
            <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
            
              <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31Z"/></svg>
              </label>
            
          
        </form>
      
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/nautobot/nautobot" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href="../../../index.html" class="md-tabs__link">
      Overview
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="../../../user-guide/index.html" class="md-tabs__link">
      User Guide
    </a>
  </li>

      
        
  
  
    
  


  <li class="md-tabs__item">
    <a href="../../../development/index.html" class="md-tabs__link md-tabs__link--active">
      Developer Guide
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="../../../release-notes/index.html" class="md-tabs__link">
      Release Notes
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="../../../apps/index.html" class="md-tabs__link">
      Nautobot Apps
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="https://docs.nautobot.com/" class="md-tabs__link">
      Nautobot Docs Home ↗︎
    </a>
  </li>

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../index.html" title="Nautobot Documentation" class="md-nav__button md-logo" aria-label="Nautobot Documentation" data-md-component="logo">
      
  <img src="../../../assets/nautobot_logo.svg" alt="logo">

    </a>
    Nautobot Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/nautobot/nautobot" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../index.html" class="md-nav__link">
        Overview
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../user-guide/index.html">User Guide</a>
          
            <label for="__nav_2">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          User Guide
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1" >
      
      
      
        <label class="md-nav__link" for="__nav_2_1" id="__nav_2_1_label" tabindex="0">
          Administration
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_1_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_1">
          <span class="md-nav__icon md-icon"></span>
          Administration
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1_1" >
      
      
      
        <label class="md-nav__link" for="__nav_2_1_1" id="__nav_2_1_1_label" tabindex="0">
          Installation
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_1_1_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_1_1">
          <span class="md-nav__icon md-icon"></span>
          Installation
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/administration/installation/index.html" class="md-nav__link">
        Prerequisites
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/administration/installation/install_system.html" class="md-nav__link">
        Installing System Dependencies
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/administration/installation/nautobot.html" class="md-nav__link">
        Installing Nautobot
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/administration/installation/services.html" class="md-nav__link">
        Deploying Nautobot Services
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/administration/installation/http-server.html" class="md-nav__link">
        Configuring an HTTP Server
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/administration/installation/external-authentication.html" class="md-nav__link">
        External Authentication (Optional)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/administration/installation/app-install.html" class="md-nav__link">
        Installing and Using Plugins
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/administration/installation/docker.html" class="md-nav__link">
        Nautobot Docker Images
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/administration/installation/selinux-troubleshooting.html" class="md-nav__link">
        SELinux Troubleshooting
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1_2" >
      
      
      
        <label class="md-nav__link" for="__nav_2_1_2" id="__nav_2_1_2_label" tabindex="0">
          Upgrading
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_1_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_1_2">
          <span class="md-nav__icon md-icon"></span>
          Upgrading
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/administration/upgrading/database-backup.html" class="md-nav__link">
        Database Backup
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/administration/upgrading/upgrading.html" class="md-nav__link">
        Upgrading Nautobot
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1_2_3" >
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../user-guide/administration/upgrading/from-v1/upgrading-from-nautobot-v1.html">Upgrading Nautobot from v1.X to v2.0</a>
          
            <label for="__nav_2_1_2_3">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_1_2_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_1_2_3">
          <span class="md-nav__icon md-icon"></span>
          Upgrading Nautobot from v1.X to v2.0
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/administration/upgrading/from-v1/region-and-site-data-migration-guide.html" class="md-nav__link">
        Migrating from Region and Site to Location
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1_2_3_2" >
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../user-guide/administration/upgrading/from-v1/ipam/index.html">IPAM Migration Guide</a>
          
            <label for="__nav_2_1_2_3_2">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_2_1_2_3_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_1_2_3_2">
          <span class="md-nav__icon md-icon"></span>
          IPAM Migration Guide
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/administration/upgrading/from-v1/ipam/whats-changed.html" class="md-nav__link">
        What's Changed
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/administration/upgrading/from-v1/ipam/before-you-upgrade.html" class="md-nav__link">
        Before you Upgrade
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/administration/upgrading/from-v1/ipam/after-you-upgrade.html" class="md-nav__link">
        After you Upgrade
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/administration/upgrading/from-v1/ipam/for-developers.html" class="md-nav__link">
        For Developers
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1_3" >
      
      
      
        <label class="md-nav__link" for="__nav_2_1_3" id="__nav_2_1_3_label" tabindex="0">
          Migration
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_1_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_1_3">
          <span class="md-nav__icon md-icon"></span>
          Migration
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/administration/migration/migrating-from-netbox.html" class="md-nav__link">
        Migrating from NetBox
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/administration/migration/migrating-from-postgresql.html" class="md-nav__link">
        Migrating from PostgreSQL to MySQL
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1_4" >
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../user-guide/administration/configuration/index.html">Configuration</a>
          
            <label for="__nav_2_1_4">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_1_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_1_4">
          <span class="md-nav__icon md-icon"></span>
          Configuration
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/administration/configuration/required-settings.html" class="md-nav__link">
        Required Settings
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/administration/configuration/optional-settings.html" class="md-nav__link">
        Optional Settings
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1_4_3" >
      
      
      
        <label class="md-nav__link" for="__nav_2_1_4_3" id="__nav_2_1_4_3_label" tabindex="0">
          External Authentication
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_1_4_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_1_4_3">
          <span class="md-nav__icon md-icon"></span>
          External Authentication
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/administration/configuration/authentication/ldap.html" class="md-nav__link">
        LDAP
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/administration/configuration/authentication/sso.html" class="md-nav__link">
        SSO
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/administration/configuration/authentication/remote.html" class="md-nav__link">
        Remote Header
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/administration/configuration/node-configuration.html" class="md-nav__link">
        Node.js Configuration
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1_5" >
      
      
      
        <label class="md-nav__link" for="__nav_2_1_5" id="__nav_2_1_5_label" tabindex="0">
          Tools
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_1_5_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_1_5">
          <span class="md-nav__icon md-icon"></span>
          Tools
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/administration/tools/nautobot-server.html" class="md-nav__link">
        Nautobot Server
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/administration/tools/nautobot-shell.html" class="md-nav__link">
        Nautobot Shell
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1_6" >
      
      
      
        <label class="md-nav__link" for="__nav_2_1_6" id="__nav_2_1_6_label" tabindex="0">
          Guides
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_1_6_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_1_6">
          <span class="md-nav__icon md-icon"></span>
          Guides
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/administration/guides/caching.html" class="md-nav__link">
        Caching
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/administration/guides/healthcheck.html" class="md-nav__link">
        Health Check
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/administration/guides/permissions.html" class="md-nav__link">
        Permissions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/administration/guides/prometheus-metrics.html" class="md-nav__link">
        Prometheus Metrics
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/administration/guides/replicating-nautobot.html" class="md-nav__link">
        Replicating Nautobot
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/administration/guides/s3-django-storage.html" class="md-nav__link">
        Django Storages with S3
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/administration/guides/celery-queues.html" class="md-nav__link">
        Task Queues
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2" >
      
      
      
        <label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
          Feature Guides
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_2">
          <span class="md-nav__icon md-icon"></span>
          Feature Guides
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2_1" >
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../user-guide/feature-guides/getting-started/index.html">Getting Started</a>
          
            <label for="__nav_2_2_1">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_2_1_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_2_1">
          <span class="md-nav__icon md-icon"></span>
          Getting Started
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/feature-guides/getting-started/creating-devices.html" class="md-nav__link">
        Devices
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/feature-guides/getting-started/creating-location-types-and-locations.html" class="md-nav__link">
        Location Types and Locations
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/feature-guides/getting-started/platforms.html" class="md-nav__link">
        Platforms
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/feature-guides/getting-started/tenants.html" class="md-nav__link">
        Tenants
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/feature-guides/getting-started/interfaces.html" class="md-nav__link">
        Interfaces
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/feature-guides/getting-started/vlans-and-vlan-groups.html" class="md-nav__link">
        VLANS and VLAN Groups
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/feature-guides/getting-started/ipam.html" class="md-nav__link">
        IP Address Management
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/feature-guides/getting-started/search-bar.html" class="md-nav__link">
        The Search Bar
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/feature-guides/custom-fields.html" class="md-nav__link">
        Custom Fields
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/feature-guides/git-data-source.html" class="md-nav__link">
        Git as a Data Source
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/feature-guides/graphql.html" class="md-nav__link">
        GraphQL
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/feature-guides/ip-address-merge-tool.html" class="md-nav__link">
        IP Address Merge Tool
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/feature-guides/git-data-source.html" class="md-nav__link">
        Git as a Data Source
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/feature-guides/graphql.html" class="md-nav__link">
        GraphQL
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/feature-guides/relationships.html" class="md-nav__link">
        Relationships
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3" >
      
      
      
        <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
          Core Data Model
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_3">
          <span class="md-nav__icon md-icon"></span>
          Core Data Model
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_1" >
      
      
      
        <label class="md-nav__link" for="__nav_2_3_1" id="__nav_2_3_1_label" tabindex="0">
          Circuits
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_3_1_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_3_1">
          <span class="md-nav__icon md-icon"></span>
          Circuits
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/core-data-model/circuits/circuit.html" class="md-nav__link">
        Circuit
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/core-data-model/circuits/circuittermination.html" class="md-nav__link">
        Circuit Termination
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/core-data-model/circuits/circuittype.html" class="md-nav__link">
        Circuit Type
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/core-data-model/circuits/provider.html" class="md-nav__link">
        Circuit Provider
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/core-data-model/circuits/providernetwork.html" class="md-nav__link">
        Circuit Provider Network
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_2" >
      
      
      
        <label class="md-nav__link" for="__nav_2_3_2" id="__nav_2_3_2_label" tabindex="0">
          DCIM
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_3_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_3_2">
          <span class="md-nav__icon md-icon"></span>
          DCIM
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/core-data-model/dcim/locationtype.html" class="md-nav__link">
        Location Type
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/core-data-model/dcim/location.html" class="md-nav__link">
        Location
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/core-data-model/dcim/rackgroup.html" class="md-nav__link">
        Rack Group
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/core-data-model/dcim/rack.html" class="md-nav__link">
        Rack
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/core-data-model/dcim/manufacturer.html" class="md-nav__link">
        Manufacturer
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/core-data-model/dcim/platform.html" class="md-nav__link">
        Platform
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_2_7" >
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../user-guide/core-data-model/dcim/devicetype.html">Device Type</a>
          
            <label for="__nav_2_3_2_7">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_3_2_7_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_3_2_7">
          <span class="md-nav__icon md-icon"></span>
          Device Type
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/core-data-model/dcim/consoleporttemplate.html" class="md-nav__link">
        Console Port Template
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/core-data-model/dcim/consoleserverporttemplate.html" class="md-nav__link">
        Console Server Port Template
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/core-data-model/dcim/devicebaytemplate.html" class="md-nav__link">
        Device Bay Template
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/core-data-model/dcim/frontporttemplate.html" class="md-nav__link">
        Front Port Template
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/core-data-model/dcim/interfacetemplate.html" class="md-nav__link">
        Interface Template
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/core-data-model/dcim/poweroutlettemplate.html" class="md-nav__link">
        Power Outlet Template
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/core-data-model/dcim/powerporttemplate.html" class="md-nav__link">
        Power Port Template
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/core-data-model/dcim/rearporttemplate.html" class="md-nav__link">
        Rear Port Template
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_2_8" >
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../user-guide/core-data-model/dcim/device.html">Device</a>
          
            <label for="__nav_2_3_2_8">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_3_2_8_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_3_2_8">
          <span class="md-nav__icon md-icon"></span>
          Device
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/core-data-model/dcim/consoleport.html" class="md-nav__link">
        Console Port
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/core-data-model/dcim/consoleserverport.html" class="md-nav__link">
        Console Server Port
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/core-data-model/dcim/devicebay.html" class="md-nav__link">
        Device Bay
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/core-data-model/dcim/frontport.html" class="md-nav__link">
        Front Port
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/core-data-model/dcim/interface.html" class="md-nav__link">
        Interface
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/core-data-model/dcim/inventoryitem.html" class="md-nav__link">
        Inventory Item
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/core-data-model/dcim/powerport.html" class="md-nav__link">
        Power Port
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/core-data-model/dcim/poweroutlet.html" class="md-nav__link">
        Power Outlet
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/core-data-model/dcim/rearport.html" class="md-nav__link">
        Rear Port
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/core-data-model/dcim/cable.html" class="md-nav__link">
        Cable
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/core-data-model/dcim/deviceredundancygroup.html" class="md-nav__link">
        Device Redundancy Group
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/core-data-model/dcim/interfaceredundancygroup.html" class="md-nav__link">
        Interface Redundancy Group
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/core-data-model/dcim/powerpanel.html" class="md-nav__link">
        Power Panel
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/core-data-model/dcim/powerfeed.html" class="md-nav__link">
        Power Feed
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/core-data-model/dcim/rackreservation.html" class="md-nav__link">
        Rack Reservation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/core-data-model/dcim/virtualchassis.html" class="md-nav__link">
        Virtual Chassis
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_3" >
      
      
      
        <label class="md-nav__link" for="__nav_2_3_3" id="__nav_2_3_3_label" tabindex="0">
          Extras
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_3_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_3_3">
          <span class="md-nav__icon md-icon"></span>
          Extras
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/core-data-model/extras/configcontext.html" class="md-nav__link">
        Config Context
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/core-data-model/extras/configcontextschema.html" class="md-nav__link">
        Config Context Schema
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_4" >
      
      
      
        <label class="md-nav__link" for="__nav_2_3_4" id="__nav_2_3_4_label" tabindex="0">
          IPAM
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_3_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_3_4">
          <span class="md-nav__icon md-icon"></span>
          IPAM
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/core-data-model/ipam/ipaddress.html" class="md-nav__link">
        IP Address
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/core-data-model/ipam/namespace.html" class="md-nav__link">
        Namespace
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/core-data-model/ipam/prefix.html" class="md-nav__link">
        Prefix
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/core-data-model/ipam/rir.html" class="md-nav__link">
        RIR
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/core-data-model/ipam/routetarget.html" class="md-nav__link">
        Route Target
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/core-data-model/ipam/service.html" class="md-nav__link">
        Service
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/core-data-model/ipam/vlan.html" class="md-nav__link">
        VLAN
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/core-data-model/ipam/vlangroup.html" class="md-nav__link">
        VLAN Group
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/core-data-model/ipam/vrf.html" class="md-nav__link">
        VRF
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_5" >
      
      
      
        <label class="md-nav__link" for="__nav_2_3_5" id="__nav_2_3_5_label" tabindex="0">
          Tenancy
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_3_5_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_3_5">
          <span class="md-nav__icon md-icon"></span>
          Tenancy
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/core-data-model/tenancy/tenant.html" class="md-nav__link">
        Tenant
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/core-data-model/tenancy/tenantgroup.html" class="md-nav__link">
        Tenant Group
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_6" >
      
      
      
        <label class="md-nav__link" for="__nav_2_3_6" id="__nav_2_3_6_label" tabindex="0">
          Virtualization
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_3_6_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_3_6">
          <span class="md-nav__icon md-icon"></span>
          Virtualization
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/core-data-model/virtualization/cluster.html" class="md-nav__link">
        Cluster
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/core-data-model/virtualization/clustergroup.html" class="md-nav__link">
        Cluster Group
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/core-data-model/virtualization/clustertype.html" class="md-nav__link">
        Cluster Type
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/core-data-model/virtualization/virtualmachine.html" class="md-nav__link">
        Virtual Machine
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/core-data-model/virtualization/vminterface.html" class="md-nav__link">
        VM Interface
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4" >
      
      
      
        <label class="md-nav__link" for="__nav_2_4" id="__nav_2_4_label" tabindex="0">
          Platform Functionality
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_4">
          <span class="md-nav__icon md-icon"></span>
          Platform Functionality
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/platform-functionality/change-logging.html" class="md-nav__link">
        Change Logging
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/platform-functionality/computedfield.html" class="md-nav__link">
        Computed Fields
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/platform-functionality/customfield.html" class="md-nav__link">
        Custom Fields
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/platform-functionality/customlink.html" class="md-nav__link">
        Custom Links
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/platform-functionality/dynamicgroup.html" class="md-nav__link">
        Dynamic Groups
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/platform-functionality/exporttemplate.html" class="md-nav__link">
        Export Templates
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/platform-functionality/gitrepository.html" class="md-nav__link">
        Git Repositories
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4_8" >
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../user-guide/platform-functionality/graphql.html">GraphQL</a>
          
            <label for="__nav_2_4_8">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_4_8_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_4_8">
          <span class="md-nav__icon md-icon"></span>
          GraphQL
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/platform-functionality/graphqlquery.html" class="md-nav__link">
        GraphQL Queries
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/platform-functionality/imageattachment.html" class="md-nav__link">
        Image Attachments
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4_10" >
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../user-guide/platform-functionality/jobs/index.html">Jobs</a>
          
            <label for="__nav_2_4_10">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_4_10_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_4_10">
          <span class="md-nav__icon md-icon"></span>
          Jobs
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/platform-functionality/jobs/jobbutton.html" class="md-nav__link">
        Job Buttons
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/platform-functionality/jobs/jobhook.html" class="md-nav__link">
        Job Hooks
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/platform-functionality/jobs/models.html" class="md-nav__link">
        Job Models
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/platform-functionality/jobs/job-scheduling-and-approvals.html" class="md-nav__link">
        Job Scheduling and Approvals
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/platform-functionality/napalm.html" class="md-nav__link">
        NAPALM
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/platform-functionality/note.html" class="md-nav__link">
        Notes
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/platform-functionality/relationship.html" class="md-nav__link">
        Relationships
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4_14" >
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../user-guide/platform-functionality/rest-api/overview.html">REST API</a>
          
            <label for="__nav_2_4_14">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_4_14_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_4_14">
          <span class="md-nav__icon md-icon"></span>
          REST API
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/platform-functionality/rest-api/filtering.html" class="md-nav__link">
        Filtering
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/platform-functionality/rest-api/authentication.html" class="md-nav__link">
        Authentication
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/platform-functionality/rest-api/ui-related-endpoints.html" class="md-nav__link">
        UI Endpoints
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/platform-functionality/role.html" class="md-nav__link">
        Roles
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/platform-functionality/secret.html" class="md-nav__link">
        Secrets
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/platform-functionality/status.html" class="md-nav__link">
        Statuses
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/platform-functionality/tag.html" class="md-nav__link">
        Tags
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/platform-functionality/template-filters.html" class="md-nav__link">
        Template Filters
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4_20" >
      
      
      
        <label class="md-nav__link" for="__nav_2_4_20" id="__nav_2_4_20_label" tabindex="0">
          Users
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_4_20_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_4_20">
          <span class="md-nav__icon md-icon"></span>
          Users
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/platform-functionality/users/objectpermission.html" class="md-nav__link">
        Object Permission
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/platform-functionality/users/token.html" class="md-nav__link">
        Token
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/platform-functionality/webhook.html" class="md-nav__link">
        Webhooks
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../development/index.html">Developer Guide</a>
          
            <label for="__nav_3">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Developer Guide
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1" >
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../development/jobs/index.html">Jobs Developer Guide</a>
          
            <label for="__nav_3_1">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_1_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_1">
          <span class="md-nav__icon md-icon"></span>
          Jobs Developer Guide
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/jobs/migration/from-v1.html" class="md-nav__link">
        Migration Guides
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" checked>
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../development/apps/index.html">App Developer Guide</a>
          
            <label for="__nav_3_2">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_3_2">
          <span class="md-nav__icon md-icon"></span>
          App Developer Guide
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/apps/api/setup.html" class="md-nav__link">
        Setup
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/apps/api/nautobot-app-config.html" class="md-nav__link">
        NautobotAppConfig
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2_3" >
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../development/apps/api/models/index.html">Models</a>
          
            <label for="__nav_3_2_3">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_2_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_2_3">
          <span class="md-nav__icon md-icon"></span>
          Models
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/apps/api/models/global-search.html" class="md-nav__link">
        Global Search
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/apps/api/models/graphql.html" class="md-nav__link">
        GraphQL
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/apps/api/models/django-admin.html" class="md-nav__link">
        Django Admin
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2_4" >
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../development/apps/api/views/index.html">Views</a>
          
            <label for="__nav_3_2_4">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_2_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_2_4">
          <span class="md-nav__icon md-icon"></span>
          Views
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/apps/api/views/nautobotuiviewset.html" class="md-nav__link">
        NautobotUIViewSet
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/apps/api/views/nautobotuiviewsetrouter.html" class="md-nav__link">
        NautobotUIViewSetRouter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/apps/api/views/nautobot-generic-views.html" class="md-nav__link">
        Nautobot Generic Views
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/apps/api/views/urls.html" class="md-nav__link">
        URLs
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/apps/api/views/base-template.html" class="md-nav__link">
        Base Template
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/apps/api/views/help-documentation.html" class="md-nav__link">
        Help Documentation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/apps/api/views/rest-api.html" class="md-nav__link">
        REST API
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2_4_8" >
      
      
      
        <label class="md-nav__link" for="__nav_3_2_4_8" id="__nav_3_2_4_8_label" tabindex="0">
          Advanced
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_3_2_4_8_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_2_4_8">
          <span class="md-nav__icon md-icon"></span>
          Advanced
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/apps/api/views/django-generic-views.html" class="md-nav__link">
        Django Generic Views
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/apps/api/views/notes.html" class="md-nav__link">
        Notes
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/apps/api/views/view-overrides.html" class="md-nav__link">
        View Overrides
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/apps/api/views/core-view-overrides.html" class="md-nav__link">
        Legacy View Overrides
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2_5" >
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../development/apps/api/platform-features/index.html">Platform Features</a>
          
            <label for="__nav_3_2_5">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_2_5_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_2_5">
          <span class="md-nav__icon md-icon"></span>
          Platform Features
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/apps/api/platform-features/custom-validators.html" class="md-nav__link">
        Custom Validators
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/apps/api/database-backend-config.html" class="md-nav__link">
        Database Backed Config
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/apps/api/platform-features/filter-extensions.html" class="md-nav__link">
        Filter Extentions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/apps/api/platform-features/git-repository-content.html" class="md-nav__link">
        Git Repository Content
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/apps/api/platform-features/jinja2-filters.html" class="md-nav__link">
        Jinja2 Filters
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/apps/api/platform-features/jobs.html" class="md-nav__link">
        Jobs
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/apps/api/platform-features/populating-extensibility-features.html" class="md-nav__link">
        Populating Extensibility Features
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/apps/api/prometheus.html" class="md-nav__link">
        Prometheus Metrics
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/apps/api/platform-features/secrets-providers.html" class="md-nav__link">
        Secrets Providers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/apps/api/platform-features/uniquely-identify-objects.html" class="md-nav__link">
        Uniquely Identifying a Nautobot Object
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2_6" >
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../development/apps/api/ui-extensions/index.html">UI Extensions</a>
          
            <label for="__nav_3_2_6">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_2_6_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_2_6">
          <span class="md-nav__icon md-icon"></span>
          UI Extensions
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/apps/api/ui-extensions/banners.html" class="md-nav__link">
        Banners
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/apps/api/ui-extensions/home-page.html" class="md-nav__link">
        Home Page
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/apps/api/configuration-view.html" class="md-nav__link">
        Links in the Installed Apps View
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/apps/api/ui-extensions/navigation.html" class="md-nav__link">
        Navigation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/apps/api/ui-extensions/object-detail-views.html" class="md-nav__link">
        Object Detail Views
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/apps/api/ui-extensions/tabs.html" class="md-nav__link">
        Tabs
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/apps/api/testing.html" class="md-nav__link">
        Testing
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2_8" checked>
      
      
      
        <label class="md-nav__link" for="__nav_3_2_8" id="__nav_3_2_8_label" tabindex="0">
          Code Reference
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_2_8_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_3_2_8">
          <span class="md-nav__icon md-icon"></span>
          Code Reference
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="__init__.html" class="md-nav__link">
        nautobot.apps
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="admin.html" class="md-nav__link">
        nautobot.apps.admin
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="api.html" class="md-nav__link">
        nautobot.apps.api
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="change_logging.html" class="md-nav__link">
        nautobot.apps.change_logging
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="choices.html" class="md-nav__link">
        nautobot.apps.choices
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="config.html" class="md-nav__link">
        nautobot.apps.config
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="datasources.html" class="md-nav__link">
        nautobot.apps.datasources
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="exceptions.html" class="md-nav__link">
        nautobot.apps.exceptions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="factory.html" class="md-nav__link">
        nautobot.apps.factory
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="filters.html" class="md-nav__link">
        nautobot.apps.filters
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="forms.html" class="md-nav__link">
        nautobot.apps.forms
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="graphql.html" class="md-nav__link">
        nautobot.apps.graphql
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="jobs.html" class="md-nav__link">
        nautobot.apps.jobs
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="models.html" class="md-nav__link">
        nautobot.apps.models
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="querysets.html" class="md-nav__link">
        nautobot.apps.querysets
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="secrets.html" class="md-nav__link">
        nautobot.apps.secrets
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="tables.html" class="md-nav__link">
        nautobot.apps.tables
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="testing.html" class="md-nav__link">
        nautobot.apps.testing
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="ui.html" class="md-nav__link">
        nautobot.apps.ui
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="urls.html" class="md-nav__link">
        nautobot.apps.urls
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          nautobot.apps.utils
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="utils.html" class="md-nav__link md-nav__link--active">
        nautobot.apps.utils
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.utils.ChangeLoggedModelsQuery" class="md-nav__link">
    ChangeLoggedModelsQuery
  </a>
  
    <nav class="md-nav" aria-label="ChangeLoggedModelsQuery">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nautobot.extras.utils.ChangeLoggedModelsQuery.list_subclasses" class="md-nav__link">
    list_subclasses()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.utils.FeatureQuery" class="md-nav__link">
    FeatureQuery
  </a>
  
    <nav class="md-nav" aria-label="FeatureQuery">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nautobot.extras.utils.FeatureQuery.as_dict" class="md-nav__link">
    as_dict()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nautobot.extras.utils.FeatureQuery.get_choices" class="md-nav__link">
    get_choices()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nautobot.extras.utils.FeatureQuery.get_query" class="md-nav__link">
    get_query()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nautobot.extras.utils.FeatureQuery.list_subclasses" class="md-nav__link">
    list_subclasses()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.utils.FeaturedQueryMixin" class="md-nav__link">
    FeaturedQueryMixin
  </a>
  
    <nav class="md-nav" aria-label="FeaturedQueryMixin">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nautobot.extras.utils.FeaturedQueryMixin.__call__" class="md-nav__link">
    __call__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nautobot.extras.utils.FeaturedQueryMixin.list_subclasses" class="md-nav__link">
    list_subclasses()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.utils.GitRepo" class="md-nav__link">
    GitRepo
  </a>
  
    <nav class="md-nav" aria-label="GitRepo">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nautobot.core.utils.git.GitRepo.head" class="md-nav__link">
    head
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nautobot.core.utils.git.GitRepo.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nautobot.core.utils.git.GitRepo.checkout" class="md-nav__link">
    checkout()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.utils.RoleModelsQuery" class="md-nav__link">
    RoleModelsQuery
  </a>
  
    <nav class="md-nav" aria-label="RoleModelsQuery">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nautobot.extras.utils.RoleModelsQuery.list_subclasses" class="md-nav__link">
    list_subclasses()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.utils.TaggableClassesQuery" class="md-nav__link">
    TaggableClassesQuery
  </a>
  
    <nav class="md-nav" aria-label="TaggableClassesQuery">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nautobot.extras.utils.TaggableClassesQuery.list_subclasses" class="md-nav__link">
    list_subclasses()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.utils.build_lookup_label" class="md-nav__link">
    build_lookup_label()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.utils.check_if_key_is_graphql_safe" class="md-nav__link">
    check_if_key_is_graphql_safe()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.utils.class_deprecated" class="md-nav__link">
    class_deprecated()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.utils.class_deprecated_in_favor_of" class="md-nav__link">
    class_deprecated_in_favor_of()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.utils.convert_git_diff_log_to_list" class="md-nav__link">
    convert_git_diff_log_to_list()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.utils.convert_querydict_to_factory_formset_acceptable_querydict" class="md-nav__link">
    convert_querydict_to_factory_formset_acceptable_querydict()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.utils.custom_validator_clean" class="md-nav__link">
    custom_validator_clean()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.utils.deepmerge" class="md-nav__link">
    deepmerge()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.utils.ensure_content_type_and_field_name_in_query_params" class="md-nav__link">
    ensure_content_type_and_field_name_in_query_params()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.utils.fixup_null_statuses" class="md-nav__link">
    fixup_null_statuses()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.utils.flatten_dict" class="md-nav__link">
    flatten_dict()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.utils.flatten_iterable" class="md-nav__link">
    flatten_iterable()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.utils.foreground_color" class="md-nav__link">
    foreground_color()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.utils.generate_signature" class="md-nav__link">
    generate_signature()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.utils.get_all_lookup_expr_for_field" class="md-nav__link">
    get_all_lookup_expr_for_field()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.utils.get_base_template" class="md-nav__link">
    get_base_template()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.utils.get_celery_queues" class="md-nav__link">
    get_celery_queues()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.utils.get_changes_for_model" class="md-nav__link">
    get_changes_for_model()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.utils.get_filter_field_label" class="md-nav__link">
    get_filter_field_label()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.utils.get_filterable_params_from_filter_params" class="md-nav__link">
    get_filterable_params_from_filter_params()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.utils.get_filterset_for_model" class="md-nav__link">
    get_filterset_for_model()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.utils.get_filterset_parameter_form_field" class="md-nav__link">
    get_filterset_parameter_form_field()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.utils.get_form_for_model" class="md-nav__link">
    get_form_for_model()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.utils.get_latest_release" class="md-nav__link">
    get_latest_release()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.utils.get_model_from_name" class="md-nav__link">
    get_model_from_name()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.utils.get_only_new_ui_ready_routes" class="md-nav__link">
    get_only_new_ui_ready_routes()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.utils.get_permission_for_model" class="md-nav__link">
    get_permission_for_model()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.utils.get_related_class_for_model" class="md-nav__link">
    get_related_class_for_model()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.utils.get_route_for_model" class="md-nav__link">
    get_route_for_model()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.utils.get_settings_or_config" class="md-nav__link">
    get_settings_or_config()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.utils.get_table_for_model" class="md-nav__link">
    get_table_for_model()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.utils.get_worker_count" class="md-nav__link">
    get_worker_count()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.utils.hex_to_rgb" class="md-nav__link">
    hex_to_rgb()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.utils.image_upload" class="md-nav__link">
    image_upload()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.utils.is_url" class="md-nav__link">
    is_url()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.utils.lighten_color" class="md-nav__link">
    lighten_color()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.utils.merge_dicts_without_collision" class="md-nav__link">
    merge_dicts_without_collision()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.utils.migrate_role_data" class="md-nav__link">
    migrate_role_data()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.utils.normalize_querydict" class="md-nav__link">
    normalize_querydict()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.utils.permission_is_exempt" class="md-nav__link">
    permission_is_exempt()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.utils.populate_model_features_registry" class="md-nav__link">
    populate_model_features_registry()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.utils.refresh_job_model_from_job_class" class="md-nav__link">
    refresh_job_model_from_job_class()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.utils.remove_prefix_from_cf_key" class="md-nav__link">
    remove_prefix_from_cf_key()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.utils.render_jinja2" class="md-nav__link">
    render_jinja2()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.utils.resolve_permission" class="md-nav__link">
    resolve_permission()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.utils.resolve_permission_ct" class="md-nav__link">
    resolve_permission_ct()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.utils.rgb_to_hex" class="md-nav__link">
    rgb_to_hex()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.utils.sanitize" class="md-nav__link">
    sanitize()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.utils.shallow_compare_dict" class="md-nav__link">
    shallow_compare_dict()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.utils.swap_status_initials" class="md-nav__link">
    swap_status_initials()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.utils.task_queues_as_choices" class="md-nav__link">
    task_queues_as_choices()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.utils.to_meters" class="md-nav__link">
    to_meters()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.utils.wrap_model_clean_methods" class="md-nav__link">
    wrap_model_clean_methods()
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="views.html" class="md-nav__link">
        nautobot.apps.views
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2_9" >
      
      
      
        <label class="md-nav__link" for="__nav_3_2_9" id="__nav_3_2_9_label" tabindex="0">
          Migration Guides
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_2_9_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_2_9">
          <span class="md-nav__icon md-icon"></span>
          Migration Guides
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/apps/migration/from-v1.html" class="md-nav__link">
        From Nautobot v1
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/apps/migration/dependency-updates.html" class="md-nav__link">
        Dependency Updates
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/apps/migration/code-updates.html" class="md-nav__link">
        Code Updates
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2_9_4" >
      
      
      
        <label class="md-nav__link" for="__nav_3_2_9_4" id="__nav_3_2_9_4_label" tabindex="0">
          Model Updates
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_3_2_9_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_2_9_4">
          <span class="md-nav__icon md-icon"></span>
          Model Updates
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/apps/migration/model-updates/global.html" class="md-nav__link">
        Global
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/apps/migration/model-updates/dcim.html" class="md-nav__link">
        DCIM
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/apps/migration/model-updates/extras.html" class="md-nav__link">
        Extras
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/apps/migration/model-updates/ipam.html" class="md-nav__link">
        IPAM
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2_10" >
      
      
      
        <label class="md-nav__link" for="__nav_3_2_10" id="__nav_3_2_10_label" tabindex="0">
          Advanced
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_2_10_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_2_10">
          <span class="md-nav__icon md-icon"></span>
          Advanced
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/apps/porting-from-netbox.html" class="md-nav__link">
        Porting NetBox Plugins to Nautobot
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_3" >
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../development/core/index.html">Core Developer Guide</a>
          
            <label for="__nav_3_3">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_3">
          <span class="md-nav__icon md-icon"></span>
          Core Developer Guide
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/core/getting-started.html" class="md-nav__link">
        Getting Started
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/core/docker-compose-advanced-use-cases.html" class="md-nav__link">
        Advanced Docker Compose Usage
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/core/application-registry.html" class="md-nav__link">
        Application Registry
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/core/best-practices.html" class="md-nav__link">
        Best Practices
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/core/extending-models.html" class="md-nav__link">
        Extending Models
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/core/generic-views.html" class="md-nav__link">
        Generic Views
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/core/homepage.html" class="md-nav__link">
        Home Page Panels
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/core/model-features.html" class="md-nav__link">
        Model Features
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/core/natural-keys.html" class="md-nav__link">
        Natural Keys
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/core/navigation-menu.html" class="md-nav__link">
        Navigation Menu
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/core/templates.html" class="md-nav__link">
        Page Templates
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/core/react-ui.html" class="md-nav__link">
        React UI
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/core/role-internals.html" class="md-nav__link">
        Role Internals
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/core/style-guide.html" class="md-nav__link">
        Style Guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/core/testing.html" class="md-nav__link">
        Testing
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/core/user-preferences.html" class="md-nav__link">
        User Preferences
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/core/release-checklist.html" class="md-nav__link">
        Release Checklist
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../release-notes/index.html">Release Notes</a>
          
            <label for="__nav_4">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Release Notes
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../release-notes/version-2.0.html" class="md-nav__link">
        Version 2.0
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../release-notes/version-1.6.html" class="md-nav__link">
        Version 1.6
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../release-notes/version-1.5.html" class="md-nav__link">
        Version 1.5
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../release-notes/version-1.4.html" class="md-nav__link">
        Version 1.4
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../release-notes/version-1.3.html" class="md-nav__link">
        Version 1.3
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../release-notes/version-1.2.html" class="md-nav__link">
        Version 1.2
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../release-notes/version-1.1.html" class="md-nav__link">
        Version 1.1
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../release-notes/version-1.0.html" class="md-nav__link">
        Version 1.0
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../apps/index.html">Nautobot Apps</a>
          
            <label for="__nav_5">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Nautobot Apps
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_1" >
      
      
      
        <label class="md-nav__link" for="__nav_5_1" id="__nav_5_1_label" tabindex="0">
          Network to Code App Docs
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_1_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_5_1">
          <span class="md-nav__icon md-icon"></span>
          Network to Code App Docs
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="https://docs.nautobot.com/projects/chatops/en/latest/" class="md-nav__link">
        Nautobot ChatOps
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="https://docs.nautobot.com/projects/circuit-maintenance/en/latest/" class="md-nav__link">
        Nautobot Circuit Maintenance
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="https://docs.nautobot.com/projects/data-validation/en/latest/" class="md-nav__link">
        Nautobot Data Validation Engine
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="https://docs.nautobot.com/projects/device-lifecycle/en/latest/" class="md-nav__link">
        Nautobot Device LifeCycle Management
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="https://docs.nautobot.com/projects/device-onboarding/en/latest/" class="md-nav__link">
        Nautobot Device Onboarding
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="https://nautobot-plugin-firewall-models.readthedocs.io/en/latest/" class="md-nav__link">
        Nautobot Firewall Models
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="https://docs.nautobot.com/projects/golden-config/" class="md-nav__link">
        Nautobot Golden Configuration
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="https://docs.nautobot.com/projects/plugin-nornir/en/latest/" class="md-nav__link">
        Nautobot Plugin Nornir
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="https://docs.nautobot.com/projects/ssot/en/latest/" class="md-nav__link">
        Nautobot Single Source of Truth
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../apps/nautobot-apps.html" class="md-nav__link">
        Community Apps
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="https://docs.nautobot.com/" class="md-nav__link">
        Nautobot Docs Home ↗︎
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.utils.ChangeLoggedModelsQuery" class="md-nav__link">
    ChangeLoggedModelsQuery
  </a>
  
    <nav class="md-nav" aria-label="ChangeLoggedModelsQuery">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nautobot.extras.utils.ChangeLoggedModelsQuery.list_subclasses" class="md-nav__link">
    list_subclasses()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.utils.FeatureQuery" class="md-nav__link">
    FeatureQuery
  </a>
  
    <nav class="md-nav" aria-label="FeatureQuery">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nautobot.extras.utils.FeatureQuery.as_dict" class="md-nav__link">
    as_dict()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nautobot.extras.utils.FeatureQuery.get_choices" class="md-nav__link">
    get_choices()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nautobot.extras.utils.FeatureQuery.get_query" class="md-nav__link">
    get_query()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nautobot.extras.utils.FeatureQuery.list_subclasses" class="md-nav__link">
    list_subclasses()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.utils.FeaturedQueryMixin" class="md-nav__link">
    FeaturedQueryMixin
  </a>
  
    <nav class="md-nav" aria-label="FeaturedQueryMixin">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nautobot.extras.utils.FeaturedQueryMixin.__call__" class="md-nav__link">
    __call__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nautobot.extras.utils.FeaturedQueryMixin.list_subclasses" class="md-nav__link">
    list_subclasses()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.utils.GitRepo" class="md-nav__link">
    GitRepo
  </a>
  
    <nav class="md-nav" aria-label="GitRepo">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nautobot.core.utils.git.GitRepo.head" class="md-nav__link">
    head
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nautobot.core.utils.git.GitRepo.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nautobot.core.utils.git.GitRepo.checkout" class="md-nav__link">
    checkout()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.utils.RoleModelsQuery" class="md-nav__link">
    RoleModelsQuery
  </a>
  
    <nav class="md-nav" aria-label="RoleModelsQuery">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nautobot.extras.utils.RoleModelsQuery.list_subclasses" class="md-nav__link">
    list_subclasses()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.utils.TaggableClassesQuery" class="md-nav__link">
    TaggableClassesQuery
  </a>
  
    <nav class="md-nav" aria-label="TaggableClassesQuery">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nautobot.extras.utils.TaggableClassesQuery.list_subclasses" class="md-nav__link">
    list_subclasses()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.utils.build_lookup_label" class="md-nav__link">
    build_lookup_label()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.utils.check_if_key_is_graphql_safe" class="md-nav__link">
    check_if_key_is_graphql_safe()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.utils.class_deprecated" class="md-nav__link">
    class_deprecated()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.utils.class_deprecated_in_favor_of" class="md-nav__link">
    class_deprecated_in_favor_of()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.utils.convert_git_diff_log_to_list" class="md-nav__link">
    convert_git_diff_log_to_list()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.utils.convert_querydict_to_factory_formset_acceptable_querydict" class="md-nav__link">
    convert_querydict_to_factory_formset_acceptable_querydict()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.utils.custom_validator_clean" class="md-nav__link">
    custom_validator_clean()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.utils.deepmerge" class="md-nav__link">
    deepmerge()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.utils.ensure_content_type_and_field_name_in_query_params" class="md-nav__link">
    ensure_content_type_and_field_name_in_query_params()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.utils.fixup_null_statuses" class="md-nav__link">
    fixup_null_statuses()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.utils.flatten_dict" class="md-nav__link">
    flatten_dict()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.utils.flatten_iterable" class="md-nav__link">
    flatten_iterable()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.utils.foreground_color" class="md-nav__link">
    foreground_color()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.utils.generate_signature" class="md-nav__link">
    generate_signature()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.utils.get_all_lookup_expr_for_field" class="md-nav__link">
    get_all_lookup_expr_for_field()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.utils.get_base_template" class="md-nav__link">
    get_base_template()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.utils.get_celery_queues" class="md-nav__link">
    get_celery_queues()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.utils.get_changes_for_model" class="md-nav__link">
    get_changes_for_model()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.utils.get_filter_field_label" class="md-nav__link">
    get_filter_field_label()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.utils.get_filterable_params_from_filter_params" class="md-nav__link">
    get_filterable_params_from_filter_params()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.utils.get_filterset_for_model" class="md-nav__link">
    get_filterset_for_model()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.utils.get_filterset_parameter_form_field" class="md-nav__link">
    get_filterset_parameter_form_field()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.utils.get_form_for_model" class="md-nav__link">
    get_form_for_model()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.utils.get_latest_release" class="md-nav__link">
    get_latest_release()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.utils.get_model_from_name" class="md-nav__link">
    get_model_from_name()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.utils.get_only_new_ui_ready_routes" class="md-nav__link">
    get_only_new_ui_ready_routes()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.utils.get_permission_for_model" class="md-nav__link">
    get_permission_for_model()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.utils.get_related_class_for_model" class="md-nav__link">
    get_related_class_for_model()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.utils.get_route_for_model" class="md-nav__link">
    get_route_for_model()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.utils.get_settings_or_config" class="md-nav__link">
    get_settings_or_config()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.utils.get_table_for_model" class="md-nav__link">
    get_table_for_model()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.utils.get_worker_count" class="md-nav__link">
    get_worker_count()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.utils.hex_to_rgb" class="md-nav__link">
    hex_to_rgb()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.utils.image_upload" class="md-nav__link">
    image_upload()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.utils.is_url" class="md-nav__link">
    is_url()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.utils.lighten_color" class="md-nav__link">
    lighten_color()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.utils.merge_dicts_without_collision" class="md-nav__link">
    merge_dicts_without_collision()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.utils.migrate_role_data" class="md-nav__link">
    migrate_role_data()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.utils.normalize_querydict" class="md-nav__link">
    normalize_querydict()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.utils.permission_is_exempt" class="md-nav__link">
    permission_is_exempt()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.utils.populate_model_features_registry" class="md-nav__link">
    populate_model_features_registry()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.utils.refresh_job_model_from_job_class" class="md-nav__link">
    refresh_job_model_from_job_class()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.utils.remove_prefix_from_cf_key" class="md-nav__link">
    remove_prefix_from_cf_key()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.utils.render_jinja2" class="md-nav__link">
    render_jinja2()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.utils.resolve_permission" class="md-nav__link">
    resolve_permission()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.utils.resolve_permission_ct" class="md-nav__link">
    resolve_permission_ct()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.utils.rgb_to_hex" class="md-nav__link">
    rgb_to_hex()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.utils.sanitize" class="md-nav__link">
    sanitize()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.utils.shallow_compare_dict" class="md-nav__link">
    shallow_compare_dict()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.utils.swap_status_initials" class="md-nav__link">
    swap_status_initials()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.utils.task_queues_as_choices" class="md-nav__link">
    task_queues_as_choices()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.utils.to_meters" class="md-nav__link">
    to_meters()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.utils.wrap_model_clean_methods" class="md-nav__link">
    wrap_model_clean_methods()
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<div class="doc doc-object doc-module">



<h1 id="nautobot.apps.utils" class="doc doc-heading">
            <code>nautobot.apps.utils</code>


<a href="#nautobot.apps.utils" class="headerlink" title="Permanent link">&para;</a></h1>

  <div class="doc doc-contents first">
  
      <p>Nautobot utility functions.</p>

  

  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="nautobot.apps.utils.ChangeLoggedModelsQuery" class="doc doc-heading">
          <code>nautobot.apps.utils.ChangeLoggedModelsQuery</code>


<a href="#nautobot.apps.utils.ChangeLoggedModelsQuery" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code><a class="autorefs autorefs-internal" title="nautobot.extras.utils.FeaturedQueryMixin" href="#nautobot.apps.utils.FeaturedQueryMixin">FeaturedQueryMixin</a></code></p>

  
      <p>Helper class to get ContentType for models that implements the to_objectchange method for change logging.</p>

            <details class="quote">
              <summary>Source code in <code>nautobot/extras/utils.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-94"> 94</a></span>
<span class="normal"><a href="#__codelineno-0-95"> 95</a></span>
<span class="normal"><a href="#__codelineno-0-96"> 96</a></span>
<span class="normal"><a href="#__codelineno-0-97"> 97</a></span>
<span class="normal"><a href="#__codelineno-0-98"> 98</a></span>
<span class="normal"><a href="#__codelineno-0-99"> 99</a></span>
<span class="normal"><a href="#__codelineno-0-100">100</a></span>
<span class="normal"><a href="#__codelineno-0-101">101</a></span>
<span class="normal"><a href="#__codelineno-0-102">102</a></span>
<span class="normal"><a href="#__codelineno-0-103">103</a></span>
<span class="normal"><a href="#__codelineno-0-104">104</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-94" name="__codelineno-0-94"></a><span class="nd">@deconstructible</span>
<a id="__codelineno-0-95" name="__codelineno-0-95"></a><span class="k">class</span> <span class="nc">ChangeLoggedModelsQuery</span><span class="p">(</span><span class="n">FeaturedQueryMixin</span><span class="p">):</span>
<a id="__codelineno-0-96" name="__codelineno-0-96"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-97" name="__codelineno-0-97"></a><span class="sd">    Helper class to get ContentType for models that implements the to_objectchange method for change logging.</span>
<a id="__codelineno-0-98" name="__codelineno-0-98"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-99" name="__codelineno-0-99"></a>
<a id="__codelineno-0-100" name="__codelineno-0-100"></a>    <span class="k">def</span> <span class="nf">list_subclasses</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-101" name="__codelineno-0-101"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-102" name="__codelineno-0-102"></a><span class="sd">        Return a list of classes that implement the to_objectchange method</span>
<a id="__codelineno-0-103" name="__codelineno-0-103"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-104" name="__codelineno-0-104"></a>        <span class="k">return</span> <span class="p">[</span><span class="n">_class</span> <span class="k">for</span> <span class="n">_class</span> <span class="ow">in</span> <span class="n">apps</span><span class="o">.</span><span class="n">get_models</span><span class="p">()</span> <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">_class</span><span class="p">,</span> <span class="s2">&quot;to_objectchange&quot;</span><span class="p">)]</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">










<div class="doc doc-object doc-function">



<h3 id="nautobot.extras.utils.ChangeLoggedModelsQuery.list_subclasses" class="doc doc-heading">
<code class="highlight language-python"><span class="n">list_subclasses</span><span class="p">()</span></code>

<a href="#nautobot.extras.utils.ChangeLoggedModelsQuery.list_subclasses" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Return a list of classes that implement the to_objectchange method</p>

          <details class="quote">
            <summary>Source code in <code>nautobot/extras/utils.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-100">100</a></span>
<span class="normal"><a href="#__codelineno-0-101">101</a></span>
<span class="normal"><a href="#__codelineno-0-102">102</a></span>
<span class="normal"><a href="#__codelineno-0-103">103</a></span>
<span class="normal"><a href="#__codelineno-0-104">104</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-100" name="__codelineno-0-100"></a><span class="k">def</span> <span class="nf">list_subclasses</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-101" name="__codelineno-0-101"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-102" name="__codelineno-0-102"></a><span class="sd">    Return a list of classes that implement the to_objectchange method</span>
<a id="__codelineno-0-103" name="__codelineno-0-103"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-104" name="__codelineno-0-104"></a>    <span class="k">return</span> <span class="p">[</span><span class="n">_class</span> <span class="k">for</span> <span class="n">_class</span> <span class="ow">in</span> <span class="n">apps</span><span class="o">.</span><span class="n">get_models</span><span class="p">()</span> <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">_class</span><span class="p">,</span> <span class="s2">&quot;to_objectchange&quot;</span><span class="p">)]</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="nautobot.apps.utils.FeatureQuery" class="doc doc-heading">
          <code>nautobot.apps.utils.FeatureQuery</code>


<a href="#nautobot.apps.utils.FeatureQuery" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">

  
      <p>Helper class that delays evaluation of the registry contents for the functionality store
until it has been populated.</p>

            <details class="quote">
              <summary>Source code in <code>nautobot/extras/utils.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-107">107</a></span>
<span class="normal"><a href="#__codelineno-0-108">108</a></span>
<span class="normal"><a href="#__codelineno-0-109">109</a></span>
<span class="normal"><a href="#__codelineno-0-110">110</a></span>
<span class="normal"><a href="#__codelineno-0-111">111</a></span>
<span class="normal"><a href="#__codelineno-0-112">112</a></span>
<span class="normal"><a href="#__codelineno-0-113">113</a></span>
<span class="normal"><a href="#__codelineno-0-114">114</a></span>
<span class="normal"><a href="#__codelineno-0-115">115</a></span>
<span class="normal"><a href="#__codelineno-0-116">116</a></span>
<span class="normal"><a href="#__codelineno-0-117">117</a></span>
<span class="normal"><a href="#__codelineno-0-118">118</a></span>
<span class="normal"><a href="#__codelineno-0-119">119</a></span>
<span class="normal"><a href="#__codelineno-0-120">120</a></span>
<span class="normal"><a href="#__codelineno-0-121">121</a></span>
<span class="normal"><a href="#__codelineno-0-122">122</a></span>
<span class="normal"><a href="#__codelineno-0-123">123</a></span>
<span class="normal"><a href="#__codelineno-0-124">124</a></span>
<span class="normal"><a href="#__codelineno-0-125">125</a></span>
<span class="normal"><a href="#__codelineno-0-126">126</a></span>
<span class="normal"><a href="#__codelineno-0-127">127</a></span>
<span class="normal"><a href="#__codelineno-0-128">128</a></span>
<span class="normal"><a href="#__codelineno-0-129">129</a></span>
<span class="normal"><a href="#__codelineno-0-130">130</a></span>
<span class="normal"><a href="#__codelineno-0-131">131</a></span>
<span class="normal"><a href="#__codelineno-0-132">132</a></span>
<span class="normal"><a href="#__codelineno-0-133">133</a></span>
<span class="normal"><a href="#__codelineno-0-134">134</a></span>
<span class="normal"><a href="#__codelineno-0-135">135</a></span>
<span class="normal"><a href="#__codelineno-0-136">136</a></span>
<span class="normal"><a href="#__codelineno-0-137">137</a></span>
<span class="normal"><a href="#__codelineno-0-138">138</a></span>
<span class="normal"><a href="#__codelineno-0-139">139</a></span>
<span class="normal"><a href="#__codelineno-0-140">140</a></span>
<span class="normal"><a href="#__codelineno-0-141">141</a></span>
<span class="normal"><a href="#__codelineno-0-142">142</a></span>
<span class="normal"><a href="#__codelineno-0-143">143</a></span>
<span class="normal"><a href="#__codelineno-0-144">144</a></span>
<span class="normal"><a href="#__codelineno-0-145">145</a></span>
<span class="normal"><a href="#__codelineno-0-146">146</a></span>
<span class="normal"><a href="#__codelineno-0-147">147</a></span>
<span class="normal"><a href="#__codelineno-0-148">148</a></span>
<span class="normal"><a href="#__codelineno-0-149">149</a></span>
<span class="normal"><a href="#__codelineno-0-150">150</a></span>
<span class="normal"><a href="#__codelineno-0-151">151</a></span>
<span class="normal"><a href="#__codelineno-0-152">152</a></span>
<span class="normal"><a href="#__codelineno-0-153">153</a></span>
<span class="normal"><a href="#__codelineno-0-154">154</a></span>
<span class="normal"><a href="#__codelineno-0-155">155</a></span>
<span class="normal"><a href="#__codelineno-0-156">156</a></span>
<span class="normal"><a href="#__codelineno-0-157">157</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-107" name="__codelineno-0-107"></a><span class="nd">@deconstructible</span>
<a id="__codelineno-0-108" name="__codelineno-0-108"></a><span class="k">class</span> <span class="nc">FeatureQuery</span><span class="p">:</span>
<a id="__codelineno-0-109" name="__codelineno-0-109"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-110" name="__codelineno-0-110"></a><span class="sd">    Helper class that delays evaluation of the registry contents for the functionality store</span>
<a id="__codelineno-0-111" name="__codelineno-0-111"></a><span class="sd">    until it has been populated.</span>
<a id="__codelineno-0-112" name="__codelineno-0-112"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-113" name="__codelineno-0-113"></a>
<a id="__codelineno-0-114" name="__codelineno-0-114"></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">feature</span><span class="p">):</span>
<a id="__codelineno-0-115" name="__codelineno-0-115"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">feature</span> <span class="o">=</span> <span class="n">feature</span>
<a id="__codelineno-0-116" name="__codelineno-0-116"></a>
<a id="__codelineno-0-117" name="__codelineno-0-117"></a>    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-118" name="__codelineno-0-118"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_query</span><span class="p">()</span>
<a id="__codelineno-0-119" name="__codelineno-0-119"></a>
<a id="__codelineno-0-120" name="__codelineno-0-120"></a>    <span class="k">def</span> <span class="nf">get_query</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-121" name="__codelineno-0-121"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-122" name="__codelineno-0-122"></a><span class="sd">        Given an extras feature, return a Q object for content type lookup</span>
<a id="__codelineno-0-123" name="__codelineno-0-123"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-124" name="__codelineno-0-124"></a>
<a id="__codelineno-0-125" name="__codelineno-0-125"></a>        <span class="c1"># The `populate_model_features_registry` function is called in the `FeatureQuery().get_query` method instead of</span>
<a id="__codelineno-0-126" name="__codelineno-0-126"></a>        <span class="c1"># `ExtrasConfig.ready` because `FeatureQuery().get_query` is called before `ExtrasConfig.ready`.</span>
<a id="__codelineno-0-127" name="__codelineno-0-127"></a>        <span class="c1"># This is because `FeatureQuery` is a helper class used in `Forms` and `Serializers` that are called during the</span>
<a id="__codelineno-0-128" name="__codelineno-0-128"></a>        <span class="c1"># initialization of the application, before `ExtrasConfig.ready` is called.</span>
<a id="__codelineno-0-129" name="__codelineno-0-129"></a>        <span class="c1"># Calling `populate_model_features_registry` in `ExtrasConfig.ready` would lead to an outdated `model_features`</span>
<a id="__codelineno-0-130" name="__codelineno-0-130"></a>        <span class="c1"># `registry` record being used by `FeatureQuery`.</span>
<a id="__codelineno-0-131" name="__codelineno-0-131"></a>
<a id="__codelineno-0-132" name="__codelineno-0-132"></a>        <span class="n">populate_model_features_registry</span><span class="p">()</span>
<a id="__codelineno-0-133" name="__codelineno-0-133"></a>        <span class="n">query</span> <span class="o">=</span> <span class="n">Q</span><span class="p">()</span>
<a id="__codelineno-0-134" name="__codelineno-0-134"></a>        <span class="k">for</span> <span class="n">app_label</span><span class="p">,</span> <span class="n">models</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">as_dict</span><span class="p">():</span>
<a id="__codelineno-0-135" name="__codelineno-0-135"></a>            <span class="n">query</span> <span class="o">|=</span> <span class="n">Q</span><span class="p">(</span><span class="n">app_label</span><span class="o">=</span><span class="n">app_label</span><span class="p">,</span> <span class="n">model__in</span><span class="o">=</span><span class="n">models</span><span class="p">)</span>
<a id="__codelineno-0-136" name="__codelineno-0-136"></a>
<a id="__codelineno-0-137" name="__codelineno-0-137"></a>        <span class="k">return</span> <span class="n">query</span>
<a id="__codelineno-0-138" name="__codelineno-0-138"></a>
<a id="__codelineno-0-139" name="__codelineno-0-139"></a>    <span class="k">def</span> <span class="nf">as_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-140" name="__codelineno-0-140"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-141" name="__codelineno-0-141"></a><span class="sd">        Given an extras feature, return a dict of app_label: [models] for content type lookup</span>
<a id="__codelineno-0-142" name="__codelineno-0-142"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-143" name="__codelineno-0-143"></a>        <span class="k">return</span> <span class="n">registry</span><span class="p">[</span><span class="s2">&quot;model_features&quot;</span><span class="p">][</span><span class="bp">self</span><span class="o">.</span><span class="n">feature</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
<a id="__codelineno-0-144" name="__codelineno-0-144"></a>
<a id="__codelineno-0-145" name="__codelineno-0-145"></a>    <span class="k">def</span> <span class="nf">get_choices</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-146" name="__codelineno-0-146"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-147" name="__codelineno-0-147"></a><span class="sd">        Given an extras feature, return a list of 2-tuple of `(model_label, pk)`</span>
<a id="__codelineno-0-148" name="__codelineno-0-148"></a><span class="sd">        suitable for use as `choices` on a choice field:</span>
<a id="__codelineno-0-149" name="__codelineno-0-149"></a>
<a id="__codelineno-0-150" name="__codelineno-0-150"></a><span class="sd">            &gt;&gt;&gt; FeatureQuery(&#39;statuses&#39;).get_choices()</span>
<a id="__codelineno-0-151" name="__codelineno-0-151"></a><span class="sd">            [(&#39;dcim.device&#39;, 13), (&#39;dcim.rack&#39;, 34)]</span>
<a id="__codelineno-0-152" name="__codelineno-0-152"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-153" name="__codelineno-0-153"></a>        <span class="k">return</span> <span class="p">[(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">ct</span><span class="o">.</span><span class="n">app_label</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">ct</span><span class="o">.</span><span class="n">model</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">ct</span><span class="o">.</span><span class="n">pk</span><span class="p">)</span> <span class="k">for</span> <span class="n">ct</span> <span class="ow">in</span> <span class="n">ContentType</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_query</span><span class="p">())]</span>
<a id="__codelineno-0-154" name="__codelineno-0-154"></a>
<a id="__codelineno-0-155" name="__codelineno-0-155"></a>    <span class="k">def</span> <span class="nf">list_subclasses</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-156" name="__codelineno-0-156"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Return a list of model classes that declare this feature.&quot;&quot;&quot;</span>
<a id="__codelineno-0-157" name="__codelineno-0-157"></a>        <span class="k">return</span> <span class="p">[</span><span class="n">ct</span><span class="o">.</span><span class="n">model_class</span><span class="p">()</span> <span class="k">for</span> <span class="n">ct</span> <span class="ow">in</span> <span class="n">ContentType</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_query</span><span class="p">())]</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">










<div class="doc doc-object doc-function">



<h3 id="nautobot.extras.utils.FeatureQuery.as_dict" class="doc doc-heading">
<code class="highlight language-python"><span class="n">as_dict</span><span class="p">()</span></code>

<a href="#nautobot.extras.utils.FeatureQuery.as_dict" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Given an extras feature, return a dict of app_label: [models] for content type lookup</p>

          <details class="quote">
            <summary>Source code in <code>nautobot/extras/utils.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-139">139</a></span>
<span class="normal"><a href="#__codelineno-0-140">140</a></span>
<span class="normal"><a href="#__codelineno-0-141">141</a></span>
<span class="normal"><a href="#__codelineno-0-142">142</a></span>
<span class="normal"><a href="#__codelineno-0-143">143</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-139" name="__codelineno-0-139"></a><span class="k">def</span> <span class="nf">as_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-140" name="__codelineno-0-140"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-141" name="__codelineno-0-141"></a><span class="sd">    Given an extras feature, return a dict of app_label: [models] for content type lookup</span>
<a id="__codelineno-0-142" name="__codelineno-0-142"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-143" name="__codelineno-0-143"></a>    <span class="k">return</span> <span class="n">registry</span><span class="p">[</span><span class="s2">&quot;model_features&quot;</span><span class="p">][</span><span class="bp">self</span><span class="o">.</span><span class="n">feature</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h3 id="nautobot.extras.utils.FeatureQuery.get_choices" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_choices</span><span class="p">()</span></code>

<a href="#nautobot.extras.utils.FeatureQuery.get_choices" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Given an extras feature, return a list of 2-tuple of <code>(model_label, pk)</code>
suitable for use as <code>choices</code> on a choice field:</p>
<div class="highlight"><pre><span></span><code>&gt;&gt;&gt; FeatureQuery(&#39;statuses&#39;).get_choices()
[(&#39;dcim.device&#39;, 13), (&#39;dcim.rack&#39;, 34)]
</code></pre></div>

          <details class="quote">
            <summary>Source code in <code>nautobot/extras/utils.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-145">145</a></span>
<span class="normal"><a href="#__codelineno-0-146">146</a></span>
<span class="normal"><a href="#__codelineno-0-147">147</a></span>
<span class="normal"><a href="#__codelineno-0-148">148</a></span>
<span class="normal"><a href="#__codelineno-0-149">149</a></span>
<span class="normal"><a href="#__codelineno-0-150">150</a></span>
<span class="normal"><a href="#__codelineno-0-151">151</a></span>
<span class="normal"><a href="#__codelineno-0-152">152</a></span>
<span class="normal"><a href="#__codelineno-0-153">153</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-145" name="__codelineno-0-145"></a><span class="k">def</span> <span class="nf">get_choices</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-146" name="__codelineno-0-146"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-147" name="__codelineno-0-147"></a><span class="sd">    Given an extras feature, return a list of 2-tuple of `(model_label, pk)`</span>
<a id="__codelineno-0-148" name="__codelineno-0-148"></a><span class="sd">    suitable for use as `choices` on a choice field:</span>
<a id="__codelineno-0-149" name="__codelineno-0-149"></a>
<a id="__codelineno-0-150" name="__codelineno-0-150"></a><span class="sd">        &gt;&gt;&gt; FeatureQuery(&#39;statuses&#39;).get_choices()</span>
<a id="__codelineno-0-151" name="__codelineno-0-151"></a><span class="sd">        [(&#39;dcim.device&#39;, 13), (&#39;dcim.rack&#39;, 34)]</span>
<a id="__codelineno-0-152" name="__codelineno-0-152"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-153" name="__codelineno-0-153"></a>    <span class="k">return</span> <span class="p">[(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">ct</span><span class="o">.</span><span class="n">app_label</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">ct</span><span class="o">.</span><span class="n">model</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">ct</span><span class="o">.</span><span class="n">pk</span><span class="p">)</span> <span class="k">for</span> <span class="n">ct</span> <span class="ow">in</span> <span class="n">ContentType</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_query</span><span class="p">())]</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h3 id="nautobot.extras.utils.FeatureQuery.get_query" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_query</span><span class="p">()</span></code>

<a href="#nautobot.extras.utils.FeatureQuery.get_query" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Given an extras feature, return a Q object for content type lookup</p>

          <details class="quote">
            <summary>Source code in <code>nautobot/extras/utils.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-120">120</a></span>
<span class="normal"><a href="#__codelineno-0-121">121</a></span>
<span class="normal"><a href="#__codelineno-0-122">122</a></span>
<span class="normal"><a href="#__codelineno-0-123">123</a></span>
<span class="normal"><a href="#__codelineno-0-124">124</a></span>
<span class="normal"><a href="#__codelineno-0-125">125</a></span>
<span class="normal"><a href="#__codelineno-0-126">126</a></span>
<span class="normal"><a href="#__codelineno-0-127">127</a></span>
<span class="normal"><a href="#__codelineno-0-128">128</a></span>
<span class="normal"><a href="#__codelineno-0-129">129</a></span>
<span class="normal"><a href="#__codelineno-0-130">130</a></span>
<span class="normal"><a href="#__codelineno-0-131">131</a></span>
<span class="normal"><a href="#__codelineno-0-132">132</a></span>
<span class="normal"><a href="#__codelineno-0-133">133</a></span>
<span class="normal"><a href="#__codelineno-0-134">134</a></span>
<span class="normal"><a href="#__codelineno-0-135">135</a></span>
<span class="normal"><a href="#__codelineno-0-136">136</a></span>
<span class="normal"><a href="#__codelineno-0-137">137</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-120" name="__codelineno-0-120"></a><span class="k">def</span> <span class="nf">get_query</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-121" name="__codelineno-0-121"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-122" name="__codelineno-0-122"></a><span class="sd">    Given an extras feature, return a Q object for content type lookup</span>
<a id="__codelineno-0-123" name="__codelineno-0-123"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-124" name="__codelineno-0-124"></a>
<a id="__codelineno-0-125" name="__codelineno-0-125"></a>    <span class="c1"># The `populate_model_features_registry` function is called in the `FeatureQuery().get_query` method instead of</span>
<a id="__codelineno-0-126" name="__codelineno-0-126"></a>    <span class="c1"># `ExtrasConfig.ready` because `FeatureQuery().get_query` is called before `ExtrasConfig.ready`.</span>
<a id="__codelineno-0-127" name="__codelineno-0-127"></a>    <span class="c1"># This is because `FeatureQuery` is a helper class used in `Forms` and `Serializers` that are called during the</span>
<a id="__codelineno-0-128" name="__codelineno-0-128"></a>    <span class="c1"># initialization of the application, before `ExtrasConfig.ready` is called.</span>
<a id="__codelineno-0-129" name="__codelineno-0-129"></a>    <span class="c1"># Calling `populate_model_features_registry` in `ExtrasConfig.ready` would lead to an outdated `model_features`</span>
<a id="__codelineno-0-130" name="__codelineno-0-130"></a>    <span class="c1"># `registry` record being used by `FeatureQuery`.</span>
<a id="__codelineno-0-131" name="__codelineno-0-131"></a>
<a id="__codelineno-0-132" name="__codelineno-0-132"></a>    <span class="n">populate_model_features_registry</span><span class="p">()</span>
<a id="__codelineno-0-133" name="__codelineno-0-133"></a>    <span class="n">query</span> <span class="o">=</span> <span class="n">Q</span><span class="p">()</span>
<a id="__codelineno-0-134" name="__codelineno-0-134"></a>    <span class="k">for</span> <span class="n">app_label</span><span class="p">,</span> <span class="n">models</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">as_dict</span><span class="p">():</span>
<a id="__codelineno-0-135" name="__codelineno-0-135"></a>        <span class="n">query</span> <span class="o">|=</span> <span class="n">Q</span><span class="p">(</span><span class="n">app_label</span><span class="o">=</span><span class="n">app_label</span><span class="p">,</span> <span class="n">model__in</span><span class="o">=</span><span class="n">models</span><span class="p">)</span>
<a id="__codelineno-0-136" name="__codelineno-0-136"></a>
<a id="__codelineno-0-137" name="__codelineno-0-137"></a>    <span class="k">return</span> <span class="n">query</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h3 id="nautobot.extras.utils.FeatureQuery.list_subclasses" class="doc doc-heading">
<code class="highlight language-python"><span class="n">list_subclasses</span><span class="p">()</span></code>

<a href="#nautobot.extras.utils.FeatureQuery.list_subclasses" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Return a list of model classes that declare this feature.</p>

          <details class="quote">
            <summary>Source code in <code>nautobot/extras/utils.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-155">155</a></span>
<span class="normal"><a href="#__codelineno-0-156">156</a></span>
<span class="normal"><a href="#__codelineno-0-157">157</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-155" name="__codelineno-0-155"></a><span class="k">def</span> <span class="nf">list_subclasses</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-156" name="__codelineno-0-156"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Return a list of model classes that declare this feature.&quot;&quot;&quot;</span>
<a id="__codelineno-0-157" name="__codelineno-0-157"></a>    <span class="k">return</span> <span class="p">[</span><span class="n">ct</span><span class="o">.</span><span class="n">model_class</span><span class="p">()</span> <span class="k">for</span> <span class="n">ct</span> <span class="ow">in</span> <span class="n">ContentType</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_query</span><span class="p">())]</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="nautobot.apps.utils.FeaturedQueryMixin" class="doc doc-heading">
          <code>nautobot.apps.utils.FeaturedQueryMixin</code>


<a href="#nautobot.apps.utils.FeaturedQueryMixin" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">

  
      <p>Mixin class that gets a list of featured models.</p>

            <details class="quote">
              <summary>Source code in <code>nautobot/extras/utils.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-69">69</a></span>
<span class="normal"><a href="#__codelineno-0-70">70</a></span>
<span class="normal"><a href="#__codelineno-0-71">71</a></span>
<span class="normal"><a href="#__codelineno-0-72">72</a></span>
<span class="normal"><a href="#__codelineno-0-73">73</a></span>
<span class="normal"><a href="#__codelineno-0-74">74</a></span>
<span class="normal"><a href="#__codelineno-0-75">75</a></span>
<span class="normal"><a href="#__codelineno-0-76">76</a></span>
<span class="normal"><a href="#__codelineno-0-77">77</a></span>
<span class="normal"><a href="#__codelineno-0-78">78</a></span>
<span class="normal"><a href="#__codelineno-0-79">79</a></span>
<span class="normal"><a href="#__codelineno-0-80">80</a></span>
<span class="normal"><a href="#__codelineno-0-81">81</a></span>
<span class="normal"><a href="#__codelineno-0-82">82</a></span>
<span class="normal"><a href="#__codelineno-0-83">83</a></span>
<span class="normal"><a href="#__codelineno-0-84">84</a></span>
<span class="normal"><a href="#__codelineno-0-85">85</a></span>
<span class="normal"><a href="#__codelineno-0-86">86</a></span>
<span class="normal"><a href="#__codelineno-0-87">87</a></span>
<span class="normal"><a href="#__codelineno-0-88">88</a></span>
<span class="normal"><a href="#__codelineno-0-89">89</a></span>
<span class="normal"><a href="#__codelineno-0-90">90</a></span>
<span class="normal"><a href="#__codelineno-0-91">91</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-69" name="__codelineno-0-69"></a><span class="nd">@deconstructible</span>
<a id="__codelineno-0-70" name="__codelineno-0-70"></a><span class="k">class</span> <span class="nc">FeaturedQueryMixin</span><span class="p">:</span>
<a id="__codelineno-0-71" name="__codelineno-0-71"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Mixin class that gets a list of featured models.&quot;&quot;&quot;</span>
<a id="__codelineno-0-72" name="__codelineno-0-72"></a>
<a id="__codelineno-0-73" name="__codelineno-0-73"></a>    <span class="k">def</span> <span class="nf">list_subclasses</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-74" name="__codelineno-0-74"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Return a list of classes that has implements this `name`.&quot;&quot;&quot;</span>
<a id="__codelineno-0-75" name="__codelineno-0-75"></a>        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;list_subclasses is not implemented&quot;</span><span class="p">)</span>
<a id="__codelineno-0-76" name="__codelineno-0-76"></a>
<a id="__codelineno-0-77" name="__codelineno-0-77"></a>    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-78" name="__codelineno-0-78"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-79" name="__codelineno-0-79"></a><span class="sd">        Given an extras feature, return a Q object for content type lookup</span>
<a id="__codelineno-0-80" name="__codelineno-0-80"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-81" name="__codelineno-0-81"></a>        <span class="n">query</span> <span class="o">=</span> <span class="n">Q</span><span class="p">()</span>
<a id="__codelineno-0-82" name="__codelineno-0-82"></a>        <span class="k">for</span> <span class="n">model</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">list_subclasses</span><span class="p">():</span>
<a id="__codelineno-0-83" name="__codelineno-0-83"></a>            <span class="n">query</span> <span class="o">|=</span> <span class="n">Q</span><span class="p">(</span><span class="n">app_label</span><span class="o">=</span><span class="n">model</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">app_label</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="n">model</span><span class="o">.</span><span class="vm">__name__</span><span class="o">.</span><span class="n">lower</span><span class="p">())</span>
<a id="__codelineno-0-84" name="__codelineno-0-84"></a>
<a id="__codelineno-0-85" name="__codelineno-0-85"></a>        <span class="k">return</span> <span class="n">query</span>
<a id="__codelineno-0-86" name="__codelineno-0-86"></a>
<a id="__codelineno-0-87" name="__codelineno-0-87"></a>    <span class="k">def</span> <span class="nf">as_queryset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-88" name="__codelineno-0-88"></a>        <span class="k">return</span> <span class="n">ContentType</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="bp">self</span><span class="p">())</span><span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="s2">&quot;app_label&quot;</span><span class="p">,</span> <span class="s2">&quot;model&quot;</span><span class="p">)</span>
<a id="__codelineno-0-89" name="__codelineno-0-89"></a>
<a id="__codelineno-0-90" name="__codelineno-0-90"></a>    <span class="k">def</span> <span class="nf">get_choices</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-91" name="__codelineno-0-91"></a>        <span class="k">return</span> <span class="p">[(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">ct</span><span class="o">.</span><span class="n">app_label</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">ct</span><span class="o">.</span><span class="n">model</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">ct</span><span class="o">.</span><span class="n">pk</span><span class="p">)</span> <span class="k">for</span> <span class="n">ct</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">as_queryset</span><span class="p">()]</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">










<div class="doc doc-object doc-function">



<h3 id="nautobot.extras.utils.FeaturedQueryMixin.__call__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__call__</span><span class="p">()</span></code>

<a href="#nautobot.extras.utils.FeaturedQueryMixin.__call__" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Given an extras feature, return a Q object for content type lookup</p>

          <details class="quote">
            <summary>Source code in <code>nautobot/extras/utils.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-77">77</a></span>
<span class="normal"><a href="#__codelineno-0-78">78</a></span>
<span class="normal"><a href="#__codelineno-0-79">79</a></span>
<span class="normal"><a href="#__codelineno-0-80">80</a></span>
<span class="normal"><a href="#__codelineno-0-81">81</a></span>
<span class="normal"><a href="#__codelineno-0-82">82</a></span>
<span class="normal"><a href="#__codelineno-0-83">83</a></span>
<span class="normal"><a href="#__codelineno-0-84">84</a></span>
<span class="normal"><a href="#__codelineno-0-85">85</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-77" name="__codelineno-0-77"></a><span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-78" name="__codelineno-0-78"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-79" name="__codelineno-0-79"></a><span class="sd">    Given an extras feature, return a Q object for content type lookup</span>
<a id="__codelineno-0-80" name="__codelineno-0-80"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-81" name="__codelineno-0-81"></a>    <span class="n">query</span> <span class="o">=</span> <span class="n">Q</span><span class="p">()</span>
<a id="__codelineno-0-82" name="__codelineno-0-82"></a>    <span class="k">for</span> <span class="n">model</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">list_subclasses</span><span class="p">():</span>
<a id="__codelineno-0-83" name="__codelineno-0-83"></a>        <span class="n">query</span> <span class="o">|=</span> <span class="n">Q</span><span class="p">(</span><span class="n">app_label</span><span class="o">=</span><span class="n">model</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">app_label</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="n">model</span><span class="o">.</span><span class="vm">__name__</span><span class="o">.</span><span class="n">lower</span><span class="p">())</span>
<a id="__codelineno-0-84" name="__codelineno-0-84"></a>
<a id="__codelineno-0-85" name="__codelineno-0-85"></a>    <span class="k">return</span> <span class="n">query</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h3 id="nautobot.extras.utils.FeaturedQueryMixin.list_subclasses" class="doc doc-heading">
<code class="highlight language-python"><span class="n">list_subclasses</span><span class="p">()</span></code>

<a href="#nautobot.extras.utils.FeaturedQueryMixin.list_subclasses" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Return a list of classes that has implements this <code>name</code>.</p>

          <details class="quote">
            <summary>Source code in <code>nautobot/extras/utils.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-73">73</a></span>
<span class="normal"><a href="#__codelineno-0-74">74</a></span>
<span class="normal"><a href="#__codelineno-0-75">75</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-73" name="__codelineno-0-73"></a><span class="k">def</span> <span class="nf">list_subclasses</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-74" name="__codelineno-0-74"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Return a list of classes that has implements this `name`.&quot;&quot;&quot;</span>
<a id="__codelineno-0-75" name="__codelineno-0-75"></a>    <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;list_subclasses is not implemented&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="nautobot.apps.utils.GitRepo" class="doc doc-heading">
          <code>nautobot.apps.utils.GitRepo</code>


<a href="#nautobot.apps.utils.GitRepo" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">


            <details class="quote">
              <summary>Source code in <code>nautobot/core/utils/git.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-56"> 56</a></span>
<span class="normal"><a href="#__codelineno-0-57"> 57</a></span>
<span class="normal"><a href="#__codelineno-0-58"> 58</a></span>
<span class="normal"><a href="#__codelineno-0-59"> 59</a></span>
<span class="normal"><a href="#__codelineno-0-60"> 60</a></span>
<span class="normal"><a href="#__codelineno-0-61"> 61</a></span>
<span class="normal"><a href="#__codelineno-0-62"> 62</a></span>
<span class="normal"><a href="#__codelineno-0-63"> 63</a></span>
<span class="normal"><a href="#__codelineno-0-64"> 64</a></span>
<span class="normal"><a href="#__codelineno-0-65"> 65</a></span>
<span class="normal"><a href="#__codelineno-0-66"> 66</a></span>
<span class="normal"><a href="#__codelineno-0-67"> 67</a></span>
<span class="normal"><a href="#__codelineno-0-68"> 68</a></span>
<span class="normal"><a href="#__codelineno-0-69"> 69</a></span>
<span class="normal"><a href="#__codelineno-0-70"> 70</a></span>
<span class="normal"><a href="#__codelineno-0-71"> 71</a></span>
<span class="normal"><a href="#__codelineno-0-72"> 72</a></span>
<span class="normal"><a href="#__codelineno-0-73"> 73</a></span>
<span class="normal"><a href="#__codelineno-0-74"> 74</a></span>
<span class="normal"><a href="#__codelineno-0-75"> 75</a></span>
<span class="normal"><a href="#__codelineno-0-76"> 76</a></span>
<span class="normal"><a href="#__codelineno-0-77"> 77</a></span>
<span class="normal"><a href="#__codelineno-0-78"> 78</a></span>
<span class="normal"><a href="#__codelineno-0-79"> 79</a></span>
<span class="normal"><a href="#__codelineno-0-80"> 80</a></span>
<span class="normal"><a href="#__codelineno-0-81"> 81</a></span>
<span class="normal"><a href="#__codelineno-0-82"> 82</a></span>
<span class="normal"><a href="#__codelineno-0-83"> 83</a></span>
<span class="normal"><a href="#__codelineno-0-84"> 84</a></span>
<span class="normal"><a href="#__codelineno-0-85"> 85</a></span>
<span class="normal"><a href="#__codelineno-0-86"> 86</a></span>
<span class="normal"><a href="#__codelineno-0-87"> 87</a></span>
<span class="normal"><a href="#__codelineno-0-88"> 88</a></span>
<span class="normal"><a href="#__codelineno-0-89"> 89</a></span>
<span class="normal"><a href="#__codelineno-0-90"> 90</a></span>
<span class="normal"><a href="#__codelineno-0-91"> 91</a></span>
<span class="normal"><a href="#__codelineno-0-92"> 92</a></span>
<span class="normal"><a href="#__codelineno-0-93"> 93</a></span>
<span class="normal"><a href="#__codelineno-0-94"> 94</a></span>
<span class="normal"><a href="#__codelineno-0-95"> 95</a></span>
<span class="normal"><a href="#__codelineno-0-96"> 96</a></span>
<span class="normal"><a href="#__codelineno-0-97"> 97</a></span>
<span class="normal"><a href="#__codelineno-0-98"> 98</a></span>
<span class="normal"><a href="#__codelineno-0-99"> 99</a></span>
<span class="normal"><a href="#__codelineno-0-100">100</a></span>
<span class="normal"><a href="#__codelineno-0-101">101</a></span>
<span class="normal"><a href="#__codelineno-0-102">102</a></span>
<span class="normal"><a href="#__codelineno-0-103">103</a></span>
<span class="normal"><a href="#__codelineno-0-104">104</a></span>
<span class="normal"><a href="#__codelineno-0-105">105</a></span>
<span class="normal"><a href="#__codelineno-0-106">106</a></span>
<span class="normal"><a href="#__codelineno-0-107">107</a></span>
<span class="normal"><a href="#__codelineno-0-108">108</a></span>
<span class="normal"><a href="#__codelineno-0-109">109</a></span>
<span class="normal"><a href="#__codelineno-0-110">110</a></span>
<span class="normal"><a href="#__codelineno-0-111">111</a></span>
<span class="normal"><a href="#__codelineno-0-112">112</a></span>
<span class="normal"><a href="#__codelineno-0-113">113</a></span>
<span class="normal"><a href="#__codelineno-0-114">114</a></span>
<span class="normal"><a href="#__codelineno-0-115">115</a></span>
<span class="normal"><a href="#__codelineno-0-116">116</a></span>
<span class="normal"><a href="#__codelineno-0-117">117</a></span>
<span class="normal"><a href="#__codelineno-0-118">118</a></span>
<span class="normal"><a href="#__codelineno-0-119">119</a></span>
<span class="normal"><a href="#__codelineno-0-120">120</a></span>
<span class="normal"><a href="#__codelineno-0-121">121</a></span>
<span class="normal"><a href="#__codelineno-0-122">122</a></span>
<span class="normal"><a href="#__codelineno-0-123">123</a></span>
<span class="normal"><a href="#__codelineno-0-124">124</a></span>
<span class="normal"><a href="#__codelineno-0-125">125</a></span>
<span class="normal"><a href="#__codelineno-0-126">126</a></span>
<span class="normal"><a href="#__codelineno-0-127">127</a></span>
<span class="normal"><a href="#__codelineno-0-128">128</a></span>
<span class="normal"><a href="#__codelineno-0-129">129</a></span>
<span class="normal"><a href="#__codelineno-0-130">130</a></span>
<span class="normal"><a href="#__codelineno-0-131">131</a></span>
<span class="normal"><a href="#__codelineno-0-132">132</a></span>
<span class="normal"><a href="#__codelineno-0-133">133</a></span>
<span class="normal"><a href="#__codelineno-0-134">134</a></span>
<span class="normal"><a href="#__codelineno-0-135">135</a></span>
<span class="normal"><a href="#__codelineno-0-136">136</a></span>
<span class="normal"><a href="#__codelineno-0-137">137</a></span>
<span class="normal"><a href="#__codelineno-0-138">138</a></span>
<span class="normal"><a href="#__codelineno-0-139">139</a></span>
<span class="normal"><a href="#__codelineno-0-140">140</a></span>
<span class="normal"><a href="#__codelineno-0-141">141</a></span>
<span class="normal"><a href="#__codelineno-0-142">142</a></span>
<span class="normal"><a href="#__codelineno-0-143">143</a></span>
<span class="normal"><a href="#__codelineno-0-144">144</a></span>
<span class="normal"><a href="#__codelineno-0-145">145</a></span>
<span class="normal"><a href="#__codelineno-0-146">146</a></span>
<span class="normal"><a href="#__codelineno-0-147">147</a></span>
<span class="normal"><a href="#__codelineno-0-148">148</a></span>
<span class="normal"><a href="#__codelineno-0-149">149</a></span>
<span class="normal"><a href="#__codelineno-0-150">150</a></span>
<span class="normal"><a href="#__codelineno-0-151">151</a></span>
<span class="normal"><a href="#__codelineno-0-152">152</a></span>
<span class="normal"><a href="#__codelineno-0-153">153</a></span>
<span class="normal"><a href="#__codelineno-0-154">154</a></span>
<span class="normal"><a href="#__codelineno-0-155">155</a></span>
<span class="normal"><a href="#__codelineno-0-156">156</a></span>
<span class="normal"><a href="#__codelineno-0-157">157</a></span>
<span class="normal"><a href="#__codelineno-0-158">158</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-56" name="__codelineno-0-56"></a><span class="k">class</span> <span class="nc">GitRepo</span><span class="p">:</span>
<a id="__codelineno-0-57" name="__codelineno-0-57"></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">clone_initially</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<a id="__codelineno-0-58" name="__codelineno-0-58"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-59" name="__codelineno-0-59"></a><span class="sd">        Ensure that we have a clone of the given remote Git repository URL at the given local directory path.</span>
<a id="__codelineno-0-60" name="__codelineno-0-60"></a>
<a id="__codelineno-0-61" name="__codelineno-0-61"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-62" name="__codelineno-0-62"></a><span class="sd">            path (str): path to git repo</span>
<a id="__codelineno-0-63" name="__codelineno-0-63"></a><span class="sd">            url (str): git repo url</span>
<a id="__codelineno-0-64" name="__codelineno-0-64"></a><span class="sd">            clone_initially (bool): True if the repo needs to be cloned</span>
<a id="__codelineno-0-65" name="__codelineno-0-65"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-66" name="__codelineno-0-66"></a>        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">path</span><span class="p">)</span> <span class="ow">and</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="s2">&quot;.git&quot;</span><span class="p">)):</span>
<a id="__codelineno-0-67" name="__codelineno-0-67"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">repo</span> <span class="o">=</span> <span class="n">Repo</span><span class="p">(</span><span class="n">path</span><span class="o">=</span><span class="n">path</span><span class="p">)</span>
<a id="__codelineno-0-68" name="__codelineno-0-68"></a>        <span class="k">elif</span> <span class="n">clone_initially</span><span class="p">:</span>
<a id="__codelineno-0-69" name="__codelineno-0-69"></a>            <span class="c1"># Don&#39;t log `url` as it may include authentication details.</span>
<a id="__codelineno-0-70" name="__codelineno-0-70"></a>            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Cloning git repository to </span><span class="si">%s</span><span class="s2">...&quot;</span><span class="p">,</span> <span class="n">path</span><span class="p">)</span>
<a id="__codelineno-0-71" name="__codelineno-0-71"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">repo</span> <span class="o">=</span> <span class="n">Repo</span><span class="o">.</span><span class="n">clone_from</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">to_path</span><span class="o">=</span><span class="n">path</span><span class="p">,</span> <span class="n">env</span><span class="o">=</span><span class="n">GIT_ENVIRONMENT</span><span class="p">)</span>
<a id="__codelineno-0-72" name="__codelineno-0-72"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-73" name="__codelineno-0-73"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">repo</span> <span class="o">=</span> <span class="n">Repo</span><span class="o">.</span><span class="n">init</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
<a id="__codelineno-0-74" name="__codelineno-0-74"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">repo</span><span class="o">.</span><span class="n">create_remote</span><span class="p">(</span><span class="s2">&quot;origin&quot;</span><span class="p">,</span> <span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">)</span>
<a id="__codelineno-0-75" name="__codelineno-0-75"></a>
<a id="__codelineno-0-76" name="__codelineno-0-76"></a>        <span class="k">if</span> <span class="n">url</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">repo</span><span class="o">.</span><span class="n">remotes</span><span class="o">.</span><span class="n">origin</span><span class="o">.</span><span class="n">urls</span><span class="p">:</span>
<a id="__codelineno-0-77" name="__codelineno-0-77"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">repo</span><span class="o">.</span><span class="n">remotes</span><span class="o">.</span><span class="n">origin</span><span class="o">.</span><span class="n">set_url</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
<a id="__codelineno-0-78" name="__codelineno-0-78"></a>
<a id="__codelineno-0-79" name="__codelineno-0-79"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-80" name="__codelineno-0-80"></a>    <span class="k">def</span> <span class="nf">head</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-81" name="__codelineno-0-81"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Current checked out repository head commit.&quot;&quot;&quot;</span>
<a id="__codelineno-0-82" name="__codelineno-0-82"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">repo</span><span class="o">.</span><span class="n">head</span><span class="o">.</span><span class="n">commit</span><span class="o">.</span><span class="n">hexsha</span>
<a id="__codelineno-0-83" name="__codelineno-0-83"></a>
<a id="__codelineno-0-84" name="__codelineno-0-84"></a>    <span class="k">def</span> <span class="nf">fetch</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-85" name="__codelineno-0-85"></a>        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">repo</span><span class="o">.</span><span class="n">git</span><span class="o">.</span><span class="n">custom_environment</span><span class="p">(</span><span class="o">**</span><span class="n">GIT_ENVIRONMENT</span><span class="p">):</span>
<a id="__codelineno-0-86" name="__codelineno-0-86"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">repo</span><span class="o">.</span><span class="n">remotes</span><span class="o">.</span><span class="n">origin</span><span class="o">.</span><span class="n">fetch</span><span class="p">()</span>
<a id="__codelineno-0-87" name="__codelineno-0-87"></a>
<a id="__codelineno-0-88" name="__codelineno-0-88"></a>    <span class="k">def</span> <span class="nf">checkout</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">branch</span><span class="p">,</span> <span class="n">commit_hexsha</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<a id="__codelineno-0-89" name="__codelineno-0-89"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-90" name="__codelineno-0-90"></a><span class="sd">        Check out the given branch, and optionally the specified commit within that branch.</span>
<a id="__codelineno-0-91" name="__codelineno-0-91"></a>
<a id="__codelineno-0-92" name="__codelineno-0-92"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-93" name="__codelineno-0-93"></a><span class="sd">            (str, bool): commit_hexsha the repo contains now, whether any change occurred</span>
<a id="__codelineno-0-94" name="__codelineno-0-94"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-95" name="__codelineno-0-95"></a>        <span class="c1"># Short-circuit logic - do we already have this commit checked out?</span>
<a id="__codelineno-0-96" name="__codelineno-0-96"></a>        <span class="k">if</span> <span class="n">commit_hexsha</span> <span class="ow">and</span> <span class="n">commit_hexsha</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">head</span><span class="p">:</span>
<a id="__codelineno-0-97" name="__codelineno-0-97"></a>            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Commit </span><span class="si">{</span><span class="n">commit_hexsha</span><span class="si">}</span><span class="s2"> is already checked out.&quot;</span><span class="p">)</span>
<a id="__codelineno-0-98" name="__codelineno-0-98"></a>            <span class="k">return</span> <span class="p">(</span><span class="n">commit_hexsha</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
<a id="__codelineno-0-99" name="__codelineno-0-99"></a>
<a id="__codelineno-0-100" name="__codelineno-0-100"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">fetch</span><span class="p">()</span>
<a id="__codelineno-0-101" name="__codelineno-0-101"></a>        <span class="k">if</span> <span class="n">commit_hexsha</span><span class="p">:</span>
<a id="__codelineno-0-102" name="__codelineno-0-102"></a>            <span class="c1"># Sanity check - GitPython doesn&#39;t provide a handy API for this so we just call a raw Git command:</span>
<a id="__codelineno-0-103" name="__codelineno-0-103"></a>            <span class="c1"># $ git branch origin/&lt;branch&gt; --remotes --contains &lt;commit&gt;</span>
<a id="__codelineno-0-104" name="__codelineno-0-104"></a>            <span class="c1"># prints the branch name if it DOES contain the commit, and nothing if it DOES NOT contain the commit.</span>
<a id="__codelineno-0-105" name="__codelineno-0-105"></a>            <span class="c1"># Since we did a `fetch` and not a `pull` above, we need to check for the commit in the remote origin</span>
<a id="__codelineno-0-106" name="__codelineno-0-106"></a>            <span class="c1"># branch, not the local (not-yet-updated) branch.</span>
<a id="__codelineno-0-107" name="__codelineno-0-107"></a>            <span class="k">if</span> <span class="n">branch</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">repo</span><span class="o">.</span><span class="n">git</span><span class="o">.</span><span class="n">branch</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;origin/</span><span class="si">{</span><span class="n">branch</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;--remotes&quot;</span><span class="p">,</span> <span class="s2">&quot;--contains&quot;</span><span class="p">,</span> <span class="n">commit_hexsha</span><span class="p">):</span>
<a id="__codelineno-0-108" name="__codelineno-0-108"></a>                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Requested to check out commit `</span><span class="si">{</span><span class="n">commit_hexsha</span><span class="si">}</span><span class="s2">`, but it&#39;s not in branch </span><span class="si">{</span><span class="n">branch</span><span class="si">}</span><span class="s2">!&quot;</span><span class="p">)</span>
<a id="__codelineno-0-109" name="__codelineno-0-109"></a>            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Checking out commit `</span><span class="si">{</span><span class="n">commit_hexsha</span><span class="si">}</span><span class="s2">` on branch `</span><span class="si">{</span><span class="n">branch</span><span class="si">}</span><span class="s2">`...&quot;</span><span class="p">)</span>
<a id="__codelineno-0-110" name="__codelineno-0-110"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">repo</span><span class="o">.</span><span class="n">git</span><span class="o">.</span><span class="n">checkout</span><span class="p">(</span><span class="n">commit_hexsha</span><span class="p">)</span>
<a id="__codelineno-0-111" name="__codelineno-0-111"></a>            <span class="k">return</span> <span class="p">(</span><span class="n">commit_hexsha</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-0-112" name="__codelineno-0-112"></a>
<a id="__codelineno-0-113" name="__codelineno-0-113"></a>        <span class="k">if</span> <span class="n">branch</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">repo</span><span class="o">.</span><span class="n">heads</span><span class="p">:</span>
<a id="__codelineno-0-114" name="__codelineno-0-114"></a>            <span class="n">branch_head</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">repo</span><span class="o">.</span><span class="n">heads</span><span class="p">[</span><span class="n">branch</span><span class="p">]</span>
<a id="__codelineno-0-115" name="__codelineno-0-115"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-116" name="__codelineno-0-116"></a>            <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-0-117" name="__codelineno-0-117"></a>                <span class="n">branch_head</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">repo</span><span class="o">.</span><span class="n">create_head</span><span class="p">(</span><span class="n">branch</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">repo</span><span class="o">.</span><span class="n">remotes</span><span class="o">.</span><span class="n">origin</span><span class="o">.</span><span class="n">refs</span><span class="p">[</span><span class="n">branch</span><span class="p">])</span>
<a id="__codelineno-0-118" name="__codelineno-0-118"></a>                <span class="n">branch_head</span><span class="o">.</span><span class="n">set_tracking_branch</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">repo</span><span class="o">.</span><span class="n">remotes</span><span class="o">.</span><span class="n">origin</span><span class="o">.</span><span class="n">refs</span><span class="p">[</span><span class="n">branch</span><span class="p">])</span>
<a id="__codelineno-0-119" name="__codelineno-0-119"></a>            <span class="k">except</span> <span class="ne">IndexError</span> <span class="k">as</span> <span class="n">git_error</span><span class="p">:</span>
<a id="__codelineno-0-120" name="__codelineno-0-120"></a>                <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
<a id="__codelineno-0-121" name="__codelineno-0-121"></a>                    <span class="s2">&quot;Branch </span><span class="si">%s</span><span class="s2"> does not exist at </span><span class="si">%s</span><span class="s2">. </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">branch</span><span class="p">,</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">repo</span><span class="o">.</span><span class="n">remotes</span><span class="o">.</span><span class="n">origin</span><span class="o">.</span><span class="n">urls</span><span class="p">)[</span><span class="mi">0</span><span class="p">],</span> <span class="n">git_error</span>
<a id="__codelineno-0-122" name="__codelineno-0-122"></a>                <span class="p">)</span>
<a id="__codelineno-0-123" name="__codelineno-0-123"></a>                <span class="k">raise</span> <span class="n">BranchDoesNotExist</span><span class="p">(</span>
<a id="__codelineno-0-124" name="__codelineno-0-124"></a>                    <span class="sa">f</span><span class="s2">&quot;Please create branch &#39;</span><span class="si">{</span><span class="n">branch</span><span class="si">}</span><span class="s2">&#39; in upstream and try again.&quot;</span>
<a id="__codelineno-0-125" name="__codelineno-0-125"></a>                    <span class="sa">f</span><span class="s2">&quot; If this is a new repo, please add a commit before syncing. </span><span class="si">{</span><span class="n">git_error</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-126" name="__codelineno-0-126"></a>                <span class="p">)</span>
<a id="__codelineno-0-127" name="__codelineno-0-127"></a>
<a id="__codelineno-0-128" name="__codelineno-0-128"></a>        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Checking out latest commit on branch `</span><span class="si">{</span><span class="n">branch</span><span class="si">}</span><span class="s2">`...&quot;</span><span class="p">)</span>
<a id="__codelineno-0-129" name="__codelineno-0-129"></a>        <span class="n">branch_head</span><span class="o">.</span><span class="n">checkout</span><span class="p">()</span>
<a id="__codelineno-0-130" name="__codelineno-0-130"></a>        <span class="c1"># No specific commit hash was given, so make sure we get the latest from origin</span>
<a id="__codelineno-0-131" name="__codelineno-0-131"></a>        <span class="c1"># We would use repo.remotes.origin.pull() here, but that will fail in the case where someone has</span>
<a id="__codelineno-0-132" name="__codelineno-0-132"></a>        <span class="c1"># force-pushed to the upstream repo since the last time we did a pull. To be safe, we reset instead.</span>
<a id="__codelineno-0-133" name="__codelineno-0-133"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">repo</span><span class="o">.</span><span class="n">head</span><span class="o">.</span><span class="n">reset</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;origin/</span><span class="si">{</span><span class="n">branch</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">working_tree</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-0-134" name="__codelineno-0-134"></a>        <span class="n">commit_hexsha</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">repo</span><span class="o">.</span><span class="n">head</span><span class="o">.</span><span class="n">reference</span><span class="o">.</span><span class="n">commit</span><span class="o">.</span><span class="n">hexsha</span>
<a id="__codelineno-0-135" name="__codelineno-0-135"></a>        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Latest commit on branch `</span><span class="si">{</span><span class="n">branch</span><span class="si">}</span><span class="s2">` is `</span><span class="si">{</span><span class="n">commit_hexsha</span><span class="si">}</span><span class="s2">`&quot;</span><span class="p">)</span>
<a id="__codelineno-0-136" name="__codelineno-0-136"></a>        <span class="k">return</span> <span class="p">(</span><span class="n">commit_hexsha</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-0-137" name="__codelineno-0-137"></a>
<a id="__codelineno-0-138" name="__codelineno-0-138"></a>    <span class="k">def</span> <span class="nf">diff_remote</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">branch</span><span class="p">):</span>
<a id="__codelineno-0-139" name="__codelineno-0-139"></a>        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Fetching from remote.&quot;</span><span class="p">)</span>
<a id="__codelineno-0-140" name="__codelineno-0-140"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">fetch</span><span class="p">()</span>
<a id="__codelineno-0-141" name="__codelineno-0-141"></a>
<a id="__codelineno-0-142" name="__codelineno-0-142"></a>        <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-0-143" name="__codelineno-0-143"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">repo</span><span class="o">.</span><span class="n">remotes</span><span class="o">.</span><span class="n">origin</span><span class="o">.</span><span class="n">refs</span><span class="p">[</span><span class="n">branch</span><span class="p">]</span>
<a id="__codelineno-0-144" name="__codelineno-0-144"></a>        <span class="k">except</span> <span class="ne">IndexError</span> <span class="k">as</span> <span class="n">git_error</span><span class="p">:</span>
<a id="__codelineno-0-145" name="__codelineno-0-145"></a>            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
<a id="__codelineno-0-146" name="__codelineno-0-146"></a>                <span class="s2">&quot;Branch </span><span class="si">%s</span><span class="s2"> does not exist at </span><span class="si">%s</span><span class="s2">. </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">branch</span><span class="p">,</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">repo</span><span class="o">.</span><span class="n">remotes</span><span class="o">.</span><span class="n">origin</span><span class="o">.</span><span class="n">urls</span><span class="p">)[</span><span class="mi">0</span><span class="p">],</span> <span class="n">git_error</span>
<a id="__codelineno-0-147" name="__codelineno-0-147"></a>            <span class="p">)</span>
<a id="__codelineno-0-148" name="__codelineno-0-148"></a>            <span class="k">raise</span> <span class="n">BranchDoesNotExist</span><span class="p">(</span>
<a id="__codelineno-0-149" name="__codelineno-0-149"></a>                <span class="sa">f</span><span class="s2">&quot;Please create branch &#39;</span><span class="si">{</span><span class="n">branch</span><span class="si">}</span><span class="s2">&#39; in upstream and try again.&quot;</span>
<a id="__codelineno-0-150" name="__codelineno-0-150"></a>                <span class="sa">f</span><span class="s2">&quot; If this is a new repo, please add a commit before syncing. </span><span class="si">{</span><span class="n">git_error</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-151" name="__codelineno-0-151"></a>            <span class="p">)</span>
<a id="__codelineno-0-152" name="__codelineno-0-152"></a>
<a id="__codelineno-0-153" name="__codelineno-0-153"></a>        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Getting diff between local branch and remote branch&quot;</span><span class="p">)</span>
<a id="__codelineno-0-154" name="__codelineno-0-154"></a>        <span class="n">diff</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">repo</span><span class="o">.</span><span class="n">git</span><span class="o">.</span><span class="n">diff</span><span class="p">(</span><span class="s2">&quot;--name-status&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;origin/</span><span class="si">{</span><span class="n">branch</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-155" name="__codelineno-0-155"></a>        <span class="k">if</span> <span class="n">diff</span><span class="p">:</span>  <span class="c1"># if diff is not empty</span>
<a id="__codelineno-0-156" name="__codelineno-0-156"></a>            <span class="k">return</span> <span class="n">convert_git_diff_log_to_list</span><span class="p">(</span><span class="n">diff</span><span class="p">)</span>
<a id="__codelineno-0-157" name="__codelineno-0-157"></a>        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;No Difference&quot;</span><span class="p">)</span>
<a id="__codelineno-0-158" name="__codelineno-0-158"></a>        <span class="k">return</span> <span class="p">[]</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="nautobot.core.utils.git.GitRepo.head" class="doc doc-heading">
<code class="highlight language-python"><span class="n">head</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#nautobot.core.utils.git.GitRepo.head" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Current checked out repository head commit.</p>
  </div>

</div>




<div class="doc doc-object doc-function">



<h3 id="nautobot.core.utils.git.GitRepo.__init__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">clone_initially</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>

<a href="#nautobot.core.utils.git.GitRepo.__init__" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Ensure that we have a clone of the given remote Git repository URL at the given local directory path.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>path</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>path to git repo</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>url</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>git repo url</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>clone_initially</code></td>
          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>True if the repo needs to be cloned</p>
            </div>
          </td>
          <td>
                <code>True</code>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>nautobot/core/utils/git.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-57">57</a></span>
<span class="normal"><a href="#__codelineno-0-58">58</a></span>
<span class="normal"><a href="#__codelineno-0-59">59</a></span>
<span class="normal"><a href="#__codelineno-0-60">60</a></span>
<span class="normal"><a href="#__codelineno-0-61">61</a></span>
<span class="normal"><a href="#__codelineno-0-62">62</a></span>
<span class="normal"><a href="#__codelineno-0-63">63</a></span>
<span class="normal"><a href="#__codelineno-0-64">64</a></span>
<span class="normal"><a href="#__codelineno-0-65">65</a></span>
<span class="normal"><a href="#__codelineno-0-66">66</a></span>
<span class="normal"><a href="#__codelineno-0-67">67</a></span>
<span class="normal"><a href="#__codelineno-0-68">68</a></span>
<span class="normal"><a href="#__codelineno-0-69">69</a></span>
<span class="normal"><a href="#__codelineno-0-70">70</a></span>
<span class="normal"><a href="#__codelineno-0-71">71</a></span>
<span class="normal"><a href="#__codelineno-0-72">72</a></span>
<span class="normal"><a href="#__codelineno-0-73">73</a></span>
<span class="normal"><a href="#__codelineno-0-74">74</a></span>
<span class="normal"><a href="#__codelineno-0-75">75</a></span>
<span class="normal"><a href="#__codelineno-0-76">76</a></span>
<span class="normal"><a href="#__codelineno-0-77">77</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-57" name="__codelineno-0-57"></a><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">clone_initially</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<a id="__codelineno-0-58" name="__codelineno-0-58"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-59" name="__codelineno-0-59"></a><span class="sd">    Ensure that we have a clone of the given remote Git repository URL at the given local directory path.</span>
<a id="__codelineno-0-60" name="__codelineno-0-60"></a>
<a id="__codelineno-0-61" name="__codelineno-0-61"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-62" name="__codelineno-0-62"></a><span class="sd">        path (str): path to git repo</span>
<a id="__codelineno-0-63" name="__codelineno-0-63"></a><span class="sd">        url (str): git repo url</span>
<a id="__codelineno-0-64" name="__codelineno-0-64"></a><span class="sd">        clone_initially (bool): True if the repo needs to be cloned</span>
<a id="__codelineno-0-65" name="__codelineno-0-65"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-66" name="__codelineno-0-66"></a>    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">path</span><span class="p">)</span> <span class="ow">and</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="s2">&quot;.git&quot;</span><span class="p">)):</span>
<a id="__codelineno-0-67" name="__codelineno-0-67"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">repo</span> <span class="o">=</span> <span class="n">Repo</span><span class="p">(</span><span class="n">path</span><span class="o">=</span><span class="n">path</span><span class="p">)</span>
<a id="__codelineno-0-68" name="__codelineno-0-68"></a>    <span class="k">elif</span> <span class="n">clone_initially</span><span class="p">:</span>
<a id="__codelineno-0-69" name="__codelineno-0-69"></a>        <span class="c1"># Don&#39;t log `url` as it may include authentication details.</span>
<a id="__codelineno-0-70" name="__codelineno-0-70"></a>        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Cloning git repository to </span><span class="si">%s</span><span class="s2">...&quot;</span><span class="p">,</span> <span class="n">path</span><span class="p">)</span>
<a id="__codelineno-0-71" name="__codelineno-0-71"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">repo</span> <span class="o">=</span> <span class="n">Repo</span><span class="o">.</span><span class="n">clone_from</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">to_path</span><span class="o">=</span><span class="n">path</span><span class="p">,</span> <span class="n">env</span><span class="o">=</span><span class="n">GIT_ENVIRONMENT</span><span class="p">)</span>
<a id="__codelineno-0-72" name="__codelineno-0-72"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-73" name="__codelineno-0-73"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">repo</span> <span class="o">=</span> <span class="n">Repo</span><span class="o">.</span><span class="n">init</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
<a id="__codelineno-0-74" name="__codelineno-0-74"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">repo</span><span class="o">.</span><span class="n">create_remote</span><span class="p">(</span><span class="s2">&quot;origin&quot;</span><span class="p">,</span> <span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">)</span>
<a id="__codelineno-0-75" name="__codelineno-0-75"></a>
<a id="__codelineno-0-76" name="__codelineno-0-76"></a>    <span class="k">if</span> <span class="n">url</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">repo</span><span class="o">.</span><span class="n">remotes</span><span class="o">.</span><span class="n">origin</span><span class="o">.</span><span class="n">urls</span><span class="p">:</span>
<a id="__codelineno-0-77" name="__codelineno-0-77"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">repo</span><span class="o">.</span><span class="n">remotes</span><span class="o">.</span><span class="n">origin</span><span class="o">.</span><span class="n">set_url</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h3 id="nautobot.core.utils.git.GitRepo.checkout" class="doc doc-heading">
<code class="highlight language-python"><span class="n">checkout</span><span class="p">(</span><span class="n">branch</span><span class="p">,</span> <span class="n">commit_hexsha</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#nautobot.core.utils.git.GitRepo.checkout" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Check out the given branch, and optionally the specified commit within that branch.</p>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>(str, bool)</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>commit_hexsha the repo contains now, whether any change occurred</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>nautobot/core/utils/git.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-88"> 88</a></span>
<span class="normal"><a href="#__codelineno-0-89"> 89</a></span>
<span class="normal"><a href="#__codelineno-0-90"> 90</a></span>
<span class="normal"><a href="#__codelineno-0-91"> 91</a></span>
<span class="normal"><a href="#__codelineno-0-92"> 92</a></span>
<span class="normal"><a href="#__codelineno-0-93"> 93</a></span>
<span class="normal"><a href="#__codelineno-0-94"> 94</a></span>
<span class="normal"><a href="#__codelineno-0-95"> 95</a></span>
<span class="normal"><a href="#__codelineno-0-96"> 96</a></span>
<span class="normal"><a href="#__codelineno-0-97"> 97</a></span>
<span class="normal"><a href="#__codelineno-0-98"> 98</a></span>
<span class="normal"><a href="#__codelineno-0-99"> 99</a></span>
<span class="normal"><a href="#__codelineno-0-100">100</a></span>
<span class="normal"><a href="#__codelineno-0-101">101</a></span>
<span class="normal"><a href="#__codelineno-0-102">102</a></span>
<span class="normal"><a href="#__codelineno-0-103">103</a></span>
<span class="normal"><a href="#__codelineno-0-104">104</a></span>
<span class="normal"><a href="#__codelineno-0-105">105</a></span>
<span class="normal"><a href="#__codelineno-0-106">106</a></span>
<span class="normal"><a href="#__codelineno-0-107">107</a></span>
<span class="normal"><a href="#__codelineno-0-108">108</a></span>
<span class="normal"><a href="#__codelineno-0-109">109</a></span>
<span class="normal"><a href="#__codelineno-0-110">110</a></span>
<span class="normal"><a href="#__codelineno-0-111">111</a></span>
<span class="normal"><a href="#__codelineno-0-112">112</a></span>
<span class="normal"><a href="#__codelineno-0-113">113</a></span>
<span class="normal"><a href="#__codelineno-0-114">114</a></span>
<span class="normal"><a href="#__codelineno-0-115">115</a></span>
<span class="normal"><a href="#__codelineno-0-116">116</a></span>
<span class="normal"><a href="#__codelineno-0-117">117</a></span>
<span class="normal"><a href="#__codelineno-0-118">118</a></span>
<span class="normal"><a href="#__codelineno-0-119">119</a></span>
<span class="normal"><a href="#__codelineno-0-120">120</a></span>
<span class="normal"><a href="#__codelineno-0-121">121</a></span>
<span class="normal"><a href="#__codelineno-0-122">122</a></span>
<span class="normal"><a href="#__codelineno-0-123">123</a></span>
<span class="normal"><a href="#__codelineno-0-124">124</a></span>
<span class="normal"><a href="#__codelineno-0-125">125</a></span>
<span class="normal"><a href="#__codelineno-0-126">126</a></span>
<span class="normal"><a href="#__codelineno-0-127">127</a></span>
<span class="normal"><a href="#__codelineno-0-128">128</a></span>
<span class="normal"><a href="#__codelineno-0-129">129</a></span>
<span class="normal"><a href="#__codelineno-0-130">130</a></span>
<span class="normal"><a href="#__codelineno-0-131">131</a></span>
<span class="normal"><a href="#__codelineno-0-132">132</a></span>
<span class="normal"><a href="#__codelineno-0-133">133</a></span>
<span class="normal"><a href="#__codelineno-0-134">134</a></span>
<span class="normal"><a href="#__codelineno-0-135">135</a></span>
<span class="normal"><a href="#__codelineno-0-136">136</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-88" name="__codelineno-0-88"></a><span class="k">def</span> <span class="nf">checkout</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">branch</span><span class="p">,</span> <span class="n">commit_hexsha</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<a id="__codelineno-0-89" name="__codelineno-0-89"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-90" name="__codelineno-0-90"></a><span class="sd">    Check out the given branch, and optionally the specified commit within that branch.</span>
<a id="__codelineno-0-91" name="__codelineno-0-91"></a>
<a id="__codelineno-0-92" name="__codelineno-0-92"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-93" name="__codelineno-0-93"></a><span class="sd">        (str, bool): commit_hexsha the repo contains now, whether any change occurred</span>
<a id="__codelineno-0-94" name="__codelineno-0-94"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-95" name="__codelineno-0-95"></a>    <span class="c1"># Short-circuit logic - do we already have this commit checked out?</span>
<a id="__codelineno-0-96" name="__codelineno-0-96"></a>    <span class="k">if</span> <span class="n">commit_hexsha</span> <span class="ow">and</span> <span class="n">commit_hexsha</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">head</span><span class="p">:</span>
<a id="__codelineno-0-97" name="__codelineno-0-97"></a>        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Commit </span><span class="si">{</span><span class="n">commit_hexsha</span><span class="si">}</span><span class="s2"> is already checked out.&quot;</span><span class="p">)</span>
<a id="__codelineno-0-98" name="__codelineno-0-98"></a>        <span class="k">return</span> <span class="p">(</span><span class="n">commit_hexsha</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
<a id="__codelineno-0-99" name="__codelineno-0-99"></a>
<a id="__codelineno-0-100" name="__codelineno-0-100"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">fetch</span><span class="p">()</span>
<a id="__codelineno-0-101" name="__codelineno-0-101"></a>    <span class="k">if</span> <span class="n">commit_hexsha</span><span class="p">:</span>
<a id="__codelineno-0-102" name="__codelineno-0-102"></a>        <span class="c1"># Sanity check - GitPython doesn&#39;t provide a handy API for this so we just call a raw Git command:</span>
<a id="__codelineno-0-103" name="__codelineno-0-103"></a>        <span class="c1"># $ git branch origin/&lt;branch&gt; --remotes --contains &lt;commit&gt;</span>
<a id="__codelineno-0-104" name="__codelineno-0-104"></a>        <span class="c1"># prints the branch name if it DOES contain the commit, and nothing if it DOES NOT contain the commit.</span>
<a id="__codelineno-0-105" name="__codelineno-0-105"></a>        <span class="c1"># Since we did a `fetch` and not a `pull` above, we need to check for the commit in the remote origin</span>
<a id="__codelineno-0-106" name="__codelineno-0-106"></a>        <span class="c1"># branch, not the local (not-yet-updated) branch.</span>
<a id="__codelineno-0-107" name="__codelineno-0-107"></a>        <span class="k">if</span> <span class="n">branch</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">repo</span><span class="o">.</span><span class="n">git</span><span class="o">.</span><span class="n">branch</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;origin/</span><span class="si">{</span><span class="n">branch</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;--remotes&quot;</span><span class="p">,</span> <span class="s2">&quot;--contains&quot;</span><span class="p">,</span> <span class="n">commit_hexsha</span><span class="p">):</span>
<a id="__codelineno-0-108" name="__codelineno-0-108"></a>            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Requested to check out commit `</span><span class="si">{</span><span class="n">commit_hexsha</span><span class="si">}</span><span class="s2">`, but it&#39;s not in branch </span><span class="si">{</span><span class="n">branch</span><span class="si">}</span><span class="s2">!&quot;</span><span class="p">)</span>
<a id="__codelineno-0-109" name="__codelineno-0-109"></a>        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Checking out commit `</span><span class="si">{</span><span class="n">commit_hexsha</span><span class="si">}</span><span class="s2">` on branch `</span><span class="si">{</span><span class="n">branch</span><span class="si">}</span><span class="s2">`...&quot;</span><span class="p">)</span>
<a id="__codelineno-0-110" name="__codelineno-0-110"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">repo</span><span class="o">.</span><span class="n">git</span><span class="o">.</span><span class="n">checkout</span><span class="p">(</span><span class="n">commit_hexsha</span><span class="p">)</span>
<a id="__codelineno-0-111" name="__codelineno-0-111"></a>        <span class="k">return</span> <span class="p">(</span><span class="n">commit_hexsha</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-0-112" name="__codelineno-0-112"></a>
<a id="__codelineno-0-113" name="__codelineno-0-113"></a>    <span class="k">if</span> <span class="n">branch</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">repo</span><span class="o">.</span><span class="n">heads</span><span class="p">:</span>
<a id="__codelineno-0-114" name="__codelineno-0-114"></a>        <span class="n">branch_head</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">repo</span><span class="o">.</span><span class="n">heads</span><span class="p">[</span><span class="n">branch</span><span class="p">]</span>
<a id="__codelineno-0-115" name="__codelineno-0-115"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-116" name="__codelineno-0-116"></a>        <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-0-117" name="__codelineno-0-117"></a>            <span class="n">branch_head</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">repo</span><span class="o">.</span><span class="n">create_head</span><span class="p">(</span><span class="n">branch</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">repo</span><span class="o">.</span><span class="n">remotes</span><span class="o">.</span><span class="n">origin</span><span class="o">.</span><span class="n">refs</span><span class="p">[</span><span class="n">branch</span><span class="p">])</span>
<a id="__codelineno-0-118" name="__codelineno-0-118"></a>            <span class="n">branch_head</span><span class="o">.</span><span class="n">set_tracking_branch</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">repo</span><span class="o">.</span><span class="n">remotes</span><span class="o">.</span><span class="n">origin</span><span class="o">.</span><span class="n">refs</span><span class="p">[</span><span class="n">branch</span><span class="p">])</span>
<a id="__codelineno-0-119" name="__codelineno-0-119"></a>        <span class="k">except</span> <span class="ne">IndexError</span> <span class="k">as</span> <span class="n">git_error</span><span class="p">:</span>
<a id="__codelineno-0-120" name="__codelineno-0-120"></a>            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
<a id="__codelineno-0-121" name="__codelineno-0-121"></a>                <span class="s2">&quot;Branch </span><span class="si">%s</span><span class="s2"> does not exist at </span><span class="si">%s</span><span class="s2">. </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">branch</span><span class="p">,</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">repo</span><span class="o">.</span><span class="n">remotes</span><span class="o">.</span><span class="n">origin</span><span class="o">.</span><span class="n">urls</span><span class="p">)[</span><span class="mi">0</span><span class="p">],</span> <span class="n">git_error</span>
<a id="__codelineno-0-122" name="__codelineno-0-122"></a>            <span class="p">)</span>
<a id="__codelineno-0-123" name="__codelineno-0-123"></a>            <span class="k">raise</span> <span class="n">BranchDoesNotExist</span><span class="p">(</span>
<a id="__codelineno-0-124" name="__codelineno-0-124"></a>                <span class="sa">f</span><span class="s2">&quot;Please create branch &#39;</span><span class="si">{</span><span class="n">branch</span><span class="si">}</span><span class="s2">&#39; in upstream and try again.&quot;</span>
<a id="__codelineno-0-125" name="__codelineno-0-125"></a>                <span class="sa">f</span><span class="s2">&quot; If this is a new repo, please add a commit before syncing. </span><span class="si">{</span><span class="n">git_error</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-126" name="__codelineno-0-126"></a>            <span class="p">)</span>
<a id="__codelineno-0-127" name="__codelineno-0-127"></a>
<a id="__codelineno-0-128" name="__codelineno-0-128"></a>    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Checking out latest commit on branch `</span><span class="si">{</span><span class="n">branch</span><span class="si">}</span><span class="s2">`...&quot;</span><span class="p">)</span>
<a id="__codelineno-0-129" name="__codelineno-0-129"></a>    <span class="n">branch_head</span><span class="o">.</span><span class="n">checkout</span><span class="p">()</span>
<a id="__codelineno-0-130" name="__codelineno-0-130"></a>    <span class="c1"># No specific commit hash was given, so make sure we get the latest from origin</span>
<a id="__codelineno-0-131" name="__codelineno-0-131"></a>    <span class="c1"># We would use repo.remotes.origin.pull() here, but that will fail in the case where someone has</span>
<a id="__codelineno-0-132" name="__codelineno-0-132"></a>    <span class="c1"># force-pushed to the upstream repo since the last time we did a pull. To be safe, we reset instead.</span>
<a id="__codelineno-0-133" name="__codelineno-0-133"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">repo</span><span class="o">.</span><span class="n">head</span><span class="o">.</span><span class="n">reset</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;origin/</span><span class="si">{</span><span class="n">branch</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">working_tree</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-0-134" name="__codelineno-0-134"></a>    <span class="n">commit_hexsha</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">repo</span><span class="o">.</span><span class="n">head</span><span class="o">.</span><span class="n">reference</span><span class="o">.</span><span class="n">commit</span><span class="o">.</span><span class="n">hexsha</span>
<a id="__codelineno-0-135" name="__codelineno-0-135"></a>    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Latest commit on branch `</span><span class="si">{</span><span class="n">branch</span><span class="si">}</span><span class="s2">` is `</span><span class="si">{</span><span class="n">commit_hexsha</span><span class="si">}</span><span class="s2">`&quot;</span><span class="p">)</span>
<a id="__codelineno-0-136" name="__codelineno-0-136"></a>    <span class="k">return</span> <span class="p">(</span><span class="n">commit_hexsha</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="nautobot.apps.utils.RoleModelsQuery" class="doc doc-heading">
          <code>nautobot.apps.utils.RoleModelsQuery</code>


<a href="#nautobot.apps.utils.RoleModelsQuery" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code><a class="autorefs autorefs-internal" title="nautobot.extras.utils.FeaturedQueryMixin" href="#nautobot.apps.utils.FeaturedQueryMixin">FeaturedQueryMixin</a></code></p>

  
      <p>Helper class to get ContentType models that implements role.</p>

            <details class="quote">
              <summary>Source code in <code>nautobot/extras/utils.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-181">181</a></span>
<span class="normal"><a href="#__codelineno-0-182">182</a></span>
<span class="normal"><a href="#__codelineno-0-183">183</a></span>
<span class="normal"><a href="#__codelineno-0-184">184</a></span>
<span class="normal"><a href="#__codelineno-0-185">185</a></span>
<span class="normal"><a href="#__codelineno-0-186">186</a></span>
<span class="normal"><a href="#__codelineno-0-187">187</a></span>
<span class="normal"><a href="#__codelineno-0-188">188</a></span>
<span class="normal"><a href="#__codelineno-0-189">189</a></span>
<span class="normal"><a href="#__codelineno-0-190">190</a></span>
<span class="normal"><a href="#__codelineno-0-191">191</a></span>
<span class="normal"><a href="#__codelineno-0-192">192</a></span>
<span class="normal"><a href="#__codelineno-0-193">193</a></span>
<span class="normal"><a href="#__codelineno-0-194">194</a></span>
<span class="normal"><a href="#__codelineno-0-195">195</a></span>
<span class="normal"><a href="#__codelineno-0-196">196</a></span>
<span class="normal"><a href="#__codelineno-0-197">197</a></span>
<span class="normal"><a href="#__codelineno-0-198">198</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-181" name="__codelineno-0-181"></a><span class="nd">@deconstructible</span>
<a id="__codelineno-0-182" name="__codelineno-0-182"></a><span class="k">class</span> <span class="nc">RoleModelsQuery</span><span class="p">(</span><span class="n">FeaturedQueryMixin</span><span class="p">):</span>
<a id="__codelineno-0-183" name="__codelineno-0-183"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-184" name="__codelineno-0-184"></a><span class="sd">    Helper class to get ContentType models that implements role.</span>
<a id="__codelineno-0-185" name="__codelineno-0-185"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-186" name="__codelineno-0-186"></a>
<a id="__codelineno-0-187" name="__codelineno-0-187"></a>    <span class="k">def</span> <span class="nf">list_subclasses</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-188" name="__codelineno-0-188"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-189" name="__codelineno-0-189"></a><span class="sd">        Return a list of classes that implements roles e.g roles = ...</span>
<a id="__codelineno-0-190" name="__codelineno-0-190"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-191" name="__codelineno-0-191"></a>        <span class="c1"># Avoid circular imports</span>
<a id="__codelineno-0-192" name="__codelineno-0-192"></a>        <span class="kn">from</span> <span class="nn">nautobot.extras.models.roles</span> <span class="kn">import</span> <span class="n">RoleField</span>
<a id="__codelineno-0-193" name="__codelineno-0-193"></a>
<a id="__codelineno-0-194" name="__codelineno-0-194"></a>        <span class="n">model_classes</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-195" name="__codelineno-0-195"></a>        <span class="k">for</span> <span class="n">model_class</span> <span class="ow">in</span> <span class="n">apps</span><span class="o">.</span><span class="n">get_models</span><span class="p">():</span>
<a id="__codelineno-0-196" name="__codelineno-0-196"></a>            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">model_class</span><span class="p">,</span> <span class="s2">&quot;role&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">model_class</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">get_field</span><span class="p">(</span><span class="s2">&quot;role&quot;</span><span class="p">),</span> <span class="n">RoleField</span><span class="p">):</span>
<a id="__codelineno-0-197" name="__codelineno-0-197"></a>                <span class="n">model_classes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">model_class</span><span class="p">)</span>
<a id="__codelineno-0-198" name="__codelineno-0-198"></a>        <span class="k">return</span> <span class="n">model_classes</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">










<div class="doc doc-object doc-function">



<h3 id="nautobot.extras.utils.RoleModelsQuery.list_subclasses" class="doc doc-heading">
<code class="highlight language-python"><span class="n">list_subclasses</span><span class="p">()</span></code>

<a href="#nautobot.extras.utils.RoleModelsQuery.list_subclasses" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Return a list of classes that implements roles e.g roles = ...</p>

          <details class="quote">
            <summary>Source code in <code>nautobot/extras/utils.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-187">187</a></span>
<span class="normal"><a href="#__codelineno-0-188">188</a></span>
<span class="normal"><a href="#__codelineno-0-189">189</a></span>
<span class="normal"><a href="#__codelineno-0-190">190</a></span>
<span class="normal"><a href="#__codelineno-0-191">191</a></span>
<span class="normal"><a href="#__codelineno-0-192">192</a></span>
<span class="normal"><a href="#__codelineno-0-193">193</a></span>
<span class="normal"><a href="#__codelineno-0-194">194</a></span>
<span class="normal"><a href="#__codelineno-0-195">195</a></span>
<span class="normal"><a href="#__codelineno-0-196">196</a></span>
<span class="normal"><a href="#__codelineno-0-197">197</a></span>
<span class="normal"><a href="#__codelineno-0-198">198</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-187" name="__codelineno-0-187"></a><span class="k">def</span> <span class="nf">list_subclasses</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-188" name="__codelineno-0-188"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-189" name="__codelineno-0-189"></a><span class="sd">    Return a list of classes that implements roles e.g roles = ...</span>
<a id="__codelineno-0-190" name="__codelineno-0-190"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-191" name="__codelineno-0-191"></a>    <span class="c1"># Avoid circular imports</span>
<a id="__codelineno-0-192" name="__codelineno-0-192"></a>    <span class="kn">from</span> <span class="nn">nautobot.extras.models.roles</span> <span class="kn">import</span> <span class="n">RoleField</span>
<a id="__codelineno-0-193" name="__codelineno-0-193"></a>
<a id="__codelineno-0-194" name="__codelineno-0-194"></a>    <span class="n">model_classes</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-195" name="__codelineno-0-195"></a>    <span class="k">for</span> <span class="n">model_class</span> <span class="ow">in</span> <span class="n">apps</span><span class="o">.</span><span class="n">get_models</span><span class="p">():</span>
<a id="__codelineno-0-196" name="__codelineno-0-196"></a>        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">model_class</span><span class="p">,</span> <span class="s2">&quot;role&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">model_class</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">get_field</span><span class="p">(</span><span class="s2">&quot;role&quot;</span><span class="p">),</span> <span class="n">RoleField</span><span class="p">):</span>
<a id="__codelineno-0-197" name="__codelineno-0-197"></a>            <span class="n">model_classes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">model_class</span><span class="p">)</span>
<a id="__codelineno-0-198" name="__codelineno-0-198"></a>    <span class="k">return</span> <span class="n">model_classes</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="nautobot.apps.utils.TaggableClassesQuery" class="doc doc-heading">
          <code>nautobot.apps.utils.TaggableClassesQuery</code>


<a href="#nautobot.apps.utils.TaggableClassesQuery" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code><a class="autorefs autorefs-internal" title="nautobot.extras.utils.FeaturedQueryMixin" href="#nautobot.apps.utils.FeaturedQueryMixin">FeaturedQueryMixin</a></code></p>

  
      <p>Helper class to get ContentType models that implements tags(TagsField)</p>

            <details class="quote">
              <summary>Source code in <code>nautobot/extras/utils.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-160">160</a></span>
<span class="normal"><a href="#__codelineno-0-161">161</a></span>
<span class="normal"><a href="#__codelineno-0-162">162</a></span>
<span class="normal"><a href="#__codelineno-0-163">163</a></span>
<span class="normal"><a href="#__codelineno-0-164">164</a></span>
<span class="normal"><a href="#__codelineno-0-165">165</a></span>
<span class="normal"><a href="#__codelineno-0-166">166</a></span>
<span class="normal"><a href="#__codelineno-0-167">167</a></span>
<span class="normal"><a href="#__codelineno-0-168">168</a></span>
<span class="normal"><a href="#__codelineno-0-169">169</a></span>
<span class="normal"><a href="#__codelineno-0-170">170</a></span>
<span class="normal"><a href="#__codelineno-0-171">171</a></span>
<span class="normal"><a href="#__codelineno-0-172">172</a></span>
<span class="normal"><a href="#__codelineno-0-173">173</a></span>
<span class="normal"><a href="#__codelineno-0-174">174</a></span>
<span class="normal"><a href="#__codelineno-0-175">175</a></span>
<span class="normal"><a href="#__codelineno-0-176">176</a></span>
<span class="normal"><a href="#__codelineno-0-177">177</a></span>
<span class="normal"><a href="#__codelineno-0-178">178</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-160" name="__codelineno-0-160"></a><span class="nd">@deconstructible</span>
<a id="__codelineno-0-161" name="__codelineno-0-161"></a><span class="k">class</span> <span class="nc">TaggableClassesQuery</span><span class="p">(</span><span class="n">FeaturedQueryMixin</span><span class="p">):</span>
<a id="__codelineno-0-162" name="__codelineno-0-162"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-163" name="__codelineno-0-163"></a><span class="sd">    Helper class to get ContentType models that implements tags(TagsField)</span>
<a id="__codelineno-0-164" name="__codelineno-0-164"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-165" name="__codelineno-0-165"></a>
<a id="__codelineno-0-166" name="__codelineno-0-166"></a>    <span class="k">def</span> <span class="nf">list_subclasses</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-167" name="__codelineno-0-167"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-168" name="__codelineno-0-168"></a><span class="sd">        Return a list of classes that has implements tags e.g tags = TagsField(...)</span>
<a id="__codelineno-0-169" name="__codelineno-0-169"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-170" name="__codelineno-0-170"></a>        <span class="k">return</span> <span class="p">[</span>
<a id="__codelineno-0-171" name="__codelineno-0-171"></a>            <span class="n">_class</span>
<a id="__codelineno-0-172" name="__codelineno-0-172"></a>            <span class="k">for</span> <span class="n">_class</span> <span class="ow">in</span> <span class="n">apps</span><span class="o">.</span><span class="n">get_models</span><span class="p">()</span>
<a id="__codelineno-0-173" name="__codelineno-0-173"></a>            <span class="k">if</span> <span class="p">(</span>
<a id="__codelineno-0-174" name="__codelineno-0-174"></a>                <span class="nb">hasattr</span><span class="p">(</span><span class="n">_class</span><span class="p">,</span> <span class="s2">&quot;tags&quot;</span><span class="p">)</span>
<a id="__codelineno-0-175" name="__codelineno-0-175"></a>                <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">_class</span><span class="o">.</span><span class="n">tags</span><span class="p">,</span> <span class="n">TagsManager</span><span class="p">)</span>
<a id="__codelineno-0-176" name="__codelineno-0-176"></a>                <span class="ow">and</span> <span class="s2">&quot;.tests.&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">_class</span><span class="o">.</span><span class="vm">__module__</span>  <span class="c1"># avoid leakage from nautobot.core.tests.test_filters</span>
<a id="__codelineno-0-177" name="__codelineno-0-177"></a>            <span class="p">)</span>
<a id="__codelineno-0-178" name="__codelineno-0-178"></a>        <span class="p">]</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">










<div class="doc doc-object doc-function">



<h3 id="nautobot.extras.utils.TaggableClassesQuery.list_subclasses" class="doc doc-heading">
<code class="highlight language-python"><span class="n">list_subclasses</span><span class="p">()</span></code>

<a href="#nautobot.extras.utils.TaggableClassesQuery.list_subclasses" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Return a list of classes that has implements tags e.g tags = TagsField(...)</p>

          <details class="quote">
            <summary>Source code in <code>nautobot/extras/utils.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-166">166</a></span>
<span class="normal"><a href="#__codelineno-0-167">167</a></span>
<span class="normal"><a href="#__codelineno-0-168">168</a></span>
<span class="normal"><a href="#__codelineno-0-169">169</a></span>
<span class="normal"><a href="#__codelineno-0-170">170</a></span>
<span class="normal"><a href="#__codelineno-0-171">171</a></span>
<span class="normal"><a href="#__codelineno-0-172">172</a></span>
<span class="normal"><a href="#__codelineno-0-173">173</a></span>
<span class="normal"><a href="#__codelineno-0-174">174</a></span>
<span class="normal"><a href="#__codelineno-0-175">175</a></span>
<span class="normal"><a href="#__codelineno-0-176">176</a></span>
<span class="normal"><a href="#__codelineno-0-177">177</a></span>
<span class="normal"><a href="#__codelineno-0-178">178</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-166" name="__codelineno-0-166"></a><span class="k">def</span> <span class="nf">list_subclasses</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-167" name="__codelineno-0-167"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-168" name="__codelineno-0-168"></a><span class="sd">    Return a list of classes that has implements tags e.g tags = TagsField(...)</span>
<a id="__codelineno-0-169" name="__codelineno-0-169"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-170" name="__codelineno-0-170"></a>    <span class="k">return</span> <span class="p">[</span>
<a id="__codelineno-0-171" name="__codelineno-0-171"></a>        <span class="n">_class</span>
<a id="__codelineno-0-172" name="__codelineno-0-172"></a>        <span class="k">for</span> <span class="n">_class</span> <span class="ow">in</span> <span class="n">apps</span><span class="o">.</span><span class="n">get_models</span><span class="p">()</span>
<a id="__codelineno-0-173" name="__codelineno-0-173"></a>        <span class="k">if</span> <span class="p">(</span>
<a id="__codelineno-0-174" name="__codelineno-0-174"></a>            <span class="nb">hasattr</span><span class="p">(</span><span class="n">_class</span><span class="p">,</span> <span class="s2">&quot;tags&quot;</span><span class="p">)</span>
<a id="__codelineno-0-175" name="__codelineno-0-175"></a>            <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">_class</span><span class="o">.</span><span class="n">tags</span><span class="p">,</span> <span class="n">TagsManager</span><span class="p">)</span>
<a id="__codelineno-0-176" name="__codelineno-0-176"></a>            <span class="ow">and</span> <span class="s2">&quot;.tests.&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">_class</span><span class="o">.</span><span class="vm">__module__</span>  <span class="c1"># avoid leakage from nautobot.core.tests.test_filters</span>
<a id="__codelineno-0-177" name="__codelineno-0-177"></a>        <span class="p">)</span>
<a id="__codelineno-0-178" name="__codelineno-0-178"></a>    <span class="p">]</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>

</div>



<div class="doc doc-object doc-function">



<h2 id="nautobot.apps.utils.build_lookup_label" class="doc doc-heading">
<code class="highlight language-python"><span class="n">nautobot</span><span class="o">.</span><span class="n">apps</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">build_lookup_label</span><span class="p">(</span><span class="n">field_name</span><span class="p">,</span> <span class="n">_verbose_name</span><span class="p">)</span></code>

<a href="#nautobot.apps.utils.build_lookup_label" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
  
      <p>Return lookup expr with its verbose name</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>field_name</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Field name e.g name__iew</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>_verbose_name</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The verbose name for the lookup expr which is suffixed to the field name e.g iew -&gt; iendswith</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



<p><strong>Examples:</strong></p>
    <div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">build_lookup_label</span><span class="p">(</span><span class="s2">&quot;name__iew&quot;</span><span class="p">,</span> <span class="s2">&quot;iendswith&quot;</span><span class="p">)</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="gp">&gt;&gt;&gt; </span><span class="s2">&quot;ends-with (iew)&quot;</span>
</code></pre></div>

          <details class="quote">
            <summary>Source code in <code>nautobot/core/utils/filtering.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-22">22</a></span>
<span class="normal"><a href="#__codelineno-0-23">23</a></span>
<span class="normal"><a href="#__codelineno-0-24">24</a></span>
<span class="normal"><a href="#__codelineno-0-25">25</a></span>
<span class="normal"><a href="#__codelineno-0-26">26</a></span>
<span class="normal"><a href="#__codelineno-0-27">27</a></span>
<span class="normal"><a href="#__codelineno-0-28">28</a></span>
<span class="normal"><a href="#__codelineno-0-29">29</a></span>
<span class="normal"><a href="#__codelineno-0-30">30</a></span>
<span class="normal"><a href="#__codelineno-0-31">31</a></span>
<span class="normal"><a href="#__codelineno-0-32">32</a></span>
<span class="normal"><a href="#__codelineno-0-33">33</a></span>
<span class="normal"><a href="#__codelineno-0-34">34</a></span>
<span class="normal"><a href="#__codelineno-0-35">35</a></span>
<span class="normal"><a href="#__codelineno-0-36">36</a></span>
<span class="normal"><a href="#__codelineno-0-37">37</a></span>
<span class="normal"><a href="#__codelineno-0-38">38</a></span>
<span class="normal"><a href="#__codelineno-0-39">39</a></span>
<span class="normal"><a href="#__codelineno-0-40">40</a></span>
<span class="normal"><a href="#__codelineno-0-41">41</a></span>
<span class="normal"><a href="#__codelineno-0-42">42</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-22" name="__codelineno-0-22"></a><span class="k">def</span> <span class="nf">build_lookup_label</span><span class="p">(</span><span class="n">field_name</span><span class="p">,</span> <span class="n">_verbose_name</span><span class="p">):</span>
<a id="__codelineno-0-23" name="__codelineno-0-23"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-24" name="__codelineno-0-24"></a><span class="sd">    Return lookup expr with its verbose name</span>
<a id="__codelineno-0-25" name="__codelineno-0-25"></a>
<a id="__codelineno-0-26" name="__codelineno-0-26"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-27" name="__codelineno-0-27"></a><span class="sd">        field_name (str): Field name e.g name__iew</span>
<a id="__codelineno-0-28" name="__codelineno-0-28"></a><span class="sd">        _verbose_name (str): The verbose name for the lookup expr which is suffixed to the field name e.g iew -&gt; iendswith</span>
<a id="__codelineno-0-29" name="__codelineno-0-29"></a>
<a id="__codelineno-0-30" name="__codelineno-0-30"></a><span class="sd">    Examples:</span>
<a id="__codelineno-0-31" name="__codelineno-0-31"></a><span class="sd">        &gt;&gt;&gt; build_lookup_label(&quot;name__iew&quot;, &quot;iendswith&quot;)</span>
<a id="__codelineno-0-32" name="__codelineno-0-32"></a><span class="sd">        &gt;&gt;&gt; &quot;ends-with (iew)&quot;</span>
<a id="__codelineno-0-33" name="__codelineno-0-33"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-34" name="__codelineno-0-34"></a>    <span class="n">verbose_name</span> <span class="o">=</span> <span class="n">verbose_lookup_expr</span><span class="p">(</span><span class="n">_verbose_name</span><span class="p">)</span> <span class="ow">or</span> <span class="s2">&quot;exact&quot;</span>
<a id="__codelineno-0-35" name="__codelineno-0-35"></a>    <span class="n">label</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
<a id="__codelineno-0-36" name="__codelineno-0-36"></a>    <span class="n">search</span> <span class="o">=</span> <span class="n">CONTAINS_LOOKUP_EXPR_RE</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">field_name</span><span class="p">)</span>
<a id="__codelineno-0-37" name="__codelineno-0-37"></a>    <span class="k">if</span> <span class="n">search</span><span class="p">:</span>
<a id="__codelineno-0-38" name="__codelineno-0-38"></a>        <span class="n">label</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot; (</span><span class="si">{</span><span class="n">search</span><span class="o">.</span><span class="n">group</span><span class="p">()</span><span class="si">}</span><span class="s2">)&quot;</span>
<a id="__codelineno-0-39" name="__codelineno-0-39"></a>
<a id="__codelineno-0-40" name="__codelineno-0-40"></a>    <span class="n">verbose_name</span> <span class="o">=</span> <span class="s2">&quot;not &quot;</span> <span class="o">+</span> <span class="n">verbose_name</span> <span class="k">if</span> <span class="n">label</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot; (n&quot;</span><span class="p">)</span> <span class="k">else</span> <span class="n">verbose_name</span>
<a id="__codelineno-0-41" name="__codelineno-0-41"></a>
<a id="__codelineno-0-42" name="__codelineno-0-42"></a>    <span class="k">return</span> <span class="n">verbose_name</span> <span class="o">+</span> <span class="n">label</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h2 id="nautobot.apps.utils.check_if_key_is_graphql_safe" class="doc doc-heading">
<code class="highlight language-python"><span class="n">nautobot</span><span class="o">.</span><span class="n">apps</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">check_if_key_is_graphql_safe</span><span class="p">(</span><span class="n">model_name</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">field_name</span><span class="o">=</span><span class="s1">&#39;key&#39;</span><span class="p">)</span></code>

<a href="#nautobot.apps.utils.check_if_key_is_graphql_safe" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
  
      <p>Helper method to check if a key field is Python/GraphQL safe.
Used in CustomField, ComputedField and Relationship models.</p>

          <details class="quote">
            <summary>Source code in <code>nautobot/extras/utils.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-475">475</a></span>
<span class="normal"><a href="#__codelineno-0-476">476</a></span>
<span class="normal"><a href="#__codelineno-0-477">477</a></span>
<span class="normal"><a href="#__codelineno-0-478">478</a></span>
<span class="normal"><a href="#__codelineno-0-479">479</a></span>
<span class="normal"><a href="#__codelineno-0-480">480</a></span>
<span class="normal"><a href="#__codelineno-0-481">481</a></span>
<span class="normal"><a href="#__codelineno-0-482">482</a></span>
<span class="normal"><a href="#__codelineno-0-483">483</a></span>
<span class="normal"><a href="#__codelineno-0-484">484</a></span>
<span class="normal"><a href="#__codelineno-0-485">485</a></span>
<span class="normal"><a href="#__codelineno-0-486">486</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-475" name="__codelineno-0-475"></a><span class="k">def</span> <span class="nf">check_if_key_is_graphql_safe</span><span class="p">(</span><span class="n">model_name</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">field_name</span><span class="o">=</span><span class="s2">&quot;key&quot;</span><span class="p">):</span>
<a id="__codelineno-0-476" name="__codelineno-0-476"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-477" name="__codelineno-0-477"></a><span class="sd">    Helper method to check if a key field is Python/GraphQL safe.</span>
<a id="__codelineno-0-478" name="__codelineno-0-478"></a><span class="sd">    Used in CustomField, ComputedField and Relationship models.</span>
<a id="__codelineno-0-479" name="__codelineno-0-479"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-480" name="__codelineno-0-480"></a>    <span class="n">graphql_safe_pattern</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s2">&quot;[_A-Za-z][_0-9A-Za-z]*&quot;</span><span class="p">)</span>
<a id="__codelineno-0-481" name="__codelineno-0-481"></a>    <span class="k">if</span> <span class="ow">not</span> <span class="n">graphql_safe_pattern</span><span class="o">.</span><span class="n">fullmatch</span><span class="p">(</span><span class="n">key</span><span class="p">):</span>
<a id="__codelineno-0-482" name="__codelineno-0-482"></a>        <span class="k">raise</span> <span class="n">ValidationError</span><span class="p">(</span>
<a id="__codelineno-0-483" name="__codelineno-0-483"></a>            <span class="p">{</span>
<a id="__codelineno-0-484" name="__codelineno-0-484"></a>                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">field_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;This </span><span class="si">{</span><span class="n">field_name</span><span class="si">}</span><span class="s2"> is not Python/GraphQL safe. Please do not start the </span><span class="si">{</span><span class="n">field_name</span><span class="si">}</span><span class="s2"> with a digit and do not use hyphens or whitespace&quot;</span>
<a id="__codelineno-0-485" name="__codelineno-0-485"></a>            <span class="p">}</span>
<a id="__codelineno-0-486" name="__codelineno-0-486"></a>        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h2 id="nautobot.apps.utils.class_deprecated" class="doc doc-heading">
<code class="highlight language-python"><span class="n">nautobot</span><span class="o">.</span><span class="n">apps</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">class_deprecated</span><span class="p">(</span><span class="n">message</span><span class="p">)</span></code>

<a href="#nautobot.apps.utils.class_deprecated" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
  
      <p>Decorator to mark a class as deprecated with a custom message about what to do instead of subclassing it.</p>

          <details class="quote">
            <summary>Source code in <code>nautobot/core/utils/deprecation.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-12">12</a></span>
<span class="normal"><a href="#__codelineno-0-13">13</a></span>
<span class="normal"><a href="#__codelineno-0-14">14</a></span>
<span class="normal"><a href="#__codelineno-0-15">15</a></span>
<span class="normal"><a href="#__codelineno-0-16">16</a></span>
<span class="normal"><a href="#__codelineno-0-17">17</a></span>
<span class="normal"><a href="#__codelineno-0-18">18</a></span>
<span class="normal"><a href="#__codelineno-0-19">19</a></span>
<span class="normal"><a href="#__codelineno-0-20">20</a></span>
<span class="normal"><a href="#__codelineno-0-21">21</a></span>
<span class="normal"><a href="#__codelineno-0-22">22</a></span>
<span class="normal"><a href="#__codelineno-0-23">23</a></span>
<span class="normal"><a href="#__codelineno-0-24">24</a></span>
<span class="normal"><a href="#__codelineno-0-25">25</a></span>
<span class="normal"><a href="#__codelineno-0-26">26</a></span>
<span class="normal"><a href="#__codelineno-0-27">27</a></span>
<span class="normal"><a href="#__codelineno-0-28">28</a></span>
<span class="normal"><a href="#__codelineno-0-29">29</a></span>
<span class="normal"><a href="#__codelineno-0-30">30</a></span>
<span class="normal"><a href="#__codelineno-0-31">31</a></span>
<span class="normal"><a href="#__codelineno-0-32">32</a></span>
<span class="normal"><a href="#__codelineno-0-33">33</a></span>
<span class="normal"><a href="#__codelineno-0-34">34</a></span>
<span class="normal"><a href="#__codelineno-0-35">35</a></span>
<span class="normal"><a href="#__codelineno-0-36">36</a></span>
<span class="normal"><a href="#__codelineno-0-37">37</a></span>
<span class="normal"><a href="#__codelineno-0-38">38</a></span>
<span class="normal"><a href="#__codelineno-0-39">39</a></span>
<span class="normal"><a href="#__codelineno-0-40">40</a></span>
<span class="normal"><a href="#__codelineno-0-41">41</a></span>
<span class="normal"><a href="#__codelineno-0-42">42</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-12" name="__codelineno-0-12"></a><span class="k">def</span> <span class="nf">class_deprecated</span><span class="p">(</span><span class="n">message</span><span class="p">):</span>
<a id="__codelineno-0-13" name="__codelineno-0-13"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Decorator to mark a class as deprecated with a custom message about what to do instead of subclassing it.&quot;&quot;&quot;</span>
<a id="__codelineno-0-14" name="__codelineno-0-14"></a>
<a id="__codelineno-0-15" name="__codelineno-0-15"></a>    <span class="k">def</span> <span class="nf">decorate</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
<a id="__codelineno-0-16" name="__codelineno-0-16"></a>        <span class="k">def</span> <span class="nf">init_subclass</span><span class="p">(</span><span class="n">new_subclass</span><span class="p">):</span>
<a id="__codelineno-0-17" name="__codelineno-0-17"></a>            <span class="c1"># Walk the stack up to the class declaration in question.</span>
<a id="__codelineno-0-18" name="__codelineno-0-18"></a>            <span class="n">stacklevel</span> <span class="o">=</span> <span class="mi">0</span>
<a id="__codelineno-0-19" name="__codelineno-0-19"></a>            <span class="k">for</span> <span class="n">fs</span> <span class="ow">in</span> <span class="nb">reversed</span><span class="p">(</span><span class="n">traceback</span><span class="o">.</span><span class="n">extract_stack</span><span class="p">()):</span>
<a id="__codelineno-0-20" name="__codelineno-0-20"></a>                <span class="n">stacklevel</span> <span class="o">+=</span> <span class="mi">1</span>
<a id="__codelineno-0-21" name="__codelineno-0-21"></a>                <span class="k">if</span> <span class="n">new_subclass</span><span class="o">.</span><span class="vm">__name__</span> <span class="ow">in</span> <span class="n">fs</span><span class="o">.</span><span class="n">line</span><span class="p">:</span>
<a id="__codelineno-0-22" name="__codelineno-0-22"></a>                    <span class="k">break</span>
<a id="__codelineno-0-23" name="__codelineno-0-23"></a>            <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-24" name="__codelineno-0-24"></a>                <span class="n">stacklevel</span> <span class="o">=</span> <span class="mi">1</span>
<a id="__codelineno-0-25" name="__codelineno-0-25"></a>            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
<a id="__codelineno-0-26" name="__codelineno-0-26"></a>                <span class="sa">f</span><span class="s2">&quot;Class </span><span class="si">{</span><span class="bp">cls</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2"> is deprecated, and will be removed in a future Nautobot release. &quot;</span>
<a id="__codelineno-0-27" name="__codelineno-0-27"></a>                <span class="sa">f</span><span class="s2">&quot;Instead of deriving </span><span class="si">{</span><span class="n">new_subclass</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2"> from </span><span class="si">{</span><span class="bp">cls</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">message</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">,</span>
<a id="__codelineno-0-28" name="__codelineno-0-28"></a>                <span class="ne">DeprecationWarning</span><span class="p">,</span>
<a id="__codelineno-0-29" name="__codelineno-0-29"></a>                <span class="n">stacklevel</span><span class="o">=</span><span class="n">stacklevel</span><span class="p">,</span>
<a id="__codelineno-0-30" name="__codelineno-0-30"></a>            <span class="p">)</span>
<a id="__codelineno-0-31" name="__codelineno-0-31"></a>            <span class="k">if</span> <span class="n">LOG_DEPRECATION_WARNINGS</span><span class="p">:</span>
<a id="__codelineno-0-32" name="__codelineno-0-32"></a>                <span class="c1"># Since DeprecationWarnings are silenced by default, also log a traditional warning.</span>
<a id="__codelineno-0-33" name="__codelineno-0-33"></a>                <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
<a id="__codelineno-0-34" name="__codelineno-0-34"></a>                    <span class="sa">f</span><span class="s2">&quot;Class </span><span class="si">{</span><span class="bp">cls</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2"> is deprecated, and will be removed in a future Nautobot release. &quot;</span>
<a id="__codelineno-0-35" name="__codelineno-0-35"></a>                    <span class="sa">f</span><span class="s2">&quot;Instead of deriving </span><span class="si">{</span><span class="n">new_subclass</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2"> from </span><span class="si">{</span><span class="bp">cls</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">message</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">,</span>
<a id="__codelineno-0-36" name="__codelineno-0-36"></a>                    <span class="n">stacklevel</span><span class="o">=</span><span class="n">stacklevel</span><span class="p">,</span>
<a id="__codelineno-0-37" name="__codelineno-0-37"></a>                <span class="p">)</span>
<a id="__codelineno-0-38" name="__codelineno-0-38"></a>
<a id="__codelineno-0-39" name="__codelineno-0-39"></a>        <span class="bp">cls</span><span class="o">.</span><span class="n">__init_subclass__</span> <span class="o">=</span> <span class="nb">classmethod</span><span class="p">(</span><span class="n">init_subclass</span><span class="p">)</span>
<a id="__codelineno-0-40" name="__codelineno-0-40"></a>        <span class="k">return</span> <span class="bp">cls</span>
<a id="__codelineno-0-41" name="__codelineno-0-41"></a>
<a id="__codelineno-0-42" name="__codelineno-0-42"></a>    <span class="k">return</span> <span class="n">decorate</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h2 id="nautobot.apps.utils.class_deprecated_in_favor_of" class="doc doc-heading">
<code class="highlight language-python"><span class="n">nautobot</span><span class="o">.</span><span class="n">apps</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">class_deprecated_in_favor_of</span><span class="p">(</span><span class="n">replacement_class</span><span class="p">)</span></code>

<a href="#nautobot.apps.utils.class_deprecated_in_favor_of" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
  
      <p>Decorator to mark a class as deprecated and suggest a replacement class if it is subclassed from.</p>

          <details class="quote">
            <summary>Source code in <code>nautobot/core/utils/deprecation.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-45">45</a></span>
<span class="normal"><a href="#__codelineno-0-46">46</a></span>
<span class="normal"><a href="#__codelineno-0-47">47</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-45" name="__codelineno-0-45"></a><span class="k">def</span> <span class="nf">class_deprecated_in_favor_of</span><span class="p">(</span><span class="n">replacement_class</span><span class="p">):</span>
<a id="__codelineno-0-46" name="__codelineno-0-46"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Decorator to mark a class as deprecated and suggest a replacement class if it is subclassed from.&quot;&quot;&quot;</span>
<a id="__codelineno-0-47" name="__codelineno-0-47"></a>    <span class="k">return</span> <span class="n">class_deprecated</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;please migrate your code to inherit from class </span><span class="si">{</span><span class="n">replacement_class</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2"> instead&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h2 id="nautobot.apps.utils.convert_git_diff_log_to_list" class="doc doc-heading">
<code class="highlight language-python"><span class="n">nautobot</span><span class="o">.</span><span class="n">apps</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">convert_git_diff_log_to_list</span><span class="p">(</span><span class="n">logs</span><span class="p">)</span></code>

<a href="#nautobot.apps.utils.convert_git_diff_log_to_list" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
  
      <div class="highlight"><pre><span></span><code>Convert Git diff log into a list splitted by \n

Example:
    &gt;&gt;&gt; git_log = &quot;M        index.html
</code></pre></div>
<p>R       sample.txt"
        &gt;&gt;&gt; print(convert_git_diff_log_to_list(git_log))
        ["Modification - index.html", "Renaming - sample.txt"]</p>

          <details class="quote">
            <summary>Source code in <code>nautobot/core/utils/git.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-39">39</a></span>
<span class="normal"><a href="#__codelineno-0-40">40</a></span>
<span class="normal"><a href="#__codelineno-0-41">41</a></span>
<span class="normal"><a href="#__codelineno-0-42">42</a></span>
<span class="normal"><a href="#__codelineno-0-43">43</a></span>
<span class="normal"><a href="#__codelineno-0-44">44</a></span>
<span class="normal"><a href="#__codelineno-0-45">45</a></span>
<span class="normal"><a href="#__codelineno-0-46">46</a></span>
<span class="normal"><a href="#__codelineno-0-47">47</a></span>
<span class="normal"><a href="#__codelineno-0-48">48</a></span>
<span class="normal"><a href="#__codelineno-0-49">49</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-39" name="__codelineno-0-39"></a><span class="k">def</span> <span class="nf">convert_git_diff_log_to_list</span><span class="p">(</span><span class="n">logs</span><span class="p">):</span>
<a id="__codelineno-0-40" name="__codelineno-0-40"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-41" name="__codelineno-0-41"></a><span class="sd">    Convert Git diff log into a list splitted by \\n</span>
<a id="__codelineno-0-42" name="__codelineno-0-42"></a>
<a id="__codelineno-0-43" name="__codelineno-0-43"></a><span class="sd">    Example:</span>
<a id="__codelineno-0-44" name="__codelineno-0-44"></a><span class="sd">        &gt;&gt;&gt; git_log = &quot;M\tindex.html\nR\tsample.txt&quot;</span>
<a id="__codelineno-0-45" name="__codelineno-0-45"></a><span class="sd">        &gt;&gt;&gt; print(convert_git_diff_log_to_list(git_log))</span>
<a id="__codelineno-0-46" name="__codelineno-0-46"></a><span class="sd">        [&quot;Modification - index.html&quot;, &quot;Renaming - sample.txt&quot;]</span>
<a id="__codelineno-0-47" name="__codelineno-0-47"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-48" name="__codelineno-0-48"></a>    <span class="n">logs</span> <span class="o">=</span> <span class="n">logs</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-49" name="__codelineno-0-49"></a>    <span class="k">return</span> <span class="p">[</span><span class="n">swap_status_initials</span><span class="p">(</span><span class="n">line</span><span class="p">)</span> <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">logs</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h2 id="nautobot.apps.utils.convert_querydict_to_factory_formset_acceptable_querydict" class="doc doc-heading">
<code class="highlight language-python"><span class="n">nautobot</span><span class="o">.</span><span class="n">apps</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">convert_querydict_to_factory_formset_acceptable_querydict</span><span class="p">(</span><span class="n">request_querydict</span><span class="p">,</span> <span class="n">filterset</span><span class="p">)</span></code>

<a href="#nautobot.apps.utils.convert_querydict_to_factory_formset_acceptable_querydict" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
  
      <p>Convert request QueryDict/GET into an acceptable factory formset QueryDict
while discarding <code>querydict</code> params which are not part of <code>filterset_class</code> params</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>request_querydict</code></td>
          <td>
                <code><span title="django.http.QueryDict">QueryDict</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>QueryDict to convert</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>filterset</code></td>
          <td>
                <code>FilterSet</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Filterset class</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



<p><strong>Examples:</strong></p>
    <div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">convert_querydict_to_factory_formset_acceptable_querydict</span><span class="p">({</span><span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;active&quot;</span><span class="p">,</span> <span class="s2">&quot;decommissioning&quot;</span><span class="p">],</span> <span class="s2">&quot;name__ic&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;location&quot;</span><span class="p">]},)</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="gp">&gt;&gt;&gt; </span><span class="p">{</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="gp">... </span>    <span class="s1">&#39;form-TOTAL_FORMS&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">3</span><span class="p">],</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="gp">... </span>    <span class="s1">&#39;form-INITIAL_FORMS&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;0&#39;</span><span class="p">],</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="gp">... </span>    <span class="s1">&#39;form-MIN_NUM_FORMS&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;&#39;</span><span class="p">],</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="gp">... </span>    <span class="s1">&#39;form-MAX_NUM_FORMS&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;&#39;</span><span class="p">],</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="gp">... </span>    <span class="s1">&#39;form-0-lookup_field&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;status&#39;</span><span class="p">],</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="gp">... </span>    <span class="s1">&#39;form-0-lookup_type&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;status&#39;</span><span class="p">],</span>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a><span class="gp">... </span>    <span class="s1">&#39;form-0-value&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;active&#39;</span><span class="p">,</span> <span class="s1">&#39;decommissioning&#39;</span><span class="p">],</span>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a><span class="gp">... </span>    <span class="s1">&#39;form-1-lookup_field&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">],</span>
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a><span class="gp">... </span>    <span class="s1">&#39;form-1-lookup_type&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;name__ic&#39;</span><span class="p">],</span>
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a><span class="gp">... </span>    <span class="s1">&#39;form-1-value&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;location&#39;</span><span class="p">]</span>
<a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a><span class="gp">... </span><span class="p">}</span>
</code></pre></div>

          <details class="quote">
            <summary>Source code in <code>nautobot/core/utils/requests.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-13">13</a></span>
<span class="normal"><a href="#__codelineno-0-14">14</a></span>
<span class="normal"><a href="#__codelineno-0-15">15</a></span>
<span class="normal"><a href="#__codelineno-0-16">16</a></span>
<span class="normal"><a href="#__codelineno-0-17">17</a></span>
<span class="normal"><a href="#__codelineno-0-18">18</a></span>
<span class="normal"><a href="#__codelineno-0-19">19</a></span>
<span class="normal"><a href="#__codelineno-0-20">20</a></span>
<span class="normal"><a href="#__codelineno-0-21">21</a></span>
<span class="normal"><a href="#__codelineno-0-22">22</a></span>
<span class="normal"><a href="#__codelineno-0-23">23</a></span>
<span class="normal"><a href="#__codelineno-0-24">24</a></span>
<span class="normal"><a href="#__codelineno-0-25">25</a></span>
<span class="normal"><a href="#__codelineno-0-26">26</a></span>
<span class="normal"><a href="#__codelineno-0-27">27</a></span>
<span class="normal"><a href="#__codelineno-0-28">28</a></span>
<span class="normal"><a href="#__codelineno-0-29">29</a></span>
<span class="normal"><a href="#__codelineno-0-30">30</a></span>
<span class="normal"><a href="#__codelineno-0-31">31</a></span>
<span class="normal"><a href="#__codelineno-0-32">32</a></span>
<span class="normal"><a href="#__codelineno-0-33">33</a></span>
<span class="normal"><a href="#__codelineno-0-34">34</a></span>
<span class="normal"><a href="#__codelineno-0-35">35</a></span>
<span class="normal"><a href="#__codelineno-0-36">36</a></span>
<span class="normal"><a href="#__codelineno-0-37">37</a></span>
<span class="normal"><a href="#__codelineno-0-38">38</a></span>
<span class="normal"><a href="#__codelineno-0-39">39</a></span>
<span class="normal"><a href="#__codelineno-0-40">40</a></span>
<span class="normal"><a href="#__codelineno-0-41">41</a></span>
<span class="normal"><a href="#__codelineno-0-42">42</a></span>
<span class="normal"><a href="#__codelineno-0-43">43</a></span>
<span class="normal"><a href="#__codelineno-0-44">44</a></span>
<span class="normal"><a href="#__codelineno-0-45">45</a></span>
<span class="normal"><a href="#__codelineno-0-46">46</a></span>
<span class="normal"><a href="#__codelineno-0-47">47</a></span>
<span class="normal"><a href="#__codelineno-0-48">48</a></span>
<span class="normal"><a href="#__codelineno-0-49">49</a></span>
<span class="normal"><a href="#__codelineno-0-50">50</a></span>
<span class="normal"><a href="#__codelineno-0-51">51</a></span>
<span class="normal"><a href="#__codelineno-0-52">52</a></span>
<span class="normal"><a href="#__codelineno-0-53">53</a></span>
<span class="normal"><a href="#__codelineno-0-54">54</a></span>
<span class="normal"><a href="#__codelineno-0-55">55</a></span>
<span class="normal"><a href="#__codelineno-0-56">56</a></span>
<span class="normal"><a href="#__codelineno-0-57">57</a></span>
<span class="normal"><a href="#__codelineno-0-58">58</a></span>
<span class="normal"><a href="#__codelineno-0-59">59</a></span>
<span class="normal"><a href="#__codelineno-0-60">60</a></span>
<span class="normal"><a href="#__codelineno-0-61">61</a></span>
<span class="normal"><a href="#__codelineno-0-62">62</a></span>
<span class="normal"><a href="#__codelineno-0-63">63</a></span>
<span class="normal"><a href="#__codelineno-0-64">64</a></span>
<span class="normal"><a href="#__codelineno-0-65">65</a></span>
<span class="normal"><a href="#__codelineno-0-66">66</a></span>
<span class="normal"><a href="#__codelineno-0-67">67</a></span>
<span class="normal"><a href="#__codelineno-0-68">68</a></span>
<span class="normal"><a href="#__codelineno-0-69">69</a></span>
<span class="normal"><a href="#__codelineno-0-70">70</a></span>
<span class="normal"><a href="#__codelineno-0-71">71</a></span>
<span class="normal"><a href="#__codelineno-0-72">72</a></span>
<span class="normal"><a href="#__codelineno-0-73">73</a></span>
<span class="normal"><a href="#__codelineno-0-74">74</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-13" name="__codelineno-0-13"></a><span class="k">def</span> <span class="nf">convert_querydict_to_factory_formset_acceptable_querydict</span><span class="p">(</span><span class="n">request_querydict</span><span class="p">,</span> <span class="n">filterset</span><span class="p">):</span>
<a id="__codelineno-0-14" name="__codelineno-0-14"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-15" name="__codelineno-0-15"></a><span class="sd">    Convert request QueryDict/GET into an acceptable factory formset QueryDict</span>
<a id="__codelineno-0-16" name="__codelineno-0-16"></a><span class="sd">    while discarding `querydict` params which are not part of `filterset_class` params</span>
<a id="__codelineno-0-17" name="__codelineno-0-17"></a>
<a id="__codelineno-0-18" name="__codelineno-0-18"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-19" name="__codelineno-0-19"></a><span class="sd">        request_querydict (QueryDict): QueryDict to convert</span>
<a id="__codelineno-0-20" name="__codelineno-0-20"></a><span class="sd">        filterset (FilterSet): Filterset class</span>
<a id="__codelineno-0-21" name="__codelineno-0-21"></a>
<a id="__codelineno-0-22" name="__codelineno-0-22"></a><span class="sd">    Examples:</span>
<a id="__codelineno-0-23" name="__codelineno-0-23"></a><span class="sd">        &gt;&gt;&gt; convert_querydict_to_factory_formset_acceptable_querydict({&quot;status&quot;: [&quot;active&quot;, &quot;decommissioning&quot;], &quot;name__ic&quot;: [&quot;location&quot;]},)</span>
<a id="__codelineno-0-24" name="__codelineno-0-24"></a><span class="sd">        &gt;&gt;&gt; {</span>
<a id="__codelineno-0-25" name="__codelineno-0-25"></a><span class="sd">        ...     &#39;form-TOTAL_FORMS&#39;: [3],</span>
<a id="__codelineno-0-26" name="__codelineno-0-26"></a><span class="sd">        ...     &#39;form-INITIAL_FORMS&#39;: [&#39;0&#39;],</span>
<a id="__codelineno-0-27" name="__codelineno-0-27"></a><span class="sd">        ...     &#39;form-MIN_NUM_FORMS&#39;: [&#39;&#39;],</span>
<a id="__codelineno-0-28" name="__codelineno-0-28"></a><span class="sd">        ...     &#39;form-MAX_NUM_FORMS&#39;: [&#39;&#39;],</span>
<a id="__codelineno-0-29" name="__codelineno-0-29"></a><span class="sd">        ...     &#39;form-0-lookup_field&#39;: [&#39;status&#39;],</span>
<a id="__codelineno-0-30" name="__codelineno-0-30"></a><span class="sd">        ...     &#39;form-0-lookup_type&#39;: [&#39;status&#39;],</span>
<a id="__codelineno-0-31" name="__codelineno-0-31"></a><span class="sd">        ...     &#39;form-0-value&#39;: [&#39;active&#39;, &#39;decommissioning&#39;],</span>
<a id="__codelineno-0-32" name="__codelineno-0-32"></a><span class="sd">        ...     &#39;form-1-lookup_field&#39;: [&#39;name&#39;],</span>
<a id="__codelineno-0-33" name="__codelineno-0-33"></a><span class="sd">        ...     &#39;form-1-lookup_type&#39;: [&#39;name__ic&#39;],</span>
<a id="__codelineno-0-34" name="__codelineno-0-34"></a><span class="sd">        ...     &#39;form-1-value&#39;: [&#39;location&#39;]</span>
<a id="__codelineno-0-35" name="__codelineno-0-35"></a><span class="sd">        ... }</span>
<a id="__codelineno-0-36" name="__codelineno-0-36"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-37" name="__codelineno-0-37"></a>    <span class="n">query_dict</span> <span class="o">=</span> <span class="n">QueryDict</span><span class="p">(</span><span class="n">mutable</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-0-38" name="__codelineno-0-38"></a>    <span class="n">filterset_class_fields</span> <span class="o">=</span> <span class="n">filterset</span><span class="o">.</span><span class="n">filters</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
<a id="__codelineno-0-39" name="__codelineno-0-39"></a>
<a id="__codelineno-0-40" name="__codelineno-0-40"></a>    <span class="n">query_dict</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s2">&quot;form-INITIAL_FORMS&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<a id="__codelineno-0-41" name="__codelineno-0-41"></a>    <span class="n">query_dict</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s2">&quot;form-MIN_NUM_FORMS&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<a id="__codelineno-0-42" name="__codelineno-0-42"></a>    <span class="n">query_dict</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s2">&quot;form-MAX_NUM_FORMS&quot;</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
<a id="__codelineno-0-43" name="__codelineno-0-43"></a>
<a id="__codelineno-0-44" name="__codelineno-0-44"></a>    <span class="n">lookup_field_placeholder</span> <span class="o">=</span> <span class="s2">&quot;form-</span><span class="si">%d</span><span class="s2">-lookup_field&quot;</span>
<a id="__codelineno-0-45" name="__codelineno-0-45"></a>    <span class="n">lookup_type_placeholder</span> <span class="o">=</span> <span class="s2">&quot;form-</span><span class="si">%d</span><span class="s2">-lookup_type&quot;</span>
<a id="__codelineno-0-46" name="__codelineno-0-46"></a>    <span class="n">lookup_value_placeholder</span> <span class="o">=</span> <span class="s2">&quot;form-</span><span class="si">%d</span><span class="s2">-lookup_value&quot;</span>
<a id="__codelineno-0-47" name="__codelineno-0-47"></a>
<a id="__codelineno-0-48" name="__codelineno-0-48"></a>    <span class="n">num</span> <span class="o">=</span> <span class="mi">0</span>
<a id="__codelineno-0-49" name="__codelineno-0-49"></a>    <span class="n">request_querydict</span> <span class="o">=</span> <span class="n">request_querydict</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<a id="__codelineno-0-50" name="__codelineno-0-50"></a>    <span class="n">request_querydict</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;q&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
<a id="__codelineno-0-51" name="__codelineno-0-51"></a>    <span class="k">for</span> <span class="n">filter_field_name</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">request_querydict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
<a id="__codelineno-0-52" name="__codelineno-0-52"></a>        <span class="c1"># Discard fields without values</span>
<a id="__codelineno-0-53" name="__codelineno-0-53"></a>        <span class="k">if</span> <span class="n">value</span><span class="p">:</span>
<a id="__codelineno-0-54" name="__codelineno-0-54"></a>            <span class="k">if</span> <span class="n">filter_field_name</span> <span class="ow">in</span> <span class="n">filterset_class_fields</span><span class="p">:</span>
<a id="__codelineno-0-55" name="__codelineno-0-55"></a>                <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">filterset</span><span class="o">.</span><span class="n">filters</span><span class="p">[</span><span class="n">filter_field_name</span><span class="p">],</span> <span class="s2">&quot;relationship&quot;</span><span class="p">):</span>
<a id="__codelineno-0-56" name="__codelineno-0-56"></a>                    <span class="n">lookup_field</span> <span class="o">=</span> <span class="n">filter_field_name</span>
<a id="__codelineno-0-57" name="__codelineno-0-57"></a>                <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-58" name="__codelineno-0-58"></a>                    <span class="c1"># convert_querydict_to_factory_formset_acceptable_querydict expects to have a QueryDict as input</span>
<a id="__codelineno-0-59" name="__codelineno-0-59"></a>                    <span class="c1"># which means we may not have the exact field name as defined in the filterset class</span>
<a id="__codelineno-0-60" name="__codelineno-0-60"></a>                    <span class="c1"># it may contain a lookup expression (e.g. `name__ic`), so we need to strip it</span>
<a id="__codelineno-0-61" name="__codelineno-0-61"></a>                    <span class="c1"># this is so we can select the correct field in the formset for the &quot;field&quot; column</span>
<a id="__codelineno-0-62" name="__codelineno-0-62"></a>                    <span class="c1"># TODO: Since we likely need to instantiate the filterset class early in the request anyway</span>
<a id="__codelineno-0-63" name="__codelineno-0-63"></a>                    <span class="c1"># the filterset can handle the QueryDict conversion and we can just pass the QueryDict to the filterset</span>
<a id="__codelineno-0-64" name="__codelineno-0-64"></a>                    <span class="c1"># then use the FilterSet to de-dupe the field names</span>
<a id="__codelineno-0-65" name="__codelineno-0-65"></a>                    <span class="n">lookup_field</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;__\w+&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">filter_field_name</span><span class="p">)</span>
<a id="__codelineno-0-66" name="__codelineno-0-66"></a>                <span class="n">lookup_value</span> <span class="o">=</span> <span class="n">request_querydict</span><span class="o">.</span><span class="n">getlist</span><span class="p">(</span><span class="n">filter_field_name</span><span class="p">)</span>
<a id="__codelineno-0-67" name="__codelineno-0-67"></a>
<a id="__codelineno-0-68" name="__codelineno-0-68"></a>                <span class="n">query_dict</span><span class="o">.</span><span class="n">setlistdefault</span><span class="p">(</span><span class="n">lookup_field_placeholder</span> <span class="o">%</span> <span class="n">num</span><span class="p">,</span> <span class="p">[</span><span class="n">lookup_field</span><span class="p">])</span>
<a id="__codelineno-0-69" name="__codelineno-0-69"></a>                <span class="n">query_dict</span><span class="o">.</span><span class="n">setlistdefault</span><span class="p">(</span><span class="n">lookup_type_placeholder</span> <span class="o">%</span> <span class="n">num</span><span class="p">,</span> <span class="p">[</span><span class="n">filter_field_name</span><span class="p">])</span>
<a id="__codelineno-0-70" name="__codelineno-0-70"></a>                <span class="n">query_dict</span><span class="o">.</span><span class="n">setlistdefault</span><span class="p">(</span><span class="n">lookup_value_placeholder</span> <span class="o">%</span> <span class="n">num</span><span class="p">,</span> <span class="n">lookup_value</span><span class="p">)</span>
<a id="__codelineno-0-71" name="__codelineno-0-71"></a>                <span class="n">num</span> <span class="o">+=</span> <span class="mi">1</span>
<a id="__codelineno-0-72" name="__codelineno-0-72"></a>
<a id="__codelineno-0-73" name="__codelineno-0-73"></a>    <span class="n">query_dict</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s2">&quot;form-TOTAL_FORMS&quot;</span><span class="p">,</span> <span class="nb">max</span><span class="p">(</span><span class="n">num</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
<a id="__codelineno-0-74" name="__codelineno-0-74"></a>    <span class="k">return</span> <span class="n">query_dict</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h2 id="nautobot.apps.utils.custom_validator_clean" class="doc doc-heading">
<code class="highlight language-python"><span class="n">nautobot</span><span class="o">.</span><span class="n">apps</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">custom_validator_clean</span><span class="p">(</span><span class="n">model_clean_func</span><span class="p">)</span></code>

<a href="#nautobot.apps.utils.custom_validator_clean" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
  
      <p>Decorator that wraps a models existing clean method to also execute registered plugin custom validators</p>
<p>:param model_clean_func: The original model clean method which is to be wrapped</p>

          <details class="quote">
            <summary>Source code in <code>nautobot/extras/plugins/validators.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-10">10</a></span>
<span class="normal"><a href="#__codelineno-0-11">11</a></span>
<span class="normal"><a href="#__codelineno-0-12">12</a></span>
<span class="normal"><a href="#__codelineno-0-13">13</a></span>
<span class="normal"><a href="#__codelineno-0-14">14</a></span>
<span class="normal"><a href="#__codelineno-0-15">15</a></span>
<span class="normal"><a href="#__codelineno-0-16">16</a></span>
<span class="normal"><a href="#__codelineno-0-17">17</a></span>
<span class="normal"><a href="#__codelineno-0-18">18</a></span>
<span class="normal"><a href="#__codelineno-0-19">19</a></span>
<span class="normal"><a href="#__codelineno-0-20">20</a></span>
<span class="normal"><a href="#__codelineno-0-21">21</a></span>
<span class="normal"><a href="#__codelineno-0-22">22</a></span>
<span class="normal"><a href="#__codelineno-0-23">23</a></span>
<span class="normal"><a href="#__codelineno-0-24">24</a></span>
<span class="normal"><a href="#__codelineno-0-25">25</a></span>
<span class="normal"><a href="#__codelineno-0-26">26</a></span>
<span class="normal"><a href="#__codelineno-0-27">27</a></span>
<span class="normal"><a href="#__codelineno-0-28">28</a></span>
<span class="normal"><a href="#__codelineno-0-29">29</a></span>
<span class="normal"><a href="#__codelineno-0-30">30</a></span>
<span class="normal"><a href="#__codelineno-0-31">31</a></span>
<span class="normal"><a href="#__codelineno-0-32">32</a></span>
<span class="normal"><a href="#__codelineno-0-33">33</a></span>
<span class="normal"><a href="#__codelineno-0-34">34</a></span>
<span class="normal"><a href="#__codelineno-0-35">35</a></span>
<span class="normal"><a href="#__codelineno-0-36">36</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-10" name="__codelineno-0-10"></a><span class="k">def</span> <span class="nf">custom_validator_clean</span><span class="p">(</span><span class="n">model_clean_func</span><span class="p">):</span>
<a id="__codelineno-0-11" name="__codelineno-0-11"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-12" name="__codelineno-0-12"></a><span class="sd">    Decorator that wraps a models existing clean method to also execute registered plugin custom validators</span>
<a id="__codelineno-0-13" name="__codelineno-0-13"></a>
<a id="__codelineno-0-14" name="__codelineno-0-14"></a><span class="sd">    :param model_clean_func: The original model clean method which is to be wrapped</span>
<a id="__codelineno-0-15" name="__codelineno-0-15"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-16" name="__codelineno-0-16"></a>
<a id="__codelineno-0-17" name="__codelineno-0-17"></a>    <span class="nd">@wraps</span><span class="p">(</span><span class="n">model_clean_func</span><span class="p">)</span>
<a id="__codelineno-0-18" name="__codelineno-0-18"></a>    <span class="k">def</span> <span class="nf">wrapper</span><span class="p">(</span><span class="n">model_instance</span><span class="p">):</span>
<a id="__codelineno-0-19" name="__codelineno-0-19"></a>        <span class="c1"># Run original model clean method</span>
<a id="__codelineno-0-20" name="__codelineno-0-20"></a>        <span class="n">model_clean_func</span><span class="p">(</span><span class="n">model_instance</span><span class="p">)</span>
<a id="__codelineno-0-21" name="__codelineno-0-21"></a>
<a id="__codelineno-0-22" name="__codelineno-0-22"></a>        <span class="c1"># Run registered plugin custom validators</span>
<a id="__codelineno-0-23" name="__codelineno-0-23"></a>        <span class="n">model_name</span> <span class="o">=</span> <span class="n">model_instance</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">label_lower</span>
<a id="__codelineno-0-24" name="__codelineno-0-24"></a>
<a id="__codelineno-0-25" name="__codelineno-0-25"></a>        <span class="c1"># Note this registry holds instances of PluginCustomValidator registered from plugins</span>
<a id="__codelineno-0-26" name="__codelineno-0-26"></a>        <span class="c1"># which is different than the `custom_validators` model features registry</span>
<a id="__codelineno-0-27" name="__codelineno-0-27"></a>        <span class="n">custom_validators</span> <span class="o">=</span> <span class="n">registry</span><span class="p">[</span><span class="s2">&quot;plugin_custom_validators&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">model_name</span><span class="p">,</span> <span class="p">[])</span>
<a id="__codelineno-0-28" name="__codelineno-0-28"></a>
<a id="__codelineno-0-29" name="__codelineno-0-29"></a>        <span class="k">for</span> <span class="n">custom_validator</span> <span class="ow">in</span> <span class="n">custom_validators</span><span class="p">:</span>
<a id="__codelineno-0-30" name="__codelineno-0-30"></a>            <span class="c1"># If the class has not overridden the specified method, we can skip it (because we know it</span>
<a id="__codelineno-0-31" name="__codelineno-0-31"></a>            <span class="c1"># will raise NotImplementedError).</span>
<a id="__codelineno-0-32" name="__codelineno-0-32"></a>            <span class="k">if</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">custom_validator</span><span class="p">,</span> <span class="s2">&quot;clean&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">CustomValidator</span><span class="p">,</span> <span class="s2">&quot;clean&quot;</span><span class="p">):</span>
<a id="__codelineno-0-33" name="__codelineno-0-33"></a>                <span class="k">continue</span>
<a id="__codelineno-0-34" name="__codelineno-0-34"></a>            <span class="n">custom_validator</span><span class="p">(</span><span class="n">model_instance</span><span class="p">)</span><span class="o">.</span><span class="n">clean</span><span class="p">()</span>
<a id="__codelineno-0-35" name="__codelineno-0-35"></a>
<a id="__codelineno-0-36" name="__codelineno-0-36"></a>    <span class="k">return</span> <span class="n">wrapper</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h2 id="nautobot.apps.utils.deepmerge" class="doc doc-heading">
<code class="highlight language-python"><span class="n">nautobot</span><span class="o">.</span><span class="n">apps</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">deepmerge</span><span class="p">(</span><span class="n">original</span><span class="p">,</span> <span class="n">new</span><span class="p">)</span></code>

<a href="#nautobot.apps.utils.deepmerge" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
  
      <p>Deep merge two dictionaries (new into original) and return a new dict</p>

          <details class="quote">
            <summary>Source code in <code>nautobot/core/utils/data.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-15">15</a></span>
<span class="normal"><a href="#__codelineno-0-16">16</a></span>
<span class="normal"><a href="#__codelineno-0-17">17</a></span>
<span class="normal"><a href="#__codelineno-0-18">18</a></span>
<span class="normal"><a href="#__codelineno-0-19">19</a></span>
<span class="normal"><a href="#__codelineno-0-20">20</a></span>
<span class="normal"><a href="#__codelineno-0-21">21</a></span>
<span class="normal"><a href="#__codelineno-0-22">22</a></span>
<span class="normal"><a href="#__codelineno-0-23">23</a></span>
<span class="normal"><a href="#__codelineno-0-24">24</a></span>
<span class="normal"><a href="#__codelineno-0-25">25</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-15" name="__codelineno-0-15"></a><span class="k">def</span> <span class="nf">deepmerge</span><span class="p">(</span><span class="n">original</span><span class="p">,</span> <span class="n">new</span><span class="p">):</span>
<a id="__codelineno-0-16" name="__codelineno-0-16"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-17" name="__codelineno-0-17"></a><span class="sd">    Deep merge two dictionaries (new into original) and return a new dict</span>
<a id="__codelineno-0-18" name="__codelineno-0-18"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-19" name="__codelineno-0-19"></a>    <span class="n">merged</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">(</span><span class="n">original</span><span class="p">)</span>
<a id="__codelineno-0-20" name="__codelineno-0-20"></a>    <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">new</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
<a id="__codelineno-0-21" name="__codelineno-0-21"></a>        <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">original</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">original</span><span class="p">[</span><span class="n">key</span><span class="p">],</span> <span class="nb">dict</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
<a id="__codelineno-0-22" name="__codelineno-0-22"></a>            <span class="n">merged</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">deepmerge</span><span class="p">(</span><span class="n">original</span><span class="p">[</span><span class="n">key</span><span class="p">],</span> <span class="n">val</span><span class="p">)</span>
<a id="__codelineno-0-23" name="__codelineno-0-23"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-24" name="__codelineno-0-24"></a>            <span class="n">merged</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>
<a id="__codelineno-0-25" name="__codelineno-0-25"></a>    <span class="k">return</span> <span class="n">merged</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h2 id="nautobot.apps.utils.ensure_content_type_and_field_name_in_query_params" class="doc doc-heading">
<code class="highlight language-python"><span class="n">nautobot</span><span class="o">.</span><span class="n">apps</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">ensure_content_type_and_field_name_in_query_params</span><span class="p">(</span><span class="n">query_params</span><span class="p">)</span></code>

<a href="#nautobot.apps.utils.ensure_content_type_and_field_name_in_query_params" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
  
      <p>Ensure <code>query_params</code> includes <code>content_type</code> and <code>field_name</code> and <code>content_type</code> is a valid ContentType.</p>
<p>Return the 'ContentTypes' model and 'field_name' if validation was successful.</p>

          <details class="quote">
            <summary>Source code in <code>nautobot/core/utils/requests.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-77">77</a></span>
<span class="normal"><a href="#__codelineno-0-78">78</a></span>
<span class="normal"><a href="#__codelineno-0-79">79</a></span>
<span class="normal"><a href="#__codelineno-0-80">80</a></span>
<span class="normal"><a href="#__codelineno-0-81">81</a></span>
<span class="normal"><a href="#__codelineno-0-82">82</a></span>
<span class="normal"><a href="#__codelineno-0-83">83</a></span>
<span class="normal"><a href="#__codelineno-0-84">84</a></span>
<span class="normal"><a href="#__codelineno-0-85">85</a></span>
<span class="normal"><a href="#__codelineno-0-86">86</a></span>
<span class="normal"><a href="#__codelineno-0-87">87</a></span>
<span class="normal"><a href="#__codelineno-0-88">88</a></span>
<span class="normal"><a href="#__codelineno-0-89">89</a></span>
<span class="normal"><a href="#__codelineno-0-90">90</a></span>
<span class="normal"><a href="#__codelineno-0-91">91</a></span>
<span class="normal"><a href="#__codelineno-0-92">92</a></span>
<span class="normal"><a href="#__codelineno-0-93">93</a></span>
<span class="normal"><a href="#__codelineno-0-94">94</a></span>
<span class="normal"><a href="#__codelineno-0-95">95</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-77" name="__codelineno-0-77"></a><span class="k">def</span> <span class="nf">ensure_content_type_and_field_name_in_query_params</span><span class="p">(</span><span class="n">query_params</span><span class="p">):</span>
<a id="__codelineno-0-78" name="__codelineno-0-78"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Ensure `query_params` includes `content_type` and `field_name` and `content_type` is a valid ContentType.</span>
<a id="__codelineno-0-79" name="__codelineno-0-79"></a>
<a id="__codelineno-0-80" name="__codelineno-0-80"></a><span class="sd">    Return the &#39;ContentTypes&#39; model and &#39;field_name&#39; if validation was successful.</span>
<a id="__codelineno-0-81" name="__codelineno-0-81"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-82" name="__codelineno-0-82"></a>    <span class="k">if</span> <span class="s2">&quot;content_type&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">query_params</span> <span class="ow">or</span> <span class="s2">&quot;field_name&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">query_params</span><span class="p">:</span>
<a id="__codelineno-0-83" name="__codelineno-0-83"></a>        <span class="k">raise</span> <span class="n">ValidationError</span><span class="p">(</span><span class="s2">&quot;content_type and field_name are required parameters&quot;</span><span class="p">,</span> <span class="n">code</span><span class="o">=</span><span class="mi">400</span><span class="p">)</span>
<a id="__codelineno-0-84" name="__codelineno-0-84"></a>    <span class="n">contenttype</span> <span class="o">=</span> <span class="n">query_params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;content_type&quot;</span><span class="p">)</span>
<a id="__codelineno-0-85" name="__codelineno-0-85"></a>    <span class="n">app_label</span><span class="p">,</span> <span class="n">model_name</span> <span class="o">=</span> <span class="n">contenttype</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)</span>
<a id="__codelineno-0-86" name="__codelineno-0-86"></a>    <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-0-87" name="__codelineno-0-87"></a>        <span class="n">model_contenttype</span> <span class="o">=</span> <span class="n">ContentType</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">app_label</span><span class="o">=</span><span class="n">app_label</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="n">model_name</span><span class="p">)</span>
<a id="__codelineno-0-88" name="__codelineno-0-88"></a>        <span class="n">model</span> <span class="o">=</span> <span class="n">model_contenttype</span><span class="o">.</span><span class="n">model_class</span><span class="p">()</span>
<a id="__codelineno-0-89" name="__codelineno-0-89"></a>        <span class="k">if</span> <span class="n">model</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-90" name="__codelineno-0-90"></a>            <span class="k">raise</span> <span class="n">ValidationError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;model for content_type: &lt;</span><span class="si">{</span><span class="n">model_contenttype</span><span class="si">}</span><span class="s2">&gt; not found&quot;</span><span class="p">,</span> <span class="n">code</span><span class="o">=</span><span class="mi">500</span><span class="p">)</span>
<a id="__codelineno-0-91" name="__codelineno-0-91"></a>    <span class="k">except</span> <span class="n">ContentType</span><span class="o">.</span><span class="n">DoesNotExist</span><span class="p">:</span>
<a id="__codelineno-0-92" name="__codelineno-0-92"></a>        <span class="k">raise</span> <span class="n">ValidationError</span><span class="p">(</span><span class="s2">&quot;content_type not found&quot;</span><span class="p">,</span> <span class="n">code</span><span class="o">=</span><span class="mi">404</span><span class="p">)</span>
<a id="__codelineno-0-93" name="__codelineno-0-93"></a>    <span class="n">field_name</span> <span class="o">=</span> <span class="n">query_params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;field_name&quot;</span><span class="p">)</span>
<a id="__codelineno-0-94" name="__codelineno-0-94"></a>
<a id="__codelineno-0-95" name="__codelineno-0-95"></a>    <span class="k">return</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">model</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h2 id="nautobot.apps.utils.fixup_null_statuses" class="doc doc-heading">
<code class="highlight language-python"><span class="n">nautobot</span><span class="o">.</span><span class="n">apps</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">fixup_null_statuses</span><span class="p">(</span><span class="o">*</span><span class="p">,</span> <span class="n">model</span><span class="p">,</span> <span class="n">model_contenttype</span><span class="p">,</span> <span class="n">status_model</span><span class="p">)</span></code>

<a href="#nautobot.apps.utils.fixup_null_statuses" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
  
      <p>For instances of model that have an invalid NULL status field, create and use a special status_model instance.</p>

          <details class="quote">
            <summary>Source code in <code>nautobot/extras/utils.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-489">489</a></span>
<span class="normal"><a href="#__codelineno-0-490">490</a></span>
<span class="normal"><a href="#__codelineno-0-491">491</a></span>
<span class="normal"><a href="#__codelineno-0-492">492</a></span>
<span class="normal"><a href="#__codelineno-0-493">493</a></span>
<span class="normal"><a href="#__codelineno-0-494">494</a></span>
<span class="normal"><a href="#__codelineno-0-495">495</a></span>
<span class="normal"><a href="#__codelineno-0-496">496</a></span>
<span class="normal"><a href="#__codelineno-0-497">497</a></span>
<span class="normal"><a href="#__codelineno-0-498">498</a></span>
<span class="normal"><a href="#__codelineno-0-499">499</a></span>
<span class="normal"><a href="#__codelineno-0-500">500</a></span>
<span class="normal"><a href="#__codelineno-0-501">501</a></span>
<span class="normal"><a href="#__codelineno-0-502">502</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-489" name="__codelineno-0-489"></a><span class="k">def</span> <span class="nf">fixup_null_statuses</span><span class="p">(</span><span class="o">*</span><span class="p">,</span> <span class="n">model</span><span class="p">,</span> <span class="n">model_contenttype</span><span class="p">,</span> <span class="n">status_model</span><span class="p">):</span>
<a id="__codelineno-0-490" name="__codelineno-0-490"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;For instances of model that have an invalid NULL status field, create and use a special status_model instance.&quot;&quot;&quot;</span>
<a id="__codelineno-0-491" name="__codelineno-0-491"></a>    <span class="n">instances_to_fixup</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">status__isnull</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-0-492" name="__codelineno-0-492"></a>    <span class="k">if</span> <span class="n">instances_to_fixup</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
<a id="__codelineno-0-493" name="__codelineno-0-493"></a>        <span class="n">null_status</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">status_model</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get_or_create</span><span class="p">(</span>
<a id="__codelineno-0-494" name="__codelineno-0-494"></a>            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;NULL&quot;</span><span class="p">,</span>
<a id="__codelineno-0-495" name="__codelineno-0-495"></a>            <span class="n">defaults</span><span class="o">=</span><span class="p">{</span>
<a id="__codelineno-0-496" name="__codelineno-0-496"></a>                <span class="s2">&quot;color&quot;</span><span class="p">:</span> <span class="n">ColorChoices</span><span class="o">.</span><span class="n">COLOR_BLACK</span><span class="p">,</span>
<a id="__codelineno-0-497" name="__codelineno-0-497"></a>                <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Created by Nautobot to replace invalid null references&quot;</span><span class="p">,</span>
<a id="__codelineno-0-498" name="__codelineno-0-498"></a>            <span class="p">},</span>
<a id="__codelineno-0-499" name="__codelineno-0-499"></a>        <span class="p">)</span>
<a id="__codelineno-0-500" name="__codelineno-0-500"></a>        <span class="n">null_status</span><span class="o">.</span><span class="n">content_types</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">model_contenttype</span><span class="p">)</span>
<a id="__codelineno-0-501" name="__codelineno-0-501"></a>        <span class="n">updated_count</span> <span class="o">=</span> <span class="n">instances_to_fixup</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">null_status</span><span class="p">)</span>
<a id="__codelineno-0-502" name="__codelineno-0-502"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;    Found and fixed </span><span class="si">{</span><span class="n">updated_count</span><span class="si">}</span><span class="s2"> instances of </span><span class="si">{</span><span class="n">model</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2"> that had null &#39;status&#39; fields.&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h2 id="nautobot.apps.utils.flatten_dict" class="doc doc-heading">
<code class="highlight language-python"><span class="n">nautobot</span><span class="o">.</span><span class="n">apps</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">flatten_dict</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">prefix</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">separator</span><span class="o">=</span><span class="s1">&#39;.&#39;</span><span class="p">)</span></code>

<a href="#nautobot.apps.utils.flatten_dict" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
  
      <p>Flatten nested dictionaries into a single level by joining key names with a separator.</p>
<p>:param d: The dictionary to be flattened
:param prefix: Initial prefix (if any)
:param separator: The character to use when concatenating key names</p>

          <details class="quote">
            <summary>Source code in <code>nautobot/core/utils/data.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-28">28</a></span>
<span class="normal"><a href="#__codelineno-0-29">29</a></span>
<span class="normal"><a href="#__codelineno-0-30">30</a></span>
<span class="normal"><a href="#__codelineno-0-31">31</a></span>
<span class="normal"><a href="#__codelineno-0-32">32</a></span>
<span class="normal"><a href="#__codelineno-0-33">33</a></span>
<span class="normal"><a href="#__codelineno-0-34">34</a></span>
<span class="normal"><a href="#__codelineno-0-35">35</a></span>
<span class="normal"><a href="#__codelineno-0-36">36</a></span>
<span class="normal"><a href="#__codelineno-0-37">37</a></span>
<span class="normal"><a href="#__codelineno-0-38">38</a></span>
<span class="normal"><a href="#__codelineno-0-39">39</a></span>
<span class="normal"><a href="#__codelineno-0-40">40</a></span>
<span class="normal"><a href="#__codelineno-0-41">41</a></span>
<span class="normal"><a href="#__codelineno-0-42">42</a></span>
<span class="normal"><a href="#__codelineno-0-43">43</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-28" name="__codelineno-0-28"></a><span class="k">def</span> <span class="nf">flatten_dict</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">prefix</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">separator</span><span class="o">=</span><span class="s2">&quot;.&quot;</span><span class="p">):</span>
<a id="__codelineno-0-29" name="__codelineno-0-29"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-30" name="__codelineno-0-30"></a><span class="sd">    Flatten nested dictionaries into a single level by joining key names with a separator.</span>
<a id="__codelineno-0-31" name="__codelineno-0-31"></a>
<a id="__codelineno-0-32" name="__codelineno-0-32"></a><span class="sd">    :param d: The dictionary to be flattened</span>
<a id="__codelineno-0-33" name="__codelineno-0-33"></a><span class="sd">    :param prefix: Initial prefix (if any)</span>
<a id="__codelineno-0-34" name="__codelineno-0-34"></a><span class="sd">    :param separator: The character to use when concatenating key names</span>
<a id="__codelineno-0-35" name="__codelineno-0-35"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-36" name="__codelineno-0-36"></a>    <span class="n">ret</span> <span class="o">=</span> <span class="p">{}</span>
<a id="__codelineno-0-37" name="__codelineno-0-37"></a>    <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">d</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
<a id="__codelineno-0-38" name="__codelineno-0-38"></a>        <span class="n">key</span> <span class="o">=</span> <span class="n">separator</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">prefix</span><span class="p">,</span> <span class="n">k</span><span class="p">])</span> <span class="k">if</span> <span class="n">prefix</span> <span class="k">else</span> <span class="n">k</span>
<a id="__codelineno-0-39" name="__codelineno-0-39"></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
<a id="__codelineno-0-40" name="__codelineno-0-40"></a>            <span class="n">ret</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">flatten_dict</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">prefix</span><span class="o">=</span><span class="n">key</span><span class="p">))</span>
<a id="__codelineno-0-41" name="__codelineno-0-41"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-42" name="__codelineno-0-42"></a>            <span class="n">ret</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span>
<a id="__codelineno-0-43" name="__codelineno-0-43"></a>    <span class="k">return</span> <span class="n">ret</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h2 id="nautobot.apps.utils.flatten_iterable" class="doc doc-heading">
<code class="highlight language-python"><span class="n">nautobot</span><span class="o">.</span><span class="n">apps</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">flatten_iterable</span><span class="p">(</span><span class="n">iterable</span><span class="p">)</span></code>

<a href="#nautobot.apps.utils.flatten_iterable" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
  
      <p>Flatten a nested iterable such as a list of lists, keeping strings intact.</p>
<p>:param iterable: The iterable to be flattened
:returns: generator</p>

          <details class="quote">
            <summary>Source code in <code>nautobot/core/utils/data.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-46">46</a></span>
<span class="normal"><a href="#__codelineno-0-47">47</a></span>
<span class="normal"><a href="#__codelineno-0-48">48</a></span>
<span class="normal"><a href="#__codelineno-0-49">49</a></span>
<span class="normal"><a href="#__codelineno-0-50">50</a></span>
<span class="normal"><a href="#__codelineno-0-51">51</a></span>
<span class="normal"><a href="#__codelineno-0-52">52</a></span>
<span class="normal"><a href="#__codelineno-0-53">53</a></span>
<span class="normal"><a href="#__codelineno-0-54">54</a></span>
<span class="normal"><a href="#__codelineno-0-55">55</a></span>
<span class="normal"><a href="#__codelineno-0-56">56</a></span>
<span class="normal"><a href="#__codelineno-0-57">57</a></span>
<span class="normal"><a href="#__codelineno-0-58">58</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-46" name="__codelineno-0-46"></a><span class="k">def</span> <span class="nf">flatten_iterable</span><span class="p">(</span><span class="n">iterable</span><span class="p">):</span>
<a id="__codelineno-0-47" name="__codelineno-0-47"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-48" name="__codelineno-0-48"></a><span class="sd">    Flatten a nested iterable such as a list of lists, keeping strings intact.</span>
<a id="__codelineno-0-49" name="__codelineno-0-49"></a>
<a id="__codelineno-0-50" name="__codelineno-0-50"></a><span class="sd">    :param iterable: The iterable to be flattened</span>
<a id="__codelineno-0-51" name="__codelineno-0-51"></a><span class="sd">    :returns: generator</span>
<a id="__codelineno-0-52" name="__codelineno-0-52"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-53" name="__codelineno-0-53"></a>    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">iterable</span><span class="p">:</span>
<a id="__codelineno-0-54" name="__codelineno-0-54"></a>        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="s2">&quot;__iter__&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
<a id="__codelineno-0-55" name="__codelineno-0-55"></a>            <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">flatten_iterable</span><span class="p">(</span><span class="n">i</span><span class="p">):</span>
<a id="__codelineno-0-56" name="__codelineno-0-56"></a>                <span class="k">yield</span> <span class="n">j</span>
<a id="__codelineno-0-57" name="__codelineno-0-57"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-58" name="__codelineno-0-58"></a>            <span class="k">yield</span> <span class="n">i</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h2 id="nautobot.apps.utils.foreground_color" class="doc doc-heading">
<code class="highlight language-python"><span class="n">nautobot</span><span class="o">.</span><span class="n">apps</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">foreground_color</span><span class="p">(</span><span class="n">bg_color</span><span class="p">)</span></code>

<a href="#nautobot.apps.utils.foreground_color" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
  
      <p>Return the ideal foreground color (black or white) for a given background color in hexadecimal RGB format.</p>

          <details class="quote">
            <summary>Source code in <code>nautobot/core/utils/color.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-18">18</a></span>
<span class="normal"><a href="#__codelineno-0-19">19</a></span>
<span class="normal"><a href="#__codelineno-0-20">20</a></span>
<span class="normal"><a href="#__codelineno-0-21">21</a></span>
<span class="normal"><a href="#__codelineno-0-22">22</a></span>
<span class="normal"><a href="#__codelineno-0-23">23</a></span>
<span class="normal"><a href="#__codelineno-0-24">24</a></span>
<span class="normal"><a href="#__codelineno-0-25">25</a></span>
<span class="normal"><a href="#__codelineno-0-26">26</a></span>
<span class="normal"><a href="#__codelineno-0-27">27</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-18" name="__codelineno-0-18"></a><span class="k">def</span> <span class="nf">foreground_color</span><span class="p">(</span><span class="n">bg_color</span><span class="p">):</span>
<a id="__codelineno-0-19" name="__codelineno-0-19"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-20" name="__codelineno-0-20"></a><span class="sd">    Return the ideal foreground color (black or white) for a given background color in hexadecimal RGB format.</span>
<a id="__codelineno-0-21" name="__codelineno-0-21"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-22" name="__codelineno-0-22"></a>    <span class="n">bg_color</span> <span class="o">=</span> <span class="n">bg_color</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s2">&quot;#&quot;</span><span class="p">)</span>
<a id="__codelineno-0-23" name="__codelineno-0-23"></a>    <span class="n">r</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="n">hex_to_rgb</span><span class="p">(</span><span class="n">bg_color</span><span class="p">)</span>
<a id="__codelineno-0-24" name="__codelineno-0-24"></a>    <span class="k">if</span> <span class="n">r</span> <span class="o">*</span> <span class="mf">0.299</span> <span class="o">+</span> <span class="n">g</span> <span class="o">*</span> <span class="mf">0.587</span> <span class="o">+</span> <span class="n">b</span> <span class="o">*</span> <span class="mf">0.114</span> <span class="o">&gt;</span> <span class="mi">186</span><span class="p">:</span>
<a id="__codelineno-0-25" name="__codelineno-0-25"></a>        <span class="k">return</span> <span class="s2">&quot;000000&quot;</span>
<a id="__codelineno-0-26" name="__codelineno-0-26"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-27" name="__codelineno-0-27"></a>        <span class="k">return</span> <span class="s2">&quot;ffffff&quot;</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h2 id="nautobot.apps.utils.generate_signature" class="doc doc-heading">
<code class="highlight language-python"><span class="n">nautobot</span><span class="o">.</span><span class="n">apps</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">generate_signature</span><span class="p">(</span><span class="n">request_body</span><span class="p">,</span> <span class="n">secret</span><span class="p">)</span></code>

<a href="#nautobot.apps.utils.generate_signature" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
  
      <p>Return a cryptographic signature that can be used to verify the authenticity of webhook data.</p>

          <details class="quote">
            <summary>Source code in <code>nautobot/extras/utils.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-272">272</a></span>
<span class="normal"><a href="#__codelineno-0-273">273</a></span>
<span class="normal"><a href="#__codelineno-0-274">274</a></span>
<span class="normal"><a href="#__codelineno-0-275">275</a></span>
<span class="normal"><a href="#__codelineno-0-276">276</a></span>
<span class="normal"><a href="#__codelineno-0-277">277</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-272" name="__codelineno-0-272"></a><span class="k">def</span> <span class="nf">generate_signature</span><span class="p">(</span><span class="n">request_body</span><span class="p">,</span> <span class="n">secret</span><span class="p">):</span>
<a id="__codelineno-0-273" name="__codelineno-0-273"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-274" name="__codelineno-0-274"></a><span class="sd">    Return a cryptographic signature that can be used to verify the authenticity of webhook data.</span>
<a id="__codelineno-0-275" name="__codelineno-0-275"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-276" name="__codelineno-0-276"></a>    <span class="n">hmac_prep</span> <span class="o">=</span> <span class="n">hmac</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="n">secret</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;utf8&quot;</span><span class="p">),</span> <span class="n">msg</span><span class="o">=</span><span class="n">request_body</span><span class="p">,</span> <span class="n">digestmod</span><span class="o">=</span><span class="n">hashlib</span><span class="o">.</span><span class="n">sha512</span><span class="p">)</span>
<a id="__codelineno-0-277" name="__codelineno-0-277"></a>    <span class="k">return</span> <span class="n">hmac_prep</span><span class="o">.</span><span class="n">hexdigest</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h2 id="nautobot.apps.utils.get_all_lookup_expr_for_field" class="doc doc-heading">
<code class="highlight language-python"><span class="n">nautobot</span><span class="o">.</span><span class="n">apps</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">get_all_lookup_expr_for_field</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">field_name</span><span class="p">)</span></code>

<a href="#nautobot.apps.utils.get_all_lookup_expr_for_field" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
  
      <p>Return all lookup expressions for <code>field_name</code> in <code>model</code> filterset</p>

          <details class="quote">
            <summary>Source code in <code>nautobot/core/utils/filtering.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-45">45</a></span>
<span class="normal"><a href="#__codelineno-0-46">46</a></span>
<span class="normal"><a href="#__codelineno-0-47">47</a></span>
<span class="normal"><a href="#__codelineno-0-48">48</a></span>
<span class="normal"><a href="#__codelineno-0-49">49</a></span>
<span class="normal"><a href="#__codelineno-0-50">50</a></span>
<span class="normal"><a href="#__codelineno-0-51">51</a></span>
<span class="normal"><a href="#__codelineno-0-52">52</a></span>
<span class="normal"><a href="#__codelineno-0-53">53</a></span>
<span class="normal"><a href="#__codelineno-0-54">54</a></span>
<span class="normal"><a href="#__codelineno-0-55">55</a></span>
<span class="normal"><a href="#__codelineno-0-56">56</a></span>
<span class="normal"><a href="#__codelineno-0-57">57</a></span>
<span class="normal"><a href="#__codelineno-0-58">58</a></span>
<span class="normal"><a href="#__codelineno-0-59">59</a></span>
<span class="normal"><a href="#__codelineno-0-60">60</a></span>
<span class="normal"><a href="#__codelineno-0-61">61</a></span>
<span class="normal"><a href="#__codelineno-0-62">62</a></span>
<span class="normal"><a href="#__codelineno-0-63">63</a></span>
<span class="normal"><a href="#__codelineno-0-64">64</a></span>
<span class="normal"><a href="#__codelineno-0-65">65</a></span>
<span class="normal"><a href="#__codelineno-0-66">66</a></span>
<span class="normal"><a href="#__codelineno-0-67">67</a></span>
<span class="normal"><a href="#__codelineno-0-68">68</a></span>
<span class="normal"><a href="#__codelineno-0-69">69</a></span>
<span class="normal"><a href="#__codelineno-0-70">70</a></span>
<span class="normal"><a href="#__codelineno-0-71">71</a></span>
<span class="normal"><a href="#__codelineno-0-72">72</a></span>
<span class="normal"><a href="#__codelineno-0-73">73</a></span>
<span class="normal"><a href="#__codelineno-0-74">74</a></span>
<span class="normal"><a href="#__codelineno-0-75">75</a></span>
<span class="normal"><a href="#__codelineno-0-76">76</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-45" name="__codelineno-0-45"></a><span class="k">def</span> <span class="nf">get_all_lookup_expr_for_field</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">field_name</span><span class="p">):</span>
<a id="__codelineno-0-46" name="__codelineno-0-46"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-47" name="__codelineno-0-47"></a><span class="sd">    Return all lookup expressions for `field_name` in `model` filterset</span>
<a id="__codelineno-0-48" name="__codelineno-0-48"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-49" name="__codelineno-0-49"></a>    <span class="n">filterset</span> <span class="o">=</span> <span class="n">get_filterset_for_model</span><span class="p">(</span><span class="n">model</span><span class="p">)()</span><span class="o">.</span><span class="n">filters</span>
<a id="__codelineno-0-50" name="__codelineno-0-50"></a>
<a id="__codelineno-0-51" name="__codelineno-0-51"></a>    <span class="k">if</span> <span class="ow">not</span> <span class="n">filterset</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">field_name</span><span class="p">):</span>
<a id="__codelineno-0-52" name="__codelineno-0-52"></a>        <span class="k">raise</span> <span class="n">exceptions</span><span class="o">.</span><span class="n">FilterSetFieldNotFound</span><span class="p">(</span><span class="s2">&quot;field_name not found&quot;</span><span class="p">)</span>
<a id="__codelineno-0-53" name="__codelineno-0-53"></a>
<a id="__codelineno-0-54" name="__codelineno-0-54"></a>    <span class="k">if</span> <span class="n">field_name</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;has_&quot;</span><span class="p">):</span>
<a id="__codelineno-0-55" name="__codelineno-0-55"></a>        <span class="k">return</span> <span class="p">[{</span><span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="n">field_name</span><span class="p">,</span> <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;exact&quot;</span><span class="p">}]</span>
<a id="__codelineno-0-56" name="__codelineno-0-56"></a>
<a id="__codelineno-0-57" name="__codelineno-0-57"></a>    <span class="n">lookup_expr_choices</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-58" name="__codelineno-0-58"></a>
<a id="__codelineno-0-59" name="__codelineno-0-59"></a>    <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">filterset</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
<a id="__codelineno-0-60" name="__codelineno-0-60"></a>        <span class="c1"># remove the lookup_expr from field_name e.g name__iew -&gt; name</span>
<a id="__codelineno-0-61" name="__codelineno-0-61"></a>        <span class="k">if</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;__\w+&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span> <span class="o">==</span> <span class="n">field_name</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">name</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;has_&quot;</span><span class="p">):</span>
<a id="__codelineno-0-62" name="__codelineno-0-62"></a>            <span class="n">lookup_expr_choices</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
<a id="__codelineno-0-63" name="__codelineno-0-63"></a>                <span class="p">{</span>
<a id="__codelineno-0-64" name="__codelineno-0-64"></a>                    <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="n">name</span><span class="p">,</span>
<a id="__codelineno-0-65" name="__codelineno-0-65"></a>                    <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">build_lookup_label</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">lookup_expr</span><span class="p">),</span>
<a id="__codelineno-0-66" name="__codelineno-0-66"></a>                <span class="p">}</span>
<a id="__codelineno-0-67" name="__codelineno-0-67"></a>            <span class="p">)</span>
<a id="__codelineno-0-68" name="__codelineno-0-68"></a>        <span class="k">elif</span> <span class="n">name</span> <span class="o">==</span> <span class="n">field_name</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">name</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;has_&quot;</span><span class="p">):</span>
<a id="__codelineno-0-69" name="__codelineno-0-69"></a>            <span class="n">lookup_expr_choices</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
<a id="__codelineno-0-70" name="__codelineno-0-70"></a>                <span class="p">{</span>
<a id="__codelineno-0-71" name="__codelineno-0-71"></a>                    <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="n">name</span><span class="p">,</span>
<a id="__codelineno-0-72" name="__codelineno-0-72"></a>                    <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;exact&quot;</span><span class="p">,</span>
<a id="__codelineno-0-73" name="__codelineno-0-73"></a>                <span class="p">}</span>
<a id="__codelineno-0-74" name="__codelineno-0-74"></a>            <span class="p">)</span>
<a id="__codelineno-0-75" name="__codelineno-0-75"></a>
<a id="__codelineno-0-76" name="__codelineno-0-76"></a>    <span class="k">return</span> <span class="n">lookup_expr_choices</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h2 id="nautobot.apps.utils.get_base_template" class="doc doc-heading">
<code class="highlight language-python"><span class="n">nautobot</span><span class="o">.</span><span class="n">apps</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">get_base_template</span><span class="p">(</span><span class="n">base_template</span><span class="p">,</span> <span class="n">model</span><span class="p">)</span></code>

<a href="#nautobot.apps.utils.get_base_template" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
  
      <p>Returns the name of the base template, if the base_template is not None
Otherwise, default to using "<app>/<model>.html" as the base template, if it exists.
Otherwise, check if "<app>/<model>_retrieve.html" used in <code>NautobotUIViewSet</code> exists.
If both templates do not exist, fall back to "base.html".</p>

          <details class="quote">
            <summary>Source code in <code>nautobot/extras/utils.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-32">32</a></span>
<span class="normal"><a href="#__codelineno-0-33">33</a></span>
<span class="normal"><a href="#__codelineno-0-34">34</a></span>
<span class="normal"><a href="#__codelineno-0-35">35</a></span>
<span class="normal"><a href="#__codelineno-0-36">36</a></span>
<span class="normal"><a href="#__codelineno-0-37">37</a></span>
<span class="normal"><a href="#__codelineno-0-38">38</a></span>
<span class="normal"><a href="#__codelineno-0-39">39</a></span>
<span class="normal"><a href="#__codelineno-0-40">40</a></span>
<span class="normal"><a href="#__codelineno-0-41">41</a></span>
<span class="normal"><a href="#__codelineno-0-42">42</a></span>
<span class="normal"><a href="#__codelineno-0-43">43</a></span>
<span class="normal"><a href="#__codelineno-0-44">44</a></span>
<span class="normal"><a href="#__codelineno-0-45">45</a></span>
<span class="normal"><a href="#__codelineno-0-46">46</a></span>
<span class="normal"><a href="#__codelineno-0-47">47</a></span>
<span class="normal"><a href="#__codelineno-0-48">48</a></span>
<span class="normal"><a href="#__codelineno-0-49">49</a></span>
<span class="normal"><a href="#__codelineno-0-50">50</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-32" name="__codelineno-0-32"></a><span class="k">def</span> <span class="nf">get_base_template</span><span class="p">(</span><span class="n">base_template</span><span class="p">,</span> <span class="n">model</span><span class="p">):</span>
<a id="__codelineno-0-33" name="__codelineno-0-33"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-34" name="__codelineno-0-34"></a><span class="sd">    Returns the name of the base template, if the base_template is not None</span>
<a id="__codelineno-0-35" name="__codelineno-0-35"></a><span class="sd">    Otherwise, default to using &quot;&lt;app&gt;/&lt;model&gt;.html&quot; as the base template, if it exists.</span>
<a id="__codelineno-0-36" name="__codelineno-0-36"></a><span class="sd">    Otherwise, check if &quot;&lt;app&gt;/&lt;model&gt;_retrieve.html&quot; used in `NautobotUIViewSet` exists.</span>
<a id="__codelineno-0-37" name="__codelineno-0-37"></a><span class="sd">    If both templates do not exist, fall back to &quot;base.html&quot;.</span>
<a id="__codelineno-0-38" name="__codelineno-0-38"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-39" name="__codelineno-0-39"></a>    <span class="k">if</span> <span class="n">base_template</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-40" name="__codelineno-0-40"></a>        <span class="n">base_template</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">model</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">app_label</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">model</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">model_name</span><span class="si">}</span><span class="s2">.html&quot;</span>
<a id="__codelineno-0-41" name="__codelineno-0-41"></a>        <span class="c1"># 2.0 TODO(Hanlin): This can be removed once an object view has been established for every model.</span>
<a id="__codelineno-0-42" name="__codelineno-0-42"></a>        <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-0-43" name="__codelineno-0-43"></a>            <span class="n">get_template</span><span class="p">(</span><span class="n">base_template</span><span class="p">)</span>
<a id="__codelineno-0-44" name="__codelineno-0-44"></a>        <span class="k">except</span> <span class="n">TemplateDoesNotExist</span><span class="p">:</span>
<a id="__codelineno-0-45" name="__codelineno-0-45"></a>            <span class="n">base_template</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">model</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">app_label</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">model</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">model_name</span><span class="si">}</span><span class="s2">_retrieve.html&quot;</span>
<a id="__codelineno-0-46" name="__codelineno-0-46"></a>            <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-0-47" name="__codelineno-0-47"></a>                <span class="n">get_template</span><span class="p">(</span><span class="n">base_template</span><span class="p">)</span>
<a id="__codelineno-0-48" name="__codelineno-0-48"></a>            <span class="k">except</span> <span class="n">TemplateDoesNotExist</span><span class="p">:</span>
<a id="__codelineno-0-49" name="__codelineno-0-49"></a>                <span class="n">base_template</span> <span class="o">=</span> <span class="s2">&quot;base.html&quot;</span>
<a id="__codelineno-0-50" name="__codelineno-0-50"></a>    <span class="k">return</span> <span class="n">base_template</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h2 id="nautobot.apps.utils.get_celery_queues" class="doc doc-heading">
<code class="highlight language-python"><span class="n">nautobot</span><span class="o">.</span><span class="n">apps</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">get_celery_queues</span><span class="p">()</span></code>

<a href="#nautobot.apps.utils.get_celery_queues" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
  
      <p>Return a dictionary of celery queues and the number of workers active on the queue in
the form {queue_name: num_workers}</p>

          <details class="quote">
            <summary>Source code in <code>nautobot/extras/utils.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-280">280</a></span>
<span class="normal"><a href="#__codelineno-0-281">281</a></span>
<span class="normal"><a href="#__codelineno-0-282">282</a></span>
<span class="normal"><a href="#__codelineno-0-283">283</a></span>
<span class="normal"><a href="#__codelineno-0-284">284</a></span>
<span class="normal"><a href="#__codelineno-0-285">285</a></span>
<span class="normal"><a href="#__codelineno-0-286">286</a></span>
<span class="normal"><a href="#__codelineno-0-287">287</a></span>
<span class="normal"><a href="#__codelineno-0-288">288</a></span>
<span class="normal"><a href="#__codelineno-0-289">289</a></span>
<span class="normal"><a href="#__codelineno-0-290">290</a></span>
<span class="normal"><a href="#__codelineno-0-291">291</a></span>
<span class="normal"><a href="#__codelineno-0-292">292</a></span>
<span class="normal"><a href="#__codelineno-0-293">293</a></span>
<span class="normal"><a href="#__codelineno-0-294">294</a></span>
<span class="normal"><a href="#__codelineno-0-295">295</a></span>
<span class="normal"><a href="#__codelineno-0-296">296</a></span>
<span class="normal"><a href="#__codelineno-0-297">297</a></span>
<span class="normal"><a href="#__codelineno-0-298">298</a></span>
<span class="normal"><a href="#__codelineno-0-299">299</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-280" name="__codelineno-0-280"></a><span class="k">def</span> <span class="nf">get_celery_queues</span><span class="p">():</span>
<a id="__codelineno-0-281" name="__codelineno-0-281"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-282" name="__codelineno-0-282"></a><span class="sd">    Return a dictionary of celery queues and the number of workers active on the queue in</span>
<a id="__codelineno-0-283" name="__codelineno-0-283"></a><span class="sd">    the form {queue_name: num_workers}</span>
<a id="__codelineno-0-284" name="__codelineno-0-284"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-285" name="__codelineno-0-285"></a>    <span class="kn">from</span> <span class="nn">nautobot.core.celery</span> <span class="kn">import</span> <span class="n">app</span>  <span class="c1"># prevent circular import</span>
<a id="__codelineno-0-286" name="__codelineno-0-286"></a>
<a id="__codelineno-0-287" name="__codelineno-0-287"></a>    <span class="n">celery_queues</span> <span class="o">=</span> <span class="p">{}</span>
<a id="__codelineno-0-288" name="__codelineno-0-288"></a>
<a id="__codelineno-0-289" name="__codelineno-0-289"></a>    <span class="n">celery_inspect</span> <span class="o">=</span> <span class="n">app</span><span class="o">.</span><span class="n">control</span><span class="o">.</span><span class="n">inspect</span><span class="p">()</span>
<a id="__codelineno-0-290" name="__codelineno-0-290"></a>    <span class="n">active_queues</span> <span class="o">=</span> <span class="n">celery_inspect</span><span class="o">.</span><span class="n">active_queues</span><span class="p">()</span>
<a id="__codelineno-0-291" name="__codelineno-0-291"></a>    <span class="k">if</span> <span class="n">active_queues</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-292" name="__codelineno-0-292"></a>        <span class="k">return</span> <span class="n">celery_queues</span>
<a id="__codelineno-0-293" name="__codelineno-0-293"></a>    <span class="k">for</span> <span class="n">task_queue_list</span> <span class="ow">in</span> <span class="n">active_queues</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
<a id="__codelineno-0-294" name="__codelineno-0-294"></a>        <span class="n">distinct_queues</span> <span class="o">=</span> <span class="p">{</span><span class="n">q</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">q</span> <span class="ow">in</span> <span class="n">task_queue_list</span><span class="p">}</span>
<a id="__codelineno-0-295" name="__codelineno-0-295"></a>        <span class="k">for</span> <span class="n">queue</span> <span class="ow">in</span> <span class="n">distinct_queues</span><span class="p">:</span>
<a id="__codelineno-0-296" name="__codelineno-0-296"></a>            <span class="n">celery_queues</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">queue</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<a id="__codelineno-0-297" name="__codelineno-0-297"></a>            <span class="n">celery_queues</span><span class="p">[</span><span class="n">queue</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
<a id="__codelineno-0-298" name="__codelineno-0-298"></a>
<a id="__codelineno-0-299" name="__codelineno-0-299"></a>    <span class="k">return</span> <span class="n">celery_queues</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h2 id="nautobot.apps.utils.get_changes_for_model" class="doc doc-heading">
<code class="highlight language-python"><span class="n">nautobot</span><span class="o">.</span><span class="n">apps</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">get_changes_for_model</span><span class="p">(</span><span class="n">model</span><span class="p">)</span></code>

<a href="#nautobot.apps.utils.get_changes_for_model" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
  
      <p>Return a queryset of ObjectChanges for a model or instance. The queryset will be filtered
by the model class. If an instance is provided, the queryset will also be filtered by the instance id.</p>

          <details class="quote">
            <summary>Source code in <code>nautobot/core/utils/lookup.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-12">12</a></span>
<span class="normal"><a href="#__codelineno-0-13">13</a></span>
<span class="normal"><a href="#__codelineno-0-14">14</a></span>
<span class="normal"><a href="#__codelineno-0-15">15</a></span>
<span class="normal"><a href="#__codelineno-0-16">16</a></span>
<span class="normal"><a href="#__codelineno-0-17">17</a></span>
<span class="normal"><a href="#__codelineno-0-18">18</a></span>
<span class="normal"><a href="#__codelineno-0-19">19</a></span>
<span class="normal"><a href="#__codelineno-0-20">20</a></span>
<span class="normal"><a href="#__codelineno-0-21">21</a></span>
<span class="normal"><a href="#__codelineno-0-22">22</a></span>
<span class="normal"><a href="#__codelineno-0-23">23</a></span>
<span class="normal"><a href="#__codelineno-0-24">24</a></span>
<span class="normal"><a href="#__codelineno-0-25">25</a></span>
<span class="normal"><a href="#__codelineno-0-26">26</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-12" name="__codelineno-0-12"></a><span class="k">def</span> <span class="nf">get_changes_for_model</span><span class="p">(</span><span class="n">model</span><span class="p">):</span>
<a id="__codelineno-0-13" name="__codelineno-0-13"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-14" name="__codelineno-0-14"></a><span class="sd">    Return a queryset of ObjectChanges for a model or instance. The queryset will be filtered</span>
<a id="__codelineno-0-15" name="__codelineno-0-15"></a><span class="sd">    by the model class. If an instance is provided, the queryset will also be filtered by the instance id.</span>
<a id="__codelineno-0-16" name="__codelineno-0-16"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-17" name="__codelineno-0-17"></a>    <span class="kn">from</span> <span class="nn">nautobot.extras.models</span> <span class="kn">import</span> <span class="n">ObjectChange</span>  <span class="c1"># prevent circular import</span>
<a id="__codelineno-0-18" name="__codelineno-0-18"></a>
<a id="__codelineno-0-19" name="__codelineno-0-19"></a>    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">Model</span><span class="p">):</span>
<a id="__codelineno-0-20" name="__codelineno-0-20"></a>        <span class="k">return</span> <span class="n">ObjectChange</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span>
<a id="__codelineno-0-21" name="__codelineno-0-21"></a>            <span class="n">changed_object_type</span><span class="o">=</span><span class="n">ContentType</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get_for_model</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">model</span><span class="p">),</span>
<a id="__codelineno-0-22" name="__codelineno-0-22"></a>            <span class="n">changed_object_id</span><span class="o">=</span><span class="n">model</span><span class="o">.</span><span class="n">pk</span><span class="p">,</span>
<a id="__codelineno-0-23" name="__codelineno-0-23"></a>        <span class="p">)</span>
<a id="__codelineno-0-24" name="__codelineno-0-24"></a>    <span class="k">if</span> <span class="nb">issubclass</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">Model</span><span class="p">):</span>
<a id="__codelineno-0-25" name="__codelineno-0-25"></a>        <span class="k">return</span> <span class="n">ObjectChange</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">changed_object_type</span><span class="o">=</span><span class="n">ContentType</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get_for_model</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">model</span><span class="p">))</span>
<a id="__codelineno-0-26" name="__codelineno-0-26"></a>    <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">model</span><span class="si">!r}</span><span class="s2"> is not a Django Model class or instance&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h2 id="nautobot.apps.utils.get_filter_field_label" class="doc doc-heading">
<code class="highlight language-python"><span class="n">nautobot</span><span class="o">.</span><span class="n">apps</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">get_filter_field_label</span><span class="p">(</span><span class="n">filter_field</span><span class="p">)</span></code>

<a href="#nautobot.apps.utils.get_filter_field_label" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
  
      <p>Return a label for a given field name and value.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>filter_field</code></td>
          <td>
                <code>Filter</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The filter to get a label for</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The label for the given field</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>nautobot/core/utils/filtering.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-170">170</a></span>
<span class="normal"><a href="#__codelineno-0-171">171</a></span>
<span class="normal"><a href="#__codelineno-0-172">172</a></span>
<span class="normal"><a href="#__codelineno-0-173">173</a></span>
<span class="normal"><a href="#__codelineno-0-174">174</a></span>
<span class="normal"><a href="#__codelineno-0-175">175</a></span>
<span class="normal"><a href="#__codelineno-0-176">176</a></span>
<span class="normal"><a href="#__codelineno-0-177">177</a></span>
<span class="normal"><a href="#__codelineno-0-178">178</a></span>
<span class="normal"><a href="#__codelineno-0-179">179</a></span>
<span class="normal"><a href="#__codelineno-0-180">180</a></span>
<span class="normal"><a href="#__codelineno-0-181">181</a></span>
<span class="normal"><a href="#__codelineno-0-182">182</a></span>
<span class="normal"><a href="#__codelineno-0-183">183</a></span>
<span class="normal"><a href="#__codelineno-0-184">184</a></span>
<span class="normal"><a href="#__codelineno-0-185">185</a></span>
<span class="normal"><a href="#__codelineno-0-186">186</a></span>
<span class="normal"><a href="#__codelineno-0-187">187</a></span>
<span class="normal"><a href="#__codelineno-0-188">188</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-170" name="__codelineno-0-170"></a><span class="k">def</span> <span class="nf">get_filter_field_label</span><span class="p">(</span><span class="n">filter_field</span><span class="p">):</span>
<a id="__codelineno-0-171" name="__codelineno-0-171"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-172" name="__codelineno-0-172"></a><span class="sd">    Return a label for a given field name and value.</span>
<a id="__codelineno-0-173" name="__codelineno-0-173"></a>
<a id="__codelineno-0-174" name="__codelineno-0-174"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-175" name="__codelineno-0-175"></a><span class="sd">        filter_field (Filter): The filter to get a label for</span>
<a id="__codelineno-0-176" name="__codelineno-0-176"></a>
<a id="__codelineno-0-177" name="__codelineno-0-177"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-178" name="__codelineno-0-178"></a><span class="sd">        (str): The label for the given field</span>
<a id="__codelineno-0-179" name="__codelineno-0-179"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-180" name="__codelineno-0-180"></a>
<a id="__codelineno-0-181" name="__codelineno-0-181"></a>    <span class="k">if</span> <span class="n">filter_field</span><span class="o">.</span><span class="n">label</span><span class="p">:</span>
<a id="__codelineno-0-182" name="__codelineno-0-182"></a>        <span class="k">return</span> <span class="n">filter_field</span><span class="o">.</span><span class="n">label</span>
<a id="__codelineno-0-183" name="__codelineno-0-183"></a>    <span class="k">elif</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">filter_field</span><span class="p">,</span> <span class="s2">&quot;relationship&quot;</span><span class="p">):</span>
<a id="__codelineno-0-184" name="__codelineno-0-184"></a>        <span class="k">return</span> <span class="n">filter_field</span><span class="o">.</span><span class="n">relationship</span><span class="o">.</span><span class="n">get_label</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="n">filter_field</span><span class="o">.</span><span class="n">side</span><span class="p">)</span>
<a id="__codelineno-0-185" name="__codelineno-0-185"></a>    <span class="k">elif</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">filter_field</span><span class="p">,</span> <span class="s2">&quot;custom_field&quot;</span><span class="p">):</span>
<a id="__codelineno-0-186" name="__codelineno-0-186"></a>        <span class="k">return</span> <span class="n">filter_field</span><span class="o">.</span><span class="n">custom_field</span><span class="o">.</span><span class="n">label</span>
<a id="__codelineno-0-187" name="__codelineno-0-187"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-188" name="__codelineno-0-188"></a>        <span class="k">return</span> <span class="n">_field_name_to_display</span><span class="p">(</span><span class="n">filter_field</span><span class="o">.</span><span class="n">field_name</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h2 id="nautobot.apps.utils.get_filterable_params_from_filter_params" class="doc doc-heading">
<code class="highlight language-python"><span class="n">nautobot</span><span class="o">.</span><span class="n">apps</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">get_filterable_params_from_filter_params</span><span class="p">(</span><span class="n">filter_params</span><span class="p">,</span> <span class="n">non_filter_params</span><span class="p">,</span> <span class="n">filterset</span><span class="p">)</span></code>

<a href="#nautobot.apps.utils.get_filterable_params_from_filter_params" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
  
      <p>Remove any <code>non_filter_params</code> and fields that are not a part of the filterset from  <code>filter_params</code>
to return only queryset filterable parameters.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>filter_params</code></td>
          <td>
                <code><span title="django.http.QueryDict">QueryDict</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Filter param querydict</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>non_filter_params</code></td>
          <td>
                <code>list</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Non queryset filterable params</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>filterset</code></td>
          <td>
                <code>FilterSet</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The FilterSet class</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><span title="django.http.QueryDict">QueryDict</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Filter param querydict with only queryset filterable params</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>nautobot/core/utils/requests.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-104">104</a></span>
<span class="normal"><a href="#__codelineno-0-105">105</a></span>
<span class="normal"><a href="#__codelineno-0-106">106</a></span>
<span class="normal"><a href="#__codelineno-0-107">107</a></span>
<span class="normal"><a href="#__codelineno-0-108">108</a></span>
<span class="normal"><a href="#__codelineno-0-109">109</a></span>
<span class="normal"><a href="#__codelineno-0-110">110</a></span>
<span class="normal"><a href="#__codelineno-0-111">111</a></span>
<span class="normal"><a href="#__codelineno-0-112">112</a></span>
<span class="normal"><a href="#__codelineno-0-113">113</a></span>
<span class="normal"><a href="#__codelineno-0-114">114</a></span>
<span class="normal"><a href="#__codelineno-0-115">115</a></span>
<span class="normal"><a href="#__codelineno-0-116">116</a></span>
<span class="normal"><a href="#__codelineno-0-117">117</a></span>
<span class="normal"><a href="#__codelineno-0-118">118</a></span>
<span class="normal"><a href="#__codelineno-0-119">119</a></span>
<span class="normal"><a href="#__codelineno-0-120">120</a></span>
<span class="normal"><a href="#__codelineno-0-121">121</a></span>
<span class="normal"><a href="#__codelineno-0-122">122</a></span>
<span class="normal"><a href="#__codelineno-0-123">123</a></span>
<span class="normal"><a href="#__codelineno-0-124">124</a></span>
<span class="normal"><a href="#__codelineno-0-125">125</a></span>
<span class="normal"><a href="#__codelineno-0-126">126</a></span>
<span class="normal"><a href="#__codelineno-0-127">127</a></span>
<span class="normal"><a href="#__codelineno-0-128">128</a></span>
<span class="normal"><a href="#__codelineno-0-129">129</a></span>
<span class="normal"><a href="#__codelineno-0-130">130</a></span>
<span class="normal"><a href="#__codelineno-0-131">131</a></span>
<span class="normal"><a href="#__codelineno-0-132">132</a></span>
<span class="normal"><a href="#__codelineno-0-133">133</a></span>
<span class="normal"><a href="#__codelineno-0-134">134</a></span>
<span class="normal"><a href="#__codelineno-0-135">135</a></span>
<span class="normal"><a href="#__codelineno-0-136">136</a></span>
<span class="normal"><a href="#__codelineno-0-137">137</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-104" name="__codelineno-0-104"></a><span class="k">def</span> <span class="nf">get_filterable_params_from_filter_params</span><span class="p">(</span><span class="n">filter_params</span><span class="p">,</span> <span class="n">non_filter_params</span><span class="p">,</span> <span class="n">filterset</span><span class="p">):</span>
<a id="__codelineno-0-105" name="__codelineno-0-105"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-106" name="__codelineno-0-106"></a><span class="sd">    Remove any `non_filter_params` and fields that are not a part of the filterset from  `filter_params`</span>
<a id="__codelineno-0-107" name="__codelineno-0-107"></a><span class="sd">    to return only queryset filterable parameters.</span>
<a id="__codelineno-0-108" name="__codelineno-0-108"></a>
<a id="__codelineno-0-109" name="__codelineno-0-109"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-110" name="__codelineno-0-110"></a><span class="sd">        filter_params (QueryDict): Filter param querydict</span>
<a id="__codelineno-0-111" name="__codelineno-0-111"></a><span class="sd">        non_filter_params (list): Non queryset filterable params</span>
<a id="__codelineno-0-112" name="__codelineno-0-112"></a><span class="sd">        filterset (FilterSet): The FilterSet class</span>
<a id="__codelineno-0-113" name="__codelineno-0-113"></a>
<a id="__codelineno-0-114" name="__codelineno-0-114"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-115" name="__codelineno-0-115"></a><span class="sd">        (QueryDict): Filter param querydict with only queryset filterable params</span>
<a id="__codelineno-0-116" name="__codelineno-0-116"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-117" name="__codelineno-0-117"></a>    <span class="k">for</span> <span class="n">non_filter_param</span> <span class="ow">in</span> <span class="n">non_filter_params</span><span class="p">:</span>
<a id="__codelineno-0-118" name="__codelineno-0-118"></a>        <span class="n">filter_params</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">non_filter_param</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
<a id="__codelineno-0-119" name="__codelineno-0-119"></a>
<a id="__codelineno-0-120" name="__codelineno-0-120"></a>    <span class="c1"># Some FilterSet field only accept single choice not multiple choices</span>
<a id="__codelineno-0-121" name="__codelineno-0-121"></a>    <span class="c1"># e.g datetime field, bool fields etc.</span>
<a id="__codelineno-0-122" name="__codelineno-0-122"></a>    <span class="n">final_filter_params</span> <span class="o">=</span> <span class="p">{}</span>
<a id="__codelineno-0-123" name="__codelineno-0-123"></a>    <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">filter_params</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
<a id="__codelineno-0-124" name="__codelineno-0-124"></a>        <span class="k">if</span> <span class="n">filter_params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">field</span><span class="p">):</span>
<a id="__codelineno-0-125" name="__codelineno-0-125"></a>            <span class="c1"># `is_single_choice_field` implements `get_filterset_field`, which throws an exception if a field is not found.</span>
<a id="__codelineno-0-126" name="__codelineno-0-126"></a>            <span class="c1"># If an exception is thrown, instead of throwing an exception, set `_is_single_choice_field` to &#39;False&#39;</span>
<a id="__codelineno-0-127" name="__codelineno-0-127"></a>            <span class="c1"># because the fields that were not discovered are still necessary.</span>
<a id="__codelineno-0-128" name="__codelineno-0-128"></a>            <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-0-129" name="__codelineno-0-129"></a>                <span class="n">_is_single_choice_field</span> <span class="o">=</span> <span class="n">is_single_choice_field</span><span class="p">(</span><span class="n">filterset</span><span class="p">,</span> <span class="n">field</span><span class="p">)</span>
<a id="__codelineno-0-130" name="__codelineno-0-130"></a>            <span class="k">except</span> <span class="n">exceptions</span><span class="o">.</span><span class="n">FilterSetFieldNotFound</span><span class="p">:</span>
<a id="__codelineno-0-131" name="__codelineno-0-131"></a>                <span class="n">_is_single_choice_field</span> <span class="o">=</span> <span class="kc">False</span>
<a id="__codelineno-0-132" name="__codelineno-0-132"></a>
<a id="__codelineno-0-133" name="__codelineno-0-133"></a>            <span class="n">final_filter_params</span><span class="p">[</span><span class="n">field</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
<a id="__codelineno-0-134" name="__codelineno-0-134"></a>                <span class="n">filter_params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">field</span><span class="p">)</span> <span class="k">if</span> <span class="n">_is_single_choice_field</span> <span class="k">else</span> <span class="n">filter_params</span><span class="o">.</span><span class="n">getlist</span><span class="p">(</span><span class="n">field</span><span class="p">)</span>
<a id="__codelineno-0-135" name="__codelineno-0-135"></a>            <span class="p">)</span>
<a id="__codelineno-0-136" name="__codelineno-0-136"></a>
<a id="__codelineno-0-137" name="__codelineno-0-137"></a>    <span class="k">return</span> <span class="n">final_filter_params</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h2 id="nautobot.apps.utils.get_filterset_for_model" class="doc doc-heading">
<code class="highlight language-python"><span class="n">nautobot</span><span class="o">.</span><span class="n">apps</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">get_filterset_for_model</span><span class="p">(</span><span class="n">model</span><span class="p">)</span></code>

<a href="#nautobot.apps.utils.get_filterset_for_model" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
  
      <p>Return the <code>FilterSet</code> class associated with a given <code>model</code>.</p>
<p>The <code>FilterSet</code> class is expected to be in the <code>filters</code> module within the application
associated with the model and its name is expected to be <code>{ModelName}FilterSet</code>.</p>
<p>If a matching <code>FilterSet</code> is not found, this will return <code>None</code>.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>model</code></td>
          <td>
                <code>BaseModel</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A model class</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>Union[FilterSet, None]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Either the <code>FilterSet</code> class or <code>None</code></p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>nautobot/core/utils/lookup.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-143">143</a></span>
<span class="normal"><a href="#__codelineno-0-144">144</a></span>
<span class="normal"><a href="#__codelineno-0-145">145</a></span>
<span class="normal"><a href="#__codelineno-0-146">146</a></span>
<span class="normal"><a href="#__codelineno-0-147">147</a></span>
<span class="normal"><a href="#__codelineno-0-148">148</a></span>
<span class="normal"><a href="#__codelineno-0-149">149</a></span>
<span class="normal"><a href="#__codelineno-0-150">150</a></span>
<span class="normal"><a href="#__codelineno-0-151">151</a></span>
<span class="normal"><a href="#__codelineno-0-152">152</a></span>
<span class="normal"><a href="#__codelineno-0-153">153</a></span>
<span class="normal"><a href="#__codelineno-0-154">154</a></span>
<span class="normal"><a href="#__codelineno-0-155">155</a></span>
<span class="normal"><a href="#__codelineno-0-156">156</a></span>
<span class="normal"><a href="#__codelineno-0-157">157</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-143" name="__codelineno-0-143"></a><span class="k">def</span> <span class="nf">get_filterset_for_model</span><span class="p">(</span><span class="n">model</span><span class="p">):</span>
<a id="__codelineno-0-144" name="__codelineno-0-144"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Return the `FilterSet` class associated with a given `model`.</span>
<a id="__codelineno-0-145" name="__codelineno-0-145"></a>
<a id="__codelineno-0-146" name="__codelineno-0-146"></a><span class="sd">    The `FilterSet` class is expected to be in the `filters` module within the application</span>
<a id="__codelineno-0-147" name="__codelineno-0-147"></a><span class="sd">    associated with the model and its name is expected to be `{ModelName}FilterSet`.</span>
<a id="__codelineno-0-148" name="__codelineno-0-148"></a>
<a id="__codelineno-0-149" name="__codelineno-0-149"></a><span class="sd">    If a matching `FilterSet` is not found, this will return `None`.</span>
<a id="__codelineno-0-150" name="__codelineno-0-150"></a>
<a id="__codelineno-0-151" name="__codelineno-0-151"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-152" name="__codelineno-0-152"></a><span class="sd">        model (BaseModel): A model class</span>
<a id="__codelineno-0-153" name="__codelineno-0-153"></a>
<a id="__codelineno-0-154" name="__codelineno-0-154"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-155" name="__codelineno-0-155"></a><span class="sd">        (Union[FilterSet,None]): Either the `FilterSet` class or `None`</span>
<a id="__codelineno-0-156" name="__codelineno-0-156"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-157" name="__codelineno-0-157"></a>    <span class="k">return</span> <span class="n">get_related_class_for_model</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">module_name</span><span class="o">=</span><span class="s2">&quot;filters&quot;</span><span class="p">,</span> <span class="n">object_suffix</span><span class="o">=</span><span class="s2">&quot;FilterSet&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h2 id="nautobot.apps.utils.get_filterset_parameter_form_field" class="doc doc-heading">
<code class="highlight language-python"><span class="n">nautobot</span><span class="o">.</span><span class="n">apps</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">get_filterset_parameter_form_field</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">parameter</span><span class="p">,</span> <span class="n">filterset</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#nautobot.apps.utils.get_filterset_parameter_form_field" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
  
      <p>Return the relevant form field instance for a filterset parameter e.g DynamicModelMultipleChoiceField, forms.IntegerField e.t.c</p>

          <details class="quote">
            <summary>Source code in <code>nautobot/core/utils/filtering.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-86"> 86</a></span>
<span class="normal"><a href="#__codelineno-0-87"> 87</a></span>
<span class="normal"><a href="#__codelineno-0-88"> 88</a></span>
<span class="normal"><a href="#__codelineno-0-89"> 89</a></span>
<span class="normal"><a href="#__codelineno-0-90"> 90</a></span>
<span class="normal"><a href="#__codelineno-0-91"> 91</a></span>
<span class="normal"><a href="#__codelineno-0-92"> 92</a></span>
<span class="normal"><a href="#__codelineno-0-93"> 93</a></span>
<span class="normal"><a href="#__codelineno-0-94"> 94</a></span>
<span class="normal"><a href="#__codelineno-0-95"> 95</a></span>
<span class="normal"><a href="#__codelineno-0-96"> 96</a></span>
<span class="normal"><a href="#__codelineno-0-97"> 97</a></span>
<span class="normal"><a href="#__codelineno-0-98"> 98</a></span>
<span class="normal"><a href="#__codelineno-0-99"> 99</a></span>
<span class="normal"><a href="#__codelineno-0-100">100</a></span>
<span class="normal"><a href="#__codelineno-0-101">101</a></span>
<span class="normal"><a href="#__codelineno-0-102">102</a></span>
<span class="normal"><a href="#__codelineno-0-103">103</a></span>
<span class="normal"><a href="#__codelineno-0-104">104</a></span>
<span class="normal"><a href="#__codelineno-0-105">105</a></span>
<span class="normal"><a href="#__codelineno-0-106">106</a></span>
<span class="normal"><a href="#__codelineno-0-107">107</a></span>
<span class="normal"><a href="#__codelineno-0-108">108</a></span>
<span class="normal"><a href="#__codelineno-0-109">109</a></span>
<span class="normal"><a href="#__codelineno-0-110">110</a></span>
<span class="normal"><a href="#__codelineno-0-111">111</a></span>
<span class="normal"><a href="#__codelineno-0-112">112</a></span>
<span class="normal"><a href="#__codelineno-0-113">113</a></span>
<span class="normal"><a href="#__codelineno-0-114">114</a></span>
<span class="normal"><a href="#__codelineno-0-115">115</a></span>
<span class="normal"><a href="#__codelineno-0-116">116</a></span>
<span class="normal"><a href="#__codelineno-0-117">117</a></span>
<span class="normal"><a href="#__codelineno-0-118">118</a></span>
<span class="normal"><a href="#__codelineno-0-119">119</a></span>
<span class="normal"><a href="#__codelineno-0-120">120</a></span>
<span class="normal"><a href="#__codelineno-0-121">121</a></span>
<span class="normal"><a href="#__codelineno-0-122">122</a></span>
<span class="normal"><a href="#__codelineno-0-123">123</a></span>
<span class="normal"><a href="#__codelineno-0-124">124</a></span>
<span class="normal"><a href="#__codelineno-0-125">125</a></span>
<span class="normal"><a href="#__codelineno-0-126">126</a></span>
<span class="normal"><a href="#__codelineno-0-127">127</a></span>
<span class="normal"><a href="#__codelineno-0-128">128</a></span>
<span class="normal"><a href="#__codelineno-0-129">129</a></span>
<span class="normal"><a href="#__codelineno-0-130">130</a></span>
<span class="normal"><a href="#__codelineno-0-131">131</a></span>
<span class="normal"><a href="#__codelineno-0-132">132</a></span>
<span class="normal"><a href="#__codelineno-0-133">133</a></span>
<span class="normal"><a href="#__codelineno-0-134">134</a></span>
<span class="normal"><a href="#__codelineno-0-135">135</a></span>
<span class="normal"><a href="#__codelineno-0-136">136</a></span>
<span class="normal"><a href="#__codelineno-0-137">137</a></span>
<span class="normal"><a href="#__codelineno-0-138">138</a></span>
<span class="normal"><a href="#__codelineno-0-139">139</a></span>
<span class="normal"><a href="#__codelineno-0-140">140</a></span>
<span class="normal"><a href="#__codelineno-0-141">141</a></span>
<span class="normal"><a href="#__codelineno-0-142">142</a></span>
<span class="normal"><a href="#__codelineno-0-143">143</a></span>
<span class="normal"><a href="#__codelineno-0-144">144</a></span>
<span class="normal"><a href="#__codelineno-0-145">145</a></span>
<span class="normal"><a href="#__codelineno-0-146">146</a></span>
<span class="normal"><a href="#__codelineno-0-147">147</a></span>
<span class="normal"><a href="#__codelineno-0-148">148</a></span>
<span class="normal"><a href="#__codelineno-0-149">149</a></span>
<span class="normal"><a href="#__codelineno-0-150">150</a></span>
<span class="normal"><a href="#__codelineno-0-151">151</a></span>
<span class="normal"><a href="#__codelineno-0-152">152</a></span>
<span class="normal"><a href="#__codelineno-0-153">153</a></span>
<span class="normal"><a href="#__codelineno-0-154">154</a></span>
<span class="normal"><a href="#__codelineno-0-155">155</a></span>
<span class="normal"><a href="#__codelineno-0-156">156</a></span>
<span class="normal"><a href="#__codelineno-0-157">157</a></span>
<span class="normal"><a href="#__codelineno-0-158">158</a></span>
<span class="normal"><a href="#__codelineno-0-159">159</a></span>
<span class="normal"><a href="#__codelineno-0-160">160</a></span>
<span class="normal"><a href="#__codelineno-0-161">161</a></span>
<span class="normal"><a href="#__codelineno-0-162">162</a></span>
<span class="normal"><a href="#__codelineno-0-163">163</a></span>
<span class="normal"><a href="#__codelineno-0-164">164</a></span>
<span class="normal"><a href="#__codelineno-0-165">165</a></span>
<span class="normal"><a href="#__codelineno-0-166">166</a></span>
<span class="normal"><a href="#__codelineno-0-167">167</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-86" name="__codelineno-0-86"></a><span class="k">def</span> <span class="nf">get_filterset_parameter_form_field</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">parameter</span><span class="p">,</span> <span class="n">filterset</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<a id="__codelineno-0-87" name="__codelineno-0-87"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-88" name="__codelineno-0-88"></a><span class="sd">    Return the relevant form field instance for a filterset parameter e.g DynamicModelMultipleChoiceField, forms.IntegerField e.t.c</span>
<a id="__codelineno-0-89" name="__codelineno-0-89"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-90" name="__codelineno-0-90"></a>    <span class="c1"># Avoid circular import</span>
<a id="__codelineno-0-91" name="__codelineno-0-91"></a>    <span class="kn">from</span> <span class="nn">nautobot.dcim.models</span> <span class="kn">import</span> <span class="n">Device</span>
<a id="__codelineno-0-92" name="__codelineno-0-92"></a>    <span class="kn">from</span> <span class="nn">nautobot.extras.filters</span> <span class="kn">import</span> <span class="n">ContentTypeMultipleChoiceFilter</span><span class="p">,</span> <span class="n">CustomFieldFilterMixin</span><span class="p">,</span> <span class="n">StatusFilter</span>
<a id="__codelineno-0-93" name="__codelineno-0-93"></a>    <span class="kn">from</span> <span class="nn">nautobot.extras.models</span> <span class="kn">import</span> <span class="n">ConfigContext</span><span class="p">,</span> <span class="n">Role</span><span class="p">,</span> <span class="n">Status</span><span class="p">,</span> <span class="n">Tag</span>
<a id="__codelineno-0-94" name="__codelineno-0-94"></a>    <span class="kn">from</span> <span class="nn">nautobot.extras.utils</span> <span class="kn">import</span> <span class="n">ChangeLoggedModelsQuery</span><span class="p">,</span> <span class="n">RoleModelsQuery</span><span class="p">,</span> <span class="n">TaggableClassesQuery</span>
<a id="__codelineno-0-95" name="__codelineno-0-95"></a>    <span class="kn">from</span> <span class="nn">nautobot.core.filters</span> <span class="kn">import</span> <span class="n">MultiValueDecimalFilter</span><span class="p">,</span> <span class="n">MultiValueFloatFilter</span>
<a id="__codelineno-0-96" name="__codelineno-0-96"></a>    <span class="kn">from</span> <span class="nn">nautobot.core.forms</span> <span class="kn">import</span> <span class="p">(</span>
<a id="__codelineno-0-97" name="__codelineno-0-97"></a>        <span class="n">BOOLEAN_CHOICES</span><span class="p">,</span>
<a id="__codelineno-0-98" name="__codelineno-0-98"></a>        <span class="n">DynamicModelMultipleChoiceField</span><span class="p">,</span>
<a id="__codelineno-0-99" name="__codelineno-0-99"></a>        <span class="n">MultipleContentTypeField</span><span class="p">,</span>
<a id="__codelineno-0-100" name="__codelineno-0-100"></a>        <span class="n">StaticSelect2</span><span class="p">,</span>
<a id="__codelineno-0-101" name="__codelineno-0-101"></a>        <span class="n">StaticSelect2Multiple</span><span class="p">,</span>
<a id="__codelineno-0-102" name="__codelineno-0-102"></a>    <span class="p">)</span>
<a id="__codelineno-0-103" name="__codelineno-0-103"></a>    <span class="kn">from</span> <span class="nn">nautobot.virtualization.models</span> <span class="kn">import</span> <span class="n">VirtualMachine</span>
<a id="__codelineno-0-104" name="__codelineno-0-104"></a>
<a id="__codelineno-0-105" name="__codelineno-0-105"></a>    <span class="k">if</span> <span class="n">filterset</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">filterset</span><span class="o">.</span><span class="n">Meta</span><span class="o">.</span><span class="n">model</span> <span class="o">!=</span> <span class="n">model</span><span class="p">:</span>
<a id="__codelineno-0-106" name="__codelineno-0-106"></a>        <span class="n">filterset</span> <span class="o">=</span> <span class="n">get_filterset_for_model</span><span class="p">(</span><span class="n">model</span><span class="p">)()</span>
<a id="__codelineno-0-107" name="__codelineno-0-107"></a>    <span class="n">field</span> <span class="o">=</span> <span class="n">get_filterset_field</span><span class="p">(</span><span class="n">filterset</span><span class="p">,</span> <span class="n">parameter</span><span class="p">)</span>
<a id="__codelineno-0-108" name="__codelineno-0-108"></a>    <span class="n">form_field</span> <span class="o">=</span> <span class="n">field</span><span class="o">.</span><span class="n">field</span>
<a id="__codelineno-0-109" name="__codelineno-0-109"></a>
<a id="__codelineno-0-110" name="__codelineno-0-110"></a>    <span class="c1"># TODO(Culver): We are having to replace some widgets here because multivalue_field_factory that generates these isn&#39;t smart enough</span>
<a id="__codelineno-0-111" name="__codelineno-0-111"></a>    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">field</span><span class="p">,</span> <span class="n">CustomFieldFilterMixin</span><span class="p">):</span>
<a id="__codelineno-0-112" name="__codelineno-0-112"></a>        <span class="n">form_field</span> <span class="o">=</span> <span class="n">field</span><span class="o">.</span><span class="n">custom_field</span><span class="o">.</span><span class="n">to_filter_form_field</span><span class="p">(</span><span class="n">lookup_expr</span><span class="o">=</span><span class="n">field</span><span class="o">.</span><span class="n">lookup_expr</span><span class="p">)</span>
<a id="__codelineno-0-113" name="__codelineno-0-113"></a>    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">field</span><span class="p">,</span> <span class="p">(</span><span class="n">MultiValueDecimalFilter</span><span class="p">,</span> <span class="n">MultiValueFloatFilter</span><span class="p">)):</span>
<a id="__codelineno-0-114" name="__codelineno-0-114"></a>        <span class="n">form_field</span> <span class="o">=</span> <span class="n">forms</span><span class="o">.</span><span class="n">DecimalField</span><span class="p">()</span>
<a id="__codelineno-0-115" name="__codelineno-0-115"></a>    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">field</span><span class="p">,</span> <span class="n">NumberFilter</span><span class="p">):</span>
<a id="__codelineno-0-116" name="__codelineno-0-116"></a>        <span class="n">form_field</span> <span class="o">=</span> <span class="n">forms</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">()</span>
<a id="__codelineno-0-117" name="__codelineno-0-117"></a>    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">field</span><span class="p">,</span> <span class="n">ModelMultipleChoiceFilter</span><span class="p">):</span>
<a id="__codelineno-0-118" name="__codelineno-0-118"></a>        <span class="n">related_model</span> <span class="o">=</span> <span class="n">Status</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">field</span><span class="p">,</span> <span class="n">StatusFilter</span><span class="p">)</span> <span class="k">else</span> <span class="n">field</span><span class="o">.</span><span class="n">extra</span><span class="p">[</span><span class="s2">&quot;queryset&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">model</span>
<a id="__codelineno-0-119" name="__codelineno-0-119"></a>        <span class="n">form_attr</span> <span class="o">=</span> <span class="p">{</span>
<a id="__codelineno-0-120" name="__codelineno-0-120"></a>            <span class="s2">&quot;queryset&quot;</span><span class="p">:</span> <span class="n">related_model</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">(),</span>
<a id="__codelineno-0-121" name="__codelineno-0-121"></a>            <span class="s2">&quot;to_field_name&quot;</span><span class="p">:</span> <span class="n">field</span><span class="o">.</span><span class="n">extra</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;to_field_name&quot;</span><span class="p">,</span> <span class="s2">&quot;id&quot;</span><span class="p">),</span>
<a id="__codelineno-0-122" name="__codelineno-0-122"></a>        <span class="p">}</span>
<a id="__codelineno-0-123" name="__codelineno-0-123"></a>        <span class="c1"># ConfigContext requires content_type set to Device and VirtualMachine</span>
<a id="__codelineno-0-124" name="__codelineno-0-124"></a>        <span class="k">if</span> <span class="n">model</span> <span class="o">==</span> <span class="n">ConfigContext</span><span class="p">:</span>
<a id="__codelineno-0-125" name="__codelineno-0-125"></a>            <span class="n">form_attr</span><span class="p">[</span><span class="s2">&quot;query_params&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;content_types&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">Device</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">label_lower</span><span class="p">,</span> <span class="n">VirtualMachine</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">label_lower</span><span class="p">]}</span>
<a id="__codelineno-0-126" name="__codelineno-0-126"></a>        <span class="c1"># Status and Tag api requires content_type, to limit result to only related content_types</span>
<a id="__codelineno-0-127" name="__codelineno-0-127"></a>        <span class="k">elif</span> <span class="n">related_model</span> <span class="ow">in</span> <span class="p">[</span><span class="n">Role</span><span class="p">,</span> <span class="n">Status</span><span class="p">,</span> <span class="n">Tag</span><span class="p">]:</span>
<a id="__codelineno-0-128" name="__codelineno-0-128"></a>            <span class="n">form_attr</span><span class="p">[</span><span class="s2">&quot;query_params&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;content_types&quot;</span><span class="p">:</span> <span class="n">model</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">label_lower</span><span class="p">}</span>
<a id="__codelineno-0-129" name="__codelineno-0-129"></a>
<a id="__codelineno-0-130" name="__codelineno-0-130"></a>        <span class="n">form_field</span> <span class="o">=</span> <span class="n">DynamicModelMultipleChoiceField</span><span class="p">(</span><span class="o">**</span><span class="n">form_attr</span><span class="p">)</span>
<a id="__codelineno-0-131" name="__codelineno-0-131"></a>    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span>
<a id="__codelineno-0-132" name="__codelineno-0-132"></a>        <span class="n">field</span><span class="p">,</span> <span class="n">ContentTypeMultipleChoiceFilter</span>
<a id="__codelineno-0-133" name="__codelineno-0-133"></a>    <span class="p">):</span>  <span class="c1"># While there are other objects using `ContentTypeMultipleChoiceFilter`, the case where</span>
<a id="__codelineno-0-134" name="__codelineno-0-134"></a>        <span class="c1"># models that have such a filter and the `verbose_name_plural` has multiple words is ony one: &quot;dynamic groups&quot;.</span>
<a id="__codelineno-0-135" name="__codelineno-0-135"></a>        <span class="kn">from</span> <span class="nn">nautobot.core.models.fields</span> <span class="kn">import</span> <span class="n">slugify_dashes_to_underscores</span>  <span class="c1"># Avoid circular import</span>
<a id="__codelineno-0-136" name="__codelineno-0-136"></a>
<a id="__codelineno-0-137" name="__codelineno-0-137"></a>        <span class="n">plural_name</span> <span class="o">=</span> <span class="n">slugify_dashes_to_underscores</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">verbose_name_plural</span><span class="p">)</span>
<a id="__codelineno-0-138" name="__codelineno-0-138"></a>        <span class="c1"># Cable-connectable models use &quot;cable_terminations&quot;, not &quot;cables&quot;, as the feature name</span>
<a id="__codelineno-0-139" name="__codelineno-0-139"></a>        <span class="k">if</span> <span class="n">plural_name</span> <span class="o">==</span> <span class="s2">&quot;cables&quot;</span><span class="p">:</span>
<a id="__codelineno-0-140" name="__codelineno-0-140"></a>            <span class="n">plural_name</span> <span class="o">==</span> <span class="s2">&quot;cable_terminations&quot;</span>
<a id="__codelineno-0-141" name="__codelineno-0-141"></a>        <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-0-142" name="__codelineno-0-142"></a>            <span class="n">form_field</span> <span class="o">=</span> <span class="n">MultipleContentTypeField</span><span class="p">(</span><span class="n">choices_as_strings</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">feature</span><span class="o">=</span><span class="n">plural_name</span><span class="p">)</span>
<a id="__codelineno-0-143" name="__codelineno-0-143"></a>        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
<a id="__codelineno-0-144" name="__codelineno-0-144"></a>            <span class="c1"># `MultipleContentTypeField` employs `registry[&quot;model features&quot;][feature]`, which may</span>
<a id="__codelineno-0-145" name="__codelineno-0-145"></a>            <span class="c1"># result in an error if `feature` is not found in the `registry[&quot;model features&quot;]` dict.</span>
<a id="__codelineno-0-146" name="__codelineno-0-146"></a>            <span class="c1"># In this case use queryset</span>
<a id="__codelineno-0-147" name="__codelineno-0-147"></a>            <span class="n">queryset_map</span> <span class="o">=</span> <span class="p">{</span>
<a id="__codelineno-0-148" name="__codelineno-0-148"></a>                <span class="s2">&quot;tags&quot;</span><span class="p">:</span> <span class="n">TaggableClassesQuery</span><span class="p">,</span>
<a id="__codelineno-0-149" name="__codelineno-0-149"></a>                <span class="s2">&quot;job_hooks&quot;</span><span class="p">:</span> <span class="n">ChangeLoggedModelsQuery</span><span class="p">,</span>
<a id="__codelineno-0-150" name="__codelineno-0-150"></a>                <span class="s2">&quot;roles&quot;</span><span class="p">:</span> <span class="n">RoleModelsQuery</span><span class="p">,</span>
<a id="__codelineno-0-151" name="__codelineno-0-151"></a>            <span class="p">}</span>
<a id="__codelineno-0-152" name="__codelineno-0-152"></a>            <span class="n">form_field</span> <span class="o">=</span> <span class="n">MultipleContentTypeField</span><span class="p">(</span>
<a id="__codelineno-0-153" name="__codelineno-0-153"></a>                <span class="n">choices_as_strings</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">queryset</span><span class="o">=</span><span class="n">queryset_map</span><span class="p">[</span><span class="n">plural_name</span><span class="p">]()</span><span class="o">.</span><span class="n">as_queryset</span><span class="p">()</span>
<a id="__codelineno-0-154" name="__codelineno-0-154"></a>            <span class="p">)</span>
<a id="__codelineno-0-155" name="__codelineno-0-155"></a>    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">field</span><span class="p">,</span> <span class="p">(</span><span class="n">MultipleChoiceFilter</span><span class="p">,</span> <span class="n">ChoiceFilter</span><span class="p">))</span> <span class="ow">and</span> <span class="s2">&quot;choices&quot;</span> <span class="ow">in</span> <span class="n">field</span><span class="o">.</span><span class="n">extra</span><span class="p">:</span>
<a id="__codelineno-0-156" name="__codelineno-0-156"></a>        <span class="n">form_field</span> <span class="o">=</span> <span class="n">forms</span><span class="o">.</span><span class="n">MultipleChoiceField</span><span class="p">(</span><span class="n">choices</span><span class="o">=</span><span class="n">field</span><span class="o">.</span><span class="n">extra</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;choices&quot;</span><span class="p">),</span> <span class="n">widget</span><span class="o">=</span><span class="n">StaticSelect2Multiple</span><span class="p">)</span>
<a id="__codelineno-0-157" name="__codelineno-0-157"></a>
<a id="__codelineno-0-158" name="__codelineno-0-158"></a>    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">field</span><span class="p">,</span> <span class="n">BooleanFilter</span><span class="p">):</span>
<a id="__codelineno-0-159" name="__codelineno-0-159"></a>        <span class="n">form_field</span> <span class="o">=</span> <span class="n">forms</span><span class="o">.</span><span class="n">ChoiceField</span><span class="p">(</span><span class="n">choices</span><span class="o">=</span><span class="n">BOOLEAN_CHOICES</span><span class="p">,</span> <span class="n">widget</span><span class="o">=</span><span class="n">StaticSelect2</span><span class="p">)</span>
<a id="__codelineno-0-160" name="__codelineno-0-160"></a>
<a id="__codelineno-0-161" name="__codelineno-0-161"></a>    <span class="n">form_field</span><span class="o">.</span><span class="n">required</span> <span class="o">=</span> <span class="kc">False</span>
<a id="__codelineno-0-162" name="__codelineno-0-162"></a>    <span class="n">form_field</span><span class="o">.</span><span class="n">initial</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-163" name="__codelineno-0-163"></a>    <span class="n">form_field</span><span class="o">.</span><span class="n">widget</span><span class="o">.</span><span class="n">attrs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;required&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
<a id="__codelineno-0-164" name="__codelineno-0-164"></a>
<a id="__codelineno-0-165" name="__codelineno-0-165"></a>    <span class="n">css_classes</span> <span class="o">=</span> <span class="n">form_field</span><span class="o">.</span><span class="n">widget</span><span class="o">.</span><span class="n">attrs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;class&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
<a id="__codelineno-0-166" name="__codelineno-0-166"></a>    <span class="n">form_field</span><span class="o">.</span><span class="n">widget</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s2">&quot;class&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;form-control &quot;</span> <span class="o">+</span> <span class="n">css_classes</span>
<a id="__codelineno-0-167" name="__codelineno-0-167"></a>    <span class="k">return</span> <span class="n">form_field</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h2 id="nautobot.apps.utils.get_form_for_model" class="doc doc-heading">
<code class="highlight language-python"><span class="n">nautobot</span><span class="o">.</span><span class="n">apps</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">get_form_for_model</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">form_prefix</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span></code>

<a href="#nautobot.apps.utils.get_form_for_model" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
  
      <p>Return the <code>Form</code> class associated with a given <code>model</code>.</p>
<p>The <code>Form</code> class is expected to be in the <code>forms</code> module within the application
associated with the model and its name is expected to be <code>{ModelName}{form_prefix}Form</code>.</p>
<p>If a matching <code>Form</code> is not found, this will return <code>None</code>.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>form_prefix</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>An additional prefix for the form name (e.g. <code>Filter</code>, such as to retrieve
<code>FooFilterForm</code>) that will come after the model name.</p>
            </div>
          </td>
          <td>
                <code>&#39;&#39;</code>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>Union[Form, None]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Either the <code>Form</code> class or <code>None</code></p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>nautobot/core/utils/lookup.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-160">160</a></span>
<span class="normal"><a href="#__codelineno-0-161">161</a></span>
<span class="normal"><a href="#__codelineno-0-162">162</a></span>
<span class="normal"><a href="#__codelineno-0-163">163</a></span>
<span class="normal"><a href="#__codelineno-0-164">164</a></span>
<span class="normal"><a href="#__codelineno-0-165">165</a></span>
<span class="normal"><a href="#__codelineno-0-166">166</a></span>
<span class="normal"><a href="#__codelineno-0-167">167</a></span>
<span class="normal"><a href="#__codelineno-0-168">168</a></span>
<span class="normal"><a href="#__codelineno-0-169">169</a></span>
<span class="normal"><a href="#__codelineno-0-170">170</a></span>
<span class="normal"><a href="#__codelineno-0-171">171</a></span>
<span class="normal"><a href="#__codelineno-0-172">172</a></span>
<span class="normal"><a href="#__codelineno-0-173">173</a></span>
<span class="normal"><a href="#__codelineno-0-174">174</a></span>
<span class="normal"><a href="#__codelineno-0-175">175</a></span>
<span class="normal"><a href="#__codelineno-0-176">176</a></span>
<span class="normal"><a href="#__codelineno-0-177">177</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-160" name="__codelineno-0-160"></a><span class="k">def</span> <span class="nf">get_form_for_model</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">form_prefix</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">):</span>
<a id="__codelineno-0-161" name="__codelineno-0-161"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Return the `Form` class associated with a given `model`.</span>
<a id="__codelineno-0-162" name="__codelineno-0-162"></a>
<a id="__codelineno-0-163" name="__codelineno-0-163"></a><span class="sd">    The `Form` class is expected to be in the `forms` module within the application</span>
<a id="__codelineno-0-164" name="__codelineno-0-164"></a><span class="sd">    associated with the model and its name is expected to be `{ModelName}{form_prefix}Form`.</span>
<a id="__codelineno-0-165" name="__codelineno-0-165"></a>
<a id="__codelineno-0-166" name="__codelineno-0-166"></a><span class="sd">    If a matching `Form` is not found, this will return `None`.</span>
<a id="__codelineno-0-167" name="__codelineno-0-167"></a>
<a id="__codelineno-0-168" name="__codelineno-0-168"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-169" name="__codelineno-0-169"></a><span class="sd">        form_prefix (str):</span>
<a id="__codelineno-0-170" name="__codelineno-0-170"></a><span class="sd">            An additional prefix for the form name (e.g. `Filter`, such as to retrieve</span>
<a id="__codelineno-0-171" name="__codelineno-0-171"></a><span class="sd">            `FooFilterForm`) that will come after the model name.</span>
<a id="__codelineno-0-172" name="__codelineno-0-172"></a>
<a id="__codelineno-0-173" name="__codelineno-0-173"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-174" name="__codelineno-0-174"></a><span class="sd">        (Union[Form, None]): Either the `Form` class or `None`</span>
<a id="__codelineno-0-175" name="__codelineno-0-175"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-176" name="__codelineno-0-176"></a>    <span class="n">object_suffix</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">form_prefix</span><span class="si">}</span><span class="s2">Form&quot;</span>
<a id="__codelineno-0-177" name="__codelineno-0-177"></a>    <span class="k">return</span> <span class="n">get_related_class_for_model</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">module_name</span><span class="o">=</span><span class="s2">&quot;forms&quot;</span><span class="p">,</span> <span class="n">object_suffix</span><span class="o">=</span><span class="n">object_suffix</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h2 id="nautobot.apps.utils.get_latest_release" class="doc doc-heading">
<code class="highlight language-python"><span class="n">nautobot</span><span class="o">.</span><span class="n">apps</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">get_latest_release</span><span class="p">(</span><span class="n">pre_releases</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

<a href="#nautobot.apps.utils.get_latest_release" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
  
      <p>Get latest known Nautobot release from cache, or if not available, queue up a background task to populate the cache.</p>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>(Version, str)</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Latest release version and the release URL, if found in the cache</p>
            </div>
          </td>
        </tr>
        <tr>
          <td>
                <code>(unknown, None)</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>If not present in the cache at this time</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>nautobot/core/releases.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-11">11</a></span>
<span class="normal"><a href="#__codelineno-0-12">12</a></span>
<span class="normal"><a href="#__codelineno-0-13">13</a></span>
<span class="normal"><a href="#__codelineno-0-14">14</a></span>
<span class="normal"><a href="#__codelineno-0-15">15</a></span>
<span class="normal"><a href="#__codelineno-0-16">16</a></span>
<span class="normal"><a href="#__codelineno-0-17">17</a></span>
<span class="normal"><a href="#__codelineno-0-18">18</a></span>
<span class="normal"><a href="#__codelineno-0-19">19</a></span>
<span class="normal"><a href="#__codelineno-0-20">20</a></span>
<span class="normal"><a href="#__codelineno-0-21">21</a></span>
<span class="normal"><a href="#__codelineno-0-22">22</a></span>
<span class="normal"><a href="#__codelineno-0-23">23</a></span>
<span class="normal"><a href="#__codelineno-0-24">24</a></span>
<span class="normal"><a href="#__codelineno-0-25">25</a></span>
<span class="normal"><a href="#__codelineno-0-26">26</a></span>
<span class="normal"><a href="#__codelineno-0-27">27</a></span>
<span class="normal"><a href="#__codelineno-0-28">28</a></span>
<span class="normal"><a href="#__codelineno-0-29">29</a></span>
<span class="normal"><a href="#__codelineno-0-30">30</a></span>
<span class="normal"><a href="#__codelineno-0-31">31</a></span>
<span class="normal"><a href="#__codelineno-0-32">32</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-11" name="__codelineno-0-11"></a><span class="k">def</span> <span class="nf">get_latest_release</span><span class="p">(</span><span class="n">pre_releases</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<a id="__codelineno-0-12" name="__codelineno-0-12"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-13" name="__codelineno-0-13"></a><span class="sd">    Get latest known Nautobot release from cache, or if not available, queue up a background task to populate the cache.</span>
<a id="__codelineno-0-14" name="__codelineno-0-14"></a>
<a id="__codelineno-0-15" name="__codelineno-0-15"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-16" name="__codelineno-0-16"></a><span class="sd">        (Version, str): Latest release version and the release URL, if found in the cache</span>
<a id="__codelineno-0-17" name="__codelineno-0-17"></a><span class="sd">        (&quot;unknown&quot;, None): If not present in the cache at this time</span>
<a id="__codelineno-0-18" name="__codelineno-0-18"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-19" name="__codelineno-0-19"></a>    <span class="k">if</span> <span class="n">get_settings_or_config</span><span class="p">(</span><span class="s2">&quot;RELEASE_CHECK_URL&quot;</span><span class="p">):</span>
<a id="__codelineno-0-20" name="__codelineno-0-20"></a>        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Checking for most recent release&quot;</span><span class="p">)</span>
<a id="__codelineno-0-21" name="__codelineno-0-21"></a>        <span class="n">latest_release</span> <span class="o">=</span> <span class="n">cache</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;latest_release&quot;</span><span class="p">)</span>
<a id="__codelineno-0-22" name="__codelineno-0-22"></a>        <span class="k">if</span> <span class="n">latest_release</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-23" name="__codelineno-0-23"></a>            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Found cached release: </span><span class="si">{</span><span class="n">latest_release</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-24" name="__codelineno-0-24"></a>            <span class="k">return</span> <span class="n">latest_release</span>
<a id="__codelineno-0-25" name="__codelineno-0-25"></a>        <span class="c1"># Get the releases in the background worker, it will fill the cache</span>
<a id="__codelineno-0-26" name="__codelineno-0-26"></a>        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Initiating background task to retrieve updated releases list&quot;</span><span class="p">)</span>
<a id="__codelineno-0-27" name="__codelineno-0-27"></a>        <span class="n">get_releases</span><span class="o">.</span><span class="n">delay</span><span class="p">(</span><span class="n">pre_releases</span><span class="o">=</span><span class="n">pre_releases</span><span class="p">)</span>
<a id="__codelineno-0-28" name="__codelineno-0-28"></a>
<a id="__codelineno-0-29" name="__codelineno-0-29"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-30" name="__codelineno-0-30"></a>        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Skipping release check; RELEASE_CHECK_URL not defined&quot;</span><span class="p">)</span>
<a id="__codelineno-0-31" name="__codelineno-0-31"></a>
<a id="__codelineno-0-32" name="__codelineno-0-32"></a>    <span class="k">return</span> <span class="s2">&quot;unknown&quot;</span><span class="p">,</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h2 id="nautobot.apps.utils.get_model_from_name" class="doc doc-heading">
<code class="highlight language-python"><span class="n">nautobot</span><span class="o">.</span><span class="n">apps</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">get_model_from_name</span><span class="p">(</span><span class="n">model_name</span><span class="p">)</span></code>

<a href="#nautobot.apps.utils.get_model_from_name" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
  
      <p>Given a full model name in dotted format (example: <code>dcim.model</code>), a model class is returned if valid.</p>
<p>:param model_name: Full dotted name for a model as a string (ex: <code>dcim.model</code>)
:type model_name: str</p>
<p>:raises TypeError: If given model name is not found.</p>
<p>:return: Found model.</p>

          <details class="quote">
            <summary>Source code in <code>nautobot/core/utils/lookup.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-29">29</a></span>
<span class="normal"><a href="#__codelineno-0-30">30</a></span>
<span class="normal"><a href="#__codelineno-0-31">31</a></span>
<span class="normal"><a href="#__codelineno-0-32">32</a></span>
<span class="normal"><a href="#__codelineno-0-33">33</a></span>
<span class="normal"><a href="#__codelineno-0-34">34</a></span>
<span class="normal"><a href="#__codelineno-0-35">35</a></span>
<span class="normal"><a href="#__codelineno-0-36">36</a></span>
<span class="normal"><a href="#__codelineno-0-37">37</a></span>
<span class="normal"><a href="#__codelineno-0-38">38</a></span>
<span class="normal"><a href="#__codelineno-0-39">39</a></span>
<span class="normal"><a href="#__codelineno-0-40">40</a></span>
<span class="normal"><a href="#__codelineno-0-41">41</a></span>
<span class="normal"><a href="#__codelineno-0-42">42</a></span>
<span class="normal"><a href="#__codelineno-0-43">43</a></span>
<span class="normal"><a href="#__codelineno-0-44">44</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-29" name="__codelineno-0-29"></a><span class="k">def</span> <span class="nf">get_model_from_name</span><span class="p">(</span><span class="n">model_name</span><span class="p">):</span>
<a id="__codelineno-0-30" name="__codelineno-0-30"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Given a full model name in dotted format (example: `dcim.model`), a model class is returned if valid.</span>
<a id="__codelineno-0-31" name="__codelineno-0-31"></a>
<a id="__codelineno-0-32" name="__codelineno-0-32"></a><span class="sd">    :param model_name: Full dotted name for a model as a string (ex: `dcim.model`)</span>
<a id="__codelineno-0-33" name="__codelineno-0-33"></a><span class="sd">    :type model_name: str</span>
<a id="__codelineno-0-34" name="__codelineno-0-34"></a>
<a id="__codelineno-0-35" name="__codelineno-0-35"></a><span class="sd">    :raises TypeError: If given model name is not found.</span>
<a id="__codelineno-0-36" name="__codelineno-0-36"></a>
<a id="__codelineno-0-37" name="__codelineno-0-37"></a><span class="sd">    :return: Found model.</span>
<a id="__codelineno-0-38" name="__codelineno-0-38"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-39" name="__codelineno-0-39"></a>    <span class="kn">from</span> <span class="nn">django.apps</span> <span class="kn">import</span> <span class="n">apps</span>
<a id="__codelineno-0-40" name="__codelineno-0-40"></a>
<a id="__codelineno-0-41" name="__codelineno-0-41"></a>    <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-0-42" name="__codelineno-0-42"></a>        <span class="k">return</span> <span class="n">apps</span><span class="o">.</span><span class="n">get_model</span><span class="p">(</span><span class="n">model_name</span><span class="p">)</span>
<a id="__codelineno-0-43" name="__codelineno-0-43"></a>    <span class="k">except</span> <span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="ne">LookupError</span><span class="p">)</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
<a id="__codelineno-0-44" name="__codelineno-0-44"></a>        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="n">exc</span><span class="p">)</span> <span class="kn">from</span> <span class="nn">exc</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h2 id="nautobot.apps.utils.get_only_new_ui_ready_routes" class="doc doc-heading">
<code class="highlight language-python"><span class="n">nautobot</span><span class="o">.</span><span class="n">apps</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">get_only_new_ui_ready_routes</span><span class="p">(</span><span class="n">patterns</span><span class="p">,</span> <span class="n">prefix</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span></code>

<a href="#nautobot.apps.utils.get_only_new_ui_ready_routes" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
  
      <p>Recursively traverses Django URL patterns to find routes associated with view classes
that have the <code>use_new_ui</code> attribute set to <code>True</code>.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>patterns</code></td>
          <td>
                <code>list</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>List of URL patterns to traverse.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>prefix</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>URL pattern prefix to include when constructing route patterns.</p>
            </div>
          </td>
          <td>
                <code>&#39;&#39;</code>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>list</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A list of route patterns associated with view classes that use the new UI.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>nautobot/core/utils/navigation.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-0-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-0-10">10</a></span>
<span class="normal"><a href="#__codelineno-0-11">11</a></span>
<span class="normal"><a href="#__codelineno-0-12">12</a></span>
<span class="normal"><a href="#__codelineno-0-13">13</a></span>
<span class="normal"><a href="#__codelineno-0-14">14</a></span>
<span class="normal"><a href="#__codelineno-0-15">15</a></span>
<span class="normal"><a href="#__codelineno-0-16">16</a></span>
<span class="normal"><a href="#__codelineno-0-17">17</a></span>
<span class="normal"><a href="#__codelineno-0-18">18</a></span>
<span class="normal"><a href="#__codelineno-0-19">19</a></span>
<span class="normal"><a href="#__codelineno-0-20">20</a></span>
<span class="normal"><a href="#__codelineno-0-21">21</a></span>
<span class="normal"><a href="#__codelineno-0-22">22</a></span>
<span class="normal"><a href="#__codelineno-0-23">23</a></span>
<span class="normal"><a href="#__codelineno-0-24">24</a></span>
<span class="normal"><a href="#__codelineno-0-25">25</a></span>
<span class="normal"><a href="#__codelineno-0-26">26</a></span>
<span class="normal"><a href="#__codelineno-0-27">27</a></span>
<span class="normal"><a href="#__codelineno-0-28">28</a></span>
<span class="normal"><a href="#__codelineno-0-29">29</a></span>
<span class="normal"><a href="#__codelineno-0-30">30</a></span>
<span class="normal"><a href="#__codelineno-0-31">31</a></span>
<span class="normal"><a href="#__codelineno-0-32">32</a></span>
<span class="normal"><a href="#__codelineno-0-33">33</a></span>
<span class="normal"><a href="#__codelineno-0-34">34</a></span>
<span class="normal"><a href="#__codelineno-0-35">35</a></span>
<span class="normal"><a href="#__codelineno-0-36">36</a></span>
<span class="normal"><a href="#__codelineno-0-37">37</a></span>
<span class="normal"><a href="#__codelineno-0-38">38</a></span>
<span class="normal"><a href="#__codelineno-0-39">39</a></span>
<span class="normal"><a href="#__codelineno-0-40">40</a></span>
<span class="normal"><a href="#__codelineno-0-41">41</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-8" name="__codelineno-0-8"></a><span class="k">def</span> <span class="nf">get_only_new_ui_ready_routes</span><span class="p">(</span><span class="n">patterns</span><span class="p">,</span> <span class="n">prefix</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">):</span>
<a id="__codelineno-0-9" name="__codelineno-0-9"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-10" name="__codelineno-0-10"></a><span class="sd">    Recursively traverses Django URL patterns to find routes associated with view classes</span>
<a id="__codelineno-0-11" name="__codelineno-0-11"></a><span class="sd">    that have the `use_new_ui` attribute set to `True`.</span>
<a id="__codelineno-0-12" name="__codelineno-0-12"></a>
<a id="__codelineno-0-13" name="__codelineno-0-13"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-14" name="__codelineno-0-14"></a><span class="sd">        patterns (list): List of URL patterns to traverse.</span>
<a id="__codelineno-0-15" name="__codelineno-0-15"></a><span class="sd">        prefix (str): URL pattern prefix to include when constructing route patterns.</span>
<a id="__codelineno-0-16" name="__codelineno-0-16"></a>
<a id="__codelineno-0-17" name="__codelineno-0-17"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-18" name="__codelineno-0-18"></a><span class="sd">        (list): A list of route patterns associated with view classes that use the new UI.</span>
<a id="__codelineno-0-19" name="__codelineno-0-19"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-20" name="__codelineno-0-20"></a>    <span class="n">new_ui_routes</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
<a id="__codelineno-0-21" name="__codelineno-0-21"></a>    <span class="k">for</span> <span class="n">pattern</span> <span class="ow">in</span> <span class="n">patterns</span><span class="p">:</span>
<a id="__codelineno-0-22" name="__codelineno-0-22"></a>        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">pattern</span><span class="p">,</span> <span class="s2">&quot;url_patterns&quot;</span><span class="p">):</span>
<a id="__codelineno-0-23" name="__codelineno-0-23"></a>            <span class="n">r_pattern</span> <span class="o">=</span> <span class="n">pattern</span><span class="o">.</span><span class="n">pattern</span><span class="o">.</span><span class="n">regex</span><span class="o">.</span><span class="n">pattern</span><span class="o">.</span><span class="n">lstrip</span><span class="p">(</span><span class="s2">&quot;^&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">rstrip</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\Z&quot;</span><span class="p">)</span>
<a id="__codelineno-0-24" name="__codelineno-0-24"></a>            <span class="n">combined_pattern</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="n">r_pattern</span>
<a id="__codelineno-0-25" name="__codelineno-0-25"></a>            <span class="n">new_ui_routes</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">get_only_new_ui_ready_routes</span><span class="p">(</span><span class="n">pattern</span><span class="o">.</span><span class="n">url_patterns</span><span class="p">,</span> <span class="n">combined_pattern</span><span class="p">))</span>
<a id="__codelineno-0-26" name="__codelineno-0-26"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-27" name="__codelineno-0-27"></a>            <span class="n">use_new_ui</span> <span class="o">=</span> <span class="kc">False</span>
<a id="__codelineno-0-28" name="__codelineno-0-28"></a>            <span class="c1"># There are two types of generic view class ObjectView and NautobotUIViewSet which has different approach to validate if this route is a new_ui_ready route</span>
<a id="__codelineno-0-29" name="__codelineno-0-29"></a>            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">pattern</span><span class="o">.</span><span class="n">callback</span><span class="p">,</span> <span class="s2">&quot;view_class&quot;</span><span class="p">):</span>
<a id="__codelineno-0-30" name="__codelineno-0-30"></a>                <span class="c1"># For ObjectView</span>
<a id="__codelineno-0-31" name="__codelineno-0-31"></a>                <span class="n">use_new_ui</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">pattern</span><span class="o">.</span><span class="n">callback</span><span class="o">.</span><span class="n">view_class</span><span class="p">,</span> <span class="s2">&quot;use_new_ui&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
<a id="__codelineno-0-32" name="__codelineno-0-32"></a>            <span class="k">elif</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">pattern</span><span class="o">.</span><span class="n">callback</span><span class="p">,</span> <span class="s2">&quot;cls&quot;</span><span class="p">):</span>
<a id="__codelineno-0-33" name="__codelineno-0-33"></a>                <span class="c1"># For NautobotUIViewSet</span>
<a id="__codelineno-0-34" name="__codelineno-0-34"></a>                <span class="n">use_new_ui_list</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">pattern</span><span class="o">.</span><span class="n">callback</span><span class="o">.</span><span class="n">cls</span><span class="p">,</span> <span class="s2">&quot;use_new_ui&quot;</span><span class="p">,</span> <span class="p">[])</span>
<a id="__codelineno-0-35" name="__codelineno-0-35"></a>                <span class="c1"># Check if the current action is part of the allowed actions in this ViewSet class</span>
<a id="__codelineno-0-36" name="__codelineno-0-36"></a>                <span class="n">use_new_ui</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">use_new_ui_list</span><span class="p">)</span> <span class="o">&amp;</span> <span class="nb">set</span><span class="p">(</span><span class="n">pattern</span><span class="o">.</span><span class="n">callback</span><span class="o">.</span><span class="n">actions</span><span class="o">.</span><span class="n">values</span><span class="p">()))</span>
<a id="__codelineno-0-37" name="__codelineno-0-37"></a>            <span class="k">if</span> <span class="n">use_new_ui</span><span class="p">:</span>
<a id="__codelineno-0-38" name="__codelineno-0-38"></a>                <span class="n">r_pattern</span> <span class="o">=</span> <span class="n">pattern</span><span class="o">.</span><span class="n">pattern</span><span class="o">.</span><span class="n">regex</span><span class="o">.</span><span class="n">pattern</span><span class="o">.</span><span class="n">lstrip</span><span class="p">(</span><span class="s2">&quot;^&quot;</span><span class="p">)</span>
<a id="__codelineno-0-39" name="__codelineno-0-39"></a>                <span class="n">final_pattern</span> <span class="o">=</span> <span class="sa">rf</span><span class="s2">&quot;^</span><span class="si">{</span><span class="n">prefix</span><span class="si">}{</span><span class="n">r_pattern</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-40" name="__codelineno-0-40"></a>                <span class="n">new_ui_routes</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">final_pattern</span><span class="p">)</span>
<a id="__codelineno-0-41" name="__codelineno-0-41"></a>    <span class="k">return</span> <span class="n">new_ui_routes</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h2 id="nautobot.apps.utils.get_permission_for_model" class="doc doc-heading">
<code class="highlight language-python"><span class="n">nautobot</span><span class="o">.</span><span class="n">apps</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">get_permission_for_model</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">action</span><span class="p">)</span></code>

<a href="#nautobot.apps.utils.get_permission_for_model" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
  
      <p>Resolve the named permission for a given model (or instance) and action (e.g. view or add).</p>
<p>:param model: A model or instance
:param action: View, add, change, or delete (string)</p>

          <details class="quote">
            <summary>Source code in <code>nautobot/core/utils/permissions.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-0-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-0-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-0-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-0-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-0-10">10</a></span>
<span class="normal"><a href="#__codelineno-0-11">11</a></span>
<span class="normal"><a href="#__codelineno-0-12">12</a></span>
<span class="normal"><a href="#__codelineno-0-13">13</a></span>
<span class="normal"><a href="#__codelineno-0-14">14</a></span>
<span class="normal"><a href="#__codelineno-0-15">15</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-5" name="__codelineno-0-5"></a><span class="k">def</span> <span class="nf">get_permission_for_model</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">action</span><span class="p">):</span>
<a id="__codelineno-0-6" name="__codelineno-0-6"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-7" name="__codelineno-0-7"></a><span class="sd">    Resolve the named permission for a given model (or instance) and action (e.g. view or add).</span>
<a id="__codelineno-0-8" name="__codelineno-0-8"></a>
<a id="__codelineno-0-9" name="__codelineno-0-9"></a><span class="sd">    :param model: A model or instance</span>
<a id="__codelineno-0-10" name="__codelineno-0-10"></a><span class="sd">    :param action: View, add, change, or delete (string)</span>
<a id="__codelineno-0-11" name="__codelineno-0-11"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-12" name="__codelineno-0-12"></a>    <span class="k">if</span> <span class="n">action</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;view&quot;</span><span class="p">,</span> <span class="s2">&quot;add&quot;</span><span class="p">,</span> <span class="s2">&quot;change&quot;</span><span class="p">,</span> <span class="s2">&quot;delete&quot;</span><span class="p">):</span>
<a id="__codelineno-0-13" name="__codelineno-0-13"></a>        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unsupported action: </span><span class="si">{</span><span class="n">action</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-14" name="__codelineno-0-14"></a>
<a id="__codelineno-0-15" name="__codelineno-0-15"></a>    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">model</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">app_label</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">action</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">model</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">model_name</span><span class="si">}</span><span class="s2">&quot;</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h2 id="nautobot.apps.utils.get_related_class_for_model" class="doc doc-heading">
<code class="highlight language-python"><span class="n">nautobot</span><span class="o">.</span><span class="n">apps</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">get_related_class_for_model</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">module_name</span><span class="p">,</span> <span class="n">object_suffix</span><span class="p">)</span></code>

<a href="#nautobot.apps.utils.get_related_class_for_model" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
  
      <p>Return the appropriate class associated with a given model matching the <code>module_name</code> and
<code>object_suffix</code>.</p>
<p>The given <code>model</code> can either be a model class, a model instance, or a dotted representation (ex: <code>dcim.device</code>).</p>
<p>The object class is expected to be in the module within the application
associated with the model and its name is expected to be <code>{ModelName}{object_suffix}</code>.</p>
<p>If a matching class is not found, this will return <code>None</code>.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>model</code></td>
          <td>
                <code>Union[BaseModel, str]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A model class, instance, or dotted representation</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>module_name</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The name of the module to search for the object class</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>object_suffix</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The suffix to append to the model name to find the object class</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>Union[BaseModel, str]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Either the matching object class or None</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>nautobot/core/utils/lookup.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-99"> 99</a></span>
<span class="normal"><a href="#__codelineno-0-100">100</a></span>
<span class="normal"><a href="#__codelineno-0-101">101</a></span>
<span class="normal"><a href="#__codelineno-0-102">102</a></span>
<span class="normal"><a href="#__codelineno-0-103">103</a></span>
<span class="normal"><a href="#__codelineno-0-104">104</a></span>
<span class="normal"><a href="#__codelineno-0-105">105</a></span>
<span class="normal"><a href="#__codelineno-0-106">106</a></span>
<span class="normal"><a href="#__codelineno-0-107">107</a></span>
<span class="normal"><a href="#__codelineno-0-108">108</a></span>
<span class="normal"><a href="#__codelineno-0-109">109</a></span>
<span class="normal"><a href="#__codelineno-0-110">110</a></span>
<span class="normal"><a href="#__codelineno-0-111">111</a></span>
<span class="normal"><a href="#__codelineno-0-112">112</a></span>
<span class="normal"><a href="#__codelineno-0-113">113</a></span>
<span class="normal"><a href="#__codelineno-0-114">114</a></span>
<span class="normal"><a href="#__codelineno-0-115">115</a></span>
<span class="normal"><a href="#__codelineno-0-116">116</a></span>
<span class="normal"><a href="#__codelineno-0-117">117</a></span>
<span class="normal"><a href="#__codelineno-0-118">118</a></span>
<span class="normal"><a href="#__codelineno-0-119">119</a></span>
<span class="normal"><a href="#__codelineno-0-120">120</a></span>
<span class="normal"><a href="#__codelineno-0-121">121</a></span>
<span class="normal"><a href="#__codelineno-0-122">122</a></span>
<span class="normal"><a href="#__codelineno-0-123">123</a></span>
<span class="normal"><a href="#__codelineno-0-124">124</a></span>
<span class="normal"><a href="#__codelineno-0-125">125</a></span>
<span class="normal"><a href="#__codelineno-0-126">126</a></span>
<span class="normal"><a href="#__codelineno-0-127">127</a></span>
<span class="normal"><a href="#__codelineno-0-128">128</a></span>
<span class="normal"><a href="#__codelineno-0-129">129</a></span>
<span class="normal"><a href="#__codelineno-0-130">130</a></span>
<span class="normal"><a href="#__codelineno-0-131">131</a></span>
<span class="normal"><a href="#__codelineno-0-132">132</a></span>
<span class="normal"><a href="#__codelineno-0-133">133</a></span>
<span class="normal"><a href="#__codelineno-0-134">134</a></span>
<span class="normal"><a href="#__codelineno-0-135">135</a></span>
<span class="normal"><a href="#__codelineno-0-136">136</a></span>
<span class="normal"><a href="#__codelineno-0-137">137</a></span>
<span class="normal"><a href="#__codelineno-0-138">138</a></span>
<span class="normal"><a href="#__codelineno-0-139">139</a></span>
<span class="normal"><a href="#__codelineno-0-140">140</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-99" name="__codelineno-0-99"></a><span class="k">def</span> <span class="nf">get_related_class_for_model</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">module_name</span><span class="p">,</span> <span class="n">object_suffix</span><span class="p">):</span>
<a id="__codelineno-0-100" name="__codelineno-0-100"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Return the appropriate class associated with a given model matching the `module_name` and</span>
<a id="__codelineno-0-101" name="__codelineno-0-101"></a><span class="sd">    `object_suffix`.</span>
<a id="__codelineno-0-102" name="__codelineno-0-102"></a>
<a id="__codelineno-0-103" name="__codelineno-0-103"></a><span class="sd">    The given `model` can either be a model class, a model instance, or a dotted representation (ex: `dcim.device`).</span>
<a id="__codelineno-0-104" name="__codelineno-0-104"></a>
<a id="__codelineno-0-105" name="__codelineno-0-105"></a><span class="sd">    The object class is expected to be in the module within the application</span>
<a id="__codelineno-0-106" name="__codelineno-0-106"></a><span class="sd">    associated with the model and its name is expected to be `{ModelName}{object_suffix}`.</span>
<a id="__codelineno-0-107" name="__codelineno-0-107"></a>
<a id="__codelineno-0-108" name="__codelineno-0-108"></a><span class="sd">    If a matching class is not found, this will return `None`.</span>
<a id="__codelineno-0-109" name="__codelineno-0-109"></a>
<a id="__codelineno-0-110" name="__codelineno-0-110"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-111" name="__codelineno-0-111"></a><span class="sd">        model (Union[BaseModel, str]): A model class, instance, or dotted representation</span>
<a id="__codelineno-0-112" name="__codelineno-0-112"></a><span class="sd">        module_name (str): The name of the module to search for the object class</span>
<a id="__codelineno-0-113" name="__codelineno-0-113"></a><span class="sd">        object_suffix (str): The suffix to append to the model name to find the object class</span>
<a id="__codelineno-0-114" name="__codelineno-0-114"></a>
<a id="__codelineno-0-115" name="__codelineno-0-115"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-116" name="__codelineno-0-116"></a><span class="sd">        (Union[BaseModel, str]): Either the matching object class or None</span>
<a id="__codelineno-0-117" name="__codelineno-0-117"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-118" name="__codelineno-0-118"></a>    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
<a id="__codelineno-0-119" name="__codelineno-0-119"></a>        <span class="n">model</span> <span class="o">=</span> <span class="n">get_model_from_name</span><span class="p">(</span><span class="n">model</span><span class="p">)</span>
<a id="__codelineno-0-120" name="__codelineno-0-120"></a>    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">Model</span><span class="p">):</span>
<a id="__codelineno-0-121" name="__codelineno-0-121"></a>        <span class="n">model</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="n">model</span><span class="p">)</span>
<a id="__codelineno-0-122" name="__codelineno-0-122"></a>    <span class="k">if</span> <span class="ow">not</span> <span class="n">inspect</span><span class="o">.</span><span class="n">isclass</span><span class="p">(</span><span class="n">model</span><span class="p">):</span>
<a id="__codelineno-0-123" name="__codelineno-0-123"></a>        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">model</span><span class="si">!r}</span><span class="s2"> is not a Django Model class&quot;</span><span class="p">)</span>
<a id="__codelineno-0-124" name="__codelineno-0-124"></a>    <span class="k">if</span> <span class="ow">not</span> <span class="nb">issubclass</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">Model</span><span class="p">):</span>
<a id="__codelineno-0-125" name="__codelineno-0-125"></a>        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">model</span><span class="si">!r}</span><span class="s2"> is not a subclass of a Django Model class&quot;</span><span class="p">)</span>
<a id="__codelineno-0-126" name="__codelineno-0-126"></a>
<a id="__codelineno-0-127" name="__codelineno-0-127"></a>    <span class="c1"># e.g. &quot;nautobot.dcim.forms.DeviceFilterForm&quot;</span>
<a id="__codelineno-0-128" name="__codelineno-0-128"></a>    <span class="n">app_label</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">app_label</span>
<a id="__codelineno-0-129" name="__codelineno-0-129"></a>    <span class="n">object_name</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">model</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}{</span><span class="n">object_suffix</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-130" name="__codelineno-0-130"></a>    <span class="n">object_path</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">app_label</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">module_name</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">object_name</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-131" name="__codelineno-0-131"></a>    <span class="k">if</span> <span class="n">app_label</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">settings</span><span class="o">.</span><span class="n">PLUGINS</span><span class="p">:</span>
<a id="__codelineno-0-132" name="__codelineno-0-132"></a>        <span class="n">object_path</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;nautobot.</span><span class="si">{</span><span class="n">object_path</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-133" name="__codelineno-0-133"></a>
<a id="__codelineno-0-134" name="__codelineno-0-134"></a>    <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-0-135" name="__codelineno-0-135"></a>        <span class="k">return</span> <span class="n">import_string</span><span class="p">(</span><span class="n">object_path</span><span class="p">)</span>
<a id="__codelineno-0-136" name="__codelineno-0-136"></a>    <span class="c1"># The name of the module is not correct or unable to find the desired object for this model</span>
<a id="__codelineno-0-137" name="__codelineno-0-137"></a>    <span class="k">except</span> <span class="p">(</span><span class="ne">AttributeError</span><span class="p">,</span> <span class="ne">ImportError</span><span class="p">,</span> <span class="ne">ModuleNotFoundError</span><span class="p">):</span>
<a id="__codelineno-0-138" name="__codelineno-0-138"></a>        <span class="k">pass</span>
<a id="__codelineno-0-139" name="__codelineno-0-139"></a>
<a id="__codelineno-0-140" name="__codelineno-0-140"></a>    <span class="k">return</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h2 id="nautobot.apps.utils.get_route_for_model" class="doc doc-heading">
<code class="highlight language-python"><span class="n">nautobot</span><span class="o">.</span><span class="n">apps</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">get_route_for_model</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">action</span><span class="p">,</span> <span class="n">api</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

<a href="#nautobot.apps.utils.get_route_for_model" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
  
      <p>Return the URL route name for the given model and action. Does not perform any validation.
Supports both core and plugin routes.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>model</code></td>
          <td>
                <code>(<span title="nautobot.core.models">models</span>.<span title="nautobot.core.models.Model">Model</span>, str)</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Class, Instance, or dotted string of a Django Model</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>action</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>name of the action in the route</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>api</code></td>
          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>If set, return an API route.</p>
            </div>
          </td>
          <td>
                <code>False</code>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>return the name of the view for the model/action provided.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>



<p><strong>Examples:</strong></p>
    <div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">get_route_for_model</span><span class="p">(</span><span class="n">Device</span><span class="p">,</span> <span class="s2">&quot;list&quot;</span><span class="p">)</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="go">&quot;dcim:device_list&quot;</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">get_route_for_model</span><span class="p">(</span><span class="n">Device</span><span class="p">,</span> <span class="s2">&quot;list&quot;</span><span class="p">,</span> <span class="n">api</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="go">&quot;dcim-api:device-list&quot;</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">get_route_for_model</span><span class="p">(</span><span class="s2">&quot;dcim.location&quot;</span><span class="p">,</span> <span class="s2">&quot;list&quot;</span><span class="p">)</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="go">&quot;dcim:location_list&quot;</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">get_route_for_model</span><span class="p">(</span><span class="s2">&quot;dcim.location&quot;</span><span class="p">,</span> <span class="s2">&quot;list&quot;</span><span class="p">,</span> <span class="n">api</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="go">&quot;dcim-api:location-list&quot;</span>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">get_route_for_model</span><span class="p">(</span><span class="n">ExampleModel</span><span class="p">,</span> <span class="s2">&quot;list&quot;</span><span class="p">)</span>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a><span class="go">&quot;plugins:example_plugin:examplemodel_list&quot;</span>
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">get_route_for_model</span><span class="p">(</span><span class="n">ExampleModel</span><span class="p">,</span> <span class="s2">&quot;list&quot;</span><span class="p">,</span> <span class="n">api</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a><span class="go">&quot;plugins-api:example_plugin-api:examplemodel-list&quot;</span>
</code></pre></div>

          <details class="quote">
            <summary>Source code in <code>nautobot/core/utils/lookup.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-47">47</a></span>
<span class="normal"><a href="#__codelineno-0-48">48</a></span>
<span class="normal"><a href="#__codelineno-0-49">49</a></span>
<span class="normal"><a href="#__codelineno-0-50">50</a></span>
<span class="normal"><a href="#__codelineno-0-51">51</a></span>
<span class="normal"><a href="#__codelineno-0-52">52</a></span>
<span class="normal"><a href="#__codelineno-0-53">53</a></span>
<span class="normal"><a href="#__codelineno-0-54">54</a></span>
<span class="normal"><a href="#__codelineno-0-55">55</a></span>
<span class="normal"><a href="#__codelineno-0-56">56</a></span>
<span class="normal"><a href="#__codelineno-0-57">57</a></span>
<span class="normal"><a href="#__codelineno-0-58">58</a></span>
<span class="normal"><a href="#__codelineno-0-59">59</a></span>
<span class="normal"><a href="#__codelineno-0-60">60</a></span>
<span class="normal"><a href="#__codelineno-0-61">61</a></span>
<span class="normal"><a href="#__codelineno-0-62">62</a></span>
<span class="normal"><a href="#__codelineno-0-63">63</a></span>
<span class="normal"><a href="#__codelineno-0-64">64</a></span>
<span class="normal"><a href="#__codelineno-0-65">65</a></span>
<span class="normal"><a href="#__codelineno-0-66">66</a></span>
<span class="normal"><a href="#__codelineno-0-67">67</a></span>
<span class="normal"><a href="#__codelineno-0-68">68</a></span>
<span class="normal"><a href="#__codelineno-0-69">69</a></span>
<span class="normal"><a href="#__codelineno-0-70">70</a></span>
<span class="normal"><a href="#__codelineno-0-71">71</a></span>
<span class="normal"><a href="#__codelineno-0-72">72</a></span>
<span class="normal"><a href="#__codelineno-0-73">73</a></span>
<span class="normal"><a href="#__codelineno-0-74">74</a></span>
<span class="normal"><a href="#__codelineno-0-75">75</a></span>
<span class="normal"><a href="#__codelineno-0-76">76</a></span>
<span class="normal"><a href="#__codelineno-0-77">77</a></span>
<span class="normal"><a href="#__codelineno-0-78">78</a></span>
<span class="normal"><a href="#__codelineno-0-79">79</a></span>
<span class="normal"><a href="#__codelineno-0-80">80</a></span>
<span class="normal"><a href="#__codelineno-0-81">81</a></span>
<span class="normal"><a href="#__codelineno-0-82">82</a></span>
<span class="normal"><a href="#__codelineno-0-83">83</a></span>
<span class="normal"><a href="#__codelineno-0-84">84</a></span>
<span class="normal"><a href="#__codelineno-0-85">85</a></span>
<span class="normal"><a href="#__codelineno-0-86">86</a></span>
<span class="normal"><a href="#__codelineno-0-87">87</a></span>
<span class="normal"><a href="#__codelineno-0-88">88</a></span>
<span class="normal"><a href="#__codelineno-0-89">89</a></span>
<span class="normal"><a href="#__codelineno-0-90">90</a></span>
<span class="normal"><a href="#__codelineno-0-91">91</a></span>
<span class="normal"><a href="#__codelineno-0-92">92</a></span>
<span class="normal"><a href="#__codelineno-0-93">93</a></span>
<span class="normal"><a href="#__codelineno-0-94">94</a></span>
<span class="normal"><a href="#__codelineno-0-95">95</a></span>
<span class="normal"><a href="#__codelineno-0-96">96</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-47" name="__codelineno-0-47"></a><span class="k">def</span> <span class="nf">get_route_for_model</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">action</span><span class="p">,</span> <span class="n">api</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<a id="__codelineno-0-48" name="__codelineno-0-48"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-49" name="__codelineno-0-49"></a><span class="sd">    Return the URL route name for the given model and action. Does not perform any validation.</span>
<a id="__codelineno-0-50" name="__codelineno-0-50"></a><span class="sd">    Supports both core and plugin routes.</span>
<a id="__codelineno-0-51" name="__codelineno-0-51"></a>
<a id="__codelineno-0-52" name="__codelineno-0-52"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-53" name="__codelineno-0-53"></a><span class="sd">        model (models.Model, str): Class, Instance, or dotted string of a Django Model</span>
<a id="__codelineno-0-54" name="__codelineno-0-54"></a><span class="sd">        action (str): name of the action in the route</span>
<a id="__codelineno-0-55" name="__codelineno-0-55"></a><span class="sd">        api (bool): If set, return an API route.</span>
<a id="__codelineno-0-56" name="__codelineno-0-56"></a>
<a id="__codelineno-0-57" name="__codelineno-0-57"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-58" name="__codelineno-0-58"></a><span class="sd">        (str): return the name of the view for the model/action provided.</span>
<a id="__codelineno-0-59" name="__codelineno-0-59"></a>
<a id="__codelineno-0-60" name="__codelineno-0-60"></a><span class="sd">    Examples:</span>
<a id="__codelineno-0-61" name="__codelineno-0-61"></a><span class="sd">        &gt;&gt;&gt; get_route_for_model(Device, &quot;list&quot;)</span>
<a id="__codelineno-0-62" name="__codelineno-0-62"></a><span class="sd">        &quot;dcim:device_list&quot;</span>
<a id="__codelineno-0-63" name="__codelineno-0-63"></a><span class="sd">        &gt;&gt;&gt; get_route_for_model(Device, &quot;list&quot;, api=True)</span>
<a id="__codelineno-0-64" name="__codelineno-0-64"></a><span class="sd">        &quot;dcim-api:device-list&quot;</span>
<a id="__codelineno-0-65" name="__codelineno-0-65"></a><span class="sd">        &gt;&gt;&gt; get_route_for_model(&quot;dcim.location&quot;, &quot;list&quot;)</span>
<a id="__codelineno-0-66" name="__codelineno-0-66"></a><span class="sd">        &quot;dcim:location_list&quot;</span>
<a id="__codelineno-0-67" name="__codelineno-0-67"></a><span class="sd">        &gt;&gt;&gt; get_route_for_model(&quot;dcim.location&quot;, &quot;list&quot;, api=True)</span>
<a id="__codelineno-0-68" name="__codelineno-0-68"></a><span class="sd">        &quot;dcim-api:location-list&quot;</span>
<a id="__codelineno-0-69" name="__codelineno-0-69"></a><span class="sd">        &gt;&gt;&gt; get_route_for_model(ExampleModel, &quot;list&quot;)</span>
<a id="__codelineno-0-70" name="__codelineno-0-70"></a><span class="sd">        &quot;plugins:example_plugin:examplemodel_list&quot;</span>
<a id="__codelineno-0-71" name="__codelineno-0-71"></a><span class="sd">        &gt;&gt;&gt; get_route_for_model(ExampleModel, &quot;list&quot;, api=True)</span>
<a id="__codelineno-0-72" name="__codelineno-0-72"></a><span class="sd">        &quot;plugins-api:example_plugin-api:examplemodel-list&quot;</span>
<a id="__codelineno-0-73" name="__codelineno-0-73"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-74" name="__codelineno-0-74"></a>
<a id="__codelineno-0-75" name="__codelineno-0-75"></a>    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
<a id="__codelineno-0-76" name="__codelineno-0-76"></a>        <span class="n">model</span> <span class="o">=</span> <span class="n">get_model_from_name</span><span class="p">(</span><span class="n">model</span><span class="p">)</span>
<a id="__codelineno-0-77" name="__codelineno-0-77"></a>
<a id="__codelineno-0-78" name="__codelineno-0-78"></a>    <span class="n">suffix</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">api</span> <span class="k">else</span> <span class="s2">&quot;-api&quot;</span>
<a id="__codelineno-0-79" name="__codelineno-0-79"></a>    <span class="c1"># The `contenttypes` and `auth` app doesn&#39;t provide REST API endpoints,</span>
<a id="__codelineno-0-80" name="__codelineno-0-80"></a>    <span class="c1"># but Nautobot provides one for the ContentType model in our `extras` and Group model in `users` app.</span>
<a id="__codelineno-0-81" name="__codelineno-0-81"></a>    <span class="k">if</span> <span class="n">model</span> <span class="ow">is</span> <span class="n">ContentType</span><span class="p">:</span>
<a id="__codelineno-0-82" name="__codelineno-0-82"></a>        <span class="n">app_label</span> <span class="o">=</span> <span class="s2">&quot;extras&quot;</span>
<a id="__codelineno-0-83" name="__codelineno-0-83"></a>    <span class="k">elif</span> <span class="n">model</span> <span class="ow">is</span> <span class="n">Group</span><span class="p">:</span>
<a id="__codelineno-0-84" name="__codelineno-0-84"></a>        <span class="n">app_label</span> <span class="o">=</span> <span class="s2">&quot;users&quot;</span>
<a id="__codelineno-0-85" name="__codelineno-0-85"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-86" name="__codelineno-0-86"></a>        <span class="n">app_label</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">app_label</span>
<a id="__codelineno-0-87" name="__codelineno-0-87"></a>    <span class="n">prefix</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">app_label</span><span class="si">}{</span><span class="n">suffix</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">model</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">model_name</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-88" name="__codelineno-0-88"></a>    <span class="n">sep</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
<a id="__codelineno-0-89" name="__codelineno-0-89"></a>    <span class="k">if</span> <span class="n">action</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
<a id="__codelineno-0-90" name="__codelineno-0-90"></a>        <span class="n">sep</span> <span class="o">=</span> <span class="s2">&quot;_&quot;</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">api</span> <span class="k">else</span> <span class="s2">&quot;-&quot;</span>
<a id="__codelineno-0-91" name="__codelineno-0-91"></a>    <span class="n">viewname</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">prefix</span><span class="si">}{</span><span class="n">sep</span><span class="si">}{</span><span class="n">action</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-92" name="__codelineno-0-92"></a>
<a id="__codelineno-0-93" name="__codelineno-0-93"></a>    <span class="k">if</span> <span class="n">model</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">app_label</span> <span class="ow">in</span> <span class="n">settings</span><span class="o">.</span><span class="n">PLUGINS</span><span class="p">:</span>
<a id="__codelineno-0-94" name="__codelineno-0-94"></a>        <span class="n">viewname</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;plugins</span><span class="si">{</span><span class="n">suffix</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">viewname</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-95" name="__codelineno-0-95"></a>
<a id="__codelineno-0-96" name="__codelineno-0-96"></a>    <span class="k">return</span> <span class="n">viewname</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h2 id="nautobot.apps.utils.get_settings_or_config" class="doc doc-heading">
<code class="highlight language-python"><span class="n">nautobot</span><span class="o">.</span><span class="n">apps</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">get_settings_or_config</span><span class="p">(</span><span class="n">variable_name</span><span class="p">)</span></code>

<a href="#nautobot.apps.utils.get_settings_or_config" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
  
      <p>Get a value from Django settings (if specified there) or Constance configuration (otherwise).</p>

          <details class="quote">
            <summary>Source code in <code>nautobot/core/utils/config.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-0-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-0-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-0-10">10</a></span>
<span class="normal"><a href="#__codelineno-0-11">11</a></span>
<span class="normal"><a href="#__codelineno-0-12">12</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-7" name="__codelineno-0-7"></a><span class="k">def</span> <span class="nf">get_settings_or_config</span><span class="p">(</span><span class="n">variable_name</span><span class="p">):</span>
<a id="__codelineno-0-8" name="__codelineno-0-8"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Get a value from Django settings (if specified there) or Constance configuration (otherwise).&quot;&quot;&quot;</span>
<a id="__codelineno-0-9" name="__codelineno-0-9"></a>    <span class="c1"># Explicitly set in settings.py or nautobot_config.py takes precedence, for now</span>
<a id="__codelineno-0-10" name="__codelineno-0-10"></a>    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">settings</span><span class="p">,</span> <span class="n">variable_name</span><span class="p">):</span>
<a id="__codelineno-0-11" name="__codelineno-0-11"></a>        <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">settings</span><span class="p">,</span> <span class="n">variable_name</span><span class="p">)</span>
<a id="__codelineno-0-12" name="__codelineno-0-12"></a>    <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="n">variable_name</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h2 id="nautobot.apps.utils.get_table_for_model" class="doc doc-heading">
<code class="highlight language-python"><span class="n">nautobot</span><span class="o">.</span><span class="n">apps</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">get_table_for_model</span><span class="p">(</span><span class="n">model</span><span class="p">)</span></code>

<a href="#nautobot.apps.utils.get_table_for_model" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
  
      <p>Return the <code>Table</code> class associated with a given <code>model</code>.</p>
<p>The <code>Table</code> class is expected to be in the <code>tables</code> module within the application
associated with the model and its name is expected to be <code>{ModelName}Table</code>.</p>
<p>If a matching <code>Table</code> is not found, this will return <code>None</code>.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>model</code></td>
          <td>
                <code>BaseModel</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>A model class</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>Union[Table, None]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Either the <code>Table</code> class or <code>None</code></p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>nautobot/core/utils/lookup.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-180">180</a></span>
<span class="normal"><a href="#__codelineno-0-181">181</a></span>
<span class="normal"><a href="#__codelineno-0-182">182</a></span>
<span class="normal"><a href="#__codelineno-0-183">183</a></span>
<span class="normal"><a href="#__codelineno-0-184">184</a></span>
<span class="normal"><a href="#__codelineno-0-185">185</a></span>
<span class="normal"><a href="#__codelineno-0-186">186</a></span>
<span class="normal"><a href="#__codelineno-0-187">187</a></span>
<span class="normal"><a href="#__codelineno-0-188">188</a></span>
<span class="normal"><a href="#__codelineno-0-189">189</a></span>
<span class="normal"><a href="#__codelineno-0-190">190</a></span>
<span class="normal"><a href="#__codelineno-0-191">191</a></span>
<span class="normal"><a href="#__codelineno-0-192">192</a></span>
<span class="normal"><a href="#__codelineno-0-193">193</a></span>
<span class="normal"><a href="#__codelineno-0-194">194</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-180" name="__codelineno-0-180"></a><span class="k">def</span> <span class="nf">get_table_for_model</span><span class="p">(</span><span class="n">model</span><span class="p">):</span>
<a id="__codelineno-0-181" name="__codelineno-0-181"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Return the `Table` class associated with a given `model`.</span>
<a id="__codelineno-0-182" name="__codelineno-0-182"></a>
<a id="__codelineno-0-183" name="__codelineno-0-183"></a><span class="sd">    The `Table` class is expected to be in the `tables` module within the application</span>
<a id="__codelineno-0-184" name="__codelineno-0-184"></a><span class="sd">    associated with the model and its name is expected to be `{ModelName}Table`.</span>
<a id="__codelineno-0-185" name="__codelineno-0-185"></a>
<a id="__codelineno-0-186" name="__codelineno-0-186"></a><span class="sd">    If a matching `Table` is not found, this will return `None`.</span>
<a id="__codelineno-0-187" name="__codelineno-0-187"></a>
<a id="__codelineno-0-188" name="__codelineno-0-188"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-189" name="__codelineno-0-189"></a><span class="sd">        model (BaseModel): A model class</span>
<a id="__codelineno-0-190" name="__codelineno-0-190"></a>
<a id="__codelineno-0-191" name="__codelineno-0-191"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-192" name="__codelineno-0-192"></a><span class="sd">        (Union[Table, None]): Either the `Table` class or `None`</span>
<a id="__codelineno-0-193" name="__codelineno-0-193"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-194" name="__codelineno-0-194"></a>    <span class="k">return</span> <span class="n">get_related_class_for_model</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">module_name</span><span class="o">=</span><span class="s2">&quot;tables&quot;</span><span class="p">,</span> <span class="n">object_suffix</span><span class="o">=</span><span class="s2">&quot;Table&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h2 id="nautobot.apps.utils.get_worker_count" class="doc doc-heading">
<code class="highlight language-python"><span class="n">nautobot</span><span class="o">.</span><span class="n">apps</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">get_worker_count</span><span class="p">(</span><span class="n">request</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">queue</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#nautobot.apps.utils.get_worker_count" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
  
      <p>Return a count of the active Celery workers in a specified queue. Defaults to the <code>CELERY_TASK_DEFAULT_QUEUE</code> setting.</p>

          <details class="quote">
            <summary>Source code in <code>nautobot/extras/utils.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-302">302</a></span>
<span class="normal"><a href="#__codelineno-0-303">303</a></span>
<span class="normal"><a href="#__codelineno-0-304">304</a></span>
<span class="normal"><a href="#__codelineno-0-305">305</a></span>
<span class="normal"><a href="#__codelineno-0-306">306</a></span>
<span class="normal"><a href="#__codelineno-0-307">307</a></span>
<span class="normal"><a href="#__codelineno-0-308">308</a></span>
<span class="normal"><a href="#__codelineno-0-309">309</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-302" name="__codelineno-0-302"></a><span class="k">def</span> <span class="nf">get_worker_count</span><span class="p">(</span><span class="n">request</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">queue</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<a id="__codelineno-0-303" name="__codelineno-0-303"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-304" name="__codelineno-0-304"></a><span class="sd">    Return a count of the active Celery workers in a specified queue. Defaults to the `CELERY_TASK_DEFAULT_QUEUE` setting.</span>
<a id="__codelineno-0-305" name="__codelineno-0-305"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-306" name="__codelineno-0-306"></a>    <span class="n">celery_queues</span> <span class="o">=</span> <span class="n">get_celery_queues</span><span class="p">()</span>
<a id="__codelineno-0-307" name="__codelineno-0-307"></a>    <span class="k">if</span> <span class="ow">not</span> <span class="n">queue</span><span class="p">:</span>
<a id="__codelineno-0-308" name="__codelineno-0-308"></a>        <span class="n">queue</span> <span class="o">=</span> <span class="n">settings</span><span class="o">.</span><span class="n">CELERY_TASK_DEFAULT_QUEUE</span>
<a id="__codelineno-0-309" name="__codelineno-0-309"></a>    <span class="k">return</span> <span class="n">celery_queues</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">queue</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h2 id="nautobot.apps.utils.hex_to_rgb" class="doc doc-heading">
<code class="highlight language-python"><span class="n">nautobot</span><span class="o">.</span><span class="n">apps</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">hex_to_rgb</span><span class="p">(</span><span class="n">hex_str</span><span class="p">)</span></code>

<a href="#nautobot.apps.utils.hex_to_rgb" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
  
      <p>Map a hex string like "00ff00" to individual r, g, b integer values.</p>

          <details class="quote">
            <summary>Source code in <code>nautobot/core/utils/color.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-4">4</a></span>
<span class="normal"><a href="#__codelineno-0-5">5</a></span>
<span class="normal"><a href="#__codelineno-0-6">6</a></span>
<span class="normal"><a href="#__codelineno-0-7">7</a></span>
<span class="normal"><a href="#__codelineno-0-8">8</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-4" name="__codelineno-0-4"></a><span class="k">def</span> <span class="nf">hex_to_rgb</span><span class="p">(</span><span class="n">hex_str</span><span class="p">):</span>
<a id="__codelineno-0-5" name="__codelineno-0-5"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-6" name="__codelineno-0-6"></a><span class="sd">    Map a hex string like &quot;00ff00&quot; to individual r, g, b integer values.</span>
<a id="__codelineno-0-7" name="__codelineno-0-7"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-8" name="__codelineno-0-8"></a>    <span class="k">return</span> <span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">hex_str</span><span class="p">[</span><span class="n">c</span> <span class="p">:</span> <span class="n">c</span> <span class="o">+</span> <span class="mi">2</span><span class="p">],</span> <span class="mi">16</span><span class="p">)</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">)]</span>  <span class="c1"># noqa: E203</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h2 id="nautobot.apps.utils.image_upload" class="doc doc-heading">
<code class="highlight language-python"><span class="n">nautobot</span><span class="o">.</span><span class="n">apps</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">image_upload</span><span class="p">(</span><span class="n">instance</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span></code>

<a href="#nautobot.apps.utils.image_upload" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
  
      <p>Return a path for uploading image attachments.</p>

          <details class="quote">
            <summary>Source code in <code>nautobot/extras/utils.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-53">53</a></span>
<span class="normal"><a href="#__codelineno-0-54">54</a></span>
<span class="normal"><a href="#__codelineno-0-55">55</a></span>
<span class="normal"><a href="#__codelineno-0-56">56</a></span>
<span class="normal"><a href="#__codelineno-0-57">57</a></span>
<span class="normal"><a href="#__codelineno-0-58">58</a></span>
<span class="normal"><a href="#__codelineno-0-59">59</a></span>
<span class="normal"><a href="#__codelineno-0-60">60</a></span>
<span class="normal"><a href="#__codelineno-0-61">61</a></span>
<span class="normal"><a href="#__codelineno-0-62">62</a></span>
<span class="normal"><a href="#__codelineno-0-63">63</a></span>
<span class="normal"><a href="#__codelineno-0-64">64</a></span>
<span class="normal"><a href="#__codelineno-0-65">65</a></span>
<span class="normal"><a href="#__codelineno-0-66">66</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-53" name="__codelineno-0-53"></a><span class="k">def</span> <span class="nf">image_upload</span><span class="p">(</span><span class="n">instance</span><span class="p">,</span> <span class="n">filename</span><span class="p">):</span>
<a id="__codelineno-0-54" name="__codelineno-0-54"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-55" name="__codelineno-0-55"></a><span class="sd">    Return a path for uploading image attachments.</span>
<a id="__codelineno-0-56" name="__codelineno-0-56"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-57" name="__codelineno-0-57"></a>    <span class="n">path</span> <span class="o">=</span> <span class="s2">&quot;image-attachments/&quot;</span>
<a id="__codelineno-0-58" name="__codelineno-0-58"></a>
<a id="__codelineno-0-59" name="__codelineno-0-59"></a>    <span class="c1"># Rename the file to the provided name, if any. Attempt to preserve the file extension.</span>
<a id="__codelineno-0-60" name="__codelineno-0-60"></a>    <span class="n">extension</span> <span class="o">=</span> <span class="n">filename</span><span class="o">.</span><span class="n">rsplit</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
<a id="__codelineno-0-61" name="__codelineno-0-61"></a>    <span class="k">if</span> <span class="n">instance</span><span class="o">.</span><span class="n">name</span> <span class="ow">and</span> <span class="n">extension</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;bmp&quot;</span><span class="p">,</span> <span class="s2">&quot;gif&quot;</span><span class="p">,</span> <span class="s2">&quot;jpeg&quot;</span><span class="p">,</span> <span class="s2">&quot;jpg&quot;</span><span class="p">,</span> <span class="s2">&quot;png&quot;</span><span class="p">]:</span>
<a id="__codelineno-0-62" name="__codelineno-0-62"></a>        <span class="n">filename</span> <span class="o">=</span> <span class="s2">&quot;.&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">instance</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">extension</span><span class="p">])</span>
<a id="__codelineno-0-63" name="__codelineno-0-63"></a>    <span class="k">elif</span> <span class="n">instance</span><span class="o">.</span><span class="n">name</span><span class="p">:</span>
<a id="__codelineno-0-64" name="__codelineno-0-64"></a>        <span class="n">filename</span> <span class="o">=</span> <span class="n">instance</span><span class="o">.</span><span class="n">name</span>
<a id="__codelineno-0-65" name="__codelineno-0-65"></a>
<a id="__codelineno-0-66" name="__codelineno-0-66"></a>    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">path</span><span class="si">}{</span><span class="n">instance</span><span class="o">.</span><span class="n">content_type</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">instance</span><span class="o">.</span><span class="n">object_id</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">filename</span><span class="si">}</span><span class="s2">&quot;</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h2 id="nautobot.apps.utils.is_url" class="doc doc-heading">
<code class="highlight language-python"><span class="n">nautobot</span><span class="o">.</span><span class="n">apps</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">is_url</span><span class="p">(</span><span class="n">value</span><span class="p">)</span></code>

<a href="#nautobot.apps.utils.is_url" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
  
      <p>Validate whether a value is a URL.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>value</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>String to validate.</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>True if the value is a valid URL, False otherwise.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>nautobot/core/utils/data.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-70">70</a></span>
<span class="normal"><a href="#__codelineno-0-71">71</a></span>
<span class="normal"><a href="#__codelineno-0-72">72</a></span>
<span class="normal"><a href="#__codelineno-0-73">73</a></span>
<span class="normal"><a href="#__codelineno-0-74">74</a></span>
<span class="normal"><a href="#__codelineno-0-75">75</a></span>
<span class="normal"><a href="#__codelineno-0-76">76</a></span>
<span class="normal"><a href="#__codelineno-0-77">77</a></span>
<span class="normal"><a href="#__codelineno-0-78">78</a></span>
<span class="normal"><a href="#__codelineno-0-79">79</a></span>
<span class="normal"><a href="#__codelineno-0-80">80</a></span>
<span class="normal"><a href="#__codelineno-0-81">81</a></span>
<span class="normal"><a href="#__codelineno-0-82">82</a></span>
<span class="normal"><a href="#__codelineno-0-83">83</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-70" name="__codelineno-0-70"></a><span class="k">def</span> <span class="nf">is_url</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
<a id="__codelineno-0-71" name="__codelineno-0-71"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-72" name="__codelineno-0-72"></a><span class="sd">    Validate whether a value is a URL.</span>
<a id="__codelineno-0-73" name="__codelineno-0-73"></a>
<a id="__codelineno-0-74" name="__codelineno-0-74"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-75" name="__codelineno-0-75"></a><span class="sd">        value (str): String to validate.</span>
<a id="__codelineno-0-76" name="__codelineno-0-76"></a>
<a id="__codelineno-0-77" name="__codelineno-0-77"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-78" name="__codelineno-0-78"></a><span class="sd">        (bool): True if the value is a valid URL, False otherwise.</span>
<a id="__codelineno-0-79" name="__codelineno-0-79"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-80" name="__codelineno-0-80"></a>    <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-0-81" name="__codelineno-0-81"></a>        <span class="k">return</span> <span class="n">validators</span><span class="o">.</span><span class="n">URLValidator</span><span class="p">()(</span><span class="n">value</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span>
<a id="__codelineno-0-82" name="__codelineno-0-82"></a>    <span class="k">except</span> <span class="n">validators</span><span class="o">.</span><span class="n">ValidationError</span><span class="p">:</span>
<a id="__codelineno-0-83" name="__codelineno-0-83"></a>        <span class="k">return</span> <span class="kc">False</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h2 id="nautobot.apps.utils.lighten_color" class="doc doc-heading">
<code class="highlight language-python"><span class="n">nautobot</span><span class="o">.</span><span class="n">apps</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">lighten_color</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">factor</span><span class="p">)</span></code>

<a href="#nautobot.apps.utils.lighten_color" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
  
      <p>Make a given RGB color lighter (closer to white).</p>

          <details class="quote">
            <summary>Source code in <code>nautobot/core/utils/color.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-30">30</a></span>
<span class="normal"><a href="#__codelineno-0-31">31</a></span>
<span class="normal"><a href="#__codelineno-0-32">32</a></span>
<span class="normal"><a href="#__codelineno-0-33">33</a></span>
<span class="normal"><a href="#__codelineno-0-34">34</a></span>
<span class="normal"><a href="#__codelineno-0-35">35</a></span>
<span class="normal"><a href="#__codelineno-0-36">36</a></span>
<span class="normal"><a href="#__codelineno-0-37">37</a></span>
<span class="normal"><a href="#__codelineno-0-38">38</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-30" name="__codelineno-0-30"></a><span class="k">def</span> <span class="nf">lighten_color</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">factor</span><span class="p">):</span>
<a id="__codelineno-0-31" name="__codelineno-0-31"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-32" name="__codelineno-0-32"></a><span class="sd">    Make a given RGB color lighter (closer to white).</span>
<a id="__codelineno-0-33" name="__codelineno-0-33"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-34" name="__codelineno-0-34"></a>    <span class="k">return</span> <span class="p">[</span>
<a id="__codelineno-0-35" name="__codelineno-0-35"></a>        <span class="nb">int</span><span class="p">(</span><span class="mi">255</span> <span class="o">-</span> <span class="p">(</span><span class="mi">255</span> <span class="o">-</span> <span class="n">r</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="mf">1.0</span> <span class="o">-</span> <span class="n">factor</span><span class="p">)),</span>
<a id="__codelineno-0-36" name="__codelineno-0-36"></a>        <span class="nb">int</span><span class="p">(</span><span class="mi">255</span> <span class="o">-</span> <span class="p">(</span><span class="mi">255</span> <span class="o">-</span> <span class="n">g</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="mf">1.0</span> <span class="o">-</span> <span class="n">factor</span><span class="p">)),</span>
<a id="__codelineno-0-37" name="__codelineno-0-37"></a>        <span class="nb">int</span><span class="p">(</span><span class="mi">255</span> <span class="o">-</span> <span class="p">(</span><span class="mi">255</span> <span class="o">-</span> <span class="n">b</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="mf">1.0</span> <span class="o">-</span> <span class="n">factor</span><span class="p">)),</span>
<a id="__codelineno-0-38" name="__codelineno-0-38"></a>    <span class="p">]</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h2 id="nautobot.apps.utils.merge_dicts_without_collision" class="doc doc-heading">
<code class="highlight language-python"><span class="n">nautobot</span><span class="o">.</span><span class="n">apps</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">merge_dicts_without_collision</span><span class="p">(</span><span class="n">d1</span><span class="p">,</span> <span class="n">d2</span><span class="p">)</span></code>

<a href="#nautobot.apps.utils.merge_dicts_without_collision" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
  
      <p>Merge two dicts into a new dict, but raise a ValueError if any key exists with differing values across both dicts.</p>

          <details class="quote">
            <summary>Source code in <code>nautobot/core/utils/data.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-86">86</a></span>
<span class="normal"><a href="#__codelineno-0-87">87</a></span>
<span class="normal"><a href="#__codelineno-0-88">88</a></span>
<span class="normal"><a href="#__codelineno-0-89">89</a></span>
<span class="normal"><a href="#__codelineno-0-90">90</a></span>
<span class="normal"><a href="#__codelineno-0-91">91</a></span>
<span class="normal"><a href="#__codelineno-0-92">92</a></span>
<span class="normal"><a href="#__codelineno-0-93">93</a></span>
<span class="normal"><a href="#__codelineno-0-94">94</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-86" name="__codelineno-0-86"></a><span class="k">def</span> <span class="nf">merge_dicts_without_collision</span><span class="p">(</span><span class="n">d1</span><span class="p">,</span> <span class="n">d2</span><span class="p">):</span>
<a id="__codelineno-0-87" name="__codelineno-0-87"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-88" name="__codelineno-0-88"></a><span class="sd">    Merge two dicts into a new dict, but raise a ValueError if any key exists with differing values across both dicts.</span>
<a id="__codelineno-0-89" name="__codelineno-0-89"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-90" name="__codelineno-0-90"></a>    <span class="n">intersection</span> <span class="o">=</span> <span class="n">d1</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="o">&amp;</span> <span class="n">d2</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
<a id="__codelineno-0-91" name="__codelineno-0-91"></a>    <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">intersection</span><span class="p">:</span>
<a id="__codelineno-0-92" name="__codelineno-0-92"></a>        <span class="k">if</span> <span class="n">d1</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">!=</span> <span class="n">d2</span><span class="p">[</span><span class="n">k</span><span class="p">]:</span>
<a id="__codelineno-0-93" name="__codelineno-0-93"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Conflicting values for key &quot;</span><span class="si">{</span><span class="n">k</span><span class="si">}</span><span class="s1">&quot;: (</span><span class="si">{</span><span class="n">d1</span><span class="p">[</span><span class="n">k</span><span class="p">]</span><span class="si">!r}</span><span class="s1">, </span><span class="si">{</span><span class="n">d2</span><span class="p">[</span><span class="n">k</span><span class="p">]</span><span class="si">!r}</span><span class="s1">)&#39;</span><span class="p">)</span>
<a id="__codelineno-0-94" name="__codelineno-0-94"></a>    <span class="k">return</span> <span class="p">{</span><span class="o">**</span><span class="n">d1</span><span class="p">,</span> <span class="o">**</span><span class="n">d2</span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h2 id="nautobot.apps.utils.migrate_role_data" class="doc doc-heading">
<code class="highlight language-python"><span class="n">nautobot</span><span class="o">.</span><span class="n">apps</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">migrate_role_data</span><span class="p">(</span><span class="n">model_to_migrate</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">from_role_field_name</span><span class="p">,</span> <span class="n">from_role_model</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">from_role_choiceset</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">to_role_field_name</span><span class="p">,</span> <span class="n">to_role_model</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">to_role_choiceset</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">is_m2m_field</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

<a href="#nautobot.apps.utils.migrate_role_data" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
  
      <p>Update all <code>model_to_migrate</code> with a value for <code>to_role_field</code> based on <code>from_role_field</code> values.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>model_to_migrate</code></td>
          <td>
                <code>Model</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Model with role fields to alter</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>from_role_field_name</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Name of the field on <code>model_to_migrate</code> to use as source data</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>from_role_model</code></td>
          <td>
                <code>Model</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>If <code>from_role_field</code> is a ForeignKey or M2M field, the corresponding model for it</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>from_role_choiceset</code></td>
          <td>
                <code>ChoiceSet</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>If <code>from_role_field</code> is a choices field, the corresponding ChoiceSet for it</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>to_role_field_name</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Name of the field on <code>model_to_migrate</code> to update based on the <code>from_role_field</code></p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>to_role_model</code></td>
          <td>
                <code>Model</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>If <code>to_role_field</code> is a ForeignKey or M2M field, the corresponding model for it</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>to_role_choiceset</code></td>
          <td>
                <code>ChoiceSet</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>If <code>to_role_field</code> is a choices field, the corresponding ChoiceSet for it</p>
            </div>
          </td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>is_m2m_field</code></td>
          <td>
                <code>bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>True if the role fields are both ManyToManyFields, else False</p>
            </div>
          </td>
          <td>
                <code>False</code>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>nautobot/extras/utils.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-505">505</a></span>
<span class="normal"><a href="#__codelineno-0-506">506</a></span>
<span class="normal"><a href="#__codelineno-0-507">507</a></span>
<span class="normal"><a href="#__codelineno-0-508">508</a></span>
<span class="normal"><a href="#__codelineno-0-509">509</a></span>
<span class="normal"><a href="#__codelineno-0-510">510</a></span>
<span class="normal"><a href="#__codelineno-0-511">511</a></span>
<span class="normal"><a href="#__codelineno-0-512">512</a></span>
<span class="normal"><a href="#__codelineno-0-513">513</a></span>
<span class="normal"><a href="#__codelineno-0-514">514</a></span>
<span class="normal"><a href="#__codelineno-0-515">515</a></span>
<span class="normal"><a href="#__codelineno-0-516">516</a></span>
<span class="normal"><a href="#__codelineno-0-517">517</a></span>
<span class="normal"><a href="#__codelineno-0-518">518</a></span>
<span class="normal"><a href="#__codelineno-0-519">519</a></span>
<span class="normal"><a href="#__codelineno-0-520">520</a></span>
<span class="normal"><a href="#__codelineno-0-521">521</a></span>
<span class="normal"><a href="#__codelineno-0-522">522</a></span>
<span class="normal"><a href="#__codelineno-0-523">523</a></span>
<span class="normal"><a href="#__codelineno-0-524">524</a></span>
<span class="normal"><a href="#__codelineno-0-525">525</a></span>
<span class="normal"><a href="#__codelineno-0-526">526</a></span>
<span class="normal"><a href="#__codelineno-0-527">527</a></span>
<span class="normal"><a href="#__codelineno-0-528">528</a></span>
<span class="normal"><a href="#__codelineno-0-529">529</a></span>
<span class="normal"><a href="#__codelineno-0-530">530</a></span>
<span class="normal"><a href="#__codelineno-0-531">531</a></span>
<span class="normal"><a href="#__codelineno-0-532">532</a></span>
<span class="normal"><a href="#__codelineno-0-533">533</a></span>
<span class="normal"><a href="#__codelineno-0-534">534</a></span>
<span class="normal"><a href="#__codelineno-0-535">535</a></span>
<span class="normal"><a href="#__codelineno-0-536">536</a></span>
<span class="normal"><a href="#__codelineno-0-537">537</a></span>
<span class="normal"><a href="#__codelineno-0-538">538</a></span>
<span class="normal"><a href="#__codelineno-0-539">539</a></span>
<span class="normal"><a href="#__codelineno-0-540">540</a></span>
<span class="normal"><a href="#__codelineno-0-541">541</a></span>
<span class="normal"><a href="#__codelineno-0-542">542</a></span>
<span class="normal"><a href="#__codelineno-0-543">543</a></span>
<span class="normal"><a href="#__codelineno-0-544">544</a></span>
<span class="normal"><a href="#__codelineno-0-545">545</a></span>
<span class="normal"><a href="#__codelineno-0-546">546</a></span>
<span class="normal"><a href="#__codelineno-0-547">547</a></span>
<span class="normal"><a href="#__codelineno-0-548">548</a></span>
<span class="normal"><a href="#__codelineno-0-549">549</a></span>
<span class="normal"><a href="#__codelineno-0-550">550</a></span>
<span class="normal"><a href="#__codelineno-0-551">551</a></span>
<span class="normal"><a href="#__codelineno-0-552">552</a></span>
<span class="normal"><a href="#__codelineno-0-553">553</a></span>
<span class="normal"><a href="#__codelineno-0-554">554</a></span>
<span class="normal"><a href="#__codelineno-0-555">555</a></span>
<span class="normal"><a href="#__codelineno-0-556">556</a></span>
<span class="normal"><a href="#__codelineno-0-557">557</a></span>
<span class="normal"><a href="#__codelineno-0-558">558</a></span>
<span class="normal"><a href="#__codelineno-0-559">559</a></span>
<span class="normal"><a href="#__codelineno-0-560">560</a></span>
<span class="normal"><a href="#__codelineno-0-561">561</a></span>
<span class="normal"><a href="#__codelineno-0-562">562</a></span>
<span class="normal"><a href="#__codelineno-0-563">563</a></span>
<span class="normal"><a href="#__codelineno-0-564">564</a></span>
<span class="normal"><a href="#__codelineno-0-565">565</a></span>
<span class="normal"><a href="#__codelineno-0-566">566</a></span>
<span class="normal"><a href="#__codelineno-0-567">567</a></span>
<span class="normal"><a href="#__codelineno-0-568">568</a></span>
<span class="normal"><a href="#__codelineno-0-569">569</a></span>
<span class="normal"><a href="#__codelineno-0-570">570</a></span>
<span class="normal"><a href="#__codelineno-0-571">571</a></span>
<span class="normal"><a href="#__codelineno-0-572">572</a></span>
<span class="normal"><a href="#__codelineno-0-573">573</a></span>
<span class="normal"><a href="#__codelineno-0-574">574</a></span>
<span class="normal"><a href="#__codelineno-0-575">575</a></span>
<span class="normal"><a href="#__codelineno-0-576">576</a></span>
<span class="normal"><a href="#__codelineno-0-577">577</a></span>
<span class="normal"><a href="#__codelineno-0-578">578</a></span>
<span class="normal"><a href="#__codelineno-0-579">579</a></span>
<span class="normal"><a href="#__codelineno-0-580">580</a></span>
<span class="normal"><a href="#__codelineno-0-581">581</a></span>
<span class="normal"><a href="#__codelineno-0-582">582</a></span>
<span class="normal"><a href="#__codelineno-0-583">583</a></span>
<span class="normal"><a href="#__codelineno-0-584">584</a></span>
<span class="normal"><a href="#__codelineno-0-585">585</a></span>
<span class="normal"><a href="#__codelineno-0-586">586</a></span>
<span class="normal"><a href="#__codelineno-0-587">587</a></span>
<span class="normal"><a href="#__codelineno-0-588">588</a></span>
<span class="normal"><a href="#__codelineno-0-589">589</a></span>
<span class="normal"><a href="#__codelineno-0-590">590</a></span>
<span class="normal"><a href="#__codelineno-0-591">591</a></span>
<span class="normal"><a href="#__codelineno-0-592">592</a></span>
<span class="normal"><a href="#__codelineno-0-593">593</a></span>
<span class="normal"><a href="#__codelineno-0-594">594</a></span>
<span class="normal"><a href="#__codelineno-0-595">595</a></span>
<span class="normal"><a href="#__codelineno-0-596">596</a></span>
<span class="normal"><a href="#__codelineno-0-597">597</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-505" name="__codelineno-0-505"></a><span class="k">def</span> <span class="nf">migrate_role_data</span><span class="p">(</span>
<a id="__codelineno-0-506" name="__codelineno-0-506"></a>    <span class="n">model_to_migrate</span><span class="p">,</span>
<a id="__codelineno-0-507" name="__codelineno-0-507"></a>    <span class="o">*</span><span class="p">,</span>
<a id="__codelineno-0-508" name="__codelineno-0-508"></a>    <span class="n">from_role_field_name</span><span class="p">,</span>
<a id="__codelineno-0-509" name="__codelineno-0-509"></a>    <span class="n">from_role_model</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-510" name="__codelineno-0-510"></a>    <span class="n">from_role_choiceset</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-511" name="__codelineno-0-511"></a>    <span class="n">to_role_field_name</span><span class="p">,</span>
<a id="__codelineno-0-512" name="__codelineno-0-512"></a>    <span class="n">to_role_model</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-513" name="__codelineno-0-513"></a>    <span class="n">to_role_choiceset</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-514" name="__codelineno-0-514"></a>    <span class="n">is_m2m_field</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<a id="__codelineno-0-515" name="__codelineno-0-515"></a><span class="p">):</span>
<a id="__codelineno-0-516" name="__codelineno-0-516"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-517" name="__codelineno-0-517"></a><span class="sd">    Update all `model_to_migrate` with a value for `to_role_field` based on `from_role_field` values.</span>
<a id="__codelineno-0-518" name="__codelineno-0-518"></a>
<a id="__codelineno-0-519" name="__codelineno-0-519"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-520" name="__codelineno-0-520"></a><span class="sd">        model_to_migrate (Model): Model with role fields to alter</span>
<a id="__codelineno-0-521" name="__codelineno-0-521"></a><span class="sd">        from_role_field_name (str): Name of the field on `model_to_migrate` to use as source data</span>
<a id="__codelineno-0-522" name="__codelineno-0-522"></a><span class="sd">        from_role_model (Model): If `from_role_field` is a ForeignKey or M2M field, the corresponding model for it</span>
<a id="__codelineno-0-523" name="__codelineno-0-523"></a><span class="sd">        from_role_choiceset (ChoiceSet): If `from_role_field` is a choices field, the corresponding ChoiceSet for it</span>
<a id="__codelineno-0-524" name="__codelineno-0-524"></a><span class="sd">        to_role_field_name (str): Name of the field on `model_to_migrate` to update based on the `from_role_field`</span>
<a id="__codelineno-0-525" name="__codelineno-0-525"></a><span class="sd">        to_role_model (Model): If `to_role_field` is a ForeignKey or M2M field, the corresponding model for it</span>
<a id="__codelineno-0-526" name="__codelineno-0-526"></a><span class="sd">        to_role_choiceset (ChoiceSet): If `to_role_field` is a choices field, the corresponding ChoiceSet for it</span>
<a id="__codelineno-0-527" name="__codelineno-0-527"></a><span class="sd">        is_m2m_field (bool): True if the role fields are both ManyToManyFields, else False</span>
<a id="__codelineno-0-528" name="__codelineno-0-528"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-529" name="__codelineno-0-529"></a>    <span class="k">if</span> <span class="n">from_role_model</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-530" name="__codelineno-0-530"></a>        <span class="k">assert</span> <span class="n">from_role_choiceset</span> <span class="ow">is</span> <span class="kc">None</span>
<a id="__codelineno-0-531" name="__codelineno-0-531"></a>        <span class="k">if</span> <span class="n">to_role_model</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-532" name="__codelineno-0-532"></a>            <span class="k">assert</span> <span class="n">to_role_choiceset</span> <span class="ow">is</span> <span class="kc">None</span>
<a id="__codelineno-0-533" name="__codelineno-0-533"></a>            <span class="c1"># Mapping &quot;from&quot; model instances to corresponding &quot;to&quot; model instances</span>
<a id="__codelineno-0-534" name="__codelineno-0-534"></a>            <span class="n">roles_translation_mapping</span> <span class="o">=</span> <span class="p">{</span>
<a id="__codelineno-0-535" name="__codelineno-0-535"></a>                <span class="c1"># Use .filter().first(), not .get() because &quot;to&quot; role might not exist, especially on reverse migrations</span>
<a id="__codelineno-0-536" name="__codelineno-0-536"></a>                <span class="n">from_role</span><span class="p">:</span> <span class="n">to_role_model</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">from_role</span><span class="o">.</span><span class="n">name</span><span class="p">)</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>
<a id="__codelineno-0-537" name="__codelineno-0-537"></a>                <span class="k">for</span> <span class="n">from_role</span> <span class="ow">in</span> <span class="n">from_role_model</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
<a id="__codelineno-0-538" name="__codelineno-0-538"></a>            <span class="p">}</span>
<a id="__codelineno-0-539" name="__codelineno-0-539"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-540" name="__codelineno-0-540"></a>            <span class="k">assert</span> <span class="n">to_role_choiceset</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
<a id="__codelineno-0-541" name="__codelineno-0-541"></a>            <span class="c1"># Mapping &quot;from&quot; model instances to corresponding &quot;to&quot; choices</span>
<a id="__codelineno-0-542" name="__codelineno-0-542"></a>            <span class="c1"># We need to use `label` to look up the from_role instance, but `value` is what we set for the to_role_field</span>
<a id="__codelineno-0-543" name="__codelineno-0-543"></a>            <span class="n">inverted_to_role_choiceset</span> <span class="o">=</span> <span class="p">{</span><span class="n">label</span><span class="p">:</span> <span class="n">value</span> <span class="k">for</span> <span class="n">value</span><span class="p">,</span> <span class="n">label</span> <span class="ow">in</span> <span class="n">to_role_choiceset</span><span class="o">.</span><span class="n">CHOICES</span><span class="p">}</span>
<a id="__codelineno-0-544" name="__codelineno-0-544"></a>            <span class="n">roles_translation_mapping</span> <span class="o">=</span> <span class="p">{</span>
<a id="__codelineno-0-545" name="__codelineno-0-545"></a>                <span class="n">from_role</span><span class="p">:</span> <span class="n">inverted_to_role_choiceset</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">from_role</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
<a id="__codelineno-0-546" name="__codelineno-0-546"></a>                <span class="k">for</span> <span class="n">from_role</span> <span class="ow">in</span> <span class="n">from_role_model</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
<a id="__codelineno-0-547" name="__codelineno-0-547"></a>            <span class="p">}</span>
<a id="__codelineno-0-548" name="__codelineno-0-548"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-549" name="__codelineno-0-549"></a>        <span class="k">assert</span> <span class="n">from_role_choiceset</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
<a id="__codelineno-0-550" name="__codelineno-0-550"></a>        <span class="k">if</span> <span class="n">to_role_model</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-551" name="__codelineno-0-551"></a>            <span class="k">assert</span> <span class="n">to_role_choiceset</span> <span class="ow">is</span> <span class="kc">None</span>
<a id="__codelineno-0-552" name="__codelineno-0-552"></a>            <span class="c1"># Mapping &quot;from&quot; choices to corresponding &quot;to&quot; model instances</span>
<a id="__codelineno-0-553" name="__codelineno-0-553"></a>            <span class="n">roles_translation_mapping</span> <span class="o">=</span> <span class="p">{</span>
<a id="__codelineno-0-554" name="__codelineno-0-554"></a>                <span class="c1"># Use .filter().first(), not .get() because &quot;to&quot; role might not exist, especially on reverse migrations</span>
<a id="__codelineno-0-555" name="__codelineno-0-555"></a>                <span class="n">from_role_value</span><span class="p">:</span> <span class="n">to_role_model</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">from_role_label</span><span class="p">)</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>
<a id="__codelineno-0-556" name="__codelineno-0-556"></a>                <span class="k">for</span> <span class="n">from_role_value</span><span class="p">,</span> <span class="n">from_role_label</span> <span class="ow">in</span> <span class="n">from_role_choiceset</span><span class="o">.</span><span class="n">CHOICES</span>
<a id="__codelineno-0-557" name="__codelineno-0-557"></a>            <span class="p">}</span>
<a id="__codelineno-0-558" name="__codelineno-0-558"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-559" name="__codelineno-0-559"></a>            <span class="k">assert</span> <span class="n">to_role_choiceset</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
<a id="__codelineno-0-560" name="__codelineno-0-560"></a>            <span class="c1"># Mapping &quot;from&quot; choices to corresponding &quot;to&quot; choices; we don&#39;t currently use this case, but it should work</span>
<a id="__codelineno-0-561" name="__codelineno-0-561"></a>            <span class="c1"># We need to use `label` to look up the from_role instance, but `value` is what we set for the to_role_field</span>
<a id="__codelineno-0-562" name="__codelineno-0-562"></a>            <span class="n">inverted_to_role_choiceset</span> <span class="o">=</span> <span class="p">{</span><span class="n">label</span><span class="p">:</span> <span class="n">value</span> <span class="k">for</span> <span class="n">value</span><span class="p">,</span> <span class="n">label</span> <span class="ow">in</span> <span class="n">to_role_choiceset</span><span class="o">.</span><span class="n">CHOICES</span><span class="p">}</span>
<a id="__codelineno-0-563" name="__codelineno-0-563"></a>            <span class="n">roles_translation_mapping</span> <span class="o">=</span> <span class="p">{</span>
<a id="__codelineno-0-564" name="__codelineno-0-564"></a>                <span class="n">from_role_value</span><span class="p">:</span> <span class="n">inverted_to_role_choiceset</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">from_role_label</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
<a id="__codelineno-0-565" name="__codelineno-0-565"></a>                <span class="k">for</span> <span class="n">from_role_value</span><span class="p">,</span> <span class="n">from_role_label</span> <span class="ow">in</span> <span class="n">from_role_choiceset</span><span class="o">.</span><span class="n">CHOICES</span>
<a id="__codelineno-0-566" name="__codelineno-0-566"></a>            <span class="p">}</span>
<a id="__codelineno-0-567" name="__codelineno-0-567"></a>
<a id="__codelineno-0-568" name="__codelineno-0-568"></a>    <span class="k">if</span> <span class="ow">not</span> <span class="n">is_m2m_field</span><span class="p">:</span>
<a id="__codelineno-0-569" name="__codelineno-0-569"></a>        <span class="c1"># Bulk updates of a single field are easy enough...</span>
<a id="__codelineno-0-570" name="__codelineno-0-570"></a>        <span class="k">for</span> <span class="n">from_role_value</span><span class="p">,</span> <span class="n">to_role_value</span> <span class="ow">in</span> <span class="n">roles_translation_mapping</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
<a id="__codelineno-0-571" name="__codelineno-0-571"></a>            <span class="k">if</span> <span class="n">to_role_value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-572" name="__codelineno-0-572"></a>                <span class="n">updated_count</span> <span class="o">=</span> <span class="n">model_to_migrate</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="o">**</span><span class="p">{</span><span class="n">from_role_field_name</span><span class="p">:</span> <span class="n">from_role_value</span><span class="p">})</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
<a id="__codelineno-0-573" name="__codelineno-0-573"></a>                    <span class="o">**</span><span class="p">{</span><span class="n">to_role_field_name</span><span class="p">:</span> <span class="n">to_role_value</span><span class="p">}</span>
<a id="__codelineno-0-574" name="__codelineno-0-574"></a>                <span class="p">)</span>
<a id="__codelineno-0-575" name="__codelineno-0-575"></a>                <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
<a id="__codelineno-0-576" name="__codelineno-0-576"></a>                    <span class="s1">&#39;Updated </span><span class="si">%d</span><span class="s1"> </span><span class="si">%s</span><span class="s1"> records to reference </span><span class="si">%s</span><span class="s1"> &quot;</span><span class="si">%s</span><span class="s1">&quot;&#39;</span><span class="p">,</span>
<a id="__codelineno-0-577" name="__codelineno-0-577"></a>                    <span class="n">updated_count</span><span class="p">,</span>
<a id="__codelineno-0-578" name="__codelineno-0-578"></a>                    <span class="n">model_to_migrate</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">label</span><span class="p">,</span>
<a id="__codelineno-0-579" name="__codelineno-0-579"></a>                    <span class="n">to_role_field_name</span><span class="p">,</span>
<a id="__codelineno-0-580" name="__codelineno-0-580"></a>                    <span class="n">to_role_value</span><span class="o">.</span><span class="n">name</span> <span class="k">if</span> <span class="n">to_role_model</span> <span class="k">else</span> <span class="n">to_role_value</span><span class="p">,</span>
<a id="__codelineno-0-581" name="__codelineno-0-581"></a>                <span class="p">)</span>
<a id="__codelineno-0-582" name="__codelineno-0-582"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-583" name="__codelineno-0-583"></a>        <span class="c1"># ...but we have to update each instance&#39;s M2M field independently?</span>
<a id="__codelineno-0-584" name="__codelineno-0-584"></a>        <span class="k">for</span> <span class="n">instance</span> <span class="ow">in</span> <span class="n">model_to_migrate</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">():</span>
<a id="__codelineno-0-585" name="__codelineno-0-585"></a>            <span class="n">to_role_set</span> <span class="o">=</span> <span class="p">{</span>
<a id="__codelineno-0-586" name="__codelineno-0-586"></a>                <span class="n">roles_translation_mapping</span><span class="p">[</span><span class="n">from_role_value</span><span class="p">]</span>
<a id="__codelineno-0-587" name="__codelineno-0-587"></a>                <span class="k">for</span> <span class="n">from_role_value</span> <span class="ow">in</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">instance</span><span class="p">,</span> <span class="n">from_role_field_name</span><span class="p">)</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
<a id="__codelineno-0-588" name="__codelineno-0-588"></a>            <span class="p">}</span>
<a id="__codelineno-0-589" name="__codelineno-0-589"></a>            <span class="c1"># Discard any null values</span>
<a id="__codelineno-0-590" name="__codelineno-0-590"></a>            <span class="n">to_role_set</span><span class="o">.</span><span class="n">discard</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
<a id="__codelineno-0-591" name="__codelineno-0-591"></a>            <span class="nb">getattr</span><span class="p">(</span><span class="n">instance</span><span class="p">,</span> <span class="n">to_role_field_name</span><span class="p">)</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">to_role_set</span><span class="p">)</span>
<a id="__codelineno-0-592" name="__codelineno-0-592"></a>        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
<a id="__codelineno-0-593" name="__codelineno-0-593"></a>            <span class="s2">&quot;Updated </span><span class="si">%d</span><span class="s2"> </span><span class="si">%s</span><span class="s2"> record </span><span class="si">%s</span><span class="s2"> M2M fields&quot;</span><span class="p">,</span>
<a id="__codelineno-0-594" name="__codelineno-0-594"></a>            <span class="n">model_to_migrate</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">count</span><span class="p">(),</span>
<a id="__codelineno-0-595" name="__codelineno-0-595"></a>            <span class="n">model_to_migrate</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">label</span><span class="p">,</span>
<a id="__codelineno-0-596" name="__codelineno-0-596"></a>            <span class="n">to_role_field_name</span><span class="p">,</span>
<a id="__codelineno-0-597" name="__codelineno-0-597"></a>        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h2 id="nautobot.apps.utils.normalize_querydict" class="doc doc-heading">
<code class="highlight language-python"><span class="n">nautobot</span><span class="o">.</span><span class="n">apps</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">normalize_querydict</span><span class="p">(</span><span class="n">querydict</span><span class="p">,</span> <span class="n">form_class</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#nautobot.apps.utils.normalize_querydict" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
  
      <p>Convert a QueryDict to a normal, mutable dictionary, preserving list values. For example,</p>
<div class="highlight"><pre><span></span><code>QueryDict(&#39;foo=1&amp;bar=2&amp;bar=3&amp;baz=&#39;)
</code></pre></div>

<details class="becomes" open>
  <summary>becomes</summary>
  <p>{'foo': '1', 'bar': ['2', '3'], 'baz': ''}</p>
</details>      <p>This function is necessary because QueryDict does not provide any built-in mechanism which preserves multiple
values.</p>
<p>A <code>form_class</code> can be provided as a way to hint which query parameters should be treated as lists.</p>

          <details class="quote">
            <summary>Source code in <code>nautobot/core/utils/requests.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-140">140</a></span>
<span class="normal"><a href="#__codelineno-0-141">141</a></span>
<span class="normal"><a href="#__codelineno-0-142">142</a></span>
<span class="normal"><a href="#__codelineno-0-143">143</a></span>
<span class="normal"><a href="#__codelineno-0-144">144</a></span>
<span class="normal"><a href="#__codelineno-0-145">145</a></span>
<span class="normal"><a href="#__codelineno-0-146">146</a></span>
<span class="normal"><a href="#__codelineno-0-147">147</a></span>
<span class="normal"><a href="#__codelineno-0-148">148</a></span>
<span class="normal"><a href="#__codelineno-0-149">149</a></span>
<span class="normal"><a href="#__codelineno-0-150">150</a></span>
<span class="normal"><a href="#__codelineno-0-151">151</a></span>
<span class="normal"><a href="#__codelineno-0-152">152</a></span>
<span class="normal"><a href="#__codelineno-0-153">153</a></span>
<span class="normal"><a href="#__codelineno-0-154">154</a></span>
<span class="normal"><a href="#__codelineno-0-155">155</a></span>
<span class="normal"><a href="#__codelineno-0-156">156</a></span>
<span class="normal"><a href="#__codelineno-0-157">157</a></span>
<span class="normal"><a href="#__codelineno-0-158">158</a></span>
<span class="normal"><a href="#__codelineno-0-159">159</a></span>
<span class="normal"><a href="#__codelineno-0-160">160</a></span>
<span class="normal"><a href="#__codelineno-0-161">161</a></span>
<span class="normal"><a href="#__codelineno-0-162">162</a></span>
<span class="normal"><a href="#__codelineno-0-163">163</a></span>
<span class="normal"><a href="#__codelineno-0-164">164</a></span>
<span class="normal"><a href="#__codelineno-0-165">165</a></span>
<span class="normal"><a href="#__codelineno-0-166">166</a></span>
<span class="normal"><a href="#__codelineno-0-167">167</a></span>
<span class="normal"><a href="#__codelineno-0-168">168</a></span>
<span class="normal"><a href="#__codelineno-0-169">169</a></span>
<span class="normal"><a href="#__codelineno-0-170">170</a></span>
<span class="normal"><a href="#__codelineno-0-171">171</a></span>
<span class="normal"><a href="#__codelineno-0-172">172</a></span>
<span class="normal"><a href="#__codelineno-0-173">173</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-140" name="__codelineno-0-140"></a><span class="k">def</span> <span class="nf">normalize_querydict</span><span class="p">(</span><span class="n">querydict</span><span class="p">,</span> <span class="n">form_class</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<a id="__codelineno-0-141" name="__codelineno-0-141"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-142" name="__codelineno-0-142"></a><span class="sd">    Convert a QueryDict to a normal, mutable dictionary, preserving list values. For example,</span>
<a id="__codelineno-0-143" name="__codelineno-0-143"></a>
<a id="__codelineno-0-144" name="__codelineno-0-144"></a><span class="sd">        QueryDict(&#39;foo=1&amp;bar=2&amp;bar=3&amp;baz=&#39;)</span>
<a id="__codelineno-0-145" name="__codelineno-0-145"></a>
<a id="__codelineno-0-146" name="__codelineno-0-146"></a><span class="sd">    becomes:</span>
<a id="__codelineno-0-147" name="__codelineno-0-147"></a>
<a id="__codelineno-0-148" name="__codelineno-0-148"></a><span class="sd">        {&#39;foo&#39;: &#39;1&#39;, &#39;bar&#39;: [&#39;2&#39;, &#39;3&#39;], &#39;baz&#39;: &#39;&#39;}</span>
<a id="__codelineno-0-149" name="__codelineno-0-149"></a>
<a id="__codelineno-0-150" name="__codelineno-0-150"></a><span class="sd">    This function is necessary because QueryDict does not provide any built-in mechanism which preserves multiple</span>
<a id="__codelineno-0-151" name="__codelineno-0-151"></a><span class="sd">    values.</span>
<a id="__codelineno-0-152" name="__codelineno-0-152"></a>
<a id="__codelineno-0-153" name="__codelineno-0-153"></a><span class="sd">    A `form_class` can be provided as a way to hint which query parameters should be treated as lists.</span>
<a id="__codelineno-0-154" name="__codelineno-0-154"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-155" name="__codelineno-0-155"></a>    <span class="n">result</span> <span class="o">=</span> <span class="p">{}</span>
<a id="__codelineno-0-156" name="__codelineno-0-156"></a>    <span class="k">if</span> <span class="n">querydict</span><span class="p">:</span>
<a id="__codelineno-0-157" name="__codelineno-0-157"></a>        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value_list</span> <span class="ow">in</span> <span class="n">querydict</span><span class="o">.</span><span class="n">lists</span><span class="p">():</span>
<a id="__codelineno-0-158" name="__codelineno-0-158"></a>            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">value_list</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
<a id="__codelineno-0-159" name="__codelineno-0-159"></a>                <span class="c1"># More than one value in the querydict for this key, so keep it as a list</span>
<a id="__codelineno-0-160" name="__codelineno-0-160"></a>                <span class="c1"># TODO: we could check here and de-listify value_list if the form_class field is a single-value one?</span>
<a id="__codelineno-0-161" name="__codelineno-0-161"></a>                <span class="n">result</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value_list</span>
<a id="__codelineno-0-162" name="__codelineno-0-162"></a>            <span class="k">elif</span> <span class="p">(</span>
<a id="__codelineno-0-163" name="__codelineno-0-163"></a>                <span class="n">form_class</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
<a id="__codelineno-0-164" name="__codelineno-0-164"></a>                <span class="ow">and</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">form_class</span><span class="o">.</span><span class="n">base_fields</span>
<a id="__codelineno-0-165" name="__codelineno-0-165"></a>                <span class="c1"># ModelMultipleChoiceField is *not* itself a subclass of MultipleChoiceField, thanks Django!</span>
<a id="__codelineno-0-166" name="__codelineno-0-166"></a>                <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">form_class</span><span class="o">.</span><span class="n">base_fields</span><span class="p">[</span><span class="n">key</span><span class="p">],</span> <span class="p">(</span><span class="n">forms</span><span class="o">.</span><span class="n">MultipleChoiceField</span><span class="p">,</span> <span class="n">forms</span><span class="o">.</span><span class="n">ModelMultipleChoiceField</span><span class="p">))</span>
<a id="__codelineno-0-167" name="__codelineno-0-167"></a>            <span class="p">):</span>
<a id="__codelineno-0-168" name="__codelineno-0-168"></a>                <span class="c1"># Even though there&#39;s only a single value in the querydict for this key, the form wants it as a list</span>
<a id="__codelineno-0-169" name="__codelineno-0-169"></a>                <span class="n">result</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value_list</span>
<a id="__codelineno-0-170" name="__codelineno-0-170"></a>            <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-171" name="__codelineno-0-171"></a>                <span class="c1"># Only a single value in the querydict for this key, and no guidance otherwise, so make it single</span>
<a id="__codelineno-0-172" name="__codelineno-0-172"></a>                <span class="n">result</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<a id="__codelineno-0-173" name="__codelineno-0-173"></a>    <span class="k">return</span> <span class="n">result</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h2 id="nautobot.apps.utils.permission_is_exempt" class="doc doc-heading">
<code class="highlight language-python"><span class="n">nautobot</span><span class="o">.</span><span class="n">apps</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">permission_is_exempt</span><span class="p">(</span><span class="n">name</span><span class="p">)</span></code>

<a href="#nautobot.apps.utils.permission_is_exempt" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
  
      <p>Determine whether a specified permission is exempt from evaluation.</p>
<p>:param name: Permission name in the format <app_label>.<action>_<model></p>

          <details class="quote">
            <summary>Source code in <code>nautobot/core/utils/permissions.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-50">50</a></span>
<span class="normal"><a href="#__codelineno-0-51">51</a></span>
<span class="normal"><a href="#__codelineno-0-52">52</a></span>
<span class="normal"><a href="#__codelineno-0-53">53</a></span>
<span class="normal"><a href="#__codelineno-0-54">54</a></span>
<span class="normal"><a href="#__codelineno-0-55">55</a></span>
<span class="normal"><a href="#__codelineno-0-56">56</a></span>
<span class="normal"><a href="#__codelineno-0-57">57</a></span>
<span class="normal"><a href="#__codelineno-0-58">58</a></span>
<span class="normal"><a href="#__codelineno-0-59">59</a></span>
<span class="normal"><a href="#__codelineno-0-60">60</a></span>
<span class="normal"><a href="#__codelineno-0-61">61</a></span>
<span class="normal"><a href="#__codelineno-0-62">62</a></span>
<span class="normal"><a href="#__codelineno-0-63">63</a></span>
<span class="normal"><a href="#__codelineno-0-64">64</a></span>
<span class="normal"><a href="#__codelineno-0-65">65</a></span>
<span class="normal"><a href="#__codelineno-0-66">66</a></span>
<span class="normal"><a href="#__codelineno-0-67">67</a></span>
<span class="normal"><a href="#__codelineno-0-68">68</a></span>
<span class="normal"><a href="#__codelineno-0-69">69</a></span>
<span class="normal"><a href="#__codelineno-0-70">70</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-50" name="__codelineno-0-50"></a><span class="k">def</span> <span class="nf">permission_is_exempt</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
<a id="__codelineno-0-51" name="__codelineno-0-51"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-52" name="__codelineno-0-52"></a><span class="sd">    Determine whether a specified permission is exempt from evaluation.</span>
<a id="__codelineno-0-53" name="__codelineno-0-53"></a>
<a id="__codelineno-0-54" name="__codelineno-0-54"></a><span class="sd">    :param name: Permission name in the format &lt;app_label&gt;.&lt;action&gt;_&lt;model&gt;</span>
<a id="__codelineno-0-55" name="__codelineno-0-55"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-56" name="__codelineno-0-56"></a>    <span class="n">app_label</span><span class="p">,</span> <span class="n">action</span><span class="p">,</span> <span class="n">model_name</span> <span class="o">=</span> <span class="n">resolve_permission</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
<a id="__codelineno-0-57" name="__codelineno-0-57"></a>
<a id="__codelineno-0-58" name="__codelineno-0-58"></a>    <span class="k">if</span> <span class="n">action</span> <span class="o">==</span> <span class="s2">&quot;view&quot;</span><span class="p">:</span>
<a id="__codelineno-0-59" name="__codelineno-0-59"></a>        <span class="k">if</span> <span class="p">(</span>
<a id="__codelineno-0-60" name="__codelineno-0-60"></a>            <span class="c1"># All models (excluding those in EXEMPT_EXCLUDE_MODELS) are exempt from view permission enforcement</span>
<a id="__codelineno-0-61" name="__codelineno-0-61"></a>            <span class="s2">&quot;*&quot;</span> <span class="ow">in</span> <span class="n">settings</span><span class="o">.</span><span class="n">EXEMPT_VIEW_PERMISSIONS</span>
<a id="__codelineno-0-62" name="__codelineno-0-62"></a>            <span class="ow">and</span> <span class="p">(</span><span class="n">app_label</span><span class="p">,</span> <span class="n">model_name</span><span class="p">)</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">settings</span><span class="o">.</span><span class="n">EXEMPT_EXCLUDE_MODELS</span>
<a id="__codelineno-0-63" name="__codelineno-0-63"></a>        <span class="p">)</span> <span class="ow">or</span> <span class="p">(</span>
<a id="__codelineno-0-64" name="__codelineno-0-64"></a>            <span class="c1"># This specific model is exempt from view permission enforcement</span>
<a id="__codelineno-0-65" name="__codelineno-0-65"></a>            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">app_label</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">model_name</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-66" name="__codelineno-0-66"></a>            <span class="ow">in</span> <span class="n">settings</span><span class="o">.</span><span class="n">EXEMPT_VIEW_PERMISSIONS</span>
<a id="__codelineno-0-67" name="__codelineno-0-67"></a>        <span class="p">):</span>
<a id="__codelineno-0-68" name="__codelineno-0-68"></a>            <span class="k">return</span> <span class="kc">True</span>
<a id="__codelineno-0-69" name="__codelineno-0-69"></a>
<a id="__codelineno-0-70" name="__codelineno-0-70"></a>    <span class="k">return</span> <span class="kc">False</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h2 id="nautobot.apps.utils.populate_model_features_registry" class="doc doc-heading">
<code class="highlight language-python"><span class="n">nautobot</span><span class="o">.</span><span class="n">apps</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">populate_model_features_registry</span><span class="p">(</span><span class="n">refresh</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

<a href="#nautobot.apps.utils.populate_model_features_registry" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
  
      <p>Populate the registry model features with new apps.</p>
<p>This function updates the registry model features.</p>
<p>Behavior:
- Defines a list of dictionaries called lookup_confs. Each dictionary contains:
    - 'feature_name': The name of the feature to be updated in the registry.
    - 'field_names': A list of names of fields that must be present in order for the model to be considered
                    a valid model_feature.
    - 'field_attributes': Optional dictionary of attributes to filter the fields by. Only model which fields match
                        all the attributes specified in the dictionary will be considered. This parameter can be
                        useful to narrow down the search for fields that match certain criteria. For example, if
                        <code>field_attributes</code> is set to {"related_model": RelationshipAssociation}, only fields with
                        a related model of RelationshipAssociation will be considered.
- Looks up all the models in the installed apps.
- For each dictionary in lookup_confs, calls lookup_by_field() function to look for all models that have fields with the names given in the dictionary.
- Groups the results by app and updates the registry model features for each app.</p>

          <details class="quote">
            <summary>Source code in <code>nautobot/extras/utils.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-221">221</a></span>
<span class="normal"><a href="#__codelineno-0-222">222</a></span>
<span class="normal"><a href="#__codelineno-0-223">223</a></span>
<span class="normal"><a href="#__codelineno-0-224">224</a></span>
<span class="normal"><a href="#__codelineno-0-225">225</a></span>
<span class="normal"><a href="#__codelineno-0-226">226</a></span>
<span class="normal"><a href="#__codelineno-0-227">227</a></span>
<span class="normal"><a href="#__codelineno-0-228">228</a></span>
<span class="normal"><a href="#__codelineno-0-229">229</a></span>
<span class="normal"><a href="#__codelineno-0-230">230</a></span>
<span class="normal"><a href="#__codelineno-0-231">231</a></span>
<span class="normal"><a href="#__codelineno-0-232">232</a></span>
<span class="normal"><a href="#__codelineno-0-233">233</a></span>
<span class="normal"><a href="#__codelineno-0-234">234</a></span>
<span class="normal"><a href="#__codelineno-0-235">235</a></span>
<span class="normal"><a href="#__codelineno-0-236">236</a></span>
<span class="normal"><a href="#__codelineno-0-237">237</a></span>
<span class="normal"><a href="#__codelineno-0-238">238</a></span>
<span class="normal"><a href="#__codelineno-0-239">239</a></span>
<span class="normal"><a href="#__codelineno-0-240">240</a></span>
<span class="normal"><a href="#__codelineno-0-241">241</a></span>
<span class="normal"><a href="#__codelineno-0-242">242</a></span>
<span class="normal"><a href="#__codelineno-0-243">243</a></span>
<span class="normal"><a href="#__codelineno-0-244">244</a></span>
<span class="normal"><a href="#__codelineno-0-245">245</a></span>
<span class="normal"><a href="#__codelineno-0-246">246</a></span>
<span class="normal"><a href="#__codelineno-0-247">247</a></span>
<span class="normal"><a href="#__codelineno-0-248">248</a></span>
<span class="normal"><a href="#__codelineno-0-249">249</a></span>
<span class="normal"><a href="#__codelineno-0-250">250</a></span>
<span class="normal"><a href="#__codelineno-0-251">251</a></span>
<span class="normal"><a href="#__codelineno-0-252">252</a></span>
<span class="normal"><a href="#__codelineno-0-253">253</a></span>
<span class="normal"><a href="#__codelineno-0-254">254</a></span>
<span class="normal"><a href="#__codelineno-0-255">255</a></span>
<span class="normal"><a href="#__codelineno-0-256">256</a></span>
<span class="normal"><a href="#__codelineno-0-257">257</a></span>
<span class="normal"><a href="#__codelineno-0-258">258</a></span>
<span class="normal"><a href="#__codelineno-0-259">259</a></span>
<span class="normal"><a href="#__codelineno-0-260">260</a></span>
<span class="normal"><a href="#__codelineno-0-261">261</a></span>
<span class="normal"><a href="#__codelineno-0-262">262</a></span>
<span class="normal"><a href="#__codelineno-0-263">263</a></span>
<span class="normal"><a href="#__codelineno-0-264">264</a></span>
<span class="normal"><a href="#__codelineno-0-265">265</a></span>
<span class="normal"><a href="#__codelineno-0-266">266</a></span>
<span class="normal"><a href="#__codelineno-0-267">267</a></span>
<span class="normal"><a href="#__codelineno-0-268">268</a></span>
<span class="normal"><a href="#__codelineno-0-269">269</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-221" name="__codelineno-0-221"></a><span class="k">def</span> <span class="nf">populate_model_features_registry</span><span class="p">(</span><span class="n">refresh</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<a id="__codelineno-0-222" name="__codelineno-0-222"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-223" name="__codelineno-0-223"></a><span class="sd">    Populate the registry model features with new apps.</span>
<a id="__codelineno-0-224" name="__codelineno-0-224"></a>
<a id="__codelineno-0-225" name="__codelineno-0-225"></a><span class="sd">    This function updates the registry model features.</span>
<a id="__codelineno-0-226" name="__codelineno-0-226"></a>
<a id="__codelineno-0-227" name="__codelineno-0-227"></a><span class="sd">    Behavior:</span>
<a id="__codelineno-0-228" name="__codelineno-0-228"></a><span class="sd">    - Defines a list of dictionaries called lookup_confs. Each dictionary contains:</span>
<a id="__codelineno-0-229" name="__codelineno-0-229"></a><span class="sd">        - &#39;feature_name&#39;: The name of the feature to be updated in the registry.</span>
<a id="__codelineno-0-230" name="__codelineno-0-230"></a><span class="sd">        - &#39;field_names&#39;: A list of names of fields that must be present in order for the model to be considered</span>
<a id="__codelineno-0-231" name="__codelineno-0-231"></a><span class="sd">                        a valid model_feature.</span>
<a id="__codelineno-0-232" name="__codelineno-0-232"></a><span class="sd">        - &#39;field_attributes&#39;: Optional dictionary of attributes to filter the fields by. Only model which fields match</span>
<a id="__codelineno-0-233" name="__codelineno-0-233"></a><span class="sd">                            all the attributes specified in the dictionary will be considered. This parameter can be</span>
<a id="__codelineno-0-234" name="__codelineno-0-234"></a><span class="sd">                            useful to narrow down the search for fields that match certain criteria. For example, if</span>
<a id="__codelineno-0-235" name="__codelineno-0-235"></a><span class="sd">                            `field_attributes` is set to {&quot;related_model&quot;: RelationshipAssociation}, only fields with</span>
<a id="__codelineno-0-236" name="__codelineno-0-236"></a><span class="sd">                            a related model of RelationshipAssociation will be considered.</span>
<a id="__codelineno-0-237" name="__codelineno-0-237"></a><span class="sd">    - Looks up all the models in the installed apps.</span>
<a id="__codelineno-0-238" name="__codelineno-0-238"></a><span class="sd">    - For each dictionary in lookup_confs, calls lookup_by_field() function to look for all models that have fields with the names given in the dictionary.</span>
<a id="__codelineno-0-239" name="__codelineno-0-239"></a><span class="sd">    - Groups the results by app and updates the registry model features for each app.</span>
<a id="__codelineno-0-240" name="__codelineno-0-240"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-241" name="__codelineno-0-241"></a>    <span class="k">if</span> <span class="n">registry</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;populate_model_features_registry_called&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">refresh</span><span class="p">:</span>
<a id="__codelineno-0-242" name="__codelineno-0-242"></a>        <span class="k">return</span>
<a id="__codelineno-0-243" name="__codelineno-0-243"></a>
<a id="__codelineno-0-244" name="__codelineno-0-244"></a>    <span class="n">RelationshipAssociation</span> <span class="o">=</span> <span class="n">apps</span><span class="o">.</span><span class="n">get_model</span><span class="p">(</span><span class="n">app_label</span><span class="o">=</span><span class="s2">&quot;extras&quot;</span><span class="p">,</span> <span class="n">model_name</span><span class="o">=</span><span class="s2">&quot;relationshipassociation&quot;</span><span class="p">)</span>
<a id="__codelineno-0-245" name="__codelineno-0-245"></a>
<a id="__codelineno-0-246" name="__codelineno-0-246"></a>    <span class="n">lookup_confs</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-0-247" name="__codelineno-0-247"></a>        <span class="p">{</span>
<a id="__codelineno-0-248" name="__codelineno-0-248"></a>            <span class="s2">&quot;feature_name&quot;</span><span class="p">:</span> <span class="s2">&quot;custom_fields&quot;</span><span class="p">,</span>
<a id="__codelineno-0-249" name="__codelineno-0-249"></a>            <span class="s2">&quot;field_names&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;_custom_field_data&quot;</span><span class="p">],</span>
<a id="__codelineno-0-250" name="__codelineno-0-250"></a>        <span class="p">},</span>
<a id="__codelineno-0-251" name="__codelineno-0-251"></a>        <span class="p">{</span>
<a id="__codelineno-0-252" name="__codelineno-0-252"></a>            <span class="s2">&quot;feature_name&quot;</span><span class="p">:</span> <span class="s2">&quot;relationships&quot;</span><span class="p">,</span>
<a id="__codelineno-0-253" name="__codelineno-0-253"></a>            <span class="s2">&quot;field_names&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;source_for_associations&quot;</span><span class="p">,</span> <span class="s2">&quot;destination_for_associations&quot;</span><span class="p">],</span>
<a id="__codelineno-0-254" name="__codelineno-0-254"></a>            <span class="s2">&quot;field_attributes&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;related_model&quot;</span><span class="p">:</span> <span class="n">RelationshipAssociation</span><span class="p">},</span>
<a id="__codelineno-0-255" name="__codelineno-0-255"></a>        <span class="p">},</span>
<a id="__codelineno-0-256" name="__codelineno-0-256"></a>    <span class="p">]</span>
<a id="__codelineno-0-257" name="__codelineno-0-257"></a>
<a id="__codelineno-0-258" name="__codelineno-0-258"></a>    <span class="n">app_models</span> <span class="o">=</span> <span class="n">apps</span><span class="o">.</span><span class="n">get_models</span><span class="p">()</span>
<a id="__codelineno-0-259" name="__codelineno-0-259"></a>    <span class="k">for</span> <span class="n">lookup_conf</span> <span class="ow">in</span> <span class="n">lookup_confs</span><span class="p">:</span>
<a id="__codelineno-0-260" name="__codelineno-0-260"></a>        <span class="n">registry_items</span> <span class="o">=</span> <span class="n">find_models_with_matching_fields</span><span class="p">(</span>
<a id="__codelineno-0-261" name="__codelineno-0-261"></a>            <span class="n">app_models</span><span class="o">=</span><span class="n">app_models</span><span class="p">,</span>
<a id="__codelineno-0-262" name="__codelineno-0-262"></a>            <span class="n">field_names</span><span class="o">=</span><span class="n">lookup_conf</span><span class="p">[</span><span class="s2">&quot;field_names&quot;</span><span class="p">],</span>
<a id="__codelineno-0-263" name="__codelineno-0-263"></a>            <span class="n">field_attributes</span><span class="o">=</span><span class="n">lookup_conf</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;field_attributes&quot;</span><span class="p">),</span>
<a id="__codelineno-0-264" name="__codelineno-0-264"></a>        <span class="p">)</span>
<a id="__codelineno-0-265" name="__codelineno-0-265"></a>        <span class="n">feature_name</span> <span class="o">=</span> <span class="n">lookup_conf</span><span class="p">[</span><span class="s2">&quot;feature_name&quot;</span><span class="p">]</span>
<a id="__codelineno-0-266" name="__codelineno-0-266"></a>        <span class="n">registry</span><span class="p">[</span><span class="s2">&quot;model_features&quot;</span><span class="p">][</span><span class="n">feature_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">registry_items</span>
<a id="__codelineno-0-267" name="__codelineno-0-267"></a>
<a id="__codelineno-0-268" name="__codelineno-0-268"></a>    <span class="k">if</span> <span class="ow">not</span> <span class="n">registry</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;populate_model_features_registry_called&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">):</span>
<a id="__codelineno-0-269" name="__codelineno-0-269"></a>        <span class="n">registry</span><span class="p">[</span><span class="s2">&quot;populate_model_features_registry_called&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h2 id="nautobot.apps.utils.refresh_job_model_from_job_class" class="doc doc-heading">
<code class="highlight language-python"><span class="n">nautobot</span><span class="o">.</span><span class="n">apps</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">refresh_job_model_from_job_class</span><span class="p">(</span><span class="n">job_model_class</span><span class="p">,</span> <span class="n">job_class</span><span class="p">)</span></code>

<a href="#nautobot.apps.utils.refresh_job_model_from_job_class" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
  
      <p>Create or update a job_model record based on the metadata of the provided job_class.</p>
<p>Note that job_model_class is a parameter (rather than doing a "from nautobot.extras.models import Job") because
this function may be called from various initialization processes (such as the "nautobot_database_ready" signal)
and in that case we need to not import models ourselves.</p>

          <details class="quote">
            <summary>Source code in <code>nautobot/extras/utils.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-332">332</a></span>
<span class="normal"><a href="#__codelineno-0-333">333</a></span>
<span class="normal"><a href="#__codelineno-0-334">334</a></span>
<span class="normal"><a href="#__codelineno-0-335">335</a></span>
<span class="normal"><a href="#__codelineno-0-336">336</a></span>
<span class="normal"><a href="#__codelineno-0-337">337</a></span>
<span class="normal"><a href="#__codelineno-0-338">338</a></span>
<span class="normal"><a href="#__codelineno-0-339">339</a></span>
<span class="normal"><a href="#__codelineno-0-340">340</a></span>
<span class="normal"><a href="#__codelineno-0-341">341</a></span>
<span class="normal"><a href="#__codelineno-0-342">342</a></span>
<span class="normal"><a href="#__codelineno-0-343">343</a></span>
<span class="normal"><a href="#__codelineno-0-344">344</a></span>
<span class="normal"><a href="#__codelineno-0-345">345</a></span>
<span class="normal"><a href="#__codelineno-0-346">346</a></span>
<span class="normal"><a href="#__codelineno-0-347">347</a></span>
<span class="normal"><a href="#__codelineno-0-348">348</a></span>
<span class="normal"><a href="#__codelineno-0-349">349</a></span>
<span class="normal"><a href="#__codelineno-0-350">350</a></span>
<span class="normal"><a href="#__codelineno-0-351">351</a></span>
<span class="normal"><a href="#__codelineno-0-352">352</a></span>
<span class="normal"><a href="#__codelineno-0-353">353</a></span>
<span class="normal"><a href="#__codelineno-0-354">354</a></span>
<span class="normal"><a href="#__codelineno-0-355">355</a></span>
<span class="normal"><a href="#__codelineno-0-356">356</a></span>
<span class="normal"><a href="#__codelineno-0-357">357</a></span>
<span class="normal"><a href="#__codelineno-0-358">358</a></span>
<span class="normal"><a href="#__codelineno-0-359">359</a></span>
<span class="normal"><a href="#__codelineno-0-360">360</a></span>
<span class="normal"><a href="#__codelineno-0-361">361</a></span>
<span class="normal"><a href="#__codelineno-0-362">362</a></span>
<span class="normal"><a href="#__codelineno-0-363">363</a></span>
<span class="normal"><a href="#__codelineno-0-364">364</a></span>
<span class="normal"><a href="#__codelineno-0-365">365</a></span>
<span class="normal"><a href="#__codelineno-0-366">366</a></span>
<span class="normal"><a href="#__codelineno-0-367">367</a></span>
<span class="normal"><a href="#__codelineno-0-368">368</a></span>
<span class="normal"><a href="#__codelineno-0-369">369</a></span>
<span class="normal"><a href="#__codelineno-0-370">370</a></span>
<span class="normal"><a href="#__codelineno-0-371">371</a></span>
<span class="normal"><a href="#__codelineno-0-372">372</a></span>
<span class="normal"><a href="#__codelineno-0-373">373</a></span>
<span class="normal"><a href="#__codelineno-0-374">374</a></span>
<span class="normal"><a href="#__codelineno-0-375">375</a></span>
<span class="normal"><a href="#__codelineno-0-376">376</a></span>
<span class="normal"><a href="#__codelineno-0-377">377</a></span>
<span class="normal"><a href="#__codelineno-0-378">378</a></span>
<span class="normal"><a href="#__codelineno-0-379">379</a></span>
<span class="normal"><a href="#__codelineno-0-380">380</a></span>
<span class="normal"><a href="#__codelineno-0-381">381</a></span>
<span class="normal"><a href="#__codelineno-0-382">382</a></span>
<span class="normal"><a href="#__codelineno-0-383">383</a></span>
<span class="normal"><a href="#__codelineno-0-384">384</a></span>
<span class="normal"><a href="#__codelineno-0-385">385</a></span>
<span class="normal"><a href="#__codelineno-0-386">386</a></span>
<span class="normal"><a href="#__codelineno-0-387">387</a></span>
<span class="normal"><a href="#__codelineno-0-388">388</a></span>
<span class="normal"><a href="#__codelineno-0-389">389</a></span>
<span class="normal"><a href="#__codelineno-0-390">390</a></span>
<span class="normal"><a href="#__codelineno-0-391">391</a></span>
<span class="normal"><a href="#__codelineno-0-392">392</a></span>
<span class="normal"><a href="#__codelineno-0-393">393</a></span>
<span class="normal"><a href="#__codelineno-0-394">394</a></span>
<span class="normal"><a href="#__codelineno-0-395">395</a></span>
<span class="normal"><a href="#__codelineno-0-396">396</a></span>
<span class="normal"><a href="#__codelineno-0-397">397</a></span>
<span class="normal"><a href="#__codelineno-0-398">398</a></span>
<span class="normal"><a href="#__codelineno-0-399">399</a></span>
<span class="normal"><a href="#__codelineno-0-400">400</a></span>
<span class="normal"><a href="#__codelineno-0-401">401</a></span>
<span class="normal"><a href="#__codelineno-0-402">402</a></span>
<span class="normal"><a href="#__codelineno-0-403">403</a></span>
<span class="normal"><a href="#__codelineno-0-404">404</a></span>
<span class="normal"><a href="#__codelineno-0-405">405</a></span>
<span class="normal"><a href="#__codelineno-0-406">406</a></span>
<span class="normal"><a href="#__codelineno-0-407">407</a></span>
<span class="normal"><a href="#__codelineno-0-408">408</a></span>
<span class="normal"><a href="#__codelineno-0-409">409</a></span>
<span class="normal"><a href="#__codelineno-0-410">410</a></span>
<span class="normal"><a href="#__codelineno-0-411">411</a></span>
<span class="normal"><a href="#__codelineno-0-412">412</a></span>
<span class="normal"><a href="#__codelineno-0-413">413</a></span>
<span class="normal"><a href="#__codelineno-0-414">414</a></span>
<span class="normal"><a href="#__codelineno-0-415">415</a></span>
<span class="normal"><a href="#__codelineno-0-416">416</a></span>
<span class="normal"><a href="#__codelineno-0-417">417</a></span>
<span class="normal"><a href="#__codelineno-0-418">418</a></span>
<span class="normal"><a href="#__codelineno-0-419">419</a></span>
<span class="normal"><a href="#__codelineno-0-420">420</a></span>
<span class="normal"><a href="#__codelineno-0-421">421</a></span>
<span class="normal"><a href="#__codelineno-0-422">422</a></span>
<span class="normal"><a href="#__codelineno-0-423">423</a></span>
<span class="normal"><a href="#__codelineno-0-424">424</a></span>
<span class="normal"><a href="#__codelineno-0-425">425</a></span>
<span class="normal"><a href="#__codelineno-0-426">426</a></span>
<span class="normal"><a href="#__codelineno-0-427">427</a></span>
<span class="normal"><a href="#__codelineno-0-428">428</a></span>
<span class="normal"><a href="#__codelineno-0-429">429</a></span>
<span class="normal"><a href="#__codelineno-0-430">430</a></span>
<span class="normal"><a href="#__codelineno-0-431">431</a></span>
<span class="normal"><a href="#__codelineno-0-432">432</a></span>
<span class="normal"><a href="#__codelineno-0-433">433</a></span>
<span class="normal"><a href="#__codelineno-0-434">434</a></span>
<span class="normal"><a href="#__codelineno-0-435">435</a></span>
<span class="normal"><a href="#__codelineno-0-436">436</a></span>
<span class="normal"><a href="#__codelineno-0-437">437</a></span>
<span class="normal"><a href="#__codelineno-0-438">438</a></span>
<span class="normal"><a href="#__codelineno-0-439">439</a></span>
<span class="normal"><a href="#__codelineno-0-440">440</a></span>
<span class="normal"><a href="#__codelineno-0-441">441</a></span>
<span class="normal"><a href="#__codelineno-0-442">442</a></span>
<span class="normal"><a href="#__codelineno-0-443">443</a></span>
<span class="normal"><a href="#__codelineno-0-444">444</a></span>
<span class="normal"><a href="#__codelineno-0-445">445</a></span>
<span class="normal"><a href="#__codelineno-0-446">446</a></span>
<span class="normal"><a href="#__codelineno-0-447">447</a></span>
<span class="normal"><a href="#__codelineno-0-448">448</a></span>
<span class="normal"><a href="#__codelineno-0-449">449</a></span>
<span class="normal"><a href="#__codelineno-0-450">450</a></span>
<span class="normal"><a href="#__codelineno-0-451">451</a></span>
<span class="normal"><a href="#__codelineno-0-452">452</a></span>
<span class="normal"><a href="#__codelineno-0-453">453</a></span>
<span class="normal"><a href="#__codelineno-0-454">454</a></span>
<span class="normal"><a href="#__codelineno-0-455">455</a></span>
<span class="normal"><a href="#__codelineno-0-456">456</a></span>
<span class="normal"><a href="#__codelineno-0-457">457</a></span>
<span class="normal"><a href="#__codelineno-0-458">458</a></span>
<span class="normal"><a href="#__codelineno-0-459">459</a></span>
<span class="normal"><a href="#__codelineno-0-460">460</a></span>
<span class="normal"><a href="#__codelineno-0-461">461</a></span>
<span class="normal"><a href="#__codelineno-0-462">462</a></span>
<span class="normal"><a href="#__codelineno-0-463">463</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-332" name="__codelineno-0-332"></a><span class="k">def</span> <span class="nf">refresh_job_model_from_job_class</span><span class="p">(</span><span class="n">job_model_class</span><span class="p">,</span> <span class="n">job_class</span><span class="p">):</span>
<a id="__codelineno-0-333" name="__codelineno-0-333"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-334" name="__codelineno-0-334"></a><span class="sd">    Create or update a job_model record based on the metadata of the provided job_class.</span>
<a id="__codelineno-0-335" name="__codelineno-0-335"></a>
<a id="__codelineno-0-336" name="__codelineno-0-336"></a><span class="sd">    Note that job_model_class is a parameter (rather than doing a &quot;from nautobot.extras.models import Job&quot;) because</span>
<a id="__codelineno-0-337" name="__codelineno-0-337"></a><span class="sd">    this function may be called from various initialization processes (such as the &quot;nautobot_database_ready&quot; signal)</span>
<a id="__codelineno-0-338" name="__codelineno-0-338"></a><span class="sd">    and in that case we need to not import models ourselves.</span>
<a id="__codelineno-0-339" name="__codelineno-0-339"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-340" name="__codelineno-0-340"></a>    <span class="kn">from</span> <span class="nn">nautobot.extras.jobs</span> <span class="kn">import</span> <span class="p">(</span>
<a id="__codelineno-0-341" name="__codelineno-0-341"></a>        <span class="n">JobHookReceiver</span><span class="p">,</span>
<a id="__codelineno-0-342" name="__codelineno-0-342"></a>        <span class="n">JobButtonReceiver</span><span class="p">,</span>
<a id="__codelineno-0-343" name="__codelineno-0-343"></a>    <span class="p">)</span>  <span class="c1"># imported here to prevent circular import problem</span>
<a id="__codelineno-0-344" name="__codelineno-0-344"></a>
<a id="__codelineno-0-345" name="__codelineno-0-345"></a>    <span class="c1"># Unrecoverable errors</span>
<a id="__codelineno-0-346" name="__codelineno-0-346"></a>    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">job_class</span><span class="o">.</span><span class="vm">__module__</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">JOB_MAX_NAME_LENGTH</span><span class="p">:</span>
<a id="__codelineno-0-347" name="__codelineno-0-347"></a>        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
<a id="__codelineno-0-348" name="__codelineno-0-348"></a>            <span class="s1">&#39;Unable to store Jobs from module &quot;</span><span class="si">%s</span><span class="s1">&quot; as Job models because the module exceeds </span><span class="si">%d</span><span class="s1"> characters in length!&#39;</span><span class="p">,</span>
<a id="__codelineno-0-349" name="__codelineno-0-349"></a>            <span class="n">job_class</span><span class="o">.</span><span class="vm">__module__</span><span class="p">,</span>
<a id="__codelineno-0-350" name="__codelineno-0-350"></a>            <span class="n">JOB_MAX_NAME_LENGTH</span><span class="p">,</span>
<a id="__codelineno-0-351" name="__codelineno-0-351"></a>        <span class="p">)</span>
<a id="__codelineno-0-352" name="__codelineno-0-352"></a>        <span class="k">return</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
<a id="__codelineno-0-353" name="__codelineno-0-353"></a>    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">job_class</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">JOB_MAX_NAME_LENGTH</span><span class="p">:</span>
<a id="__codelineno-0-354" name="__codelineno-0-354"></a>        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
<a id="__codelineno-0-355" name="__codelineno-0-355"></a>            <span class="s1">&#39;Unable to represent Job class &quot;</span><span class="si">%s</span><span class="s1">&quot; as a Job model because the class name exceeds </span><span class="si">%d</span><span class="s1"> characters in length!&#39;</span><span class="p">,</span>
<a id="__codelineno-0-356" name="__codelineno-0-356"></a>            <span class="n">job_class</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span>
<a id="__codelineno-0-357" name="__codelineno-0-357"></a>            <span class="n">JOB_MAX_NAME_LENGTH</span><span class="p">,</span>
<a id="__codelineno-0-358" name="__codelineno-0-358"></a>        <span class="p">)</span>
<a id="__codelineno-0-359" name="__codelineno-0-359"></a>        <span class="k">return</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
<a id="__codelineno-0-360" name="__codelineno-0-360"></a>    <span class="k">if</span> <span class="nb">issubclass</span><span class="p">(</span><span class="n">job_class</span><span class="p">,</span> <span class="n">JobHookReceiver</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">issubclass</span><span class="p">(</span><span class="n">job_class</span><span class="p">,</span> <span class="n">JobButtonReceiver</span><span class="p">):</span>
<a id="__codelineno-0-361" name="__codelineno-0-361"></a>        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
<a id="__codelineno-0-362" name="__codelineno-0-362"></a>            <span class="s1">&#39;Job class &quot;</span><span class="si">%s</span><span class="s1">&quot; must not sub-class from both JobHookReceiver and JobButtonReceiver!&#39;</span><span class="p">,</span>
<a id="__codelineno-0-363" name="__codelineno-0-363"></a>            <span class="n">job_class</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span>
<a id="__codelineno-0-364" name="__codelineno-0-364"></a>        <span class="p">)</span>
<a id="__codelineno-0-365" name="__codelineno-0-365"></a>        <span class="k">return</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
<a id="__codelineno-0-366" name="__codelineno-0-366"></a>
<a id="__codelineno-0-367" name="__codelineno-0-367"></a>    <span class="c1"># Recoverable errors</span>
<a id="__codelineno-0-368" name="__codelineno-0-368"></a>    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">job_class</span><span class="o">.</span><span class="n">grouping</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">JOB_MAX_GROUPING_LENGTH</span><span class="p">:</span>
<a id="__codelineno-0-369" name="__codelineno-0-369"></a>        <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
<a id="__codelineno-0-370" name="__codelineno-0-370"></a>            <span class="s1">&#39;Job class &quot;</span><span class="si">%s</span><span class="s1">&quot; grouping &quot;</span><span class="si">%s</span><span class="s1">&quot; exceeds </span><span class="si">%d</span><span class="s1"> characters in length, it will be truncated in the database.&#39;</span><span class="p">,</span>
<a id="__codelineno-0-371" name="__codelineno-0-371"></a>            <span class="n">job_class</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span>
<a id="__codelineno-0-372" name="__codelineno-0-372"></a>            <span class="n">job_class</span><span class="o">.</span><span class="n">grouping</span><span class="p">,</span>
<a id="__codelineno-0-373" name="__codelineno-0-373"></a>            <span class="n">JOB_MAX_GROUPING_LENGTH</span><span class="p">,</span>
<a id="__codelineno-0-374" name="__codelineno-0-374"></a>        <span class="p">)</span>
<a id="__codelineno-0-375" name="__codelineno-0-375"></a>    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">job_class</span><span class="o">.</span><span class="n">name</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">JOB_MAX_NAME_LENGTH</span><span class="p">:</span>
<a id="__codelineno-0-376" name="__codelineno-0-376"></a>        <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
<a id="__codelineno-0-377" name="__codelineno-0-377"></a>            <span class="s1">&#39;Job class &quot;</span><span class="si">%s</span><span class="s1">&quot; name &quot;</span><span class="si">%s</span><span class="s1">&quot; exceeds </span><span class="si">%d</span><span class="s1"> characters in length, it will be truncated in the database.&#39;</span><span class="p">,</span>
<a id="__codelineno-0-378" name="__codelineno-0-378"></a>            <span class="n">job_class</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span>
<a id="__codelineno-0-379" name="__codelineno-0-379"></a>            <span class="n">job_class</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
<a id="__codelineno-0-380" name="__codelineno-0-380"></a>            <span class="n">JOB_MAX_NAME_LENGTH</span><span class="p">,</span>
<a id="__codelineno-0-381" name="__codelineno-0-381"></a>        <span class="p">)</span>
<a id="__codelineno-0-382" name="__codelineno-0-382"></a>
<a id="__codelineno-0-383" name="__codelineno-0-383"></a>    <span class="c1"># handle duplicate names by appending an incrementing counter to the end</span>
<a id="__codelineno-0-384" name="__codelineno-0-384"></a>    <span class="n">default_job_name</span> <span class="o">=</span> <span class="n">job_class</span><span class="o">.</span><span class="n">name</span><span class="p">[:</span><span class="n">JOB_MAX_NAME_LENGTH</span><span class="p">]</span>
<a id="__codelineno-0-385" name="__codelineno-0-385"></a>    <span class="n">job_name</span> <span class="o">=</span> <span class="n">default_job_name</span>
<a id="__codelineno-0-386" name="__codelineno-0-386"></a>    <span class="n">append_counter</span> <span class="o">=</span> <span class="mi">2</span>
<a id="__codelineno-0-387" name="__codelineno-0-387"></a>    <span class="n">existing_job_names</span> <span class="o">=</span> <span class="p">(</span>
<a id="__codelineno-0-388" name="__codelineno-0-388"></a>        <span class="n">job_model_class</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">name__startswith</span><span class="o">=</span><span class="n">job_name</span><span class="p">)</span>
<a id="__codelineno-0-389" name="__codelineno-0-389"></a>        <span class="o">.</span><span class="n">exclude</span><span class="p">(</span>
<a id="__codelineno-0-390" name="__codelineno-0-390"></a>            <span class="n">module_name</span><span class="o">=</span><span class="n">job_class</span><span class="o">.</span><span class="vm">__module__</span><span class="p">[:</span><span class="n">JOB_MAX_NAME_LENGTH</span><span class="p">],</span>
<a id="__codelineno-0-391" name="__codelineno-0-391"></a>            <span class="n">job_class_name</span><span class="o">=</span><span class="n">job_class</span><span class="o">.</span><span class="vm">__name__</span><span class="p">[:</span><span class="n">JOB_MAX_NAME_LENGTH</span><span class="p">],</span>
<a id="__codelineno-0-392" name="__codelineno-0-392"></a>        <span class="p">)</span>
<a id="__codelineno-0-393" name="__codelineno-0-393"></a>        <span class="o">.</span><span class="n">values_list</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="n">flat</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-0-394" name="__codelineno-0-394"></a>    <span class="p">)</span>
<a id="__codelineno-0-395" name="__codelineno-0-395"></a>    <span class="k">while</span> <span class="n">job_name</span> <span class="ow">in</span> <span class="n">existing_job_names</span><span class="p">:</span>
<a id="__codelineno-0-396" name="__codelineno-0-396"></a>        <span class="n">job_name_append</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot; (</span><span class="si">{</span><span class="n">append_counter</span><span class="si">}</span><span class="s2">)&quot;</span>
<a id="__codelineno-0-397" name="__codelineno-0-397"></a>        <span class="n">max_name_length</span> <span class="o">=</span> <span class="n">JOB_MAX_NAME_LENGTH</span> <span class="o">-</span> <span class="nb">len</span><span class="p">(</span><span class="n">job_name_append</span><span class="p">)</span>
<a id="__codelineno-0-398" name="__codelineno-0-398"></a>        <span class="n">job_name</span> <span class="o">=</span> <span class="n">default_job_name</span><span class="p">[:</span><span class="n">max_name_length</span><span class="p">]</span> <span class="o">+</span> <span class="n">job_name_append</span>
<a id="__codelineno-0-399" name="__codelineno-0-399"></a>        <span class="n">append_counter</span> <span class="o">+=</span> <span class="mi">1</span>
<a id="__codelineno-0-400" name="__codelineno-0-400"></a>    <span class="k">if</span> <span class="n">job_name</span> <span class="o">!=</span> <span class="n">default_job_name</span> <span class="ow">and</span> <span class="s2">&quot;test&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">:</span>
<a id="__codelineno-0-401" name="__codelineno-0-401"></a>        <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
<a id="__codelineno-0-402" name="__codelineno-0-402"></a>            <span class="s1">&#39;Job class &quot;</span><span class="si">%s</span><span class="s1">&quot; name &quot;</span><span class="si">%s</span><span class="s1">&quot; is not unique, changing to &quot;</span><span class="si">%s</span><span class="s1">&quot;.&#39;</span><span class="p">,</span>
<a id="__codelineno-0-403" name="__codelineno-0-403"></a>            <span class="n">job_class</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span>
<a id="__codelineno-0-404" name="__codelineno-0-404"></a>            <span class="n">default_job_name</span><span class="p">,</span>
<a id="__codelineno-0-405" name="__codelineno-0-405"></a>            <span class="n">job_name</span><span class="p">,</span>
<a id="__codelineno-0-406" name="__codelineno-0-406"></a>        <span class="p">)</span>
<a id="__codelineno-0-407" name="__codelineno-0-407"></a>
<a id="__codelineno-0-408" name="__codelineno-0-408"></a>    <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-0-409" name="__codelineno-0-409"></a>        <span class="k">with</span> <span class="n">transaction</span><span class="o">.</span><span class="n">atomic</span><span class="p">():</span>
<a id="__codelineno-0-410" name="__codelineno-0-410"></a>            <span class="n">job_model</span><span class="p">,</span> <span class="n">created</span> <span class="o">=</span> <span class="n">job_model_class</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get_or_create</span><span class="p">(</span>
<a id="__codelineno-0-411" name="__codelineno-0-411"></a>                <span class="n">module_name</span><span class="o">=</span><span class="n">job_class</span><span class="o">.</span><span class="vm">__module__</span><span class="p">[:</span><span class="n">JOB_MAX_NAME_LENGTH</span><span class="p">],</span>
<a id="__codelineno-0-412" name="__codelineno-0-412"></a>                <span class="n">job_class_name</span><span class="o">=</span><span class="n">job_class</span><span class="o">.</span><span class="vm">__name__</span><span class="p">[:</span><span class="n">JOB_MAX_NAME_LENGTH</span><span class="p">],</span>
<a id="__codelineno-0-413" name="__codelineno-0-413"></a>                <span class="n">defaults</span><span class="o">=</span><span class="p">{</span>
<a id="__codelineno-0-414" name="__codelineno-0-414"></a>                    <span class="s2">&quot;grouping&quot;</span><span class="p">:</span> <span class="n">job_class</span><span class="o">.</span><span class="n">grouping</span><span class="p">[:</span><span class="n">JOB_MAX_GROUPING_LENGTH</span><span class="p">],</span>
<a id="__codelineno-0-415" name="__codelineno-0-415"></a>                    <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">job_name</span><span class="p">,</span>
<a id="__codelineno-0-416" name="__codelineno-0-416"></a>                    <span class="s2">&quot;is_job_hook_receiver&quot;</span><span class="p">:</span> <span class="nb">issubclass</span><span class="p">(</span><span class="n">job_class</span><span class="p">,</span> <span class="n">JobHookReceiver</span><span class="p">),</span>
<a id="__codelineno-0-417" name="__codelineno-0-417"></a>                    <span class="s2">&quot;is_job_button_receiver&quot;</span><span class="p">:</span> <span class="nb">issubclass</span><span class="p">(</span><span class="n">job_class</span><span class="p">,</span> <span class="n">JobButtonReceiver</span><span class="p">),</span>
<a id="__codelineno-0-418" name="__codelineno-0-418"></a>                    <span class="s2">&quot;read_only&quot;</span><span class="p">:</span> <span class="n">job_class</span><span class="o">.</span><span class="n">read_only</span><span class="p">,</span>
<a id="__codelineno-0-419" name="__codelineno-0-419"></a>                    <span class="s2">&quot;supports_dryrun&quot;</span><span class="p">:</span> <span class="n">job_class</span><span class="o">.</span><span class="n">supports_dryrun</span><span class="p">,</span>
<a id="__codelineno-0-420" name="__codelineno-0-420"></a>                    <span class="s2">&quot;installed&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
<a id="__codelineno-0-421" name="__codelineno-0-421"></a>                    <span class="s2">&quot;enabled&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
<a id="__codelineno-0-422" name="__codelineno-0-422"></a>                <span class="p">},</span>
<a id="__codelineno-0-423" name="__codelineno-0-423"></a>            <span class="p">)</span>
<a id="__codelineno-0-424" name="__codelineno-0-424"></a>
<a id="__codelineno-0-425" name="__codelineno-0-425"></a>            <span class="k">if</span> <span class="n">job_name</span> <span class="o">!=</span> <span class="n">default_job_name</span><span class="p">:</span>
<a id="__codelineno-0-426" name="__codelineno-0-426"></a>                <span class="n">job_model</span><span class="o">.</span><span class="n">name_override</span> <span class="o">=</span> <span class="kc">True</span>
<a id="__codelineno-0-427" name="__codelineno-0-427"></a>
<a id="__codelineno-0-428" name="__codelineno-0-428"></a>            <span class="k">if</span> <span class="n">created</span> <span class="ow">and</span> <span class="n">job_model</span><span class="o">.</span><span class="n">module_name</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;nautobot.&quot;</span><span class="p">):</span>
<a id="__codelineno-0-429" name="__codelineno-0-429"></a>                <span class="c1"># System jobs should be enabled by default when first created</span>
<a id="__codelineno-0-430" name="__codelineno-0-430"></a>                <span class="n">job_model</span><span class="o">.</span><span class="n">enabled</span> <span class="o">=</span> <span class="kc">True</span>
<a id="__codelineno-0-431" name="__codelineno-0-431"></a>
<a id="__codelineno-0-432" name="__codelineno-0-432"></a>            <span class="k">for</span> <span class="n">field_name</span> <span class="ow">in</span> <span class="n">JOB_OVERRIDABLE_FIELDS</span><span class="p">:</span>
<a id="__codelineno-0-433" name="__codelineno-0-433"></a>                <span class="c1"># Was this field directly inherited from the job before, or was it overridden in the database?</span>
<a id="__codelineno-0-434" name="__codelineno-0-434"></a>                <span class="k">if</span> <span class="ow">not</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">job_model</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">field_name</span><span class="si">}</span><span class="s2">_override&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">):</span>
<a id="__codelineno-0-435" name="__codelineno-0-435"></a>                    <span class="c1"># It was inherited and not overridden</span>
<a id="__codelineno-0-436" name="__codelineno-0-436"></a>                    <span class="nb">setattr</span><span class="p">(</span><span class="n">job_model</span><span class="p">,</span> <span class="n">field_name</span><span class="p">,</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">job_class</span><span class="p">,</span> <span class="n">field_name</span><span class="p">))</span>
<a id="__codelineno-0-437" name="__codelineno-0-437"></a>
<a id="__codelineno-0-438" name="__codelineno-0-438"></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">created</span><span class="p">:</span>
<a id="__codelineno-0-439" name="__codelineno-0-439"></a>                <span class="c1"># Mark it as installed regardless</span>
<a id="__codelineno-0-440" name="__codelineno-0-440"></a>                <span class="n">job_model</span><span class="o">.</span><span class="n">installed</span> <span class="o">=</span> <span class="kc">True</span>
<a id="__codelineno-0-441" name="__codelineno-0-441"></a>                <span class="c1"># Update the non-overridable flags in case they&#39;ve changed in the source</span>
<a id="__codelineno-0-442" name="__codelineno-0-442"></a>                <span class="n">job_model</span><span class="o">.</span><span class="n">is_job_hook_receiver</span> <span class="o">=</span> <span class="nb">issubclass</span><span class="p">(</span><span class="n">job_class</span><span class="p">,</span> <span class="n">JobHookReceiver</span><span class="p">)</span>
<a id="__codelineno-0-443" name="__codelineno-0-443"></a>                <span class="n">job_model</span><span class="o">.</span><span class="n">is_job_button_receiver</span> <span class="o">=</span> <span class="nb">issubclass</span><span class="p">(</span><span class="n">job_class</span><span class="p">,</span> <span class="n">JobButtonReceiver</span><span class="p">)</span>
<a id="__codelineno-0-444" name="__codelineno-0-444"></a>                <span class="n">job_model</span><span class="o">.</span><span class="n">read_only</span> <span class="o">=</span> <span class="n">job_class</span><span class="o">.</span><span class="n">read_only</span>
<a id="__codelineno-0-445" name="__codelineno-0-445"></a>                <span class="n">job_model</span><span class="o">.</span><span class="n">supports_dryrun</span> <span class="o">=</span> <span class="n">job_class</span><span class="o">.</span><span class="n">supports_dryrun</span>
<a id="__codelineno-0-446" name="__codelineno-0-446"></a>
<a id="__codelineno-0-447" name="__codelineno-0-447"></a>            <span class="n">job_model</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
<a id="__codelineno-0-448" name="__codelineno-0-448"></a>
<a id="__codelineno-0-449" name="__codelineno-0-449"></a>    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
<a id="__codelineno-0-450" name="__codelineno-0-450"></a>        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
<a id="__codelineno-0-451" name="__codelineno-0-451"></a>            <span class="s1">&#39;Exception while trying to create/update a database record for Job class &quot;</span><span class="si">%s</span><span class="s1">&quot;: </span><span class="si">%s</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">job_class</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">exc</span>
<a id="__codelineno-0-452" name="__codelineno-0-452"></a>        <span class="p">)</span>
<a id="__codelineno-0-453" name="__codelineno-0-453"></a>        <span class="k">return</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
<a id="__codelineno-0-454" name="__codelineno-0-454"></a>
<a id="__codelineno-0-455" name="__codelineno-0-455"></a>    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
<a id="__codelineno-0-456" name="__codelineno-0-456"></a>        <span class="s1">&#39;</span><span class="si">%s</span><span class="s1"> Job &quot;</span><span class="si">%s</span><span class="s1">: </span><span class="si">%s</span><span class="s1">&quot; from &lt;</span><span class="si">%s</span><span class="s1">&gt;&#39;</span><span class="p">,</span>
<a id="__codelineno-0-457" name="__codelineno-0-457"></a>        <span class="s2">&quot;Created&quot;</span> <span class="k">if</span> <span class="n">created</span> <span class="k">else</span> <span class="s2">&quot;Refreshed&quot;</span><span class="p">,</span>
<a id="__codelineno-0-458" name="__codelineno-0-458"></a>        <span class="n">job_model</span><span class="o">.</span><span class="n">grouping</span><span class="p">,</span>
<a id="__codelineno-0-459" name="__codelineno-0-459"></a>        <span class="n">job_model</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
<a id="__codelineno-0-460" name="__codelineno-0-460"></a>        <span class="n">job_class</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span>
<a id="__codelineno-0-461" name="__codelineno-0-461"></a>    <span class="p">)</span>
<a id="__codelineno-0-462" name="__codelineno-0-462"></a>
<a id="__codelineno-0-463" name="__codelineno-0-463"></a>    <span class="k">return</span> <span class="p">(</span><span class="n">job_model</span><span class="p">,</span> <span class="n">created</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h2 id="nautobot.apps.utils.remove_prefix_from_cf_key" class="doc doc-heading">
<code class="highlight language-python"><span class="n">nautobot</span><span class="o">.</span><span class="n">apps</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">remove_prefix_from_cf_key</span><span class="p">(</span><span class="n">field_name</span><span class="p">)</span></code>

<a href="#nautobot.apps.utils.remove_prefix_from_cf_key" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
  
      <p>field_name (str): f"cf_{cf.key}"</p>
<p>Helper method to remove the "cf_" prefix</p>

          <details class="quote">
            <summary>Source code in <code>nautobot/extras/utils.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-466">466</a></span>
<span class="normal"><a href="#__codelineno-0-467">467</a></span>
<span class="normal"><a href="#__codelineno-0-468">468</a></span>
<span class="normal"><a href="#__codelineno-0-469">469</a></span>
<span class="normal"><a href="#__codelineno-0-470">470</a></span>
<span class="normal"><a href="#__codelineno-0-471">471</a></span>
<span class="normal"><a href="#__codelineno-0-472">472</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-466" name="__codelineno-0-466"></a><span class="k">def</span> <span class="nf">remove_prefix_from_cf_key</span><span class="p">(</span><span class="n">field_name</span><span class="p">):</span>
<a id="__codelineno-0-467" name="__codelineno-0-467"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-468" name="__codelineno-0-468"></a><span class="sd">    field_name (str): f&quot;cf_{cf.key}&quot;</span>
<a id="__codelineno-0-469" name="__codelineno-0-469"></a>
<a id="__codelineno-0-470" name="__codelineno-0-470"></a><span class="sd">    Helper method to remove the &quot;cf_&quot; prefix</span>
<a id="__codelineno-0-471" name="__codelineno-0-471"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-472" name="__codelineno-0-472"></a>    <span class="k">return</span> <span class="n">field_name</span><span class="p">[</span><span class="mi">3</span><span class="p">:]</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h2 id="nautobot.apps.utils.render_jinja2" class="doc doc-heading">
<code class="highlight language-python"><span class="n">nautobot</span><span class="o">.</span><span class="n">apps</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">render_jinja2</span><span class="p">(</span><span class="n">template_code</span><span class="p">,</span> <span class="n">context</span><span class="p">)</span></code>

<a href="#nautobot.apps.utils.render_jinja2" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
  
      <p>Render a Jinja2 template with the provided context. Return the rendered content.</p>

          <details class="quote">
            <summary>Source code in <code>nautobot/core/utils/data.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-97"> 97</a></span>
<span class="normal"><a href="#__codelineno-0-98"> 98</a></span>
<span class="normal"><a href="#__codelineno-0-99"> 99</a></span>
<span class="normal"><a href="#__codelineno-0-100">100</a></span>
<span class="normal"><a href="#__codelineno-0-101">101</a></span>
<span class="normal"><a href="#__codelineno-0-102">102</a></span>
<span class="normal"><a href="#__codelineno-0-103">103</a></span>
<span class="normal"><a href="#__codelineno-0-104">104</a></span>
<span class="normal"><a href="#__codelineno-0-105">105</a></span>
<span class="normal"><a href="#__codelineno-0-106">106</a></span>
<span class="normal"><a href="#__codelineno-0-107">107</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-97" name="__codelineno-0-97"></a><span class="k">def</span> <span class="nf">render_jinja2</span><span class="p">(</span><span class="n">template_code</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
<a id="__codelineno-0-98" name="__codelineno-0-98"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-99" name="__codelineno-0-99"></a><span class="sd">    Render a Jinja2 template with the provided context. Return the rendered content.</span>
<a id="__codelineno-0-100" name="__codelineno-0-100"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-101" name="__codelineno-0-101"></a>    <span class="n">rendering_engine</span> <span class="o">=</span> <span class="n">engines</span><span class="p">[</span><span class="s2">&quot;jinja&quot;</span><span class="p">]</span>
<a id="__codelineno-0-102" name="__codelineno-0-102"></a>    <span class="n">template</span> <span class="o">=</span> <span class="n">rendering_engine</span><span class="o">.</span><span class="n">from_string</span><span class="p">(</span><span class="n">template_code</span><span class="p">)</span>
<a id="__codelineno-0-103" name="__codelineno-0-103"></a>    <span class="c1"># For reasons unknown to me, django-jinja2 `template.render()` implicitly calls `mark_safe()` on the rendered text.</span>
<a id="__codelineno-0-104" name="__codelineno-0-104"></a>    <span class="c1"># This is a security risk in general, especially so in our case because we&#39;re often using this function to render</span>
<a id="__codelineno-0-105" name="__codelineno-0-105"></a>    <span class="c1"># a user-provided template and don&#39;t want to open ourselves up to script injection or similar issues.</span>
<a id="__codelineno-0-106" name="__codelineno-0-106"></a>    <span class="c1"># There&#39;s no `mark_unsafe()` function, but concatenating a SafeString to an ordinary string (even &quot;&quot;) suffices.</span>
<a id="__codelineno-0-107" name="__codelineno-0-107"></a>    <span class="k">return</span> <span class="s2">&quot;&quot;</span> <span class="o">+</span> <span class="n">template</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">context</span><span class="o">=</span><span class="n">context</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h2 id="nautobot.apps.utils.resolve_permission" class="doc doc-heading">
<code class="highlight language-python"><span class="n">nautobot</span><span class="o">.</span><span class="n">apps</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">resolve_permission</span><span class="p">(</span><span class="n">name</span><span class="p">)</span></code>

<a href="#nautobot.apps.utils.resolve_permission" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
  
      <p>Given a permission name, return the app_label, action, and model_name components. For example, "dcim.view_location"
returns ("dcim", "view", "location").</p>
<p>:param name: Permission name in the format <app_label>.<action>_<model></p>

          <details class="quote">
            <summary>Source code in <code>nautobot/core/utils/permissions.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-18">18</a></span>
<span class="normal"><a href="#__codelineno-0-19">19</a></span>
<span class="normal"><a href="#__codelineno-0-20">20</a></span>
<span class="normal"><a href="#__codelineno-0-21">21</a></span>
<span class="normal"><a href="#__codelineno-0-22">22</a></span>
<span class="normal"><a href="#__codelineno-0-23">23</a></span>
<span class="normal"><a href="#__codelineno-0-24">24</a></span>
<span class="normal"><a href="#__codelineno-0-25">25</a></span>
<span class="normal"><a href="#__codelineno-0-26">26</a></span>
<span class="normal"><a href="#__codelineno-0-27">27</a></span>
<span class="normal"><a href="#__codelineno-0-28">28</a></span>
<span class="normal"><a href="#__codelineno-0-29">29</a></span>
<span class="normal"><a href="#__codelineno-0-30">30</a></span>
<span class="normal"><a href="#__codelineno-0-31">31</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-18" name="__codelineno-0-18"></a><span class="k">def</span> <span class="nf">resolve_permission</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
<a id="__codelineno-0-19" name="__codelineno-0-19"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-20" name="__codelineno-0-20"></a><span class="sd">    Given a permission name, return the app_label, action, and model_name components. For example, &quot;dcim.view_location&quot;</span>
<a id="__codelineno-0-21" name="__codelineno-0-21"></a><span class="sd">    returns (&quot;dcim&quot;, &quot;view&quot;, &quot;location&quot;).</span>
<a id="__codelineno-0-22" name="__codelineno-0-22"></a>
<a id="__codelineno-0-23" name="__codelineno-0-23"></a><span class="sd">    :param name: Permission name in the format &lt;app_label&gt;.&lt;action&gt;_&lt;model&gt;</span>
<a id="__codelineno-0-24" name="__codelineno-0-24"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-25" name="__codelineno-0-25"></a>    <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-0-26" name="__codelineno-0-26"></a>        <span class="n">app_label</span><span class="p">,</span> <span class="n">codename</span> <span class="o">=</span> <span class="n">name</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)</span>
<a id="__codelineno-0-27" name="__codelineno-0-27"></a>        <span class="n">action</span><span class="p">,</span> <span class="n">model_name</span> <span class="o">=</span> <span class="n">codename</span><span class="o">.</span><span class="n">rsplit</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<a id="__codelineno-0-28" name="__codelineno-0-28"></a>    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
<a id="__codelineno-0-29" name="__codelineno-0-29"></a>        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid permission name: </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">. Must be in the format &lt;app_label&gt;.&lt;action&gt;_&lt;model&gt;&quot;</span><span class="p">)</span>
<a id="__codelineno-0-30" name="__codelineno-0-30"></a>
<a id="__codelineno-0-31" name="__codelineno-0-31"></a>    <span class="k">return</span> <span class="n">app_label</span><span class="p">,</span> <span class="n">action</span><span class="p">,</span> <span class="n">model_name</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h2 id="nautobot.apps.utils.resolve_permission_ct" class="doc doc-heading">
<code class="highlight language-python"><span class="n">nautobot</span><span class="o">.</span><span class="n">apps</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">resolve_permission_ct</span><span class="p">(</span><span class="n">name</span><span class="p">)</span></code>

<a href="#nautobot.apps.utils.resolve_permission_ct" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
  
      <p>Given a permission name, return the relevant ContentType and action. For example, "dcim.view_location" returns
(Location, "view").</p>
<p>:param name: Permission name in the format <app_label>.<action>_<model></p>

          <details class="quote">
            <summary>Source code in <code>nautobot/core/utils/permissions.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-34">34</a></span>
<span class="normal"><a href="#__codelineno-0-35">35</a></span>
<span class="normal"><a href="#__codelineno-0-36">36</a></span>
<span class="normal"><a href="#__codelineno-0-37">37</a></span>
<span class="normal"><a href="#__codelineno-0-38">38</a></span>
<span class="normal"><a href="#__codelineno-0-39">39</a></span>
<span class="normal"><a href="#__codelineno-0-40">40</a></span>
<span class="normal"><a href="#__codelineno-0-41">41</a></span>
<span class="normal"><a href="#__codelineno-0-42">42</a></span>
<span class="normal"><a href="#__codelineno-0-43">43</a></span>
<span class="normal"><a href="#__codelineno-0-44">44</a></span>
<span class="normal"><a href="#__codelineno-0-45">45</a></span>
<span class="normal"><a href="#__codelineno-0-46">46</a></span>
<span class="normal"><a href="#__codelineno-0-47">47</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-34" name="__codelineno-0-34"></a><span class="k">def</span> <span class="nf">resolve_permission_ct</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
<a id="__codelineno-0-35" name="__codelineno-0-35"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-36" name="__codelineno-0-36"></a><span class="sd">    Given a permission name, return the relevant ContentType and action. For example, &quot;dcim.view_location&quot; returns</span>
<a id="__codelineno-0-37" name="__codelineno-0-37"></a><span class="sd">    (Location, &quot;view&quot;).</span>
<a id="__codelineno-0-38" name="__codelineno-0-38"></a>
<a id="__codelineno-0-39" name="__codelineno-0-39"></a><span class="sd">    :param name: Permission name in the format &lt;app_label&gt;.&lt;action&gt;_&lt;model&gt;</span>
<a id="__codelineno-0-40" name="__codelineno-0-40"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-41" name="__codelineno-0-41"></a>    <span class="n">app_label</span><span class="p">,</span> <span class="n">action</span><span class="p">,</span> <span class="n">model_name</span> <span class="o">=</span> <span class="n">resolve_permission</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
<a id="__codelineno-0-42" name="__codelineno-0-42"></a>    <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-0-43" name="__codelineno-0-43"></a>        <span class="n">content_type</span> <span class="o">=</span> <span class="n">ContentType</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">app_label</span><span class="o">=</span><span class="n">app_label</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="n">model_name</span><span class="p">)</span>
<a id="__codelineno-0-44" name="__codelineno-0-44"></a>    <span class="k">except</span> <span class="n">ContentType</span><span class="o">.</span><span class="n">DoesNotExist</span><span class="p">:</span>
<a id="__codelineno-0-45" name="__codelineno-0-45"></a>        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unknown app_label/model_name for </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-46" name="__codelineno-0-46"></a>
<a id="__codelineno-0-47" name="__codelineno-0-47"></a>    <span class="k">return</span> <span class="n">content_type</span><span class="p">,</span> <span class="n">action</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h2 id="nautobot.apps.utils.rgb_to_hex" class="doc doc-heading">
<code class="highlight language-python"><span class="n">nautobot</span><span class="o">.</span><span class="n">apps</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">rgb_to_hex</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span></code>

<a href="#nautobot.apps.utils.rgb_to_hex" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
  
      <p>Map r, g, b values to a hex string.</p>

          <details class="quote">
            <summary>Source code in <code>nautobot/core/utils/color.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-11">11</a></span>
<span class="normal"><a href="#__codelineno-0-12">12</a></span>
<span class="normal"><a href="#__codelineno-0-13">13</a></span>
<span class="normal"><a href="#__codelineno-0-14">14</a></span>
<span class="normal"><a href="#__codelineno-0-15">15</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-11" name="__codelineno-0-11"></a><span class="k">def</span> <span class="nf">rgb_to_hex</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
<a id="__codelineno-0-12" name="__codelineno-0-12"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-13" name="__codelineno-0-13"></a><span class="sd">    Map r, g, b values to a hex string.</span>
<a id="__codelineno-0-14" name="__codelineno-0-14"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-15" name="__codelineno-0-15"></a>    <span class="k">return</span> <span class="s2">&quot;</span><span class="si">%02x%02x%02x</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>  <span class="c1"># pylint: disable=consider-using-f-string</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h2 id="nautobot.apps.utils.sanitize" class="doc doc-heading">
<code class="highlight language-python"><span class="n">nautobot</span><span class="o">.</span><span class="n">apps</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">sanitize</span><span class="p">(</span><span class="n">string</span><span class="p">,</span> <span class="n">replacement</span><span class="o">=</span><span class="s1">&#39;(redacted)&#39;</span><span class="p">)</span></code>

<a href="#nautobot.apps.utils.sanitize" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
  
      <p>Make an attempt at stripping potentially-sensitive information from the given string.</p>
<p>Obviously this will never be 100% foolproof but we can at least try.</p>
<p>Uses settings.SANITIZER_PATTERNS as the list of (regexp, repl) tuples to apply.</p>

          <details class="quote">
            <summary>Source code in <code>nautobot/core/utils/logging.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-11">11</a></span>
<span class="normal"><a href="#__codelineno-0-12">12</a></span>
<span class="normal"><a href="#__codelineno-0-13">13</a></span>
<span class="normal"><a href="#__codelineno-0-14">14</a></span>
<span class="normal"><a href="#__codelineno-0-15">15</a></span>
<span class="normal"><a href="#__codelineno-0-16">16</a></span>
<span class="normal"><a href="#__codelineno-0-17">17</a></span>
<span class="normal"><a href="#__codelineno-0-18">18</a></span>
<span class="normal"><a href="#__codelineno-0-19">19</a></span>
<span class="normal"><a href="#__codelineno-0-20">20</a></span>
<span class="normal"><a href="#__codelineno-0-21">21</a></span>
<span class="normal"><a href="#__codelineno-0-22">22</a></span>
<span class="normal"><a href="#__codelineno-0-23">23</a></span>
<span class="normal"><a href="#__codelineno-0-24">24</a></span>
<span class="normal"><a href="#__codelineno-0-25">25</a></span>
<span class="normal"><a href="#__codelineno-0-26">26</a></span>
<span class="normal"><a href="#__codelineno-0-27">27</a></span>
<span class="normal"><a href="#__codelineno-0-28">28</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-11" name="__codelineno-0-11"></a><span class="k">def</span> <span class="nf">sanitize</span><span class="p">(</span><span class="n">string</span><span class="p">,</span> <span class="n">replacement</span><span class="o">=</span><span class="s2">&quot;(redacted)&quot;</span><span class="p">):</span>
<a id="__codelineno-0-12" name="__codelineno-0-12"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-13" name="__codelineno-0-13"></a><span class="sd">    Make an attempt at stripping potentially-sensitive information from the given string.</span>
<a id="__codelineno-0-14" name="__codelineno-0-14"></a>
<a id="__codelineno-0-15" name="__codelineno-0-15"></a><span class="sd">    Obviously this will never be 100% foolproof but we can at least try.</span>
<a id="__codelineno-0-16" name="__codelineno-0-16"></a>
<a id="__codelineno-0-17" name="__codelineno-0-17"></a><span class="sd">    Uses settings.SANITIZER_PATTERNS as the list of (regexp, repl) tuples to apply.</span>
<a id="__codelineno-0-18" name="__codelineno-0-18"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-19" name="__codelineno-0-19"></a>    <span class="c1"># Don&#39;t allow regex match groups to be referenced in the replacement string!</span>
<a id="__codelineno-0-20" name="__codelineno-0-20"></a>    <span class="k">assert</span> <span class="ow">not</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;</span><span class="se">\\</span><span class="s2">\d|</span><span class="se">\\</span><span class="s2">g&lt;\d+&gt;&quot;</span><span class="p">,</span> <span class="n">replacement</span><span class="p">)</span>
<a id="__codelineno-0-21" name="__codelineno-0-21"></a>
<a id="__codelineno-0-22" name="__codelineno-0-22"></a>    <span class="k">for</span> <span class="n">sanitizer</span><span class="p">,</span> <span class="n">repl</span> <span class="ow">in</span> <span class="n">settings</span><span class="o">.</span><span class="n">SANITIZER_PATTERNS</span><span class="p">:</span>
<a id="__codelineno-0-23" name="__codelineno-0-23"></a>        <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-0-24" name="__codelineno-0-24"></a>            <span class="n">string</span> <span class="o">=</span> <span class="n">sanitizer</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="n">repl</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">replacement</span><span class="o">=</span><span class="n">replacement</span><span class="p">),</span> <span class="n">string</span><span class="p">)</span>
<a id="__codelineno-0-25" name="__codelineno-0-25"></a>        <span class="k">except</span> <span class="n">re</span><span class="o">.</span><span class="n">error</span><span class="p">:</span>
<a id="__codelineno-0-26" name="__codelineno-0-26"></a>            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;Error in string sanitization using &quot;</span><span class="si">%s</span><span class="s1">&quot;&#39;</span><span class="p">,</span> <span class="n">sanitizer</span><span class="p">)</span>
<a id="__codelineno-0-27" name="__codelineno-0-27"></a>
<a id="__codelineno-0-28" name="__codelineno-0-28"></a>    <span class="k">return</span> <span class="n">string</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h2 id="nautobot.apps.utils.shallow_compare_dict" class="doc doc-heading">
<code class="highlight language-python"><span class="n">nautobot</span><span class="o">.</span><span class="n">apps</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">shallow_compare_dict</span><span class="p">(</span><span class="n">source_dict</span><span class="p">,</span> <span class="n">destination_dict</span><span class="p">,</span> <span class="n">exclude</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#nautobot.apps.utils.shallow_compare_dict" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
  
      <p>Return a new dictionary of the different keys. The values of <code>destination_dict</code> are returned. Only the equality of
the first layer of keys/values is checked. <code>exclude</code> is a list or tuple of keys to be ignored.</p>

          <details class="quote">
            <summary>Source code in <code>nautobot/core/utils/data.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-110">110</a></span>
<span class="normal"><a href="#__codelineno-0-111">111</a></span>
<span class="normal"><a href="#__codelineno-0-112">112</a></span>
<span class="normal"><a href="#__codelineno-0-113">113</a></span>
<span class="normal"><a href="#__codelineno-0-114">114</a></span>
<span class="normal"><a href="#__codelineno-0-115">115</a></span>
<span class="normal"><a href="#__codelineno-0-116">116</a></span>
<span class="normal"><a href="#__codelineno-0-117">117</a></span>
<span class="normal"><a href="#__codelineno-0-118">118</a></span>
<span class="normal"><a href="#__codelineno-0-119">119</a></span>
<span class="normal"><a href="#__codelineno-0-120">120</a></span>
<span class="normal"><a href="#__codelineno-0-121">121</a></span>
<span class="normal"><a href="#__codelineno-0-122">122</a></span>
<span class="normal"><a href="#__codelineno-0-123">123</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-110" name="__codelineno-0-110"></a><span class="k">def</span> <span class="nf">shallow_compare_dict</span><span class="p">(</span><span class="n">source_dict</span><span class="p">,</span> <span class="n">destination_dict</span><span class="p">,</span> <span class="n">exclude</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<a id="__codelineno-0-111" name="__codelineno-0-111"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-112" name="__codelineno-0-112"></a><span class="sd">    Return a new dictionary of the different keys. The values of `destination_dict` are returned. Only the equality of</span>
<a id="__codelineno-0-113" name="__codelineno-0-113"></a><span class="sd">    the first layer of keys/values is checked. `exclude` is a list or tuple of keys to be ignored.</span>
<a id="__codelineno-0-114" name="__codelineno-0-114"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-115" name="__codelineno-0-115"></a>    <span class="n">difference</span> <span class="o">=</span> <span class="p">{}</span>
<a id="__codelineno-0-116" name="__codelineno-0-116"></a>
<a id="__codelineno-0-117" name="__codelineno-0-117"></a>    <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">destination_dict</span><span class="p">:</span>
<a id="__codelineno-0-118" name="__codelineno-0-118"></a>        <span class="k">if</span> <span class="n">source_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="o">!=</span> <span class="n">destination_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]:</span>
<a id="__codelineno-0-119" name="__codelineno-0-119"></a>            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">exclude</span><span class="p">,</span> <span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">))</span> <span class="ow">and</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">exclude</span><span class="p">:</span>
<a id="__codelineno-0-120" name="__codelineno-0-120"></a>                <span class="k">continue</span>
<a id="__codelineno-0-121" name="__codelineno-0-121"></a>            <span class="n">difference</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">destination_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
<a id="__codelineno-0-122" name="__codelineno-0-122"></a>
<a id="__codelineno-0-123" name="__codelineno-0-123"></a>    <span class="k">return</span> <span class="n">difference</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h2 id="nautobot.apps.utils.swap_status_initials" class="doc doc-heading">
<code class="highlight language-python"><span class="n">nautobot</span><span class="o">.</span><span class="n">apps</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">swap_status_initials</span><span class="p">(</span><span class="n">data</span><span class="p">)</span></code>

<a href="#nautobot.apps.utils.swap_status_initials" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
  
      <p>Swap Git status initials with its equivalent.</p>

          <details class="quote">
            <summary>Source code in <code>nautobot/core/utils/git.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-33">33</a></span>
<span class="normal"><a href="#__codelineno-0-34">34</a></span>
<span class="normal"><a href="#__codelineno-0-35">35</a></span>
<span class="normal"><a href="#__codelineno-0-36">36</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-33" name="__codelineno-0-33"></a><span class="k">def</span> <span class="nf">swap_status_initials</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
<a id="__codelineno-0-34" name="__codelineno-0-34"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Swap Git status initials with its equivalent.&quot;&quot;&quot;</span>
<a id="__codelineno-0-35" name="__codelineno-0-35"></a>    <span class="n">initial</span><span class="p">,</span> <span class="n">text</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\t</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-36" name="__codelineno-0-36"></a>    <span class="k">return</span> <span class="n">GitDiffLog</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">GIT_STATUS_MAP</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">initial</span><span class="p">),</span> <span class="n">text</span><span class="o">=</span><span class="n">text</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h2 id="nautobot.apps.utils.task_queues_as_choices" class="doc doc-heading">
<code class="highlight language-python"><span class="n">nautobot</span><span class="o">.</span><span class="n">apps</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">task_queues_as_choices</span><span class="p">(</span><span class="n">task_queues</span><span class="p">)</span></code>

<a href="#nautobot.apps.utils.task_queues_as_choices" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
  
      <p>Returns a list of 2-tuples for use in the form field <code>choices</code> argument. Appends
worker count to the description.</p>

          <details class="quote">
            <summary>Source code in <code>nautobot/extras/utils.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-312">312</a></span>
<span class="normal"><a href="#__codelineno-0-313">313</a></span>
<span class="normal"><a href="#__codelineno-0-314">314</a></span>
<span class="normal"><a href="#__codelineno-0-315">315</a></span>
<span class="normal"><a href="#__codelineno-0-316">316</a></span>
<span class="normal"><a href="#__codelineno-0-317">317</a></span>
<span class="normal"><a href="#__codelineno-0-318">318</a></span>
<span class="normal"><a href="#__codelineno-0-319">319</a></span>
<span class="normal"><a href="#__codelineno-0-320">320</a></span>
<span class="normal"><a href="#__codelineno-0-321">321</a></span>
<span class="normal"><a href="#__codelineno-0-322">322</a></span>
<span class="normal"><a href="#__codelineno-0-323">323</a></span>
<span class="normal"><a href="#__codelineno-0-324">324</a></span>
<span class="normal"><a href="#__codelineno-0-325">325</a></span>
<span class="normal"><a href="#__codelineno-0-326">326</a></span>
<span class="normal"><a href="#__codelineno-0-327">327</a></span>
<span class="normal"><a href="#__codelineno-0-328">328</a></span>
<span class="normal"><a href="#__codelineno-0-329">329</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-312" name="__codelineno-0-312"></a><span class="k">def</span> <span class="nf">task_queues_as_choices</span><span class="p">(</span><span class="n">task_queues</span><span class="p">):</span>
<a id="__codelineno-0-313" name="__codelineno-0-313"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-314" name="__codelineno-0-314"></a><span class="sd">    Returns a list of 2-tuples for use in the form field `choices` argument. Appends</span>
<a id="__codelineno-0-315" name="__codelineno-0-315"></a><span class="sd">    worker count to the description.</span>
<a id="__codelineno-0-316" name="__codelineno-0-316"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-317" name="__codelineno-0-317"></a>    <span class="k">if</span> <span class="ow">not</span> <span class="n">task_queues</span><span class="p">:</span>
<a id="__codelineno-0-318" name="__codelineno-0-318"></a>        <span class="n">task_queues</span> <span class="o">=</span> <span class="p">[</span><span class="n">settings</span><span class="o">.</span><span class="n">CELERY_TASK_DEFAULT_QUEUE</span><span class="p">]</span>
<a id="__codelineno-0-319" name="__codelineno-0-319"></a>
<a id="__codelineno-0-320" name="__codelineno-0-320"></a>    <span class="n">choices</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-321" name="__codelineno-0-321"></a>    <span class="n">celery_queues</span> <span class="o">=</span> <span class="n">get_celery_queues</span><span class="p">()</span>
<a id="__codelineno-0-322" name="__codelineno-0-322"></a>    <span class="k">for</span> <span class="n">queue</span> <span class="ow">in</span> <span class="n">task_queues</span><span class="p">:</span>
<a id="__codelineno-0-323" name="__codelineno-0-323"></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">queue</span><span class="p">:</span>
<a id="__codelineno-0-324" name="__codelineno-0-324"></a>            <span class="n">worker_count</span> <span class="o">=</span> <span class="n">celery_queues</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">settings</span><span class="o">.</span><span class="n">CELERY_TASK_DEFAULT_QUEUE</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<a id="__codelineno-0-325" name="__codelineno-0-325"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-326" name="__codelineno-0-326"></a>            <span class="n">worker_count</span> <span class="o">=</span> <span class="n">celery_queues</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">queue</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<a id="__codelineno-0-327" name="__codelineno-0-327"></a>        <span class="n">description</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">queue</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">queue</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s1">&#39;default queue&#39;</span><span class="si">}</span><span class="s2"> (</span><span class="si">{</span><span class="n">worker_count</span><span class="si">}</span><span class="s2"> worker</span><span class="si">{</span><span class="s1">&#39;s&#39;</span><span class="p">[:</span><span class="n">worker_count</span><span class="o">^</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2">)&quot;</span>
<a id="__codelineno-0-328" name="__codelineno-0-328"></a>        <span class="n">choices</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">queue</span><span class="p">,</span> <span class="n">description</span><span class="p">))</span>
<a id="__codelineno-0-329" name="__codelineno-0-329"></a>    <span class="k">return</span> <span class="n">choices</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h2 id="nautobot.apps.utils.to_meters" class="doc doc-heading">
<code class="highlight language-python"><span class="n">nautobot</span><span class="o">.</span><span class="n">apps</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">to_meters</span><span class="p">(</span><span class="n">length</span><span class="p">,</span> <span class="n">unit</span><span class="p">)</span></code>

<a href="#nautobot.apps.utils.to_meters" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
  
      <p>Convert the given length to meters.</p>

          <details class="quote">
            <summary>Source code in <code>nautobot/core/utils/data.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-126">126</a></span>
<span class="normal"><a href="#__codelineno-0-127">127</a></span>
<span class="normal"><a href="#__codelineno-0-128">128</a></span>
<span class="normal"><a href="#__codelineno-0-129">129</a></span>
<span class="normal"><a href="#__codelineno-0-130">130</a></span>
<span class="normal"><a href="#__codelineno-0-131">131</a></span>
<span class="normal"><a href="#__codelineno-0-132">132</a></span>
<span class="normal"><a href="#__codelineno-0-133">133</a></span>
<span class="normal"><a href="#__codelineno-0-134">134</a></span>
<span class="normal"><a href="#__codelineno-0-135">135</a></span>
<span class="normal"><a href="#__codelineno-0-136">136</a></span>
<span class="normal"><a href="#__codelineno-0-137">137</a></span>
<span class="normal"><a href="#__codelineno-0-138">138</a></span>
<span class="normal"><a href="#__codelineno-0-139">139</a></span>
<span class="normal"><a href="#__codelineno-0-140">140</a></span>
<span class="normal"><a href="#__codelineno-0-141">141</a></span>
<span class="normal"><a href="#__codelineno-0-142">142</a></span>
<span class="normal"><a href="#__codelineno-0-143">143</a></span>
<span class="normal"><a href="#__codelineno-0-144">144</a></span>
<span class="normal"><a href="#__codelineno-0-145">145</a></span>
<span class="normal"><a href="#__codelineno-0-146">146</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-126" name="__codelineno-0-126"></a><span class="k">def</span> <span class="nf">to_meters</span><span class="p">(</span><span class="n">length</span><span class="p">,</span> <span class="n">unit</span><span class="p">):</span>
<a id="__codelineno-0-127" name="__codelineno-0-127"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-128" name="__codelineno-0-128"></a><span class="sd">    Convert the given length to meters.</span>
<a id="__codelineno-0-129" name="__codelineno-0-129"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-130" name="__codelineno-0-130"></a>    <span class="n">length</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">length</span><span class="p">)</span>
<a id="__codelineno-0-131" name="__codelineno-0-131"></a>    <span class="k">if</span> <span class="n">length</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
<a id="__codelineno-0-132" name="__codelineno-0-132"></a>        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Length must be a positive integer&quot;</span><span class="p">)</span>
<a id="__codelineno-0-133" name="__codelineno-0-133"></a>
<a id="__codelineno-0-134" name="__codelineno-0-134"></a>    <span class="n">valid_units</span> <span class="o">=</span> <span class="n">choices</span><span class="o">.</span><span class="n">CableLengthUnitChoices</span><span class="o">.</span><span class="n">values</span><span class="p">()</span>
<a id="__codelineno-0-135" name="__codelineno-0-135"></a>    <span class="k">if</span> <span class="n">unit</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">valid_units</span><span class="p">:</span>
<a id="__codelineno-0-136" name="__codelineno-0-136"></a>        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unknown unit </span><span class="si">{</span><span class="n">unit</span><span class="si">}</span><span class="s2">. Must be one of the following: </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">valid_units</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-137" name="__codelineno-0-137"></a>
<a id="__codelineno-0-138" name="__codelineno-0-138"></a>    <span class="k">if</span> <span class="n">unit</span> <span class="o">==</span> <span class="n">choices</span><span class="o">.</span><span class="n">CableLengthUnitChoices</span><span class="o">.</span><span class="n">UNIT_METER</span><span class="p">:</span>
<a id="__codelineno-0-139" name="__codelineno-0-139"></a>        <span class="k">return</span> <span class="n">length</span>
<a id="__codelineno-0-140" name="__codelineno-0-140"></a>    <span class="k">if</span> <span class="n">unit</span> <span class="o">==</span> <span class="n">choices</span><span class="o">.</span><span class="n">CableLengthUnitChoices</span><span class="o">.</span><span class="n">UNIT_CENTIMETER</span><span class="p">:</span>
<a id="__codelineno-0-141" name="__codelineno-0-141"></a>        <span class="k">return</span> <span class="n">length</span> <span class="o">/</span> <span class="mi">100</span>
<a id="__codelineno-0-142" name="__codelineno-0-142"></a>    <span class="k">if</span> <span class="n">unit</span> <span class="o">==</span> <span class="n">choices</span><span class="o">.</span><span class="n">CableLengthUnitChoices</span><span class="o">.</span><span class="n">UNIT_FOOT</span><span class="p">:</span>
<a id="__codelineno-0-143" name="__codelineno-0-143"></a>        <span class="k">return</span> <span class="n">length</span> <span class="o">*</span> <span class="n">Decimal</span><span class="p">(</span><span class="s2">&quot;0.3048&quot;</span><span class="p">)</span>
<a id="__codelineno-0-144" name="__codelineno-0-144"></a>    <span class="k">if</span> <span class="n">unit</span> <span class="o">==</span> <span class="n">choices</span><span class="o">.</span><span class="n">CableLengthUnitChoices</span><span class="o">.</span><span class="n">UNIT_INCH</span><span class="p">:</span>
<a id="__codelineno-0-145" name="__codelineno-0-145"></a>        <span class="k">return</span> <span class="n">length</span> <span class="o">*</span> <span class="n">Decimal</span><span class="p">(</span><span class="s2">&quot;0.3048&quot;</span><span class="p">)</span> <span class="o">*</span> <span class="mi">12</span>
<a id="__codelineno-0-146" name="__codelineno-0-146"></a>    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unknown unit </span><span class="si">{</span><span class="n">unit</span><span class="si">}</span><span class="s2">. Must be &#39;m&#39;, &#39;cm&#39;, &#39;ft&#39;, or &#39;in&#39;.&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h2 id="nautobot.apps.utils.wrap_model_clean_methods" class="doc doc-heading">
<code class="highlight language-python"><span class="n">nautobot</span><span class="o">.</span><span class="n">apps</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">wrap_model_clean_methods</span><span class="p">()</span></code>

<a href="#nautobot.apps.utils.wrap_model_clean_methods" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
  
      <p>Helper function that wraps plugin model validator registered clean methods for all applicable models</p>

          <details class="quote">
            <summary>Source code in <code>nautobot/extras/plugins/validators.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-39">39</a></span>
<span class="normal"><a href="#__codelineno-0-40">40</a></span>
<span class="normal"><a href="#__codelineno-0-41">41</a></span>
<span class="normal"><a href="#__codelineno-0-42">42</a></span>
<span class="normal"><a href="#__codelineno-0-43">43</a></span>
<span class="normal"><a href="#__codelineno-0-44">44</a></span>
<span class="normal"><a href="#__codelineno-0-45">45</a></span>
<span class="normal"><a href="#__codelineno-0-46">46</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-39" name="__codelineno-0-39"></a><span class="k">def</span> <span class="nf">wrap_model_clean_methods</span><span class="p">():</span>
<a id="__codelineno-0-40" name="__codelineno-0-40"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-41" name="__codelineno-0-41"></a><span class="sd">    Helper function that wraps plugin model validator registered clean methods for all applicable models</span>
<a id="__codelineno-0-42" name="__codelineno-0-42"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-43" name="__codelineno-0-43"></a>    <span class="k">for</span> <span class="n">app_label</span><span class="p">,</span> <span class="n">models</span> <span class="ow">in</span> <span class="n">FeatureQuery</span><span class="p">(</span><span class="s2">&quot;custom_validators&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">as_dict</span><span class="p">():</span>
<a id="__codelineno-0-44" name="__codelineno-0-44"></a>        <span class="k">for</span> <span class="n">model</span> <span class="ow">in</span> <span class="n">models</span><span class="p">:</span>
<a id="__codelineno-0-45" name="__codelineno-0-45"></a>            <span class="n">model_class</span> <span class="o">=</span> <span class="n">apps</span><span class="o">.</span><span class="n">get_model</span><span class="p">(</span><span class="n">app_label</span><span class="o">=</span><span class="n">app_label</span><span class="p">,</span> <span class="n">model_name</span><span class="o">=</span><span class="n">model</span><span class="p">)</span>
<a id="__codelineno-0-46" name="__codelineno-0-46"></a>            <span class="n">model_class</span><span class="o">.</span><span class="n">clean</span> <span class="o">=</span> <span class="n">custom_validator_clean</span><span class="p">(</span><span class="n">model_class</span><span class="o">.</span><span class="n">clean</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>

</div>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="urls.html" class="md-footer__link md-footer__link--prev" aria-label="Previous: nautobot.apps.urls" rel="prev">
            <div class="md-footer__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                nautobot.apps.urls
              </div>
            </div>
          </a>
        
        
          
          <a href="views.html" class="md-footer__link md-footer__link--next" aria-label="Next: nautobot.apps.views" rel="next">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                nautobot.apps.views
              </div>
            </div>
            <div class="md-footer__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
    
    <div class="md-copyright__highlight">
        Copyright &copy; The Authors
    </div>
    <a href="https://github.com/nautobot/nautobot/blob/main/LICENSE.txt">Apache-2.0 LICENSE</a>
    
</div>

<div class="md-copyright">
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">Made with Material for MkDocs</a>
    | <a href="https://www.networktocode.com/community/" target="_blank" rel="noopener">Join Nautobot Slack</a>
    
    | <a href="https://networktocode.com" target="_blank" rel="noopener">Sponsored by <img
            src=../../../assets/networktocode_bw.png class="copyright-logo"></a>
    
</div>

<!-- RTD version flyout injected on live site -->
<div id="readthedocs-embed-flyout"></div>
      
        <div class="md-social">
  
    
    
    
    
    <a href="https://blog.networktocode.com/blog/tags/nautobot" target="_blank" rel="noopener" title="Network to Code Blog" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M0 64c0-17.7 14.3-32 32-32 229.8 0 416 186.2 416 416 0 17.7-14.3 32-32 32s-32-14.3-32-32C384 253.6 226.4 96 32 96 14.3 96 0 81.7 0 64zm0 352a64 64 0 1 1 128 0 64 64 0 1 1-128 0zm32-256c159.1 0 288 128.9 288 288 0 17.7-14.3 32-32 32s-32-14.3-32-32c0-123.7-100.3-224-224-224-17.7 0-32-14.3-32-32s14.3-32 32-32z"/></svg>
    </a>
  
    
    
    
    
    <a href="https://www.youtube.com/playlist?list=PLjA0bhxgryJ2Ts4GJMDA-tPzVWEncv4pb" target="_blank" rel="noopener" title="Nautobot Videos" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"/></svg>
    </a>
  
    
    
    
    
    <a href="https://www.networktocode.com/community/" target="_blank" rel="noopener" title="Network to Code Community" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M94.12 315.1c0 25.9-21.16 47.06-47.06 47.06S0 341 0 315.1c0-25.9 21.16-47.06 47.06-47.06h47.06v47.06zm23.72 0c0-25.9 21.16-47.06 47.06-47.06s47.06 21.16 47.06 47.06v117.84c0 25.9-21.16 47.06-47.06 47.06s-47.06-21.16-47.06-47.06V315.1zm47.06-188.98c-25.9 0-47.06-21.16-47.06-47.06S139 32 164.9 32s47.06 21.16 47.06 47.06v47.06H164.9zm0 23.72c25.9 0 47.06 21.16 47.06 47.06s-21.16 47.06-47.06 47.06H47.06C21.16 243.96 0 222.8 0 196.9s21.16-47.06 47.06-47.06H164.9zm188.98 47.06c0-25.9 21.16-47.06 47.06-47.06 25.9 0 47.06 21.16 47.06 47.06s-21.16 47.06-47.06 47.06h-47.06V196.9zm-23.72 0c0 25.9-21.16 47.06-47.06 47.06-25.9 0-47.06-21.16-47.06-47.06V79.06c0-25.9 21.16-47.06 47.06-47.06 25.9 0 47.06 21.16 47.06 47.06V196.9zM283.1 385.88c25.9 0 47.06 21.16 47.06 47.06 0 25.9-21.16 47.06-47.06 47.06-25.9 0-47.06-21.16-47.06-47.06v-47.06h47.06zm0-23.72c-25.9 0-47.06-21.16-47.06-47.06 0-25.9 21.16-47.06 47.06-47.06h117.84c25.9 0 47.06 21.16 47.06 47.06 0 25.9-21.16 47.06-47.06 47.06H283.1z"/></svg>
    </a>
  
    
    
    
    
    <a href="https://github.com/nautobot/nautobot" target="_blank" rel="noopener" title="GitHub Repo" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
    
    
    
    
    <a href="https://twitter.com/networktocode" target="_blank" rel="noopener" title="Network to Code Twitter" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["content.code.copy", "navigation.footer", "navigation.tabs", "navigation.tabs.sticky", "navigation.tracking", "search.highlight", "search.share", "search.suggest"], "search": "../../../assets/javascripts/workers/search.74e28a9f.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.220ee61c.min.js"></script>
      
        
          <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
        
      
    
  </body>
</html>