
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://docs.nautobot.com/projects/core/en/stable/code-reference/nautobot/apps/api.html">
      
      
        <link rel="prev" href="admin.html">
      
      
        <link rel="next" href="change_logging.html">
      
      <link rel="icon" href="../../../assets/favicon.ico">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.1.21">
    
    
      
        <title>nautobot.apps.api - Nautobot Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.eebd395e.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.ecc896b0.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../../assets/extra.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="black" data-md-color-accent="indigo">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#nautobot.apps.api" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../../index.html" title="Nautobot Documentation" class="md-header__button md-logo" aria-label="Nautobot Documentation" data-md-component="logo">
      
  <img src="../../../assets/nautobot_logo.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Nautobot Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              nautobot.apps.api
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
          
            
            
            
            <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="black" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
            
              <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22Z"/></svg>
              </label>
            
          
            
            
            
            <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
            
              <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31Z"/></svg>
              </label>
            
          
        </form>
      
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/nautobot/nautobot" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href="../../../index.html" class="md-tabs__link">
      Overview
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="../../../user-guide/index.html" class="md-tabs__link">
      User Guide
    </a>
  </li>

      
        
  
  
    
  


  <li class="md-tabs__item">
    <a href="../../../development/index.html" class="md-tabs__link md-tabs__link--active">
      Developer Guide
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="../../../release-notes/index.html" class="md-tabs__link">
      Release Notes
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="../../../apps/index.html" class="md-tabs__link">
      Nautobot Apps
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="https://docs.nautobot.com/" class="md-tabs__link">
      Nautobot Docs Home ↗︎
    </a>
  </li>

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../index.html" title="Nautobot Documentation" class="md-nav__button md-logo" aria-label="Nautobot Documentation" data-md-component="logo">
      
  <img src="../../../assets/nautobot_logo.svg" alt="logo">

    </a>
    Nautobot Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/nautobot/nautobot" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../index.html" class="md-nav__link">
        Overview
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../user-guide/index.html">User Guide</a>
          
            <label for="__nav_2">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          User Guide
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1" >
      
      
      
        <label class="md-nav__link" for="__nav_2_1" id="__nav_2_1_label" tabindex="0">
          Administration
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_1_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_1">
          <span class="md-nav__icon md-icon"></span>
          Administration
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1_1" >
      
      
      
        <label class="md-nav__link" for="__nav_2_1_1" id="__nav_2_1_1_label" tabindex="0">
          Installation
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_1_1_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_1_1">
          <span class="md-nav__icon md-icon"></span>
          Installation
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/administration/installation/index.html" class="md-nav__link">
        Prerequisites
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/administration/installation/install_system.html" class="md-nav__link">
        Installing System Dependencies
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/administration/installation/nautobot.html" class="md-nav__link">
        Installing Nautobot
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/administration/installation/services.html" class="md-nav__link">
        Deploying Nautobot Services
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/administration/installation/http-server.html" class="md-nav__link">
        Configuring an HTTP Server
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/administration/installation/external-authentication.html" class="md-nav__link">
        External Authentication (Optional)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/administration/installation/app-install.html" class="md-nav__link">
        Installing and Using Plugins
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/administration/installation/docker.html" class="md-nav__link">
        Nautobot Docker Images
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/administration/installation/selinux-troubleshooting.html" class="md-nav__link">
        SELinux Troubleshooting
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1_2" >
      
      
      
        <label class="md-nav__link" for="__nav_2_1_2" id="__nav_2_1_2_label" tabindex="0">
          Upgrading
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_1_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_1_2">
          <span class="md-nav__icon md-icon"></span>
          Upgrading
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/administration/upgrading/database-backup.html" class="md-nav__link">
        Database Backup
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/administration/upgrading/upgrading.html" class="md-nav__link">
        Upgrading Nautobot
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1_2_3" >
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../user-guide/administration/upgrading/from-v1/upgrading-from-nautobot-v1.html">Upgrading Nautobot from v1.X to v2.0</a>
          
            <label for="__nav_2_1_2_3">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_1_2_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_1_2_3">
          <span class="md-nav__icon md-icon"></span>
          Upgrading Nautobot from v1.X to v2.0
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/administration/upgrading/from-v1/region-and-site-data-migration-guide.html" class="md-nav__link">
        Migrating from Region and Site to Location
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1_2_3_2" >
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../user-guide/administration/upgrading/from-v1/ipam/index.html">IPAM Migration Guide</a>
          
            <label for="__nav_2_1_2_3_2">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_2_1_2_3_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_1_2_3_2">
          <span class="md-nav__icon md-icon"></span>
          IPAM Migration Guide
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/administration/upgrading/from-v1/ipam/whats-changed.html" class="md-nav__link">
        What's Changed
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/administration/upgrading/from-v1/ipam/before-you-upgrade.html" class="md-nav__link">
        Before you Upgrade
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/administration/upgrading/from-v1/ipam/after-you-upgrade.html" class="md-nav__link">
        After you Upgrade
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/administration/upgrading/from-v1/ipam/for-developers.html" class="md-nav__link">
        For Developers
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1_3" >
      
      
      
        <label class="md-nav__link" for="__nav_2_1_3" id="__nav_2_1_3_label" tabindex="0">
          Migration
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_1_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_1_3">
          <span class="md-nav__icon md-icon"></span>
          Migration
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/administration/migration/migrating-from-netbox.html" class="md-nav__link">
        Migrating from NetBox
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/administration/migration/migrating-from-postgresql.html" class="md-nav__link">
        Migrating from PostgreSQL to MySQL
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1_4" >
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../user-guide/administration/configuration/index.html">Configuration</a>
          
            <label for="__nav_2_1_4">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_1_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_1_4">
          <span class="md-nav__icon md-icon"></span>
          Configuration
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/administration/configuration/required-settings.html" class="md-nav__link">
        Required Settings
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/administration/configuration/optional-settings.html" class="md-nav__link">
        Optional Settings
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1_4_3" >
      
      
      
        <label class="md-nav__link" for="__nav_2_1_4_3" id="__nav_2_1_4_3_label" tabindex="0">
          External Authentication
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_1_4_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_1_4_3">
          <span class="md-nav__icon md-icon"></span>
          External Authentication
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/administration/configuration/authentication/ldap.html" class="md-nav__link">
        LDAP
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/administration/configuration/authentication/sso.html" class="md-nav__link">
        SSO
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/administration/configuration/authentication/remote.html" class="md-nav__link">
        Remote Header
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/administration/configuration/node-configuration.html" class="md-nav__link">
        Node.js Configuration
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1_5" >
      
      
      
        <label class="md-nav__link" for="__nav_2_1_5" id="__nav_2_1_5_label" tabindex="0">
          Tools
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_1_5_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_1_5">
          <span class="md-nav__icon md-icon"></span>
          Tools
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/administration/tools/nautobot-server.html" class="md-nav__link">
        Nautobot Server
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/administration/tools/nautobot-shell.html" class="md-nav__link">
        Nautobot Shell
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1_6" >
      
      
      
        <label class="md-nav__link" for="__nav_2_1_6" id="__nav_2_1_6_label" tabindex="0">
          Guides
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_1_6_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_1_6">
          <span class="md-nav__icon md-icon"></span>
          Guides
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/administration/guides/caching.html" class="md-nav__link">
        Caching
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/administration/guides/healthcheck.html" class="md-nav__link">
        Health Check
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/administration/guides/permissions.html" class="md-nav__link">
        Permissions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/administration/guides/prometheus-metrics.html" class="md-nav__link">
        Prometheus Metrics
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/administration/guides/replicating-nautobot.html" class="md-nav__link">
        Replicating Nautobot
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/administration/guides/s3-django-storage.html" class="md-nav__link">
        Django Storages with S3
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/administration/guides/celery-queues.html" class="md-nav__link">
        Task Queues
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2" >
      
      
      
        <label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
          Feature Guides
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_2">
          <span class="md-nav__icon md-icon"></span>
          Feature Guides
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2_1" >
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../user-guide/feature-guides/getting-started/index.html">Getting Started</a>
          
            <label for="__nav_2_2_1">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_2_1_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_2_1">
          <span class="md-nav__icon md-icon"></span>
          Getting Started
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/feature-guides/getting-started/creating-devices.html" class="md-nav__link">
        Devices
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/feature-guides/getting-started/creating-location-types-and-locations.html" class="md-nav__link">
        Location Types and Locations
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/feature-guides/getting-started/platforms.html" class="md-nav__link">
        Platforms
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/feature-guides/getting-started/tenants.html" class="md-nav__link">
        Tenants
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/feature-guides/getting-started/interfaces.html" class="md-nav__link">
        Interfaces
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/feature-guides/getting-started/vlans-and-vlan-groups.html" class="md-nav__link">
        VLANS and VLAN Groups
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/feature-guides/getting-started/ipam.html" class="md-nav__link">
        IP Address Management
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/feature-guides/getting-started/search-bar.html" class="md-nav__link">
        The Search Bar
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/feature-guides/custom-fields.html" class="md-nav__link">
        Custom Fields
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/feature-guides/git-data-source.html" class="md-nav__link">
        Git as a Data Source
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/feature-guides/graphql.html" class="md-nav__link">
        GraphQL
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/feature-guides/ip-address-merge-tool.html" class="md-nav__link">
        IP Address Merge Tool
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/feature-guides/git-data-source.html" class="md-nav__link">
        Git as a Data Source
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/feature-guides/graphql.html" class="md-nav__link">
        GraphQL
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/feature-guides/relationships.html" class="md-nav__link">
        Relationships
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3" >
      
      
      
        <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
          Core Data Model
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_3">
          <span class="md-nav__icon md-icon"></span>
          Core Data Model
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_1" >
      
      
      
        <label class="md-nav__link" for="__nav_2_3_1" id="__nav_2_3_1_label" tabindex="0">
          Circuits
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_3_1_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_3_1">
          <span class="md-nav__icon md-icon"></span>
          Circuits
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/core-data-model/circuits/circuit.html" class="md-nav__link">
        Circuit
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/core-data-model/circuits/circuittermination.html" class="md-nav__link">
        Circuit Termination
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/core-data-model/circuits/circuittype.html" class="md-nav__link">
        Circuit Type
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/core-data-model/circuits/provider.html" class="md-nav__link">
        Circuit Provider
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/core-data-model/circuits/providernetwork.html" class="md-nav__link">
        Circuit Provider Network
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_2" >
      
      
      
        <label class="md-nav__link" for="__nav_2_3_2" id="__nav_2_3_2_label" tabindex="0">
          DCIM
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_3_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_3_2">
          <span class="md-nav__icon md-icon"></span>
          DCIM
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/core-data-model/dcim/locationtype.html" class="md-nav__link">
        Location Type
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/core-data-model/dcim/location.html" class="md-nav__link">
        Location
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/core-data-model/dcim/rackgroup.html" class="md-nav__link">
        Rack Group
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/core-data-model/dcim/rack.html" class="md-nav__link">
        Rack
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/core-data-model/dcim/manufacturer.html" class="md-nav__link">
        Manufacturer
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/core-data-model/dcim/platform.html" class="md-nav__link">
        Platform
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_2_7" >
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../user-guide/core-data-model/dcim/devicetype.html">Device Type</a>
          
            <label for="__nav_2_3_2_7">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_3_2_7_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_3_2_7">
          <span class="md-nav__icon md-icon"></span>
          Device Type
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/core-data-model/dcim/consoleporttemplate.html" class="md-nav__link">
        Console Port Template
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/core-data-model/dcim/consoleserverporttemplate.html" class="md-nav__link">
        Console Server Port Template
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/core-data-model/dcim/devicebaytemplate.html" class="md-nav__link">
        Device Bay Template
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/core-data-model/dcim/frontporttemplate.html" class="md-nav__link">
        Front Port Template
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/core-data-model/dcim/interfacetemplate.html" class="md-nav__link">
        Interface Template
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/core-data-model/dcim/poweroutlettemplate.html" class="md-nav__link">
        Power Outlet Template
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/core-data-model/dcim/powerporttemplate.html" class="md-nav__link">
        Power Port Template
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/core-data-model/dcim/rearporttemplate.html" class="md-nav__link">
        Rear Port Template
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_2_8" >
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../user-guide/core-data-model/dcim/device.html">Device</a>
          
            <label for="__nav_2_3_2_8">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_3_2_8_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_3_2_8">
          <span class="md-nav__icon md-icon"></span>
          Device
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/core-data-model/dcim/consoleport.html" class="md-nav__link">
        Console Port
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/core-data-model/dcim/consoleserverport.html" class="md-nav__link">
        Console Server Port
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/core-data-model/dcim/devicebay.html" class="md-nav__link">
        Device Bay
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/core-data-model/dcim/frontport.html" class="md-nav__link">
        Front Port
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/core-data-model/dcim/interface.html" class="md-nav__link">
        Interface
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/core-data-model/dcim/inventoryitem.html" class="md-nav__link">
        Inventory Item
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/core-data-model/dcim/powerport.html" class="md-nav__link">
        Power Port
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/core-data-model/dcim/poweroutlet.html" class="md-nav__link">
        Power Outlet
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/core-data-model/dcim/rearport.html" class="md-nav__link">
        Rear Port
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/core-data-model/dcim/cable.html" class="md-nav__link">
        Cable
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/core-data-model/dcim/deviceredundancygroup.html" class="md-nav__link">
        Device Redundancy Group
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/core-data-model/dcim/interfaceredundancygroup.html" class="md-nav__link">
        Interface Redundancy Group
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/core-data-model/dcim/powerpanel.html" class="md-nav__link">
        Power Panel
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/core-data-model/dcim/powerfeed.html" class="md-nav__link">
        Power Feed
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/core-data-model/dcim/rackreservation.html" class="md-nav__link">
        Rack Reservation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/core-data-model/dcim/virtualchassis.html" class="md-nav__link">
        Virtual Chassis
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_3" >
      
      
      
        <label class="md-nav__link" for="__nav_2_3_3" id="__nav_2_3_3_label" tabindex="0">
          Extras
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_3_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_3_3">
          <span class="md-nav__icon md-icon"></span>
          Extras
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/core-data-model/extras/configcontext.html" class="md-nav__link">
        Config Context
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/core-data-model/extras/configcontextschema.html" class="md-nav__link">
        Config Context Schema
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_4" >
      
      
      
        <label class="md-nav__link" for="__nav_2_3_4" id="__nav_2_3_4_label" tabindex="0">
          IPAM
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_3_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_3_4">
          <span class="md-nav__icon md-icon"></span>
          IPAM
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/core-data-model/ipam/ipaddress.html" class="md-nav__link">
        IP Address
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/core-data-model/ipam/namespace.html" class="md-nav__link">
        Namespace
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/core-data-model/ipam/prefix.html" class="md-nav__link">
        Prefix
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/core-data-model/ipam/rir.html" class="md-nav__link">
        RIR
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/core-data-model/ipam/routetarget.html" class="md-nav__link">
        Route Target
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/core-data-model/ipam/service.html" class="md-nav__link">
        Service
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/core-data-model/ipam/vlan.html" class="md-nav__link">
        VLAN
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/core-data-model/ipam/vlangroup.html" class="md-nav__link">
        VLAN Group
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/core-data-model/ipam/vrf.html" class="md-nav__link">
        VRF
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_5" >
      
      
      
        <label class="md-nav__link" for="__nav_2_3_5" id="__nav_2_3_5_label" tabindex="0">
          Tenancy
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_3_5_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_3_5">
          <span class="md-nav__icon md-icon"></span>
          Tenancy
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/core-data-model/tenancy/tenant.html" class="md-nav__link">
        Tenant
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/core-data-model/tenancy/tenantgroup.html" class="md-nav__link">
        Tenant Group
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3_6" >
      
      
      
        <label class="md-nav__link" for="__nav_2_3_6" id="__nav_2_3_6_label" tabindex="0">
          Virtualization
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_3_6_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_3_6">
          <span class="md-nav__icon md-icon"></span>
          Virtualization
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/core-data-model/virtualization/cluster.html" class="md-nav__link">
        Cluster
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/core-data-model/virtualization/clustergroup.html" class="md-nav__link">
        Cluster Group
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/core-data-model/virtualization/clustertype.html" class="md-nav__link">
        Cluster Type
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/core-data-model/virtualization/virtualmachine.html" class="md-nav__link">
        Virtual Machine
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/core-data-model/virtualization/vminterface.html" class="md-nav__link">
        VM Interface
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4" >
      
      
      
        <label class="md-nav__link" for="__nav_2_4" id="__nav_2_4_label" tabindex="0">
          Platform Functionality
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_4">
          <span class="md-nav__icon md-icon"></span>
          Platform Functionality
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/platform-functionality/change-logging.html" class="md-nav__link">
        Change Logging
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/platform-functionality/computedfield.html" class="md-nav__link">
        Computed Fields
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/platform-functionality/customfield.html" class="md-nav__link">
        Custom Fields
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/platform-functionality/customlink.html" class="md-nav__link">
        Custom Links
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/platform-functionality/dynamicgroup.html" class="md-nav__link">
        Dynamic Groups
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/platform-functionality/exporttemplate.html" class="md-nav__link">
        Export Templates
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/platform-functionality/gitrepository.html" class="md-nav__link">
        Git Repositories
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4_8" >
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../user-guide/platform-functionality/graphql.html">GraphQL</a>
          
            <label for="__nav_2_4_8">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_4_8_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_4_8">
          <span class="md-nav__icon md-icon"></span>
          GraphQL
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/platform-functionality/graphqlquery.html" class="md-nav__link">
        GraphQL Queries
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/platform-functionality/imageattachment.html" class="md-nav__link">
        Image Attachments
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4_10" >
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../user-guide/platform-functionality/jobs/index.html">Jobs</a>
          
            <label for="__nav_2_4_10">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_4_10_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_4_10">
          <span class="md-nav__icon md-icon"></span>
          Jobs
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/platform-functionality/jobs/jobbutton.html" class="md-nav__link">
        Job Buttons
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/platform-functionality/jobs/jobhook.html" class="md-nav__link">
        Job Hooks
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/platform-functionality/jobs/models.html" class="md-nav__link">
        Job Models
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/platform-functionality/jobs/job-scheduling-and-approvals.html" class="md-nav__link">
        Job Scheduling and Approvals
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/platform-functionality/napalm.html" class="md-nav__link">
        NAPALM
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/platform-functionality/note.html" class="md-nav__link">
        Notes
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/platform-functionality/relationship.html" class="md-nav__link">
        Relationships
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4_14" >
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../user-guide/platform-functionality/rest-api/overview.html">REST API</a>
          
            <label for="__nav_2_4_14">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_4_14_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_4_14">
          <span class="md-nav__icon md-icon"></span>
          REST API
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/platform-functionality/rest-api/filtering.html" class="md-nav__link">
        Filtering
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/platform-functionality/rest-api/authentication.html" class="md-nav__link">
        Authentication
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/platform-functionality/rest-api/ui-related-endpoints.html" class="md-nav__link">
        UI Endpoints
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/platform-functionality/role.html" class="md-nav__link">
        Roles
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/platform-functionality/secret.html" class="md-nav__link">
        Secrets
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/platform-functionality/status.html" class="md-nav__link">
        Statuses
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/platform-functionality/tag.html" class="md-nav__link">
        Tags
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/platform-functionality/template-filters.html" class="md-nav__link">
        Template Filters
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4_20" >
      
      
      
        <label class="md-nav__link" for="__nav_2_4_20" id="__nav_2_4_20_label" tabindex="0">
          Users
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_4_20_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_4_20">
          <span class="md-nav__icon md-icon"></span>
          Users
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/platform-functionality/users/objectpermission.html" class="md-nav__link">
        Object Permission
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/platform-functionality/users/token.html" class="md-nav__link">
        Token
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../user-guide/platform-functionality/webhook.html" class="md-nav__link">
        Webhooks
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../development/index.html">Developer Guide</a>
          
            <label for="__nav_3">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Developer Guide
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1" >
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../development/jobs/index.html">Jobs Developer Guide</a>
          
            <label for="__nav_3_1">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_1_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_1">
          <span class="md-nav__icon md-icon"></span>
          Jobs Developer Guide
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/jobs/migration/from-v1.html" class="md-nav__link">
        Migration Guides
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" checked>
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../development/apps/index.html">App Developer Guide</a>
          
            <label for="__nav_3_2">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_3_2">
          <span class="md-nav__icon md-icon"></span>
          App Developer Guide
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/apps/api/setup.html" class="md-nav__link">
        Setup
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/apps/api/nautobot-app-config.html" class="md-nav__link">
        NautobotAppConfig
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2_3" >
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../development/apps/api/models/index.html">Models</a>
          
            <label for="__nav_3_2_3">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_2_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_2_3">
          <span class="md-nav__icon md-icon"></span>
          Models
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/apps/api/models/global-search.html" class="md-nav__link">
        Global Search
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/apps/api/models/graphql.html" class="md-nav__link">
        GraphQL
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/apps/api/models/django-admin.html" class="md-nav__link">
        Django Admin
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2_4" >
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../development/apps/api/views/index.html">Views</a>
          
            <label for="__nav_3_2_4">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_2_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_2_4">
          <span class="md-nav__icon md-icon"></span>
          Views
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/apps/api/views/nautobotuiviewset.html" class="md-nav__link">
        NautobotUIViewSet
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/apps/api/views/nautobotuiviewsetrouter.html" class="md-nav__link">
        NautobotUIViewSetRouter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/apps/api/views/nautobot-generic-views.html" class="md-nav__link">
        Nautobot Generic Views
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/apps/api/views/urls.html" class="md-nav__link">
        URLs
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/apps/api/views/base-template.html" class="md-nav__link">
        Base Template
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/apps/api/views/help-documentation.html" class="md-nav__link">
        Help Documentation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/apps/api/views/rest-api.html" class="md-nav__link">
        REST API
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2_4_8" >
      
      
      
        <label class="md-nav__link" for="__nav_3_2_4_8" id="__nav_3_2_4_8_label" tabindex="0">
          Advanced
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_3_2_4_8_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_2_4_8">
          <span class="md-nav__icon md-icon"></span>
          Advanced
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/apps/api/views/django-generic-views.html" class="md-nav__link">
        Django Generic Views
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/apps/api/views/notes.html" class="md-nav__link">
        Notes
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/apps/api/views/view-overrides.html" class="md-nav__link">
        View Overrides
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/apps/api/views/core-view-overrides.html" class="md-nav__link">
        Legacy View Overrides
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2_5" >
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../development/apps/api/platform-features/index.html">Platform Features</a>
          
            <label for="__nav_3_2_5">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_2_5_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_2_5">
          <span class="md-nav__icon md-icon"></span>
          Platform Features
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/apps/api/platform-features/custom-validators.html" class="md-nav__link">
        Custom Validators
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/apps/api/database-backend-config.html" class="md-nav__link">
        Database Backed Config
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/apps/api/platform-features/filter-extensions.html" class="md-nav__link">
        Filter Extentions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/apps/api/platform-features/git-repository-content.html" class="md-nav__link">
        Git Repository Content
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/apps/api/platform-features/jinja2-filters.html" class="md-nav__link">
        Jinja2 Filters
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/apps/api/platform-features/jobs.html" class="md-nav__link">
        Jobs
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/apps/api/platform-features/populating-extensibility-features.html" class="md-nav__link">
        Populating Extensibility Features
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/apps/api/prometheus.html" class="md-nav__link">
        Prometheus Metrics
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/apps/api/platform-features/secrets-providers.html" class="md-nav__link">
        Secrets Providers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/apps/api/platform-features/uniquely-identify-objects.html" class="md-nav__link">
        Uniquely Identifying a Nautobot Object
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2_6" >
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../development/apps/api/ui-extensions/index.html">UI Extensions</a>
          
            <label for="__nav_3_2_6">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_2_6_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_2_6">
          <span class="md-nav__icon md-icon"></span>
          UI Extensions
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/apps/api/ui-extensions/banners.html" class="md-nav__link">
        Banners
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/apps/api/ui-extensions/home-page.html" class="md-nav__link">
        Home Page
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/apps/api/configuration-view.html" class="md-nav__link">
        Links in the Installed Apps View
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/apps/api/ui-extensions/navigation.html" class="md-nav__link">
        Navigation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/apps/api/ui-extensions/object-detail-views.html" class="md-nav__link">
        Object Detail Views
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/apps/api/ui-extensions/tabs.html" class="md-nav__link">
        Tabs
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/apps/api/testing.html" class="md-nav__link">
        Testing
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2_8" checked>
      
      
      
        <label class="md-nav__link" for="__nav_3_2_8" id="__nav_3_2_8_label" tabindex="0">
          Code Reference
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_2_8_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_3_2_8">
          <span class="md-nav__icon md-icon"></span>
          Code Reference
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="__init__.html" class="md-nav__link">
        nautobot.apps
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="admin.html" class="md-nav__link">
        nautobot.apps.admin
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          nautobot.apps.api
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="api.html" class="md-nav__link md-nav__link--active">
        nautobot.apps.api
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.api.APIRootView" class="md-nav__link">
    APIRootView
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.api.BaseModelSerializer" class="md-nav__link">
    BaseModelSerializer
  </a>
  
    <nav class="md-nav" aria-label="BaseModelSerializer">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nautobot.core.api.serializers.BaseModelSerializer.is_nested" class="md-nav__link">
    is_nested
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nautobot.core.api.serializers.BaseModelSerializer.build_field" class="md-nav__link">
    build_field()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nautobot.core.api.serializers.BaseModelSerializer.build_property_field" class="md-nav__link">
    build_property_field()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nautobot.core.api.serializers.BaseModelSerializer.build_relational_field" class="md-nav__link">
    build_relational_field()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nautobot.core.api.serializers.BaseModelSerializer.build_url_field" class="md-nav__link">
    build_url_field()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nautobot.core.api.serializers.BaseModelSerializer.determine_view_options" class="md-nav__link">
    determine_view_options()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nautobot.core.api.serializers.BaseModelSerializer.extend_field_names" class="md-nav__link">
    extend_field_names()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nautobot.core.api.serializers.BaseModelSerializer.get_additional_detail_view_tabs" class="md-nav__link">
    get_additional_detail_view_tabs()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nautobot.core.api.serializers.BaseModelSerializer.get_display" class="md-nav__link">
    get_display()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nautobot.core.api.serializers.BaseModelSerializer.get_field_names" class="md-nav__link">
    get_field_names()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.api.BulkDestroyModelMixin" class="md-nav__link">
    BulkDestroyModelMixin
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.api.BulkUpdateModelMixin" class="md-nav__link">
    BulkUpdateModelMixin
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.api.ChoiceField" class="md-nav__link">
    ChoiceField
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.api.ContentTypeField" class="md-nav__link">
    ContentTypeField
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.api.CustomFieldModelSerializerMixin" class="md-nav__link">
    CustomFieldModelSerializerMixin
  </a>
  
    <nav class="md-nav" aria-label="CustomFieldModelSerializerMixin">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nautobot.core.api.serializers.CustomFieldModelSerializerMixin.get_field_names" class="md-nav__link">
    get_field_names()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.api.CustomFieldModelViewSet" class="md-nav__link">
    CustomFieldModelViewSet
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.api.GetObjectCountsView" class="md-nav__link">
    GetObjectCountsView
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.api.ModelViewSet" class="md-nav__link">
    ModelViewSet
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.api.ModelViewSetMixin" class="md-nav__link">
    ModelViewSetMixin
  </a>
  
    <nav class="md-nav" aria-label="ModelViewSetMixin">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nautobot.core.api.views.ModelViewSetMixin.get_object" class="md-nav__link">
    get_object()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nautobot.core.api.views.ModelViewSetMixin.initial" class="md-nav__link">
    initial()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nautobot.core.api.views.ModelViewSetMixin.restrict_queryset" class="md-nav__link">
    restrict_queryset()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.api.MultipleChoiceJSONField" class="md-nav__link">
    MultipleChoiceJSONField
  </a>
  
    <nav class="md-nav" aria-label="MultipleChoiceJSONField">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nautobot.extras.api.fields.MultipleChoiceJSONField.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.api.NautobotAutoSchema" class="md-nav__link">
    NautobotAutoSchema
  </a>
  
    <nav class="md-nav" aria-label="NautobotAutoSchema">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nautobot.core.api.schema.NautobotAutoSchema.is_bulk_action" class="md-nav__link">
    is_bulk_action
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nautobot.core.api.schema.NautobotAutoSchema.is_partial_action" class="md-nav__link">
    is_partial_action
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nautobot.core.api.schema.NautobotAutoSchema.get_description" class="md-nav__link">
    get_description()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nautobot.core.api.schema.NautobotAutoSchema.get_filter_backends" class="md-nav__link">
    get_filter_backends()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nautobot.core.api.schema.NautobotAutoSchema.get_operation_id" class="md-nav__link">
    get_operation_id()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nautobot.core.api.schema.NautobotAutoSchema.get_request_serializer" class="md-nav__link">
    get_request_serializer()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nautobot.core.api.schema.NautobotAutoSchema.get_response_serializers" class="md-nav__link">
    get_response_serializers()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nautobot.core.api.schema.NautobotAutoSchema.get_serializer_ref_name" class="md-nav__link">
    get_serializer_ref_name()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nautobot.core.api.schema.NautobotAutoSchema.get_writable_class" class="md-nav__link">
    get_writable_class()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nautobot.core.api.schema.NautobotAutoSchema.resolve_serializer" class="md-nav__link">
    resolve_serializer()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.api.NautobotCSVParser" class="md-nav__link">
    NautobotCSVParser
  </a>
  
    <nav class="md-nav" aria-label="NautobotCSVParser">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nautobot.core.api.parsers.NautobotCSVParser.row_elements_to_data" class="md-nav__link">
    row_elements_to_data()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.api.NautobotHyperlinkedRelatedField" class="md-nav__link">
    NautobotHyperlinkedRelatedField
  </a>
  
    <nav class="md-nav" aria-label="NautobotHyperlinkedRelatedField">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nautobot.core.api.fields.NautobotHyperlinkedRelatedField.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nautobot.core.api.fields.NautobotHyperlinkedRelatedField.to_internal_value" class="md-nav__link">
    to_internal_value()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nautobot.core.api.fields.NautobotHyperlinkedRelatedField.to_representation" class="md-nav__link">
    to_representation()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.api.NautobotModelSerializer" class="md-nav__link">
    NautobotModelSerializer
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.api.NautobotModelViewSet" class="md-nav__link">
    NautobotModelViewSet
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.api.NotesSerializerMixin" class="md-nav__link">
    NotesSerializerMixin
  </a>
  
    <nav class="md-nav" aria-label="NotesSerializerMixin">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nautobot.core.api.serializers.NotesSerializerMixin.get_field_names" class="md-nav__link">
    get_field_names()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.api.NotesViewSetMixin" class="md-nav__link">
    NotesViewSetMixin
  </a>
  
    <nav class="md-nav" aria-label="NotesViewSetMixin">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nautobot.extras.api.views.NotesViewSetMixin.CreateNotePermissions" class="md-nav__link">
    CreateNotePermissions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nautobot.extras.api.views.NotesViewSetMixin.notes" class="md-nav__link">
    notes()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nautobot.extras.api.views.NotesViewSetMixin.restrict_queryset" class="md-nav__link">
    restrict_queryset()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.api.ObjectTypeField" class="md-nav__link">
    ObjectTypeField
  </a>
  
    <nav class="md-nav" aria-label="ObjectTypeField">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nautobot.core.api.fields.ObjectTypeField.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nautobot.core.api.fields.ObjectTypeField.to_representation" class="md-nav__link">
    to_representation()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.api.OptInFieldsMixin" class="md-nav__link">
    OptInFieldsMixin
  </a>
  
    <nav class="md-nav" aria-label="OptInFieldsMixin">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nautobot.core.api.serializers.OptInFieldsMixin.fields" class="md-nav__link">
    fields
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.api.OrderedDefaultRouter" class="md-nav__link">
    OrderedDefaultRouter
  </a>
  
    <nav class="md-nav" aria-label="OrderedDefaultRouter">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nautobot.core.api.routers.OrderedDefaultRouter.get_api_root_view" class="md-nav__link">
    get_api_root_view()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.api.ReadOnlyModelViewSet" class="md-nav__link">
    ReadOnlyModelViewSet
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.api.RelationshipModelSerializerMixin" class="md-nav__link">
    RelationshipModelSerializerMixin
  </a>
  
    <nav class="md-nav" aria-label="RelationshipModelSerializerMixin">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nautobot.core.api.serializers.RelationshipModelSerializerMixin.get_field_names" class="md-nav__link">
    get_field_names()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.api.SerializedPKRelatedField" class="md-nav__link">
    SerializedPKRelatedField
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.api.TaggedModelSerializerMixin" class="md-nav__link">
    TaggedModelSerializerMixin
  </a>
  
    <nav class="md-nav" aria-label="TaggedModelSerializerMixin">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nautobot.extras.api.mixins.TaggedModelSerializerMixin.get_field_names" class="md-nav__link">
    get_field_names()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.api.TimeZoneSerializerField" class="md-nav__link">
    TimeZoneSerializerField
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.api.TreeModelSerializerMixin" class="md-nav__link">
    TreeModelSerializerMixin
  </a>
  
    <nav class="md-nav" aria-label="TreeModelSerializerMixin">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nautobot.core.api.serializers.TreeModelSerializerMixin.get_field_names" class="md-nav__link">
    get_field_names()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nautobot.core.api.serializers.TreeModelSerializerMixin.get_tree_depth" class="md-nav__link">
    get_tree_depth()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.api.ValidatedModelSerializer" class="md-nav__link">
    ValidatedModelSerializer
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.api.WritableNestedSerializer" class="md-nav__link">
    WritableNestedSerializer
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.api.WritableSerializerMixin" class="md-nav__link">
    WritableSerializerMixin
  </a>
  
    <nav class="md-nav" aria-label="WritableSerializerMixin">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nautobot.core.api.mixins.WritableSerializerMixin.get_object" class="md-nav__link">
    get_object()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nautobot.core.api.mixins.WritableSerializerMixin.get_queryset_filter_params" class="md-nav__link">
    get_queryset_filter_params()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nautobot.core.api.mixins.WritableSerializerMixin.remove_non_filter_fields" class="md-nav__link">
    remove_non_filter_fields()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nautobot.core.api.mixins.WritableSerializerMixin.to_internal_value" class="md-nav__link">
    to_internal_value()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.api.dict_to_filter_params" class="md-nav__link">
    dict_to_filter_params()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.api.dynamic_import" class="md-nav__link">
    dynamic_import()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.api.get_api_version_serializer" class="md-nav__link">
    get_api_version_serializer()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.api.get_serializer_for_model" class="md-nav__link">
    get_serializer_for_model()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.api.get_view_name" class="md-nav__link">
    get_view_name()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.api.is_api_request" class="md-nav__link">
    is_api_request()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.api.rest_api_server_error" class="md-nav__link">
    rest_api_server_error()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.api.versioned_serializer_selector" class="md-nav__link">
    versioned_serializer_selector()
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="change_logging.html" class="md-nav__link">
        nautobot.apps.change_logging
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="choices.html" class="md-nav__link">
        nautobot.apps.choices
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="config.html" class="md-nav__link">
        nautobot.apps.config
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="datasources.html" class="md-nav__link">
        nautobot.apps.datasources
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="exceptions.html" class="md-nav__link">
        nautobot.apps.exceptions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="factory.html" class="md-nav__link">
        nautobot.apps.factory
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="filters.html" class="md-nav__link">
        nautobot.apps.filters
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="forms.html" class="md-nav__link">
        nautobot.apps.forms
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="graphql.html" class="md-nav__link">
        nautobot.apps.graphql
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="jobs.html" class="md-nav__link">
        nautobot.apps.jobs
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="models.html" class="md-nav__link">
        nautobot.apps.models
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="querysets.html" class="md-nav__link">
        nautobot.apps.querysets
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="secrets.html" class="md-nav__link">
        nautobot.apps.secrets
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="tables.html" class="md-nav__link">
        nautobot.apps.tables
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="testing.html" class="md-nav__link">
        nautobot.apps.testing
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="ui.html" class="md-nav__link">
        nautobot.apps.ui
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="urls.html" class="md-nav__link">
        nautobot.apps.urls
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="utils.html" class="md-nav__link">
        nautobot.apps.utils
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="views.html" class="md-nav__link">
        nautobot.apps.views
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2_9" >
      
      
      
        <label class="md-nav__link" for="__nav_3_2_9" id="__nav_3_2_9_label" tabindex="0">
          Migration Guides
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_2_9_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_2_9">
          <span class="md-nav__icon md-icon"></span>
          Migration Guides
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/apps/migration/from-v1.html" class="md-nav__link">
        From Nautobot v1
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/apps/migration/dependency-updates.html" class="md-nav__link">
        Dependency Updates
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/apps/migration/code-updates.html" class="md-nav__link">
        Code Updates
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2_9_4" >
      
      
      
        <label class="md-nav__link" for="__nav_3_2_9_4" id="__nav_3_2_9_4_label" tabindex="0">
          Model Updates
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_3_2_9_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_2_9_4">
          <span class="md-nav__icon md-icon"></span>
          Model Updates
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/apps/migration/model-updates/global.html" class="md-nav__link">
        Global
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/apps/migration/model-updates/dcim.html" class="md-nav__link">
        DCIM
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/apps/migration/model-updates/extras.html" class="md-nav__link">
        Extras
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/apps/migration/model-updates/ipam.html" class="md-nav__link">
        IPAM
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2_10" >
      
      
      
        <label class="md-nav__link" for="__nav_3_2_10" id="__nav_3_2_10_label" tabindex="0">
          Advanced
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_2_10_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_2_10">
          <span class="md-nav__icon md-icon"></span>
          Advanced
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/apps/porting-from-netbox.html" class="md-nav__link">
        Porting NetBox Plugins to Nautobot
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_3" >
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../development/core/index.html">Core Developer Guide</a>
          
            <label for="__nav_3_3">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_3">
          <span class="md-nav__icon md-icon"></span>
          Core Developer Guide
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/core/getting-started.html" class="md-nav__link">
        Getting Started
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/core/docker-compose-advanced-use-cases.html" class="md-nav__link">
        Advanced Docker Compose Usage
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/core/application-registry.html" class="md-nav__link">
        Application Registry
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/core/best-practices.html" class="md-nav__link">
        Best Practices
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/core/extending-models.html" class="md-nav__link">
        Extending Models
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/core/generic-views.html" class="md-nav__link">
        Generic Views
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/core/homepage.html" class="md-nav__link">
        Home Page Panels
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/core/model-features.html" class="md-nav__link">
        Model Features
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/core/natural-keys.html" class="md-nav__link">
        Natural Keys
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/core/navigation-menu.html" class="md-nav__link">
        Navigation Menu
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/core/templates.html" class="md-nav__link">
        Page Templates
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/core/react-ui.html" class="md-nav__link">
        React UI
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/core/role-internals.html" class="md-nav__link">
        Role Internals
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/core/style-guide.html" class="md-nav__link">
        Style Guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/core/testing.html" class="md-nav__link">
        Testing
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/core/user-preferences.html" class="md-nav__link">
        User Preferences
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../development/core/release-checklist.html" class="md-nav__link">
        Release Checklist
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../release-notes/index.html">Release Notes</a>
          
            <label for="__nav_4">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Release Notes
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../release-notes/version-2.0.html" class="md-nav__link">
        Version 2.0
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../release-notes/version-1.6.html" class="md-nav__link">
        Version 1.6
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../release-notes/version-1.5.html" class="md-nav__link">
        Version 1.5
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../release-notes/version-1.4.html" class="md-nav__link">
        Version 1.4
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../release-notes/version-1.3.html" class="md-nav__link">
        Version 1.3
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../release-notes/version-1.2.html" class="md-nav__link">
        Version 1.2
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../release-notes/version-1.1.html" class="md-nav__link">
        Version 1.1
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../release-notes/version-1.0.html" class="md-nav__link">
        Version 1.0
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
      
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../apps/index.html">Nautobot Apps</a>
          
            <label for="__nav_5">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Nautobot Apps
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_1" >
      
      
      
        <label class="md-nav__link" for="__nav_5_1" id="__nav_5_1_label" tabindex="0">
          Network to Code App Docs
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_1_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_5_1">
          <span class="md-nav__icon md-icon"></span>
          Network to Code App Docs
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="https://docs.nautobot.com/projects/chatops/en/latest/" class="md-nav__link">
        Nautobot ChatOps
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="https://docs.nautobot.com/projects/circuit-maintenance/en/latest/" class="md-nav__link">
        Nautobot Circuit Maintenance
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="https://docs.nautobot.com/projects/data-validation/en/latest/" class="md-nav__link">
        Nautobot Data Validation Engine
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="https://docs.nautobot.com/projects/device-lifecycle/en/latest/" class="md-nav__link">
        Nautobot Device LifeCycle Management
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="https://docs.nautobot.com/projects/device-onboarding/en/latest/" class="md-nav__link">
        Nautobot Device Onboarding
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="https://nautobot-plugin-firewall-models.readthedocs.io/en/latest/" class="md-nav__link">
        Nautobot Firewall Models
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="https://docs.nautobot.com/projects/golden-config/" class="md-nav__link">
        Nautobot Golden Configuration
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="https://docs.nautobot.com/projects/plugin-nornir/en/latest/" class="md-nav__link">
        Nautobot Plugin Nornir
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="https://docs.nautobot.com/projects/ssot/en/latest/" class="md-nav__link">
        Nautobot Single Source of Truth
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../apps/nautobot-apps.html" class="md-nav__link">
        Community Apps
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="https://docs.nautobot.com/" class="md-nav__link">
        Nautobot Docs Home ↗︎
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.api.APIRootView" class="md-nav__link">
    APIRootView
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.api.BaseModelSerializer" class="md-nav__link">
    BaseModelSerializer
  </a>
  
    <nav class="md-nav" aria-label="BaseModelSerializer">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nautobot.core.api.serializers.BaseModelSerializer.is_nested" class="md-nav__link">
    is_nested
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nautobot.core.api.serializers.BaseModelSerializer.build_field" class="md-nav__link">
    build_field()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nautobot.core.api.serializers.BaseModelSerializer.build_property_field" class="md-nav__link">
    build_property_field()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nautobot.core.api.serializers.BaseModelSerializer.build_relational_field" class="md-nav__link">
    build_relational_field()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nautobot.core.api.serializers.BaseModelSerializer.build_url_field" class="md-nav__link">
    build_url_field()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nautobot.core.api.serializers.BaseModelSerializer.determine_view_options" class="md-nav__link">
    determine_view_options()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nautobot.core.api.serializers.BaseModelSerializer.extend_field_names" class="md-nav__link">
    extend_field_names()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nautobot.core.api.serializers.BaseModelSerializer.get_additional_detail_view_tabs" class="md-nav__link">
    get_additional_detail_view_tabs()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nautobot.core.api.serializers.BaseModelSerializer.get_display" class="md-nav__link">
    get_display()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nautobot.core.api.serializers.BaseModelSerializer.get_field_names" class="md-nav__link">
    get_field_names()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.api.BulkDestroyModelMixin" class="md-nav__link">
    BulkDestroyModelMixin
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.api.BulkUpdateModelMixin" class="md-nav__link">
    BulkUpdateModelMixin
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.api.ChoiceField" class="md-nav__link">
    ChoiceField
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.api.ContentTypeField" class="md-nav__link">
    ContentTypeField
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.api.CustomFieldModelSerializerMixin" class="md-nav__link">
    CustomFieldModelSerializerMixin
  </a>
  
    <nav class="md-nav" aria-label="CustomFieldModelSerializerMixin">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nautobot.core.api.serializers.CustomFieldModelSerializerMixin.get_field_names" class="md-nav__link">
    get_field_names()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.api.CustomFieldModelViewSet" class="md-nav__link">
    CustomFieldModelViewSet
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.api.GetObjectCountsView" class="md-nav__link">
    GetObjectCountsView
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.api.ModelViewSet" class="md-nav__link">
    ModelViewSet
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.api.ModelViewSetMixin" class="md-nav__link">
    ModelViewSetMixin
  </a>
  
    <nav class="md-nav" aria-label="ModelViewSetMixin">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nautobot.core.api.views.ModelViewSetMixin.get_object" class="md-nav__link">
    get_object()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nautobot.core.api.views.ModelViewSetMixin.initial" class="md-nav__link">
    initial()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nautobot.core.api.views.ModelViewSetMixin.restrict_queryset" class="md-nav__link">
    restrict_queryset()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.api.MultipleChoiceJSONField" class="md-nav__link">
    MultipleChoiceJSONField
  </a>
  
    <nav class="md-nav" aria-label="MultipleChoiceJSONField">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nautobot.extras.api.fields.MultipleChoiceJSONField.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.api.NautobotAutoSchema" class="md-nav__link">
    NautobotAutoSchema
  </a>
  
    <nav class="md-nav" aria-label="NautobotAutoSchema">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nautobot.core.api.schema.NautobotAutoSchema.is_bulk_action" class="md-nav__link">
    is_bulk_action
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nautobot.core.api.schema.NautobotAutoSchema.is_partial_action" class="md-nav__link">
    is_partial_action
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nautobot.core.api.schema.NautobotAutoSchema.get_description" class="md-nav__link">
    get_description()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nautobot.core.api.schema.NautobotAutoSchema.get_filter_backends" class="md-nav__link">
    get_filter_backends()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nautobot.core.api.schema.NautobotAutoSchema.get_operation_id" class="md-nav__link">
    get_operation_id()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nautobot.core.api.schema.NautobotAutoSchema.get_request_serializer" class="md-nav__link">
    get_request_serializer()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nautobot.core.api.schema.NautobotAutoSchema.get_response_serializers" class="md-nav__link">
    get_response_serializers()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nautobot.core.api.schema.NautobotAutoSchema.get_serializer_ref_name" class="md-nav__link">
    get_serializer_ref_name()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nautobot.core.api.schema.NautobotAutoSchema.get_writable_class" class="md-nav__link">
    get_writable_class()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nautobot.core.api.schema.NautobotAutoSchema.resolve_serializer" class="md-nav__link">
    resolve_serializer()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.api.NautobotCSVParser" class="md-nav__link">
    NautobotCSVParser
  </a>
  
    <nav class="md-nav" aria-label="NautobotCSVParser">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nautobot.core.api.parsers.NautobotCSVParser.row_elements_to_data" class="md-nav__link">
    row_elements_to_data()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.api.NautobotHyperlinkedRelatedField" class="md-nav__link">
    NautobotHyperlinkedRelatedField
  </a>
  
    <nav class="md-nav" aria-label="NautobotHyperlinkedRelatedField">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nautobot.core.api.fields.NautobotHyperlinkedRelatedField.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nautobot.core.api.fields.NautobotHyperlinkedRelatedField.to_internal_value" class="md-nav__link">
    to_internal_value()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nautobot.core.api.fields.NautobotHyperlinkedRelatedField.to_representation" class="md-nav__link">
    to_representation()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.api.NautobotModelSerializer" class="md-nav__link">
    NautobotModelSerializer
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.api.NautobotModelViewSet" class="md-nav__link">
    NautobotModelViewSet
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.api.NotesSerializerMixin" class="md-nav__link">
    NotesSerializerMixin
  </a>
  
    <nav class="md-nav" aria-label="NotesSerializerMixin">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nautobot.core.api.serializers.NotesSerializerMixin.get_field_names" class="md-nav__link">
    get_field_names()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.api.NotesViewSetMixin" class="md-nav__link">
    NotesViewSetMixin
  </a>
  
    <nav class="md-nav" aria-label="NotesViewSetMixin">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nautobot.extras.api.views.NotesViewSetMixin.CreateNotePermissions" class="md-nav__link">
    CreateNotePermissions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nautobot.extras.api.views.NotesViewSetMixin.notes" class="md-nav__link">
    notes()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nautobot.extras.api.views.NotesViewSetMixin.restrict_queryset" class="md-nav__link">
    restrict_queryset()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.api.ObjectTypeField" class="md-nav__link">
    ObjectTypeField
  </a>
  
    <nav class="md-nav" aria-label="ObjectTypeField">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nautobot.core.api.fields.ObjectTypeField.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nautobot.core.api.fields.ObjectTypeField.to_representation" class="md-nav__link">
    to_representation()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.api.OptInFieldsMixin" class="md-nav__link">
    OptInFieldsMixin
  </a>
  
    <nav class="md-nav" aria-label="OptInFieldsMixin">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nautobot.core.api.serializers.OptInFieldsMixin.fields" class="md-nav__link">
    fields
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.api.OrderedDefaultRouter" class="md-nav__link">
    OrderedDefaultRouter
  </a>
  
    <nav class="md-nav" aria-label="OrderedDefaultRouter">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nautobot.core.api.routers.OrderedDefaultRouter.get_api_root_view" class="md-nav__link">
    get_api_root_view()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.api.ReadOnlyModelViewSet" class="md-nav__link">
    ReadOnlyModelViewSet
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.api.RelationshipModelSerializerMixin" class="md-nav__link">
    RelationshipModelSerializerMixin
  </a>
  
    <nav class="md-nav" aria-label="RelationshipModelSerializerMixin">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nautobot.core.api.serializers.RelationshipModelSerializerMixin.get_field_names" class="md-nav__link">
    get_field_names()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.api.SerializedPKRelatedField" class="md-nav__link">
    SerializedPKRelatedField
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.api.TaggedModelSerializerMixin" class="md-nav__link">
    TaggedModelSerializerMixin
  </a>
  
    <nav class="md-nav" aria-label="TaggedModelSerializerMixin">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nautobot.extras.api.mixins.TaggedModelSerializerMixin.get_field_names" class="md-nav__link">
    get_field_names()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.api.TimeZoneSerializerField" class="md-nav__link">
    TimeZoneSerializerField
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.api.TreeModelSerializerMixin" class="md-nav__link">
    TreeModelSerializerMixin
  </a>
  
    <nav class="md-nav" aria-label="TreeModelSerializerMixin">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nautobot.core.api.serializers.TreeModelSerializerMixin.get_field_names" class="md-nav__link">
    get_field_names()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nautobot.core.api.serializers.TreeModelSerializerMixin.get_tree_depth" class="md-nav__link">
    get_tree_depth()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.api.ValidatedModelSerializer" class="md-nav__link">
    ValidatedModelSerializer
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.api.WritableNestedSerializer" class="md-nav__link">
    WritableNestedSerializer
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.api.WritableSerializerMixin" class="md-nav__link">
    WritableSerializerMixin
  </a>
  
    <nav class="md-nav" aria-label="WritableSerializerMixin">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nautobot.core.api.mixins.WritableSerializerMixin.get_object" class="md-nav__link">
    get_object()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nautobot.core.api.mixins.WritableSerializerMixin.get_queryset_filter_params" class="md-nav__link">
    get_queryset_filter_params()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nautobot.core.api.mixins.WritableSerializerMixin.remove_non_filter_fields" class="md-nav__link">
    remove_non_filter_fields()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nautobot.core.api.mixins.WritableSerializerMixin.to_internal_value" class="md-nav__link">
    to_internal_value()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.api.dict_to_filter_params" class="md-nav__link">
    dict_to_filter_params()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.api.dynamic_import" class="md-nav__link">
    dynamic_import()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.api.get_api_version_serializer" class="md-nav__link">
    get_api_version_serializer()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.api.get_serializer_for_model" class="md-nav__link">
    get_serializer_for_model()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.api.get_view_name" class="md-nav__link">
    get_view_name()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.api.is_api_request" class="md-nav__link">
    is_api_request()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.api.rest_api_server_error" class="md-nav__link">
    rest_api_server_error()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nautobot.apps.api.versioned_serializer_selector" class="md-nav__link">
    versioned_serializer_selector()
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<div class="doc doc-object doc-module">



<h1 id="nautobot.apps.api" class="doc doc-heading">
            <code>nautobot.apps.api</code>


<a href="#nautobot.apps.api" class="headerlink" title="Permanent link">&para;</a></h1>

  <div class="doc doc-contents first">
  
      <p>Helpers for an app to implement a REST API.</p>

  

  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="nautobot.apps.api.APIRootView" class="doc doc-heading">
          <code>nautobot.apps.api.APIRootView</code>


<a href="#nautobot.apps.api.APIRootView" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code><span title="nautobot.core.api.views.NautobotAPIVersionMixin">NautobotAPIVersionMixin</span></code>, <code><span title="rest_framework.views.APIView">APIView</span></code></p>

  
      <p>This is the root of the REST API. API endpoints are arranged by app and model name; e.g. <code>/api/dcim/locations/</code>.</p>

            <details class="quote">
              <summary>Source code in <code>nautobot/core/api/views.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-346">346</a></span>
<span class="normal"><a href="#__codelineno-0-347">347</a></span>
<span class="normal"><a href="#__codelineno-0-348">348</a></span>
<span class="normal"><a href="#__codelineno-0-349">349</a></span>
<span class="normal"><a href="#__codelineno-0-350">350</a></span>
<span class="normal"><a href="#__codelineno-0-351">351</a></span>
<span class="normal"><a href="#__codelineno-0-352">352</a></span>
<span class="normal"><a href="#__codelineno-0-353">353</a></span>
<span class="normal"><a href="#__codelineno-0-354">354</a></span>
<span class="normal"><a href="#__codelineno-0-355">355</a></span>
<span class="normal"><a href="#__codelineno-0-356">356</a></span>
<span class="normal"><a href="#__codelineno-0-357">357</a></span>
<span class="normal"><a href="#__codelineno-0-358">358</a></span>
<span class="normal"><a href="#__codelineno-0-359">359</a></span>
<span class="normal"><a href="#__codelineno-0-360">360</a></span>
<span class="normal"><a href="#__codelineno-0-361">361</a></span>
<span class="normal"><a href="#__codelineno-0-362">362</a></span>
<span class="normal"><a href="#__codelineno-0-363">363</a></span>
<span class="normal"><a href="#__codelineno-0-364">364</a></span>
<span class="normal"><a href="#__codelineno-0-365">365</a></span>
<span class="normal"><a href="#__codelineno-0-366">366</a></span>
<span class="normal"><a href="#__codelineno-0-367">367</a></span>
<span class="normal"><a href="#__codelineno-0-368">368</a></span>
<span class="normal"><a href="#__codelineno-0-369">369</a></span>
<span class="normal"><a href="#__codelineno-0-370">370</a></span>
<span class="normal"><a href="#__codelineno-0-371">371</a></span>
<span class="normal"><a href="#__codelineno-0-372">372</a></span>
<span class="normal"><a href="#__codelineno-0-373">373</a></span>
<span class="normal"><a href="#__codelineno-0-374">374</a></span>
<span class="normal"><a href="#__codelineno-0-375">375</a></span>
<span class="normal"><a href="#__codelineno-0-376">376</a></span>
<span class="normal"><a href="#__codelineno-0-377">377</a></span>
<span class="normal"><a href="#__codelineno-0-378">378</a></span>
<span class="normal"><a href="#__codelineno-0-379">379</a></span>
<span class="normal"><a href="#__codelineno-0-380">380</a></span>
<span class="normal"><a href="#__codelineno-0-381">381</a></span>
<span class="normal"><a href="#__codelineno-0-382">382</a></span>
<span class="normal"><a href="#__codelineno-0-383">383</a></span>
<span class="normal"><a href="#__codelineno-0-384">384</a></span>
<span class="normal"><a href="#__codelineno-0-385">385</a></span>
<span class="normal"><a href="#__codelineno-0-386">386</a></span>
<span class="normal"><a href="#__codelineno-0-387">387</a></span>
<span class="normal"><a href="#__codelineno-0-388">388</a></span>
<span class="normal"><a href="#__codelineno-0-389">389</a></span>
<span class="normal"><a href="#__codelineno-0-390">390</a></span>
<span class="normal"><a href="#__codelineno-0-391">391</a></span>
<span class="normal"><a href="#__codelineno-0-392">392</a></span>
<span class="normal"><a href="#__codelineno-0-393">393</a></span>
<span class="normal"><a href="#__codelineno-0-394">394</a></span>
<span class="normal"><a href="#__codelineno-0-395">395</a></span>
<span class="normal"><a href="#__codelineno-0-396">396</a></span>
<span class="normal"><a href="#__codelineno-0-397">397</a></span>
<span class="normal"><a href="#__codelineno-0-398">398</a></span>
<span class="normal"><a href="#__codelineno-0-399">399</a></span>
<span class="normal"><a href="#__codelineno-0-400">400</a></span>
<span class="normal"><a href="#__codelineno-0-401">401</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-346" name="__codelineno-0-346"></a><span class="k">class</span> <span class="nc">APIRootView</span><span class="p">(</span><span class="n">NautobotAPIVersionMixin</span><span class="p">,</span> <span class="n">APIView</span><span class="p">):</span>
<a id="__codelineno-0-347" name="__codelineno-0-347"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-348" name="__codelineno-0-348"></a><span class="sd">    This is the root of the REST API. API endpoints are arranged by app and model name; e.g. `/api/dcim/locations/`.</span>
<a id="__codelineno-0-349" name="__codelineno-0-349"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-350" name="__codelineno-0-350"></a>
<a id="__codelineno-0-351" name="__codelineno-0-351"></a>    <span class="n">_ignore_model_permissions</span> <span class="o">=</span> <span class="kc">True</span>
<a id="__codelineno-0-352" name="__codelineno-0-352"></a>
<a id="__codelineno-0-353" name="__codelineno-0-353"></a>    <span class="k">def</span> <span class="nf">get_view_name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-354" name="__codelineno-0-354"></a>        <span class="k">return</span> <span class="s2">&quot;API Root&quot;</span>
<a id="__codelineno-0-355" name="__codelineno-0-355"></a>
<a id="__codelineno-0-356" name="__codelineno-0-356"></a>    <span class="nd">@extend_schema</span><span class="p">(</span><span class="n">exclude</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-0-357" name="__codelineno-0-357"></a>    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>  <span class="c1"># pylint: disable=redefined-builtin</span>
<a id="__codelineno-0-358" name="__codelineno-0-358"></a>        <span class="k">return</span> <span class="n">Response</span><span class="p">(</span>
<a id="__codelineno-0-359" name="__codelineno-0-359"></a>            <span class="n">OrderedDict</span><span class="p">(</span>
<a id="__codelineno-0-360" name="__codelineno-0-360"></a>                <span class="p">(</span>
<a id="__codelineno-0-361" name="__codelineno-0-361"></a>                    <span class="p">(</span>
<a id="__codelineno-0-362" name="__codelineno-0-362"></a>                        <span class="s2">&quot;circuits&quot;</span><span class="p">,</span>
<a id="__codelineno-0-363" name="__codelineno-0-363"></a>                        <span class="n">reverse</span><span class="p">(</span><span class="s2">&quot;circuits-api:api-root&quot;</span><span class="p">,</span> <span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="nb">format</span><span class="p">),</span>
<a id="__codelineno-0-364" name="__codelineno-0-364"></a>                    <span class="p">),</span>
<a id="__codelineno-0-365" name="__codelineno-0-365"></a>                    <span class="p">(</span>
<a id="__codelineno-0-366" name="__codelineno-0-366"></a>                        <span class="s2">&quot;dcim&quot;</span><span class="p">,</span>
<a id="__codelineno-0-367" name="__codelineno-0-367"></a>                        <span class="n">reverse</span><span class="p">(</span><span class="s2">&quot;dcim-api:api-root&quot;</span><span class="p">,</span> <span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="nb">format</span><span class="p">),</span>
<a id="__codelineno-0-368" name="__codelineno-0-368"></a>                    <span class="p">),</span>
<a id="__codelineno-0-369" name="__codelineno-0-369"></a>                    <span class="p">(</span>
<a id="__codelineno-0-370" name="__codelineno-0-370"></a>                        <span class="s2">&quot;extras&quot;</span><span class="p">,</span>
<a id="__codelineno-0-371" name="__codelineno-0-371"></a>                        <span class="n">reverse</span><span class="p">(</span><span class="s2">&quot;extras-api:api-root&quot;</span><span class="p">,</span> <span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="nb">format</span><span class="p">),</span>
<a id="__codelineno-0-372" name="__codelineno-0-372"></a>                    <span class="p">),</span>
<a id="__codelineno-0-373" name="__codelineno-0-373"></a>                    <span class="p">(</span><span class="s2">&quot;graphql&quot;</span><span class="p">,</span> <span class="n">reverse</span><span class="p">(</span><span class="s2">&quot;graphql-api&quot;</span><span class="p">,</span> <span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="nb">format</span><span class="p">)),</span>
<a id="__codelineno-0-374" name="__codelineno-0-374"></a>                    <span class="p">(</span>
<a id="__codelineno-0-375" name="__codelineno-0-375"></a>                        <span class="s2">&quot;ipam&quot;</span><span class="p">,</span>
<a id="__codelineno-0-376" name="__codelineno-0-376"></a>                        <span class="n">reverse</span><span class="p">(</span><span class="s2">&quot;ipam-api:api-root&quot;</span><span class="p">,</span> <span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="nb">format</span><span class="p">),</span>
<a id="__codelineno-0-377" name="__codelineno-0-377"></a>                    <span class="p">),</span>
<a id="__codelineno-0-378" name="__codelineno-0-378"></a>                    <span class="p">(</span>
<a id="__codelineno-0-379" name="__codelineno-0-379"></a>                        <span class="s2">&quot;plugins&quot;</span><span class="p">,</span>
<a id="__codelineno-0-380" name="__codelineno-0-380"></a>                        <span class="n">reverse</span><span class="p">(</span><span class="s2">&quot;plugins-api:api-root&quot;</span><span class="p">,</span> <span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="nb">format</span><span class="p">),</span>
<a id="__codelineno-0-381" name="__codelineno-0-381"></a>                    <span class="p">),</span>
<a id="__codelineno-0-382" name="__codelineno-0-382"></a>                    <span class="p">(</span><span class="s2">&quot;status&quot;</span><span class="p">,</span> <span class="n">reverse</span><span class="p">(</span><span class="s2">&quot;api-status&quot;</span><span class="p">,</span> <span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="nb">format</span><span class="p">)),</span>
<a id="__codelineno-0-383" name="__codelineno-0-383"></a>                    <span class="p">(</span>
<a id="__codelineno-0-384" name="__codelineno-0-384"></a>                        <span class="s2">&quot;tenancy&quot;</span><span class="p">,</span>
<a id="__codelineno-0-385" name="__codelineno-0-385"></a>                        <span class="n">reverse</span><span class="p">(</span><span class="s2">&quot;tenancy-api:api-root&quot;</span><span class="p">,</span> <span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="nb">format</span><span class="p">),</span>
<a id="__codelineno-0-386" name="__codelineno-0-386"></a>                    <span class="p">),</span>
<a id="__codelineno-0-387" name="__codelineno-0-387"></a>                    <span class="p">(</span>
<a id="__codelineno-0-388" name="__codelineno-0-388"></a>                        <span class="s2">&quot;users&quot;</span><span class="p">,</span>
<a id="__codelineno-0-389" name="__codelineno-0-389"></a>                        <span class="n">reverse</span><span class="p">(</span><span class="s2">&quot;users-api:api-root&quot;</span><span class="p">,</span> <span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="nb">format</span><span class="p">),</span>
<a id="__codelineno-0-390" name="__codelineno-0-390"></a>                    <span class="p">),</span>
<a id="__codelineno-0-391" name="__codelineno-0-391"></a>                    <span class="p">(</span>
<a id="__codelineno-0-392" name="__codelineno-0-392"></a>                        <span class="s2">&quot;virtualization&quot;</span><span class="p">,</span>
<a id="__codelineno-0-393" name="__codelineno-0-393"></a>                        <span class="n">reverse</span><span class="p">(</span>
<a id="__codelineno-0-394" name="__codelineno-0-394"></a>                            <span class="s2">&quot;virtualization-api:api-root&quot;</span><span class="p">,</span>
<a id="__codelineno-0-395" name="__codelineno-0-395"></a>                            <span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">,</span>
<a id="__codelineno-0-396" name="__codelineno-0-396"></a>                            <span class="nb">format</span><span class="o">=</span><span class="nb">format</span><span class="p">,</span>
<a id="__codelineno-0-397" name="__codelineno-0-397"></a>                        <span class="p">),</span>
<a id="__codelineno-0-398" name="__codelineno-0-398"></a>                    <span class="p">),</span>
<a id="__codelineno-0-399" name="__codelineno-0-399"></a>                <span class="p">)</span>
<a id="__codelineno-0-400" name="__codelineno-0-400"></a>            <span class="p">)</span>
<a id="__codelineno-0-401" name="__codelineno-0-401"></a>        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">











  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="nautobot.apps.api.BaseModelSerializer" class="doc doc-heading">
          <code>nautobot.apps.api.BaseModelSerializer</code>


<a href="#nautobot.apps.api.BaseModelSerializer" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code><a class="autorefs autorefs-internal" title="nautobot.core.api.serializers.OptInFieldsMixin" href="#nautobot.apps.api.OptInFieldsMixin">OptInFieldsMixin</a></code>, <code><span title="rest_framework.serializers">serializers</span>.<span title="rest_framework.serializers.HyperlinkedModelSerializer">HyperlinkedModelSerializer</span></code></p>

  
      <p>This base serializer implements common fields and logic for all ModelSerializers.</p>
<p>Namely, it:</p>
<ul>
<li>defines the <code>display</code> field which exposes a human friendly value for the given object.</li>
<li>ensures that <code>id</code> field is always present on the serializer as well.</li>
<li>ensures that <code>created</code> and <code>last_updated</code> fields are always present if applicable to this model and serializer.</li>
<li>ensures that <code>object_type</code> field is always present on the serializer which represents the content-type of this
  serializer's associated model (e.g. "dcim.device"). This is required as the OpenAPI schema, using the
  PolymorphicProxySerializer class defined below, relies upon this field as a way to identify to the client
  which of several possible serializers are in use for a given attribute.</li>
<li>supports <code>?depth</code> query parameter. It is passed in as <code>nested_depth</code> to the <code>build_nested_field()</code> function
  to enable the dynamic generation of nested serializers.</li>
</ul>

            <details class="quote">
              <summary>Source code in <code>nautobot/core/api/serializers.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-112">112</a></span>
<span class="normal"><a href="#__codelineno-0-113">113</a></span>
<span class="normal"><a href="#__codelineno-0-114">114</a></span>
<span class="normal"><a href="#__codelineno-0-115">115</a></span>
<span class="normal"><a href="#__codelineno-0-116">116</a></span>
<span class="normal"><a href="#__codelineno-0-117">117</a></span>
<span class="normal"><a href="#__codelineno-0-118">118</a></span>
<span class="normal"><a href="#__codelineno-0-119">119</a></span>
<span class="normal"><a href="#__codelineno-0-120">120</a></span>
<span class="normal"><a href="#__codelineno-0-121">121</a></span>
<span class="normal"><a href="#__codelineno-0-122">122</a></span>
<span class="normal"><a href="#__codelineno-0-123">123</a></span>
<span class="normal"><a href="#__codelineno-0-124">124</a></span>
<span class="normal"><a href="#__codelineno-0-125">125</a></span>
<span class="normal"><a href="#__codelineno-0-126">126</a></span>
<span class="normal"><a href="#__codelineno-0-127">127</a></span>
<span class="normal"><a href="#__codelineno-0-128">128</a></span>
<span class="normal"><a href="#__codelineno-0-129">129</a></span>
<span class="normal"><a href="#__codelineno-0-130">130</a></span>
<span class="normal"><a href="#__codelineno-0-131">131</a></span>
<span class="normal"><a href="#__codelineno-0-132">132</a></span>
<span class="normal"><a href="#__codelineno-0-133">133</a></span>
<span class="normal"><a href="#__codelineno-0-134">134</a></span>
<span class="normal"><a href="#__codelineno-0-135">135</a></span>
<span class="normal"><a href="#__codelineno-0-136">136</a></span>
<span class="normal"><a href="#__codelineno-0-137">137</a></span>
<span class="normal"><a href="#__codelineno-0-138">138</a></span>
<span class="normal"><a href="#__codelineno-0-139">139</a></span>
<span class="normal"><a href="#__codelineno-0-140">140</a></span>
<span class="normal"><a href="#__codelineno-0-141">141</a></span>
<span class="normal"><a href="#__codelineno-0-142">142</a></span>
<span class="normal"><a href="#__codelineno-0-143">143</a></span>
<span class="normal"><a href="#__codelineno-0-144">144</a></span>
<span class="normal"><a href="#__codelineno-0-145">145</a></span>
<span class="normal"><a href="#__codelineno-0-146">146</a></span>
<span class="normal"><a href="#__codelineno-0-147">147</a></span>
<span class="normal"><a href="#__codelineno-0-148">148</a></span>
<span class="normal"><a href="#__codelineno-0-149">149</a></span>
<span class="normal"><a href="#__codelineno-0-150">150</a></span>
<span class="normal"><a href="#__codelineno-0-151">151</a></span>
<span class="normal"><a href="#__codelineno-0-152">152</a></span>
<span class="normal"><a href="#__codelineno-0-153">153</a></span>
<span class="normal"><a href="#__codelineno-0-154">154</a></span>
<span class="normal"><a href="#__codelineno-0-155">155</a></span>
<span class="normal"><a href="#__codelineno-0-156">156</a></span>
<span class="normal"><a href="#__codelineno-0-157">157</a></span>
<span class="normal"><a href="#__codelineno-0-158">158</a></span>
<span class="normal"><a href="#__codelineno-0-159">159</a></span>
<span class="normal"><a href="#__codelineno-0-160">160</a></span>
<span class="normal"><a href="#__codelineno-0-161">161</a></span>
<span class="normal"><a href="#__codelineno-0-162">162</a></span>
<span class="normal"><a href="#__codelineno-0-163">163</a></span>
<span class="normal"><a href="#__codelineno-0-164">164</a></span>
<span class="normal"><a href="#__codelineno-0-165">165</a></span>
<span class="normal"><a href="#__codelineno-0-166">166</a></span>
<span class="normal"><a href="#__codelineno-0-167">167</a></span>
<span class="normal"><a href="#__codelineno-0-168">168</a></span>
<span class="normal"><a href="#__codelineno-0-169">169</a></span>
<span class="normal"><a href="#__codelineno-0-170">170</a></span>
<span class="normal"><a href="#__codelineno-0-171">171</a></span>
<span class="normal"><a href="#__codelineno-0-172">172</a></span>
<span class="normal"><a href="#__codelineno-0-173">173</a></span>
<span class="normal"><a href="#__codelineno-0-174">174</a></span>
<span class="normal"><a href="#__codelineno-0-175">175</a></span>
<span class="normal"><a href="#__codelineno-0-176">176</a></span>
<span class="normal"><a href="#__codelineno-0-177">177</a></span>
<span class="normal"><a href="#__codelineno-0-178">178</a></span>
<span class="normal"><a href="#__codelineno-0-179">179</a></span>
<span class="normal"><a href="#__codelineno-0-180">180</a></span>
<span class="normal"><a href="#__codelineno-0-181">181</a></span>
<span class="normal"><a href="#__codelineno-0-182">182</a></span>
<span class="normal"><a href="#__codelineno-0-183">183</a></span>
<span class="normal"><a href="#__codelineno-0-184">184</a></span>
<span class="normal"><a href="#__codelineno-0-185">185</a></span>
<span class="normal"><a href="#__codelineno-0-186">186</a></span>
<span class="normal"><a href="#__codelineno-0-187">187</a></span>
<span class="normal"><a href="#__codelineno-0-188">188</a></span>
<span class="normal"><a href="#__codelineno-0-189">189</a></span>
<span class="normal"><a href="#__codelineno-0-190">190</a></span>
<span class="normal"><a href="#__codelineno-0-191">191</a></span>
<span class="normal"><a href="#__codelineno-0-192">192</a></span>
<span class="normal"><a href="#__codelineno-0-193">193</a></span>
<span class="normal"><a href="#__codelineno-0-194">194</a></span>
<span class="normal"><a href="#__codelineno-0-195">195</a></span>
<span class="normal"><a href="#__codelineno-0-196">196</a></span>
<span class="normal"><a href="#__codelineno-0-197">197</a></span>
<span class="normal"><a href="#__codelineno-0-198">198</a></span>
<span class="normal"><a href="#__codelineno-0-199">199</a></span>
<span class="normal"><a href="#__codelineno-0-200">200</a></span>
<span class="normal"><a href="#__codelineno-0-201">201</a></span>
<span class="normal"><a href="#__codelineno-0-202">202</a></span>
<span class="normal"><a href="#__codelineno-0-203">203</a></span>
<span class="normal"><a href="#__codelineno-0-204">204</a></span>
<span class="normal"><a href="#__codelineno-0-205">205</a></span>
<span class="normal"><a href="#__codelineno-0-206">206</a></span>
<span class="normal"><a href="#__codelineno-0-207">207</a></span>
<span class="normal"><a href="#__codelineno-0-208">208</a></span>
<span class="normal"><a href="#__codelineno-0-209">209</a></span>
<span class="normal"><a href="#__codelineno-0-210">210</a></span>
<span class="normal"><a href="#__codelineno-0-211">211</a></span>
<span class="normal"><a href="#__codelineno-0-212">212</a></span>
<span class="normal"><a href="#__codelineno-0-213">213</a></span>
<span class="normal"><a href="#__codelineno-0-214">214</a></span>
<span class="normal"><a href="#__codelineno-0-215">215</a></span>
<span class="normal"><a href="#__codelineno-0-216">216</a></span>
<span class="normal"><a href="#__codelineno-0-217">217</a></span>
<span class="normal"><a href="#__codelineno-0-218">218</a></span>
<span class="normal"><a href="#__codelineno-0-219">219</a></span>
<span class="normal"><a href="#__codelineno-0-220">220</a></span>
<span class="normal"><a href="#__codelineno-0-221">221</a></span>
<span class="normal"><a href="#__codelineno-0-222">222</a></span>
<span class="normal"><a href="#__codelineno-0-223">223</a></span>
<span class="normal"><a href="#__codelineno-0-224">224</a></span>
<span class="normal"><a href="#__codelineno-0-225">225</a></span>
<span class="normal"><a href="#__codelineno-0-226">226</a></span>
<span class="normal"><a href="#__codelineno-0-227">227</a></span>
<span class="normal"><a href="#__codelineno-0-228">228</a></span>
<span class="normal"><a href="#__codelineno-0-229">229</a></span>
<span class="normal"><a href="#__codelineno-0-230">230</a></span>
<span class="normal"><a href="#__codelineno-0-231">231</a></span>
<span class="normal"><a href="#__codelineno-0-232">232</a></span>
<span class="normal"><a href="#__codelineno-0-233">233</a></span>
<span class="normal"><a href="#__codelineno-0-234">234</a></span>
<span class="normal"><a href="#__codelineno-0-235">235</a></span>
<span class="normal"><a href="#__codelineno-0-236">236</a></span>
<span class="normal"><a href="#__codelineno-0-237">237</a></span>
<span class="normal"><a href="#__codelineno-0-238">238</a></span>
<span class="normal"><a href="#__codelineno-0-239">239</a></span>
<span class="normal"><a href="#__codelineno-0-240">240</a></span>
<span class="normal"><a href="#__codelineno-0-241">241</a></span>
<span class="normal"><a href="#__codelineno-0-242">242</a></span>
<span class="normal"><a href="#__codelineno-0-243">243</a></span>
<span class="normal"><a href="#__codelineno-0-244">244</a></span>
<span class="normal"><a href="#__codelineno-0-245">245</a></span>
<span class="normal"><a href="#__codelineno-0-246">246</a></span>
<span class="normal"><a href="#__codelineno-0-247">247</a></span>
<span class="normal"><a href="#__codelineno-0-248">248</a></span>
<span class="normal"><a href="#__codelineno-0-249">249</a></span>
<span class="normal"><a href="#__codelineno-0-250">250</a></span>
<span class="normal"><a href="#__codelineno-0-251">251</a></span>
<span class="normal"><a href="#__codelineno-0-252">252</a></span>
<span class="normal"><a href="#__codelineno-0-253">253</a></span>
<span class="normal"><a href="#__codelineno-0-254">254</a></span>
<span class="normal"><a href="#__codelineno-0-255">255</a></span>
<span class="normal"><a href="#__codelineno-0-256">256</a></span>
<span class="normal"><a href="#__codelineno-0-257">257</a></span>
<span class="normal"><a href="#__codelineno-0-258">258</a></span>
<span class="normal"><a href="#__codelineno-0-259">259</a></span>
<span class="normal"><a href="#__codelineno-0-260">260</a></span>
<span class="normal"><a href="#__codelineno-0-261">261</a></span>
<span class="normal"><a href="#__codelineno-0-262">262</a></span>
<span class="normal"><a href="#__codelineno-0-263">263</a></span>
<span class="normal"><a href="#__codelineno-0-264">264</a></span>
<span class="normal"><a href="#__codelineno-0-265">265</a></span>
<span class="normal"><a href="#__codelineno-0-266">266</a></span>
<span class="normal"><a href="#__codelineno-0-267">267</a></span>
<span class="normal"><a href="#__codelineno-0-268">268</a></span>
<span class="normal"><a href="#__codelineno-0-269">269</a></span>
<span class="normal"><a href="#__codelineno-0-270">270</a></span>
<span class="normal"><a href="#__codelineno-0-271">271</a></span>
<span class="normal"><a href="#__codelineno-0-272">272</a></span>
<span class="normal"><a href="#__codelineno-0-273">273</a></span>
<span class="normal"><a href="#__codelineno-0-274">274</a></span>
<span class="normal"><a href="#__codelineno-0-275">275</a></span>
<span class="normal"><a href="#__codelineno-0-276">276</a></span>
<span class="normal"><a href="#__codelineno-0-277">277</a></span>
<span class="normal"><a href="#__codelineno-0-278">278</a></span>
<span class="normal"><a href="#__codelineno-0-279">279</a></span>
<span class="normal"><a href="#__codelineno-0-280">280</a></span>
<span class="normal"><a href="#__codelineno-0-281">281</a></span>
<span class="normal"><a href="#__codelineno-0-282">282</a></span>
<span class="normal"><a href="#__codelineno-0-283">283</a></span>
<span class="normal"><a href="#__codelineno-0-284">284</a></span>
<span class="normal"><a href="#__codelineno-0-285">285</a></span>
<span class="normal"><a href="#__codelineno-0-286">286</a></span>
<span class="normal"><a href="#__codelineno-0-287">287</a></span>
<span class="normal"><a href="#__codelineno-0-288">288</a></span>
<span class="normal"><a href="#__codelineno-0-289">289</a></span>
<span class="normal"><a href="#__codelineno-0-290">290</a></span>
<span class="normal"><a href="#__codelineno-0-291">291</a></span>
<span class="normal"><a href="#__codelineno-0-292">292</a></span>
<span class="normal"><a href="#__codelineno-0-293">293</a></span>
<span class="normal"><a href="#__codelineno-0-294">294</a></span>
<span class="normal"><a href="#__codelineno-0-295">295</a></span>
<span class="normal"><a href="#__codelineno-0-296">296</a></span>
<span class="normal"><a href="#__codelineno-0-297">297</a></span>
<span class="normal"><a href="#__codelineno-0-298">298</a></span>
<span class="normal"><a href="#__codelineno-0-299">299</a></span>
<span class="normal"><a href="#__codelineno-0-300">300</a></span>
<span class="normal"><a href="#__codelineno-0-301">301</a></span>
<span class="normal"><a href="#__codelineno-0-302">302</a></span>
<span class="normal"><a href="#__codelineno-0-303">303</a></span>
<span class="normal"><a href="#__codelineno-0-304">304</a></span>
<span class="normal"><a href="#__codelineno-0-305">305</a></span>
<span class="normal"><a href="#__codelineno-0-306">306</a></span>
<span class="normal"><a href="#__codelineno-0-307">307</a></span>
<span class="normal"><a href="#__codelineno-0-308">308</a></span>
<span class="normal"><a href="#__codelineno-0-309">309</a></span>
<span class="normal"><a href="#__codelineno-0-310">310</a></span>
<span class="normal"><a href="#__codelineno-0-311">311</a></span>
<span class="normal"><a href="#__codelineno-0-312">312</a></span>
<span class="normal"><a href="#__codelineno-0-313">313</a></span>
<span class="normal"><a href="#__codelineno-0-314">314</a></span>
<span class="normal"><a href="#__codelineno-0-315">315</a></span>
<span class="normal"><a href="#__codelineno-0-316">316</a></span>
<span class="normal"><a href="#__codelineno-0-317">317</a></span>
<span class="normal"><a href="#__codelineno-0-318">318</a></span>
<span class="normal"><a href="#__codelineno-0-319">319</a></span>
<span class="normal"><a href="#__codelineno-0-320">320</a></span>
<span class="normal"><a href="#__codelineno-0-321">321</a></span>
<span class="normal"><a href="#__codelineno-0-322">322</a></span>
<span class="normal"><a href="#__codelineno-0-323">323</a></span>
<span class="normal"><a href="#__codelineno-0-324">324</a></span>
<span class="normal"><a href="#__codelineno-0-325">325</a></span>
<span class="normal"><a href="#__codelineno-0-326">326</a></span>
<span class="normal"><a href="#__codelineno-0-327">327</a></span>
<span class="normal"><a href="#__codelineno-0-328">328</a></span>
<span class="normal"><a href="#__codelineno-0-329">329</a></span>
<span class="normal"><a href="#__codelineno-0-330">330</a></span>
<span class="normal"><a href="#__codelineno-0-331">331</a></span>
<span class="normal"><a href="#__codelineno-0-332">332</a></span>
<span class="normal"><a href="#__codelineno-0-333">333</a></span>
<span class="normal"><a href="#__codelineno-0-334">334</a></span>
<span class="normal"><a href="#__codelineno-0-335">335</a></span>
<span class="normal"><a href="#__codelineno-0-336">336</a></span>
<span class="normal"><a href="#__codelineno-0-337">337</a></span>
<span class="normal"><a href="#__codelineno-0-338">338</a></span>
<span class="normal"><a href="#__codelineno-0-339">339</a></span>
<span class="normal"><a href="#__codelineno-0-340">340</a></span>
<span class="normal"><a href="#__codelineno-0-341">341</a></span>
<span class="normal"><a href="#__codelineno-0-342">342</a></span>
<span class="normal"><a href="#__codelineno-0-343">343</a></span>
<span class="normal"><a href="#__codelineno-0-344">344</a></span>
<span class="normal"><a href="#__codelineno-0-345">345</a></span>
<span class="normal"><a href="#__codelineno-0-346">346</a></span>
<span class="normal"><a href="#__codelineno-0-347">347</a></span>
<span class="normal"><a href="#__codelineno-0-348">348</a></span>
<span class="normal"><a href="#__codelineno-0-349">349</a></span>
<span class="normal"><a href="#__codelineno-0-350">350</a></span>
<span class="normal"><a href="#__codelineno-0-351">351</a></span>
<span class="normal"><a href="#__codelineno-0-352">352</a></span>
<span class="normal"><a href="#__codelineno-0-353">353</a></span>
<span class="normal"><a href="#__codelineno-0-354">354</a></span>
<span class="normal"><a href="#__codelineno-0-355">355</a></span>
<span class="normal"><a href="#__codelineno-0-356">356</a></span>
<span class="normal"><a href="#__codelineno-0-357">357</a></span>
<span class="normal"><a href="#__codelineno-0-358">358</a></span>
<span class="normal"><a href="#__codelineno-0-359">359</a></span>
<span class="normal"><a href="#__codelineno-0-360">360</a></span>
<span class="normal"><a href="#__codelineno-0-361">361</a></span>
<span class="normal"><a href="#__codelineno-0-362">362</a></span>
<span class="normal"><a href="#__codelineno-0-363">363</a></span>
<span class="normal"><a href="#__codelineno-0-364">364</a></span>
<span class="normal"><a href="#__codelineno-0-365">365</a></span>
<span class="normal"><a href="#__codelineno-0-366">366</a></span>
<span class="normal"><a href="#__codelineno-0-367">367</a></span>
<span class="normal"><a href="#__codelineno-0-368">368</a></span>
<span class="normal"><a href="#__codelineno-0-369">369</a></span>
<span class="normal"><a href="#__codelineno-0-370">370</a></span>
<span class="normal"><a href="#__codelineno-0-371">371</a></span>
<span class="normal"><a href="#__codelineno-0-372">372</a></span>
<span class="normal"><a href="#__codelineno-0-373">373</a></span>
<span class="normal"><a href="#__codelineno-0-374">374</a></span>
<span class="normal"><a href="#__codelineno-0-375">375</a></span>
<span class="normal"><a href="#__codelineno-0-376">376</a></span>
<span class="normal"><a href="#__codelineno-0-377">377</a></span>
<span class="normal"><a href="#__codelineno-0-378">378</a></span>
<span class="normal"><a href="#__codelineno-0-379">379</a></span>
<span class="normal"><a href="#__codelineno-0-380">380</a></span>
<span class="normal"><a href="#__codelineno-0-381">381</a></span>
<span class="normal"><a href="#__codelineno-0-382">382</a></span>
<span class="normal"><a href="#__codelineno-0-383">383</a></span>
<span class="normal"><a href="#__codelineno-0-384">384</a></span>
<span class="normal"><a href="#__codelineno-0-385">385</a></span>
<span class="normal"><a href="#__codelineno-0-386">386</a></span>
<span class="normal"><a href="#__codelineno-0-387">387</a></span>
<span class="normal"><a href="#__codelineno-0-388">388</a></span>
<span class="normal"><a href="#__codelineno-0-389">389</a></span>
<span class="normal"><a href="#__codelineno-0-390">390</a></span>
<span class="normal"><a href="#__codelineno-0-391">391</a></span>
<span class="normal"><a href="#__codelineno-0-392">392</a></span>
<span class="normal"><a href="#__codelineno-0-393">393</a></span>
<span class="normal"><a href="#__codelineno-0-394">394</a></span>
<span class="normal"><a href="#__codelineno-0-395">395</a></span>
<span class="normal"><a href="#__codelineno-0-396">396</a></span>
<span class="normal"><a href="#__codelineno-0-397">397</a></span>
<span class="normal"><a href="#__codelineno-0-398">398</a></span>
<span class="normal"><a href="#__codelineno-0-399">399</a></span>
<span class="normal"><a href="#__codelineno-0-400">400</a></span>
<span class="normal"><a href="#__codelineno-0-401">401</a></span>
<span class="normal"><a href="#__codelineno-0-402">402</a></span>
<span class="normal"><a href="#__codelineno-0-403">403</a></span>
<span class="normal"><a href="#__codelineno-0-404">404</a></span>
<span class="normal"><a href="#__codelineno-0-405">405</a></span>
<span class="normal"><a href="#__codelineno-0-406">406</a></span>
<span class="normal"><a href="#__codelineno-0-407">407</a></span>
<span class="normal"><a href="#__codelineno-0-408">408</a></span>
<span class="normal"><a href="#__codelineno-0-409">409</a></span>
<span class="normal"><a href="#__codelineno-0-410">410</a></span>
<span class="normal"><a href="#__codelineno-0-411">411</a></span>
<span class="normal"><a href="#__codelineno-0-412">412</a></span>
<span class="normal"><a href="#__codelineno-0-413">413</a></span>
<span class="normal"><a href="#__codelineno-0-414">414</a></span>
<span class="normal"><a href="#__codelineno-0-415">415</a></span>
<span class="normal"><a href="#__codelineno-0-416">416</a></span>
<span class="normal"><a href="#__codelineno-0-417">417</a></span>
<span class="normal"><a href="#__codelineno-0-418">418</a></span>
<span class="normal"><a href="#__codelineno-0-419">419</a></span>
<span class="normal"><a href="#__codelineno-0-420">420</a></span>
<span class="normal"><a href="#__codelineno-0-421">421</a></span>
<span class="normal"><a href="#__codelineno-0-422">422</a></span>
<span class="normal"><a href="#__codelineno-0-423">423</a></span>
<span class="normal"><a href="#__codelineno-0-424">424</a></span>
<span class="normal"><a href="#__codelineno-0-425">425</a></span>
<span class="normal"><a href="#__codelineno-0-426">426</a></span>
<span class="normal"><a href="#__codelineno-0-427">427</a></span>
<span class="normal"><a href="#__codelineno-0-428">428</a></span>
<span class="normal"><a href="#__codelineno-0-429">429</a></span>
<span class="normal"><a href="#__codelineno-0-430">430</a></span>
<span class="normal"><a href="#__codelineno-0-431">431</a></span>
<span class="normal"><a href="#__codelineno-0-432">432</a></span>
<span class="normal"><a href="#__codelineno-0-433">433</a></span>
<span class="normal"><a href="#__codelineno-0-434">434</a></span>
<span class="normal"><a href="#__codelineno-0-435">435</a></span>
<span class="normal"><a href="#__codelineno-0-436">436</a></span>
<span class="normal"><a href="#__codelineno-0-437">437</a></span>
<span class="normal"><a href="#__codelineno-0-438">438</a></span>
<span class="normal"><a href="#__codelineno-0-439">439</a></span>
<span class="normal"><a href="#__codelineno-0-440">440</a></span>
<span class="normal"><a href="#__codelineno-0-441">441</a></span>
<span class="normal"><a href="#__codelineno-0-442">442</a></span>
<span class="normal"><a href="#__codelineno-0-443">443</a></span>
<span class="normal"><a href="#__codelineno-0-444">444</a></span>
<span class="normal"><a href="#__codelineno-0-445">445</a></span>
<span class="normal"><a href="#__codelineno-0-446">446</a></span>
<span class="normal"><a href="#__codelineno-0-447">447</a></span>
<span class="normal"><a href="#__codelineno-0-448">448</a></span>
<span class="normal"><a href="#__codelineno-0-449">449</a></span>
<span class="normal"><a href="#__codelineno-0-450">450</a></span>
<span class="normal"><a href="#__codelineno-0-451">451</a></span>
<span class="normal"><a href="#__codelineno-0-452">452</a></span>
<span class="normal"><a href="#__codelineno-0-453">453</a></span>
<span class="normal"><a href="#__codelineno-0-454">454</a></span>
<span class="normal"><a href="#__codelineno-0-455">455</a></span>
<span class="normal"><a href="#__codelineno-0-456">456</a></span>
<span class="normal"><a href="#__codelineno-0-457">457</a></span>
<span class="normal"><a href="#__codelineno-0-458">458</a></span>
<span class="normal"><a href="#__codelineno-0-459">459</a></span>
<span class="normal"><a href="#__codelineno-0-460">460</a></span>
<span class="normal"><a href="#__codelineno-0-461">461</a></span>
<span class="normal"><a href="#__codelineno-0-462">462</a></span>
<span class="normal"><a href="#__codelineno-0-463">463</a></span>
<span class="normal"><a href="#__codelineno-0-464">464</a></span>
<span class="normal"><a href="#__codelineno-0-465">465</a></span>
<span class="normal"><a href="#__codelineno-0-466">466</a></span>
<span class="normal"><a href="#__codelineno-0-467">467</a></span>
<span class="normal"><a href="#__codelineno-0-468">468</a></span>
<span class="normal"><a href="#__codelineno-0-469">469</a></span>
<span class="normal"><a href="#__codelineno-0-470">470</a></span>
<span class="normal"><a href="#__codelineno-0-471">471</a></span>
<span class="normal"><a href="#__codelineno-0-472">472</a></span>
<span class="normal"><a href="#__codelineno-0-473">473</a></span>
<span class="normal"><a href="#__codelineno-0-474">474</a></span>
<span class="normal"><a href="#__codelineno-0-475">475</a></span>
<span class="normal"><a href="#__codelineno-0-476">476</a></span>
<span class="normal"><a href="#__codelineno-0-477">477</a></span>
<span class="normal"><a href="#__codelineno-0-478">478</a></span>
<span class="normal"><a href="#__codelineno-0-479">479</a></span>
<span class="normal"><a href="#__codelineno-0-480">480</a></span>
<span class="normal"><a href="#__codelineno-0-481">481</a></span>
<span class="normal"><a href="#__codelineno-0-482">482</a></span>
<span class="normal"><a href="#__codelineno-0-483">483</a></span>
<span class="normal"><a href="#__codelineno-0-484">484</a></span>
<span class="normal"><a href="#__codelineno-0-485">485</a></span>
<span class="normal"><a href="#__codelineno-0-486">486</a></span>
<span class="normal"><a href="#__codelineno-0-487">487</a></span>
<span class="normal"><a href="#__codelineno-0-488">488</a></span>
<span class="normal"><a href="#__codelineno-0-489">489</a></span>
<span class="normal"><a href="#__codelineno-0-490">490</a></span>
<span class="normal"><a href="#__codelineno-0-491">491</a></span>
<span class="normal"><a href="#__codelineno-0-492">492</a></span>
<span class="normal"><a href="#__codelineno-0-493">493</a></span>
<span class="normal"><a href="#__codelineno-0-494">494</a></span>
<span class="normal"><a href="#__codelineno-0-495">495</a></span>
<span class="normal"><a href="#__codelineno-0-496">496</a></span>
<span class="normal"><a href="#__codelineno-0-497">497</a></span>
<span class="normal"><a href="#__codelineno-0-498">498</a></span>
<span class="normal"><a href="#__codelineno-0-499">499</a></span>
<span class="normal"><a href="#__codelineno-0-500">500</a></span>
<span class="normal"><a href="#__codelineno-0-501">501</a></span>
<span class="normal"><a href="#__codelineno-0-502">502</a></span>
<span class="normal"><a href="#__codelineno-0-503">503</a></span>
<span class="normal"><a href="#__codelineno-0-504">504</a></span>
<span class="normal"><a href="#__codelineno-0-505">505</a></span>
<span class="normal"><a href="#__codelineno-0-506">506</a></span>
<span class="normal"><a href="#__codelineno-0-507">507</a></span>
<span class="normal"><a href="#__codelineno-0-508">508</a></span>
<span class="normal"><a href="#__codelineno-0-509">509</a></span>
<span class="normal"><a href="#__codelineno-0-510">510</a></span>
<span class="normal"><a href="#__codelineno-0-511">511</a></span>
<span class="normal"><a href="#__codelineno-0-512">512</a></span>
<span class="normal"><a href="#__codelineno-0-513">513</a></span>
<span class="normal"><a href="#__codelineno-0-514">514</a></span>
<span class="normal"><a href="#__codelineno-0-515">515</a></span>
<span class="normal"><a href="#__codelineno-0-516">516</a></span>
<span class="normal"><a href="#__codelineno-0-517">517</a></span>
<span class="normal"><a href="#__codelineno-0-518">518</a></span>
<span class="normal"><a href="#__codelineno-0-519">519</a></span>
<span class="normal"><a href="#__codelineno-0-520">520</a></span>
<span class="normal"><a href="#__codelineno-0-521">521</a></span>
<span class="normal"><a href="#__codelineno-0-522">522</a></span>
<span class="normal"><a href="#__codelineno-0-523">523</a></span>
<span class="normal"><a href="#__codelineno-0-524">524</a></span>
<span class="normal"><a href="#__codelineno-0-525">525</a></span>
<span class="normal"><a href="#__codelineno-0-526">526</a></span>
<span class="normal"><a href="#__codelineno-0-527">527</a></span>
<span class="normal"><a href="#__codelineno-0-528">528</a></span>
<span class="normal"><a href="#__codelineno-0-529">529</a></span>
<span class="normal"><a href="#__codelineno-0-530">530</a></span>
<span class="normal"><a href="#__codelineno-0-531">531</a></span>
<span class="normal"><a href="#__codelineno-0-532">532</a></span>
<span class="normal"><a href="#__codelineno-0-533">533</a></span>
<span class="normal"><a href="#__codelineno-0-534">534</a></span>
<span class="normal"><a href="#__codelineno-0-535">535</a></span>
<span class="normal"><a href="#__codelineno-0-536">536</a></span>
<span class="normal"><a href="#__codelineno-0-537">537</a></span>
<span class="normal"><a href="#__codelineno-0-538">538</a></span>
<span class="normal"><a href="#__codelineno-0-539">539</a></span>
<span class="normal"><a href="#__codelineno-0-540">540</a></span>
<span class="normal"><a href="#__codelineno-0-541">541</a></span>
<span class="normal"><a href="#__codelineno-0-542">542</a></span>
<span class="normal"><a href="#__codelineno-0-543">543</a></span>
<span class="normal"><a href="#__codelineno-0-544">544</a></span>
<span class="normal"><a href="#__codelineno-0-545">545</a></span>
<span class="normal"><a href="#__codelineno-0-546">546</a></span>
<span class="normal"><a href="#__codelineno-0-547">547</a></span>
<span class="normal"><a href="#__codelineno-0-548">548</a></span>
<span class="normal"><a href="#__codelineno-0-549">549</a></span>
<span class="normal"><a href="#__codelineno-0-550">550</a></span>
<span class="normal"><a href="#__codelineno-0-551">551</a></span>
<span class="normal"><a href="#__codelineno-0-552">552</a></span>
<span class="normal"><a href="#__codelineno-0-553">553</a></span>
<span class="normal"><a href="#__codelineno-0-554">554</a></span>
<span class="normal"><a href="#__codelineno-0-555">555</a></span>
<span class="normal"><a href="#__codelineno-0-556">556</a></span>
<span class="normal"><a href="#__codelineno-0-557">557</a></span>
<span class="normal"><a href="#__codelineno-0-558">558</a></span>
<span class="normal"><a href="#__codelineno-0-559">559</a></span>
<span class="normal"><a href="#__codelineno-0-560">560</a></span>
<span class="normal"><a href="#__codelineno-0-561">561</a></span>
<span class="normal"><a href="#__codelineno-0-562">562</a></span>
<span class="normal"><a href="#__codelineno-0-563">563</a></span>
<span class="normal"><a href="#__codelineno-0-564">564</a></span>
<span class="normal"><a href="#__codelineno-0-565">565</a></span>
<span class="normal"><a href="#__codelineno-0-566">566</a></span>
<span class="normal"><a href="#__codelineno-0-567">567</a></span>
<span class="normal"><a href="#__codelineno-0-568">568</a></span>
<span class="normal"><a href="#__codelineno-0-569">569</a></span>
<span class="normal"><a href="#__codelineno-0-570">570</a></span>
<span class="normal"><a href="#__codelineno-0-571">571</a></span>
<span class="normal"><a href="#__codelineno-0-572">572</a></span>
<span class="normal"><a href="#__codelineno-0-573">573</a></span>
<span class="normal"><a href="#__codelineno-0-574">574</a></span>
<span class="normal"><a href="#__codelineno-0-575">575</a></span>
<span class="normal"><a href="#__codelineno-0-576">576</a></span>
<span class="normal"><a href="#__codelineno-0-577">577</a></span>
<span class="normal"><a href="#__codelineno-0-578">578</a></span>
<span class="normal"><a href="#__codelineno-0-579">579</a></span>
<span class="normal"><a href="#__codelineno-0-580">580</a></span>
<span class="normal"><a href="#__codelineno-0-581">581</a></span>
<span class="normal"><a href="#__codelineno-0-582">582</a></span>
<span class="normal"><a href="#__codelineno-0-583">583</a></span>
<span class="normal"><a href="#__codelineno-0-584">584</a></span>
<span class="normal"><a href="#__codelineno-0-585">585</a></span>
<span class="normal"><a href="#__codelineno-0-586">586</a></span>
<span class="normal"><a href="#__codelineno-0-587">587</a></span>
<span class="normal"><a href="#__codelineno-0-588">588</a></span>
<span class="normal"><a href="#__codelineno-0-589">589</a></span>
<span class="normal"><a href="#__codelineno-0-590">590</a></span>
<span class="normal"><a href="#__codelineno-0-591">591</a></span>
<span class="normal"><a href="#__codelineno-0-592">592</a></span>
<span class="normal"><a href="#__codelineno-0-593">593</a></span>
<span class="normal"><a href="#__codelineno-0-594">594</a></span>
<span class="normal"><a href="#__codelineno-0-595">595</a></span>
<span class="normal"><a href="#__codelineno-0-596">596</a></span>
<span class="normal"><a href="#__codelineno-0-597">597</a></span>
<span class="normal"><a href="#__codelineno-0-598">598</a></span>
<span class="normal"><a href="#__codelineno-0-599">599</a></span>
<span class="normal"><a href="#__codelineno-0-600">600</a></span>
<span class="normal"><a href="#__codelineno-0-601">601</a></span>
<span class="normal"><a href="#__codelineno-0-602">602</a></span>
<span class="normal"><a href="#__codelineno-0-603">603</a></span>
<span class="normal"><a href="#__codelineno-0-604">604</a></span>
<span class="normal"><a href="#__codelineno-0-605">605</a></span>
<span class="normal"><a href="#__codelineno-0-606">606</a></span>
<span class="normal"><a href="#__codelineno-0-607">607</a></span>
<span class="normal"><a href="#__codelineno-0-608">608</a></span>
<span class="normal"><a href="#__codelineno-0-609">609</a></span>
<span class="normal"><a href="#__codelineno-0-610">610</a></span>
<span class="normal"><a href="#__codelineno-0-611">611</a></span>
<span class="normal"><a href="#__codelineno-0-612">612</a></span>
<span class="normal"><a href="#__codelineno-0-613">613</a></span>
<span class="normal"><a href="#__codelineno-0-614">614</a></span>
<span class="normal"><a href="#__codelineno-0-615">615</a></span>
<span class="normal"><a href="#__codelineno-0-616">616</a></span>
<span class="normal"><a href="#__codelineno-0-617">617</a></span>
<span class="normal"><a href="#__codelineno-0-618">618</a></span>
<span class="normal"><a href="#__codelineno-0-619">619</a></span>
<span class="normal"><a href="#__codelineno-0-620">620</a></span>
<span class="normal"><a href="#__codelineno-0-621">621</a></span>
<span class="normal"><a href="#__codelineno-0-622">622</a></span>
<span class="normal"><a href="#__codelineno-0-623">623</a></span>
<span class="normal"><a href="#__codelineno-0-624">624</a></span>
<span class="normal"><a href="#__codelineno-0-625">625</a></span>
<span class="normal"><a href="#__codelineno-0-626">626</a></span>
<span class="normal"><a href="#__codelineno-0-627">627</a></span>
<span class="normal"><a href="#__codelineno-0-628">628</a></span>
<span class="normal"><a href="#__codelineno-0-629">629</a></span>
<span class="normal"><a href="#__codelineno-0-630">630</a></span>
<span class="normal"><a href="#__codelineno-0-631">631</a></span>
<span class="normal"><a href="#__codelineno-0-632">632</a></span>
<span class="normal"><a href="#__codelineno-0-633">633</a></span>
<span class="normal"><a href="#__codelineno-0-634">634</a></span>
<span class="normal"><a href="#__codelineno-0-635">635</a></span>
<span class="normal"><a href="#__codelineno-0-636">636</a></span>
<span class="normal"><a href="#__codelineno-0-637">637</a></span>
<span class="normal"><a href="#__codelineno-0-638">638</a></span>
<span class="normal"><a href="#__codelineno-0-639">639</a></span>
<span class="normal"><a href="#__codelineno-0-640">640</a></span>
<span class="normal"><a href="#__codelineno-0-641">641</a></span>
<span class="normal"><a href="#__codelineno-0-642">642</a></span>
<span class="normal"><a href="#__codelineno-0-643">643</a></span>
<span class="normal"><a href="#__codelineno-0-644">644</a></span>
<span class="normal"><a href="#__codelineno-0-645">645</a></span>
<span class="normal"><a href="#__codelineno-0-646">646</a></span>
<span class="normal"><a href="#__codelineno-0-647">647</a></span>
<span class="normal"><a href="#__codelineno-0-648">648</a></span>
<span class="normal"><a href="#__codelineno-0-649">649</a></span>
<span class="normal"><a href="#__codelineno-0-650">650</a></span>
<span class="normal"><a href="#__codelineno-0-651">651</a></span>
<span class="normal"><a href="#__codelineno-0-652">652</a></span>
<span class="normal"><a href="#__codelineno-0-653">653</a></span>
<span class="normal"><a href="#__codelineno-0-654">654</a></span>
<span class="normal"><a href="#__codelineno-0-655">655</a></span>
<span class="normal"><a href="#__codelineno-0-656">656</a></span>
<span class="normal"><a href="#__codelineno-0-657">657</a></span>
<span class="normal"><a href="#__codelineno-0-658">658</a></span>
<span class="normal"><a href="#__codelineno-0-659">659</a></span>
<span class="normal"><a href="#__codelineno-0-660">660</a></span>
<span class="normal"><a href="#__codelineno-0-661">661</a></span>
<span class="normal"><a href="#__codelineno-0-662">662</a></span>
<span class="normal"><a href="#__codelineno-0-663">663</a></span>
<span class="normal"><a href="#__codelineno-0-664">664</a></span>
<span class="normal"><a href="#__codelineno-0-665">665</a></span>
<span class="normal"><a href="#__codelineno-0-666">666</a></span>
<span class="normal"><a href="#__codelineno-0-667">667</a></span>
<span class="normal"><a href="#__codelineno-0-668">668</a></span>
<span class="normal"><a href="#__codelineno-0-669">669</a></span>
<span class="normal"><a href="#__codelineno-0-670">670</a></span>
<span class="normal"><a href="#__codelineno-0-671">671</a></span>
<span class="normal"><a href="#__codelineno-0-672">672</a></span>
<span class="normal"><a href="#__codelineno-0-673">673</a></span>
<span class="normal"><a href="#__codelineno-0-674">674</a></span>
<span class="normal"><a href="#__codelineno-0-675">675</a></span>
<span class="normal"><a href="#__codelineno-0-676">676</a></span>
<span class="normal"><a href="#__codelineno-0-677">677</a></span>
<span class="normal"><a href="#__codelineno-0-678">678</a></span>
<span class="normal"><a href="#__codelineno-0-679">679</a></span>
<span class="normal"><a href="#__codelineno-0-680">680</a></span>
<span class="normal"><a href="#__codelineno-0-681">681</a></span>
<span class="normal"><a href="#__codelineno-0-682">682</a></span>
<span class="normal"><a href="#__codelineno-0-683">683</a></span>
<span class="normal"><a href="#__codelineno-0-684">684</a></span>
<span class="normal"><a href="#__codelineno-0-685">685</a></span>
<span class="normal"><a href="#__codelineno-0-686">686</a></span>
<span class="normal"><a href="#__codelineno-0-687">687</a></span>
<span class="normal"><a href="#__codelineno-0-688">688</a></span>
<span class="normal"><a href="#__codelineno-0-689">689</a></span>
<span class="normal"><a href="#__codelineno-0-690">690</a></span>
<span class="normal"><a href="#__codelineno-0-691">691</a></span>
<span class="normal"><a href="#__codelineno-0-692">692</a></span>
<span class="normal"><a href="#__codelineno-0-693">693</a></span>
<span class="normal"><a href="#__codelineno-0-694">694</a></span>
<span class="normal"><a href="#__codelineno-0-695">695</a></span>
<span class="normal"><a href="#__codelineno-0-696">696</a></span>
<span class="normal"><a href="#__codelineno-0-697">697</a></span>
<span class="normal"><a href="#__codelineno-0-698">698</a></span>
<span class="normal"><a href="#__codelineno-0-699">699</a></span>
<span class="normal"><a href="#__codelineno-0-700">700</a></span>
<span class="normal"><a href="#__codelineno-0-701">701</a></span>
<span class="normal"><a href="#__codelineno-0-702">702</a></span>
<span class="normal"><a href="#__codelineno-0-703">703</a></span>
<span class="normal"><a href="#__codelineno-0-704">704</a></span>
<span class="normal"><a href="#__codelineno-0-705">705</a></span>
<span class="normal"><a href="#__codelineno-0-706">706</a></span>
<span class="normal"><a href="#__codelineno-0-707">707</a></span>
<span class="normal"><a href="#__codelineno-0-708">708</a></span>
<span class="normal"><a href="#__codelineno-0-709">709</a></span>
<span class="normal"><a href="#__codelineno-0-710">710</a></span>
<span class="normal"><a href="#__codelineno-0-711">711</a></span>
<span class="normal"><a href="#__codelineno-0-712">712</a></span>
<span class="normal"><a href="#__codelineno-0-713">713</a></span>
<span class="normal"><a href="#__codelineno-0-714">714</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-112" name="__codelineno-0-112"></a><span class="k">class</span> <span class="nc">BaseModelSerializer</span><span class="p">(</span><span class="n">OptInFieldsMixin</span><span class="p">,</span> <span class="n">serializers</span><span class="o">.</span><span class="n">HyperlinkedModelSerializer</span><span class="p">):</span>
<a id="__codelineno-0-113" name="__codelineno-0-113"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-114" name="__codelineno-0-114"></a><span class="sd">    This base serializer implements common fields and logic for all ModelSerializers.</span>
<a id="__codelineno-0-115" name="__codelineno-0-115"></a>
<a id="__codelineno-0-116" name="__codelineno-0-116"></a><span class="sd">    Namely, it:</span>
<a id="__codelineno-0-117" name="__codelineno-0-117"></a>
<a id="__codelineno-0-118" name="__codelineno-0-118"></a><span class="sd">    - defines the `display` field which exposes a human friendly value for the given object.</span>
<a id="__codelineno-0-119" name="__codelineno-0-119"></a><span class="sd">    - ensures that `id` field is always present on the serializer as well.</span>
<a id="__codelineno-0-120" name="__codelineno-0-120"></a><span class="sd">    - ensures that `created` and `last_updated` fields are always present if applicable to this model and serializer.</span>
<a id="__codelineno-0-121" name="__codelineno-0-121"></a><span class="sd">    - ensures that `object_type` field is always present on the serializer which represents the content-type of this</span>
<a id="__codelineno-0-122" name="__codelineno-0-122"></a><span class="sd">      serializer&#39;s associated model (e.g. &quot;dcim.device&quot;). This is required as the OpenAPI schema, using the</span>
<a id="__codelineno-0-123" name="__codelineno-0-123"></a><span class="sd">      PolymorphicProxySerializer class defined below, relies upon this field as a way to identify to the client</span>
<a id="__codelineno-0-124" name="__codelineno-0-124"></a><span class="sd">      which of several possible serializers are in use for a given attribute.</span>
<a id="__codelineno-0-125" name="__codelineno-0-125"></a><span class="sd">    - supports `?depth` query parameter. It is passed in as `nested_depth` to the `build_nested_field()` function</span>
<a id="__codelineno-0-126" name="__codelineno-0-126"></a><span class="sd">      to enable the dynamic generation of nested serializers.</span>
<a id="__codelineno-0-127" name="__codelineno-0-127"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-128" name="__codelineno-0-128"></a>
<a id="__codelineno-0-129" name="__codelineno-0-129"></a>    <span class="n">serializer_related_field</span> <span class="o">=</span> <span class="n">NautobotHyperlinkedRelatedField</span>
<a id="__codelineno-0-130" name="__codelineno-0-130"></a>
<a id="__codelineno-0-131" name="__codelineno-0-131"></a>    <span class="n">display</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">SerializerMethodField</span><span class="p">(</span><span class="n">read_only</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;Human friendly display value&quot;</span><span class="p">)</span>
<a id="__codelineno-0-132" name="__codelineno-0-132"></a>    <span class="n">object_type</span> <span class="o">=</span> <span class="n">ObjectTypeField</span><span class="p">()</span>
<a id="__codelineno-0-133" name="__codelineno-0-133"></a>    <span class="c1"># composite_key = serializers.SerializerMethodField()  # TODO: Revisit if we reintroduce composite keys</span>
<a id="__codelineno-0-134" name="__codelineno-0-134"></a>    <span class="n">natural_keys_values</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-135" name="__codelineno-0-135"></a>    <span class="n">natural_slug</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">SerializerMethodField</span><span class="p">()</span>
<a id="__codelineno-0-136" name="__codelineno-0-136"></a>
<a id="__codelineno-0-137" name="__codelineno-0-137"></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<a id="__codelineno-0-138" name="__codelineno-0-138"></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
<a id="__codelineno-0-139" name="__codelineno-0-139"></a>        <span class="c1"># If it is not a Nested Serializer, we should set the depth argument to whatever is in the request&#39;s context</span>
<a id="__codelineno-0-140" name="__codelineno-0-140"></a>        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_nested</span><span class="p">:</span>
<a id="__codelineno-0-141" name="__codelineno-0-141"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">Meta</span><span class="o">.</span><span class="n">depth</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;depth&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<a id="__codelineno-0-142" name="__codelineno-0-142"></a>
<a id="__codelineno-0-143" name="__codelineno-0-143"></a>        <span class="c1"># Check if the request is related to CSV export;</span>
<a id="__codelineno-0-144" name="__codelineno-0-144"></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_csv_request</span><span class="p">()</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">instance</span><span class="p">:</span>
<a id="__codelineno-0-145" name="__codelineno-0-145"></a>            <span class="c1"># Retrieve the natural key values of related fields in an optimized way.</span>
<a id="__codelineno-0-146" name="__codelineno-0-146"></a>            <span class="n">all_related_fields_natural_key_lookups</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_related_fields_natural_key_field_lookups</span><span class="p">()</span>
<a id="__codelineno-0-147" name="__codelineno-0-147"></a>            <span class="n">case_query</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_build_query_case_for_natural_key_field_lookup</span><span class="p">(</span><span class="n">all_related_fields_natural_key_lookups</span><span class="p">)</span>
<a id="__codelineno-0-148" name="__codelineno-0-148"></a>            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">instance</span><span class="p">,</span> <span class="n">models</span><span class="o">.</span><span class="n">QuerySet</span><span class="p">):</span>
<a id="__codelineno-0-149" name="__codelineno-0-149"></a>                <span class="n">queryset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">instance</span>
<a id="__codelineno-0-150" name="__codelineno-0-150"></a>            <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-151" name="__codelineno-0-151"></a>                <span class="c1"># We would only need to run one additional query, making this a more efficient method of</span>
<a id="__codelineno-0-152" name="__codelineno-0-152"></a>                <span class="c1"># obtaining all the natural key values for this instance;</span>
<a id="__codelineno-0-153" name="__codelineno-0-153"></a>                <span class="n">queryset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Meta</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">pk</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">instance</span><span class="o">.</span><span class="n">pk</span><span class="p">)</span>
<a id="__codelineno-0-154" name="__codelineno-0-154"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">natural_keys_values</span> <span class="o">=</span> <span class="n">queryset</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="o">**</span><span class="n">case_query</span><span class="p">)</span><span class="o">.</span><span class="n">values</span><span class="p">(</span>
<a id="__codelineno-0-155" name="__codelineno-0-155"></a>                <span class="o">*</span><span class="n">all_related_fields_natural_key_lookups</span><span class="p">,</span> <span class="s2">&quot;pk&quot;</span>
<a id="__codelineno-0-156" name="__codelineno-0-156"></a>            <span class="p">)</span>
<a id="__codelineno-0-157" name="__codelineno-0-157"></a>
<a id="__codelineno-0-158" name="__codelineno-0-158"></a>    <span class="k">def</span> <span class="nf">_get_lookup_field_name_and_output_field</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lookup_field</span><span class="p">):</span>
<a id="__codelineno-0-159" name="__codelineno-0-159"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get lookup field name and its corresponding output_field.</span>
<a id="__codelineno-0-160" name="__codelineno-0-160"></a>
<a id="__codelineno-0-161" name="__codelineno-0-161"></a><span class="sd">        Used in building this lookup Case in `_build_query_case_for_natural_key_field_lookup`.</span>
<a id="__codelineno-0-162" name="__codelineno-0-162"></a>
<a id="__codelineno-0-163" name="__codelineno-0-163"></a><span class="sd">        Example:</span>
<a id="__codelineno-0-164" name="__codelineno-0-164"></a><span class="sd">            &gt;&gt;&gt; self._get_lookup_field_name_and_output_field(&quot;device__location__name&quot;)</span>
<a id="__codelineno-0-165" name="__codelineno-0-165"></a><span class="sd">            (&quot;device__location&quot;, CharField)</span>
<a id="__codelineno-0-166" name="__codelineno-0-166"></a><span class="sd">            &gt;&gt;&gt; self._get_lookup_field_name_and_output_field(&quot;ipaddress__parent__network&quot;)</span>
<a id="__codelineno-0-167" name="__codelineno-0-167"></a><span class="sd">            (&quot;ipaddress__parent&quot;, VarbinaryIPField)</span>
<a id="__codelineno-0-168" name="__codelineno-0-168"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-169" name="__codelineno-0-169"></a>        <span class="o">*</span><span class="n">field_names</span><span class="p">,</span> <span class="n">lookup</span> <span class="o">=</span> <span class="n">lookup_field</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;__&quot;</span><span class="p">)</span>
<a id="__codelineno-0-170" name="__codelineno-0-170"></a>        <span class="n">model</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Meta</span><span class="o">.</span><span class="n">model</span>
<a id="__codelineno-0-171" name="__codelineno-0-171"></a>        <span class="k">for</span> <span class="n">field_component</span> <span class="ow">in</span> <span class="n">field_names</span><span class="p">:</span>
<a id="__codelineno-0-172" name="__codelineno-0-172"></a>            <span class="n">model</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">get_field</span><span class="p">(</span><span class="n">field_component</span><span class="p">)</span><span class="o">.</span><span class="n">remote_field</span><span class="o">.</span><span class="n">model</span>
<a id="__codelineno-0-173" name="__codelineno-0-173"></a>
<a id="__codelineno-0-174" name="__codelineno-0-174"></a>        <span class="n">lookup</span> <span class="o">=</span> <span class="s2">&quot;id&quot;</span> <span class="k">if</span> <span class="n">lookup</span> <span class="o">==</span> <span class="s2">&quot;pk&quot;</span> <span class="k">else</span> <span class="n">lookup</span>
<a id="__codelineno-0-175" name="__codelineno-0-175"></a>        <span class="n">field</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">get_field</span><span class="p">(</span><span class="n">lookup</span><span class="p">)</span>
<a id="__codelineno-0-176" name="__codelineno-0-176"></a>        <span class="c1"># VarbinaryIPField needs to be handled specially in `_build_query_case_for_natural_key_field_lookup`</span>
<a id="__codelineno-0-177" name="__codelineno-0-177"></a>        <span class="n">output_field</span> <span class="o">=</span> <span class="n">field</span><span class="o">.</span><span class="vm">__class__</span> <span class="k">if</span> <span class="n">field</span><span class="o">.</span><span class="vm">__class__</span> <span class="ow">is</span> <span class="n">VarbinaryIPField</span> <span class="k">else</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span>
<a id="__codelineno-0-178" name="__codelineno-0-178"></a>
<a id="__codelineno-0-179" name="__codelineno-0-179"></a>        <span class="n">field_name</span> <span class="o">=</span> <span class="s2">&quot;__&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">field_names</span><span class="p">)</span>
<a id="__codelineno-0-180" name="__codelineno-0-180"></a>        <span class="k">return</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">output_field</span>
<a id="__codelineno-0-181" name="__codelineno-0-181"></a>
<a id="__codelineno-0-182" name="__codelineno-0-182"></a>    <span class="k">def</span> <span class="nf">_build_query_case_for_natural_key_field_lookup</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lookups</span><span class="p">):</span>
<a id="__codelineno-0-183" name="__codelineno-0-183"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-184" name="__codelineno-0-184"></a><span class="sd">        Build a query using Case expressions to handle natural key field instances that do not exist.</span>
<a id="__codelineno-0-185" name="__codelineno-0-185"></a>
<a id="__codelineno-0-186" name="__codelineno-0-186"></a><span class="sd">        This function constructs a database query with Case expressions to handle natural key lookup fields</span>
<a id="__codelineno-0-187" name="__codelineno-0-187"></a><span class="sd">        that may have missing instances. In cases where the natural key field instance does not exist</span>
<a id="__codelineno-0-188" name="__codelineno-0-188"></a><span class="sd">        (i.e., is None), this function replaces it with the value &#39;NoObject&#39;. This is particularly</span>
<a id="__codelineno-0-189" name="__codelineno-0-189"></a><span class="sd">        useful for CSV Export processes, as it allows fields with missing instances to be safely ignored.</span>
<a id="__codelineno-0-190" name="__codelineno-0-190"></a><span class="sd">        Such handling is essential for CSV Import processes, as attempting to import missing instances can</span>
<a id="__codelineno-0-191" name="__codelineno-0-191"></a><span class="sd">        lead to &#39;Object Not Found&#39; errors, potentially causing the import to fail.</span>
<a id="__codelineno-0-192" name="__codelineno-0-192"></a>
<a id="__codelineno-0-193" name="__codelineno-0-193"></a><span class="sd">        Example:</span>
<a id="__codelineno-0-194" name="__codelineno-0-194"></a><span class="sd">            Consider a Device model with a related field &#39;tenant&#39; and a &#39;name&#39; attribute. In this case, the</span>
<a id="__codelineno-0-195" name="__codelineno-0-195"></a><span class="sd">            function can be used as follows:</span>
<a id="__codelineno-0-196" name="__codelineno-0-196"></a>
<a id="__codelineno-0-197" name="__codelineno-0-197"></a><span class="sd">            Device.objects.annotate(</span>
<a id="__codelineno-0-198" name="__codelineno-0-198"></a><span class="sd">                tenant__name=Case(</span>
<a id="__codelineno-0-199" name="__codelineno-0-199"></a><span class="sd">                    When(tenant__isnull=False, then=F(&quot;tenant__name&quot;)),</span>
<a id="__codelineno-0-200" name="__codelineno-0-200"></a><span class="sd">                    default=&quot;NoObject&quot;</span>
<a id="__codelineno-0-201" name="__codelineno-0-201"></a><span class="sd">                )</span>
<a id="__codelineno-0-202" name="__codelineno-0-202"></a><span class="sd">            ).values(&quot;tenant__name&quot;)</span>
<a id="__codelineno-0-203" name="__codelineno-0-203"></a>
<a id="__codelineno-0-204" name="__codelineno-0-204"></a><span class="sd">        Explanation:</span>
<a id="__codelineno-0-205" name="__codelineno-0-205"></a><span class="sd">            - If `device.tenant` is None, the &#39;tenant__name&#39; field is set to &quot;NoObject&quot;.</span>
<a id="__codelineno-0-206" name="__codelineno-0-206"></a><span class="sd">            - If `device.tenant` is not None, the &#39;tenant__name&#39; field is set to the actual tenant name.</span>
<a id="__codelineno-0-207" name="__codelineno-0-207"></a>
<a id="__codelineno-0-208" name="__codelineno-0-208"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-209" name="__codelineno-0-209"></a><span class="sd">            lookups: List of natural key lookups</span>
<a id="__codelineno-0-210" name="__codelineno-0-210"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-211" name="__codelineno-0-211"></a>        <span class="n">case_query</span> <span class="o">=</span> <span class="p">{}</span>
<a id="__codelineno-0-212" name="__codelineno-0-212"></a>        <span class="k">for</span> <span class="n">lookup_field</span> <span class="ow">in</span> <span class="n">lookups</span><span class="p">:</span>
<a id="__codelineno-0-213" name="__codelineno-0-213"></a>            <span class="n">field_name</span><span class="p">,</span> <span class="n">output_field</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_lookup_field_name_and_output_field</span><span class="p">(</span><span class="n">lookup_field</span><span class="p">)</span>
<a id="__codelineno-0-214" name="__codelineno-0-214"></a>
<a id="__codelineno-0-215" name="__codelineno-0-215"></a>            <span class="c1"># Since VarbinaryIPField cant be cast into CharField we would have to set the output_field as</span>
<a id="__codelineno-0-216" name="__codelineno-0-216"></a>            <span class="c1"># `VarbinaryIPField`</span>
<a id="__codelineno-0-217" name="__codelineno-0-217"></a>            <span class="n">when_case</span> <span class="o">=</span> <span class="p">{</span>
<a id="__codelineno-0-218" name="__codelineno-0-218"></a>                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">field_name</span><span class="si">}</span><span class="s2">__isnull&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
<a id="__codelineno-0-219" name="__codelineno-0-219"></a>                <span class="s2">&quot;then&quot;</span><span class="p">:</span> <span class="n">models</span><span class="o">.</span><span class="n">F</span><span class="p">(</span><span class="n">lookup_field</span><span class="p">)</span>
<a id="__codelineno-0-220" name="__codelineno-0-220"></a>                <span class="k">if</span> <span class="n">output_field</span> <span class="o">==</span> <span class="n">VarbinaryIPField</span>
<a id="__codelineno-0-221" name="__codelineno-0-221"></a>                <span class="k">else</span> <span class="n">Cast</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">F</span><span class="p">(</span><span class="n">lookup_field</span><span class="p">),</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">()),</span>
<a id="__codelineno-0-222" name="__codelineno-0-222"></a>            <span class="p">}</span>
<a id="__codelineno-0-223" name="__codelineno-0-223"></a>            <span class="n">case_query</span><span class="p">[</span><span class="n">lookup_field</span><span class="p">]</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">Case</span><span class="p">(</span>
<a id="__codelineno-0-224" name="__codelineno-0-224"></a>                <span class="n">models</span><span class="o">.</span><span class="n">When</span><span class="p">(</span><span class="o">**</span><span class="n">when_case</span><span class="p">),</span>
<a id="__codelineno-0-225" name="__codelineno-0-225"></a>                <span class="n">default</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">Value</span><span class="p">(</span><span class="n">constants</span><span class="o">.</span><span class="n">CSV_NO_OBJECT</span><span class="p">),</span>
<a id="__codelineno-0-226" name="__codelineno-0-226"></a>                <span class="n">output_field</span><span class="o">=</span><span class="n">output_field</span><span class="p">(),</span>
<a id="__codelineno-0-227" name="__codelineno-0-227"></a>            <span class="p">)</span>
<a id="__codelineno-0-228" name="__codelineno-0-228"></a>        <span class="k">return</span> <span class="n">case_query</span>
<a id="__codelineno-0-229" name="__codelineno-0-229"></a>
<a id="__codelineno-0-230" name="__codelineno-0-230"></a>    <span class="k">def</span> <span class="nf">_get_related_fields_natural_key_field_lookups</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-231" name="__codelineno-0-231"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Retrieve a list of field lookups for natural key fields of related models.</span>
<a id="__codelineno-0-232" name="__codelineno-0-232"></a>
<a id="__codelineno-0-233" name="__codelineno-0-233"></a><span class="sd">        This method iterates through the related fields of the Serializer model,</span>
<a id="__codelineno-0-234" name="__codelineno-0-234"></a><span class="sd">        retrieves the natural_key_field_lookups for each related model, and prepends the field name</span>
<a id="__codelineno-0-235" name="__codelineno-0-235"></a><span class="sd">        to create a list of field lookups.</span>
<a id="__codelineno-0-236" name="__codelineno-0-236"></a>
<a id="__codelineno-0-237" name="__codelineno-0-237"></a><span class="sd">        Examples:</span>
<a id="__codelineno-0-238" name="__codelineno-0-238"></a><span class="sd">            &gt;&gt;&gt; # Example usage on Device</span>
<a id="__codelineno-0-239" name="__codelineno-0-239"></a><span class="sd">            &gt;&gt;&gt; self._get_related_fields_natural_key_field_lookups()</span>
<a id="__codelineno-0-240" name="__codelineno-0-240"></a><span class="sd">            [</span>
<a id="__codelineno-0-241" name="__codelineno-0-241"></a><span class="sd">                &quot;tenant__name&quot;,</span>
<a id="__codelineno-0-242" name="__codelineno-0-242"></a><span class="sd">                &quot;status__name&quot;,</span>
<a id="__codelineno-0-243" name="__codelineno-0-243"></a><span class="sd">                &quot;role__name&quot;,</span>
<a id="__codelineno-0-244" name="__codelineno-0-244"></a><span class="sd">                &quot;location__name&quot;,</span>
<a id="__codelineno-0-245" name="__codelineno-0-245"></a><span class="sd">                &quot;location__parent__name&quot;,</span>
<a id="__codelineno-0-246" name="__codelineno-0-246"></a><span class="sd">                &quot;location__parent__parent__name&quot;</span>
<a id="__codelineno-0-247" name="__codelineno-0-247"></a><span class="sd">                ...</span>
<a id="__codelineno-0-248" name="__codelineno-0-248"></a><span class="sd">            ]</span>
<a id="__codelineno-0-249" name="__codelineno-0-249"></a>
<a id="__codelineno-0-250" name="__codelineno-0-250"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-251" name="__codelineno-0-251"></a>        <span class="n">model</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Meta</span><span class="o">.</span><span class="n">model</span>
<a id="__codelineno-0-252" name="__codelineno-0-252"></a>        <span class="n">field_lookups</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-253" name="__codelineno-0-253"></a>        <span class="c1"># NOTE: M2M and One2M fields field are ignored in csv export</span>
<a id="__codelineno-0-254" name="__codelineno-0-254"></a>        <span class="n">fields</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-0-255" name="__codelineno-0-255"></a>            <span class="n">field</span>
<a id="__codelineno-0-256" name="__codelineno-0-256"></a>            <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">model</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">get_fields</span><span class="p">()</span>
<a id="__codelineno-0-257" name="__codelineno-0-257"></a>            <span class="k">if</span> <span class="n">field</span><span class="o">.</span><span class="n">is_relation</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">field</span><span class="o">.</span><span class="n">many_to_many</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">field</span><span class="o">.</span><span class="n">one_to_many</span>
<a id="__codelineno-0-258" name="__codelineno-0-258"></a>            <span class="c1"># Ignore GenericRel since its `fk` and `content_type` would be used.</span>
<a id="__codelineno-0-259" name="__codelineno-0-259"></a>            <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">field</span><span class="p">,</span> <span class="n">GenericRel</span><span class="p">)</span>
<a id="__codelineno-0-260" name="__codelineno-0-260"></a>        <span class="p">]</span>
<a id="__codelineno-0-261" name="__codelineno-0-261"></a>        <span class="c1"># Get each related field model&#39;s natural_key_fields and prepend field name</span>
<a id="__codelineno-0-262" name="__codelineno-0-262"></a>        <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">fields</span><span class="p">:</span>
<a id="__codelineno-0-263" name="__codelineno-0-263"></a>            <span class="c1"># ContentType and Group are not Nautobot Model hence do not have the `natural_key_field_lookups` attr.</span>
<a id="__codelineno-0-264" name="__codelineno-0-264"></a>            <span class="c1"># fallback to using default behavior for these fields</span>
<a id="__codelineno-0-265" name="__codelineno-0-265"></a>            <span class="k">with</span> <span class="n">contextlib</span><span class="o">.</span><span class="n">suppress</span><span class="p">(</span><span class="ne">AttributeError</span><span class="p">):</span>
<a id="__codelineno-0-266" name="__codelineno-0-266"></a>                <span class="n">field_lookups</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span>
<a id="__codelineno-0-267" name="__codelineno-0-267"></a>                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">field</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">__</span><span class="si">{</span><span class="n">lookup</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">for</span> <span class="n">lookup</span> <span class="ow">in</span> <span class="n">field</span><span class="o">.</span><span class="n">related_model</span><span class="o">.</span><span class="n">csv_natural_key_field_lookups</span><span class="p">()</span>
<a id="__codelineno-0-268" name="__codelineno-0-268"></a>                <span class="p">)</span>
<a id="__codelineno-0-269" name="__codelineno-0-269"></a>        <span class="k">return</span> <span class="n">field_lookups</span>
<a id="__codelineno-0-270" name="__codelineno-0-270"></a>
<a id="__codelineno-0-271" name="__codelineno-0-271"></a>    <span class="k">def</span> <span class="nf">_is_csv_request</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-272" name="__codelineno-0-272"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Return True if this a CSV export request&quot;&quot;&quot;</span>
<a id="__codelineno-0-273" name="__codelineno-0-273"></a>        <span class="n">request</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;request&quot;</span><span class="p">)</span>
<a id="__codelineno-0-274" name="__codelineno-0-274"></a>        <span class="k">return</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s2">&quot;accepted_media_type&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="s2">&quot;text/csv&quot;</span> <span class="ow">in</span> <span class="n">request</span><span class="o">.</span><span class="n">accepted_media_type</span>
<a id="__codelineno-0-275" name="__codelineno-0-275"></a>
<a id="__codelineno-0-276" name="__codelineno-0-276"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-277" name="__codelineno-0-277"></a>    <span class="k">def</span> <span class="nf">is_nested</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-278" name="__codelineno-0-278"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Return whether this is a nested serializer.&quot;&quot;&quot;</span>
<a id="__codelineno-0-279" name="__codelineno-0-279"></a>        <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Meta</span><span class="p">,</span> <span class="s2">&quot;is_nested&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
<a id="__codelineno-0-280" name="__codelineno-0-280"></a>
<a id="__codelineno-0-281" name="__codelineno-0-281"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-282" name="__codelineno-0-282"></a>    <span class="k">def</span> <span class="nf">list_display_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-283" name="__codelineno-0-283"></a>        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Meta</span><span class="p">,</span> <span class="s2">&quot;list_display_fields&quot;</span><span class="p">,</span> <span class="p">[]))</span>
<a id="__codelineno-0-284" name="__codelineno-0-284"></a>
<a id="__codelineno-0-285" name="__codelineno-0-285"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-286" name="__codelineno-0-286"></a>    <span class="k">def</span> <span class="nf">advanced_tab_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-287" name="__codelineno-0-287"></a>        <span class="n">advanced_fields</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span>
<a id="__codelineno-0-288" name="__codelineno-0-288"></a>            <span class="nb">getattr</span><span class="p">(</span>
<a id="__codelineno-0-289" name="__codelineno-0-289"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">Meta</span><span class="p">,</span>
<a id="__codelineno-0-290" name="__codelineno-0-290"></a>                <span class="s2">&quot;advanced_tab_fields&quot;</span><span class="p">,</span>
<a id="__codelineno-0-291" name="__codelineno-0-291"></a>                <span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="s2">&quot;url&quot;</span><span class="p">,</span> <span class="s2">&quot;object_type&quot;</span><span class="p">,</span> <span class="s2">&quot;created&quot;</span><span class="p">,</span> <span class="s2">&quot;last_updated&quot;</span><span class="p">,</span> <span class="s2">&quot;natural_slug&quot;</span><span class="p">],</span>
<a id="__codelineno-0-292" name="__codelineno-0-292"></a>            <span class="p">)</span>
<a id="__codelineno-0-293" name="__codelineno-0-293"></a>        <span class="p">)</span>
<a id="__codelineno-0-294" name="__codelineno-0-294"></a>        <span class="k">return</span> <span class="p">[</span><span class="n">field</span> <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">advanced_fields</span> <span class="k">if</span> <span class="n">field</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">]</span>
<a id="__codelineno-0-295" name="__codelineno-0-295"></a>
<a id="__codelineno-0-296" name="__codelineno-0-296"></a>    <span class="nd">@extend_schema_field</span><span class="p">(</span><span class="n">serializers</span><span class="o">.</span><span class="n">CharField</span><span class="p">)</span>
<a id="__codelineno-0-297" name="__codelineno-0-297"></a>    <span class="k">def</span> <span class="nf">get_display</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">instance</span><span class="p">):</span>
<a id="__codelineno-0-298" name="__codelineno-0-298"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-299" name="__codelineno-0-299"></a><span class="sd">        Return either the `display` property of the instance or `str(instance)`</span>
<a id="__codelineno-0-300" name="__codelineno-0-300"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-301" name="__codelineno-0-301"></a>        <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">instance</span><span class="p">,</span> <span class="s2">&quot;display&quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">instance</span><span class="p">))</span>
<a id="__codelineno-0-302" name="__codelineno-0-302"></a>
<a id="__codelineno-0-303" name="__codelineno-0-303"></a>    <span class="c1"># TODO(jathan): Rip out composite key after natural key fields for import/export work has been</span>
<a id="__codelineno-0-304" name="__codelineno-0-304"></a>    <span class="c1"># completed (See: https://github.com/nautobot/nautobot/issues/4367)</span>
<a id="__codelineno-0-305" name="__codelineno-0-305"></a>    <span class="nd">@extend_schema_field</span><span class="p">(</span>
<a id="__codelineno-0-306" name="__codelineno-0-306"></a>        <span class="p">{</span>
<a id="__codelineno-0-307" name="__codelineno-0-307"></a>            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span>
<a id="__codelineno-0-308" name="__codelineno-0-308"></a>            <span class="s2">&quot;example&quot;</span><span class="p">:</span> <span class="n">constants</span><span class="o">.</span><span class="n">COMPOSITE_KEY_SEPARATOR</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s2">&quot;attribute1&quot;</span><span class="p">,</span> <span class="s2">&quot;attribute2&quot;</span><span class="p">]),</span>
<a id="__codelineno-0-309" name="__codelineno-0-309"></a>        <span class="p">}</span>
<a id="__codelineno-0-310" name="__codelineno-0-310"></a>    <span class="p">)</span>
<a id="__codelineno-0-311" name="__codelineno-0-311"></a>    <span class="k">def</span> <span class="nf">get_composite_key</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">instance</span><span class="p">):</span>
<a id="__codelineno-0-312" name="__codelineno-0-312"></a>        <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-0-313" name="__codelineno-0-313"></a>            <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">instance</span><span class="p">,</span> <span class="s2">&quot;composite_key&quot;</span><span class="p">,</span> <span class="n">construct_composite_key</span><span class="p">(</span><span class="n">instance</span><span class="o">.</span><span class="n">natural_key</span><span class="p">()))</span>
<a id="__codelineno-0-314" name="__codelineno-0-314"></a>        <span class="k">except</span> <span class="p">(</span><span class="ne">AttributeError</span><span class="p">,</span> <span class="ne">NotImplementedError</span><span class="p">):</span>
<a id="__codelineno-0-315" name="__codelineno-0-315"></a>            <span class="k">return</span> <span class="s2">&quot;unknown&quot;</span>
<a id="__codelineno-0-316" name="__codelineno-0-316"></a>
<a id="__codelineno-0-317" name="__codelineno-0-317"></a>    <span class="nd">@extend_schema_field</span><span class="p">(</span>
<a id="__codelineno-0-318" name="__codelineno-0-318"></a>        <span class="p">{</span>
<a id="__codelineno-0-319" name="__codelineno-0-319"></a>            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span>
<a id="__codelineno-0-320" name="__codelineno-0-320"></a>            <span class="s2">&quot;example&quot;</span><span class="p">:</span> <span class="n">constants</span><span class="o">.</span><span class="n">NATURAL_SLUG_SEPARATOR</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s2">&quot;attribute1&quot;</span><span class="p">,</span> <span class="s2">&quot;attribute2&quot;</span><span class="p">]),</span>
<a id="__codelineno-0-321" name="__codelineno-0-321"></a>        <span class="p">}</span>
<a id="__codelineno-0-322" name="__codelineno-0-322"></a>    <span class="p">)</span>
<a id="__codelineno-0-323" name="__codelineno-0-323"></a>    <span class="k">def</span> <span class="nf">get_natural_slug</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">instance</span><span class="p">):</span>
<a id="__codelineno-0-324" name="__codelineno-0-324"></a>        <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-0-325" name="__codelineno-0-325"></a>            <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">instance</span><span class="p">,</span> <span class="s2">&quot;natural_slug&quot;</span><span class="p">,</span> <span class="n">construct_natural_slug</span><span class="p">(</span><span class="n">instance</span><span class="o">.</span><span class="n">natural_key</span><span class="p">(),</span> <span class="n">pk</span><span class="o">=</span><span class="n">instance</span><span class="o">.</span><span class="n">pk</span><span class="p">))</span>
<a id="__codelineno-0-326" name="__codelineno-0-326"></a>        <span class="k">except</span> <span class="p">(</span><span class="ne">AttributeError</span><span class="p">,</span> <span class="ne">NotImplementedError</span><span class="p">):</span>
<a id="__codelineno-0-327" name="__codelineno-0-327"></a>            <span class="k">return</span> <span class="s2">&quot;unknown&quot;</span>
<a id="__codelineno-0-328" name="__codelineno-0-328"></a>
<a id="__codelineno-0-329" name="__codelineno-0-329"></a>    <span class="k">def</span> <span class="nf">extend_field_names</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fields</span><span class="p">,</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">at_start</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">opt_in_only</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<a id="__codelineno-0-330" name="__codelineno-0-330"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Prepend or append the given field_name to `fields` and optionally self.Meta.opt_in_fields as well.&quot;&quot;&quot;</span>
<a id="__codelineno-0-331" name="__codelineno-0-331"></a>        <span class="k">if</span> <span class="n">field_name</span> <span class="ow">in</span> <span class="n">fields</span><span class="p">:</span>
<a id="__codelineno-0-332" name="__codelineno-0-332"></a>            <span class="n">fields</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">field_name</span><span class="p">)</span>
<a id="__codelineno-0-333" name="__codelineno-0-333"></a>        <span class="k">if</span> <span class="n">at_start</span><span class="p">:</span>
<a id="__codelineno-0-334" name="__codelineno-0-334"></a>            <span class="n">fields</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">field_name</span><span class="p">)</span>
<a id="__codelineno-0-335" name="__codelineno-0-335"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-336" name="__codelineno-0-336"></a>            <span class="n">fields</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">field_name</span><span class="p">)</span>
<a id="__codelineno-0-337" name="__codelineno-0-337"></a>        <span class="k">if</span> <span class="n">opt_in_only</span><span class="p">:</span>
<a id="__codelineno-0-338" name="__codelineno-0-338"></a>            <span class="k">if</span> <span class="ow">not</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Meta</span><span class="p">,</span> <span class="s2">&quot;opt_in_fields&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">):</span>
<a id="__codelineno-0-339" name="__codelineno-0-339"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">Meta</span><span class="o">.</span><span class="n">opt_in_fields</span> <span class="o">=</span> <span class="p">[</span><span class="n">field_name</span><span class="p">]</span>
<a id="__codelineno-0-340" name="__codelineno-0-340"></a>            <span class="k">elif</span> <span class="n">field_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">Meta</span><span class="o">.</span><span class="n">opt_in_fields</span><span class="p">:</span>
<a id="__codelineno-0-341" name="__codelineno-0-341"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">Meta</span><span class="o">.</span><span class="n">opt_in_fields</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">field_name</span><span class="p">)</span>
<a id="__codelineno-0-342" name="__codelineno-0-342"></a>        <span class="k">return</span> <span class="n">fields</span>
<a id="__codelineno-0-343" name="__codelineno-0-343"></a>
<a id="__codelineno-0-344" name="__codelineno-0-344"></a>    <span class="k">def</span> <span class="nf">get_field_names</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">declared_fields</span><span class="p">,</span> <span class="n">info</span><span class="p">):</span>
<a id="__codelineno-0-345" name="__codelineno-0-345"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-346" name="__codelineno-0-346"></a><span class="sd">        Override get_field_names() to add some custom logic.</span>
<a id="__codelineno-0-347" name="__codelineno-0-347"></a>
<a id="__codelineno-0-348" name="__codelineno-0-348"></a><span class="sd">        Assuming that we follow the pattern where `fields = &quot;__all__&quot; for the vast majority of serializers in Nautobot,</span>
<a id="__codelineno-0-349" name="__codelineno-0-349"></a><span class="sd">        we do not strictly need to use this method to protect against inadvertently omitting standard fields</span>
<a id="__codelineno-0-350" name="__codelineno-0-350"></a><span class="sd">        like `display`, `created`, and `last_updated`. However, we continue to do as a bit of redundant safety.</span>
<a id="__codelineno-0-351" name="__codelineno-0-351"></a>
<a id="__codelineno-0-352" name="__codelineno-0-352"></a><span class="sd">        The other purpose of this method now is to manipulate the set of fields that &quot;__all__&quot; actually means as a</span>
<a id="__codelineno-0-353" name="__codelineno-0-353"></a><span class="sd">        way of *excluding* fields that we *don&#39;t* want to include by default for performance or data exposure reasons.</span>
<a id="__codelineno-0-354" name="__codelineno-0-354"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-355" name="__codelineno-0-355"></a>        <span class="n">fields</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">get_field_names</span><span class="p">(</span><span class="n">declared_fields</span><span class="p">,</span> <span class="n">info</span><span class="p">))</span>  <span class="c1"># Meta.fields could be defined as a tuple</span>
<a id="__codelineno-0-356" name="__codelineno-0-356"></a>
<a id="__codelineno-0-357" name="__codelineno-0-357"></a>        <span class="c1"># Add initial fields in &quot;reverse&quot; order since they&#39;re each inserted at the start of the list.</span>
<a id="__codelineno-0-358" name="__codelineno-0-358"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">extend_field_names</span><span class="p">(</span><span class="n">fields</span><span class="p">,</span> <span class="s2">&quot;display&quot;</span><span class="p">,</span> <span class="n">at_start</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-0-359" name="__codelineno-0-359"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">extend_field_names</span><span class="p">(</span><span class="n">fields</span><span class="p">,</span> <span class="s2">&quot;object_type&quot;</span><span class="p">,</span> <span class="n">at_start</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-0-360" name="__codelineno-0-360"></a>        <span class="c1"># Since we use HyperlinkedModelSerializer as our base class, &quot;url&quot; is auto-included by &quot;__all__&quot; but &quot;id&quot; isn&#39;t.</span>
<a id="__codelineno-0-361" name="__codelineno-0-361"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">extend_field_names</span><span class="p">(</span><span class="n">fields</span><span class="p">,</span> <span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="n">at_start</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-0-362" name="__codelineno-0-362"></a>
<a id="__codelineno-0-363" name="__codelineno-0-363"></a>        <span class="c1"># Move these fields to the end</span>
<a id="__codelineno-0-364" name="__codelineno-0-364"></a>        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Meta</span><span class="o">.</span><span class="n">model</span><span class="p">,</span> <span class="s2">&quot;created&quot;</span><span class="p">):</span>
<a id="__codelineno-0-365" name="__codelineno-0-365"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">extend_field_names</span><span class="p">(</span><span class="n">fields</span><span class="p">,</span> <span class="s2">&quot;created&quot;</span><span class="p">)</span>
<a id="__codelineno-0-366" name="__codelineno-0-366"></a>        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Meta</span><span class="o">.</span><span class="n">model</span><span class="p">,</span> <span class="s2">&quot;last_updated&quot;</span><span class="p">):</span>
<a id="__codelineno-0-367" name="__codelineno-0-367"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">extend_field_names</span><span class="p">(</span><span class="n">fields</span><span class="p">,</span> <span class="s2">&quot;last_updated&quot;</span><span class="p">)</span>
<a id="__codelineno-0-368" name="__codelineno-0-368"></a>
<a id="__codelineno-0-369" name="__codelineno-0-369"></a>        <span class="k">def</span> <span class="nf">filter_field</span><span class="p">(</span><span class="n">field</span><span class="p">):</span>
<a id="__codelineno-0-370" name="__codelineno-0-370"></a>            <span class="c1"># Eliminate all field names that start with &quot;_&quot; as those fields are not user-facing</span>
<a id="__codelineno-0-371" name="__codelineno-0-371"></a>            <span class="k">if</span> <span class="n">field</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">):</span>
<a id="__codelineno-0-372" name="__codelineno-0-372"></a>                <span class="k">return</span> <span class="kc">False</span>
<a id="__codelineno-0-373" name="__codelineno-0-373"></a>            <span class="c1"># These are expensive to look up, so we have decided not to include them on nested serializers</span>
<a id="__codelineno-0-374" name="__codelineno-0-374"></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_nested</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Meta</span><span class="o">.</span><span class="n">model</span><span class="p">,</span> <span class="n">field</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="n">ManyToManyDescriptor</span><span class="p">):</span>
<a id="__codelineno-0-375" name="__codelineno-0-375"></a>                <span class="k">return</span> <span class="kc">False</span>
<a id="__codelineno-0-376" name="__codelineno-0-376"></a>
<a id="__codelineno-0-377" name="__codelineno-0-377"></a>            <span class="c1"># Ignore M2M fields</span>
<a id="__codelineno-0-378" name="__codelineno-0-378"></a>            <span class="k">with</span> <span class="n">contextlib</span><span class="o">.</span><span class="n">suppress</span><span class="p">(</span><span class="n">FieldDoesNotExist</span><span class="p">):</span>
<a id="__codelineno-0-379" name="__codelineno-0-379"></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_csv_request</span><span class="p">():</span>
<a id="__codelineno-0-380" name="__codelineno-0-380"></a>                    <span class="n">field</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Meta</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">get_field</span><span class="p">(</span><span class="n">field</span><span class="p">)</span>
<a id="__codelineno-0-381" name="__codelineno-0-381"></a>                    <span class="c1"># ContentType is ManyToMany Field that is specially handled, Hence it can be exported/imported</span>
<a id="__codelineno-0-382" name="__codelineno-0-382"></a>                    <span class="k">if</span> <span class="n">field</span><span class="o">.</span><span class="n">many_to_many</span> <span class="ow">and</span> <span class="n">field</span><span class="o">.</span><span class="n">related_model</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">ContentType</span><span class="p">:</span>
<a id="__codelineno-0-383" name="__codelineno-0-383"></a>                        <span class="k">return</span> <span class="kc">False</span>
<a id="__codelineno-0-384" name="__codelineno-0-384"></a>            <span class="k">return</span> <span class="kc">True</span>
<a id="__codelineno-0-385" name="__codelineno-0-385"></a>
<a id="__codelineno-0-386" name="__codelineno-0-386"></a>        <span class="n">fields</span> <span class="o">=</span> <span class="p">[</span><span class="n">field</span> <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">fields</span> <span class="k">if</span> <span class="n">filter_field</span><span class="p">(</span><span class="n">field</span><span class="p">)]</span>
<a id="__codelineno-0-387" name="__codelineno-0-387"></a>        <span class="k">return</span> <span class="n">fields</span>
<a id="__codelineno-0-388" name="__codelineno-0-388"></a>
<a id="__codelineno-0-389" name="__codelineno-0-389"></a>    <span class="k">def</span> <span class="nf">determine_view_options</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<a id="__codelineno-0-390" name="__codelineno-0-390"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-391" name="__codelineno-0-391"></a><span class="sd">        Determine view options to use for rendering the list and detail views associated with this serializer.</span>
<a id="__codelineno-0-392" name="__codelineno-0-392"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-393" name="__codelineno-0-393"></a>        <span class="n">list_display</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-394" name="__codelineno-0-394"></a>        <span class="n">fields</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-395" name="__codelineno-0-395"></a>
<a id="__codelineno-0-396" name="__codelineno-0-396"></a>        <span class="kn">from</span> <span class="nn">nautobot.core.api.metadata</span> <span class="kn">import</span> <span class="n">NautobotColumnProcessor</span>  <span class="c1"># avoid circular import</span>
<a id="__codelineno-0-397" name="__codelineno-0-397"></a>
<a id="__codelineno-0-398" name="__codelineno-0-398"></a>        <span class="n">processor</span> <span class="o">=</span> <span class="n">NautobotColumnProcessor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="o">.</span><span class="n">parser_context</span> <span class="k">if</span> <span class="n">request</span> <span class="k">else</span> <span class="p">{})</span>
<a id="__codelineno-0-399" name="__codelineno-0-399"></a>        <span class="n">field_map</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">)</span>
<a id="__codelineno-0-400" name="__codelineno-0-400"></a>        <span class="n">all_fields</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">field_map</span><span class="p">)</span>
<a id="__codelineno-0-401" name="__codelineno-0-401"></a>
<a id="__codelineno-0-402" name="__codelineno-0-402"></a>        <span class="c1"># Explicitly order the &quot;big ugly&quot; fields to the bottom</span>
<a id="__codelineno-0-403" name="__codelineno-0-403"></a>        <span class="n">processor</span><span class="o">.</span><span class="n">order_fields</span><span class="p">(</span><span class="n">all_fields</span><span class="p">)</span>
<a id="__codelineno-0-404" name="__codelineno-0-404"></a>        <span class="n">list_display_fields</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">list_display_fields</span>
<a id="__codelineno-0-405" name="__codelineno-0-405"></a>
<a id="__codelineno-0-406" name="__codelineno-0-406"></a>        <span class="c1"># Process the list_display_fields first.</span>
<a id="__codelineno-0-407" name="__codelineno-0-407"></a>        <span class="k">for</span> <span class="n">field_name</span> <span class="ow">in</span> <span class="n">list_display_fields</span><span class="p">:</span>
<a id="__codelineno-0-408" name="__codelineno-0-408"></a>            <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-0-409" name="__codelineno-0-409"></a>                <span class="n">field</span> <span class="o">=</span> <span class="n">field_map</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span>
<a id="__codelineno-0-410" name="__codelineno-0-410"></a>            <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
<a id="__codelineno-0-411" name="__codelineno-0-411"></a>                <span class="k">continue</span>  <span class="c1"># Ignore unknown fields.</span>
<a id="__codelineno-0-412" name="__codelineno-0-412"></a>            <span class="n">column_data</span> <span class="o">=</span> <span class="n">processor</span><span class="o">.</span><span class="n">_get_column_properties</span><span class="p">(</span><span class="n">field</span><span class="p">,</span> <span class="n">field_name</span><span class="p">)</span>
<a id="__codelineno-0-413" name="__codelineno-0-413"></a>            <span class="n">list_display</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">column_data</span><span class="p">)</span>
<a id="__codelineno-0-414" name="__codelineno-0-414"></a>            <span class="n">fields</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">column_data</span><span class="p">)</span>
<a id="__codelineno-0-415" name="__codelineno-0-415"></a>
<a id="__codelineno-0-416" name="__codelineno-0-416"></a>        <span class="c1"># Process the rest of the fields second.</span>
<a id="__codelineno-0-417" name="__codelineno-0-417"></a>        <span class="k">for</span> <span class="n">field_name</span> <span class="ow">in</span> <span class="n">all_fields</span><span class="p">:</span>
<a id="__codelineno-0-418" name="__codelineno-0-418"></a>            <span class="c1"># Don&#39;t process list display fields twice.</span>
<a id="__codelineno-0-419" name="__codelineno-0-419"></a>            <span class="k">if</span> <span class="n">field_name</span> <span class="ow">in</span> <span class="n">list_display_fields</span><span class="p">:</span>
<a id="__codelineno-0-420" name="__codelineno-0-420"></a>                <span class="k">continue</span>
<a id="__codelineno-0-421" name="__codelineno-0-421"></a>            <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-0-422" name="__codelineno-0-422"></a>                <span class="n">field</span> <span class="o">=</span> <span class="n">field_map</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span>
<a id="__codelineno-0-423" name="__codelineno-0-423"></a>            <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
<a id="__codelineno-0-424" name="__codelineno-0-424"></a>                <span class="k">continue</span>  <span class="c1"># Ignore unknown fields.</span>
<a id="__codelineno-0-425" name="__codelineno-0-425"></a>            <span class="n">column_data</span> <span class="o">=</span> <span class="n">processor</span><span class="o">.</span><span class="n">_get_column_properties</span><span class="p">(</span><span class="n">field</span><span class="p">,</span> <span class="n">field_name</span><span class="p">)</span>
<a id="__codelineno-0-426" name="__codelineno-0-426"></a>            <span class="n">fields</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">column_data</span><span class="p">)</span>
<a id="__codelineno-0-427" name="__codelineno-0-427"></a>
<a id="__codelineno-0-428" name="__codelineno-0-428"></a>        <span class="k">return</span> <span class="p">{</span>
<a id="__codelineno-0-429" name="__codelineno-0-429"></a>            <span class="s2">&quot;retrieve&quot;</span><span class="p">:</span> <span class="p">{</span>
<a id="__codelineno-0-430" name="__codelineno-0-430"></a>                <span class="s2">&quot;tabs&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_determine_detail_view_tabs</span><span class="p">(),</span>
<a id="__codelineno-0-431" name="__codelineno-0-431"></a>            <span class="p">},</span>
<a id="__codelineno-0-432" name="__codelineno-0-432"></a>            <span class="s2">&quot;list&quot;</span><span class="p">:</span> <span class="p">{</span>
<a id="__codelineno-0-433" name="__codelineno-0-433"></a>                <span class="s2">&quot;default_fields&quot;</span><span class="p">:</span> <span class="n">list_display</span><span class="p">,</span>
<a id="__codelineno-0-434" name="__codelineno-0-434"></a>                <span class="s2">&quot;all_fields&quot;</span><span class="p">:</span> <span class="n">fields</span><span class="p">,</span>
<a id="__codelineno-0-435" name="__codelineno-0-435"></a>            <span class="p">},</span>
<a id="__codelineno-0-436" name="__codelineno-0-436"></a>        <span class="p">}</span>
<a id="__codelineno-0-437" name="__codelineno-0-437"></a>
<a id="__codelineno-0-438" name="__codelineno-0-438"></a>    <span class="k">def</span> <span class="nf">_determine_detail_view_tabs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-439" name="__codelineno-0-439"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Determine the layout for the detail view tabs that are intrinsic to this serializer.&quot;&quot;&quot;</span>
<a id="__codelineno-0-440" name="__codelineno-0-440"></a>        <span class="n">tabs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_additional_detail_view_tabs</span><span class="p">()</span>
<a id="__codelineno-0-441" name="__codelineno-0-441"></a>
<a id="__codelineno-0-442" name="__codelineno-0-442"></a>        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Meta</span><span class="p">,</span> <span class="s2">&quot;detail_view_config&quot;</span><span class="p">):</span>
<a id="__codelineno-0-443" name="__codelineno-0-443"></a>            <span class="n">detail_view_config</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_validate_view_config</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Meta</span><span class="o">.</span><span class="n">detail_view_config</span><span class="p">)</span>
<a id="__codelineno-0-444" name="__codelineno-0-444"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-445" name="__codelineno-0-445"></a>            <span class="n">detail_view_config</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_default_detail_view_config</span><span class="p">()</span>
<a id="__codelineno-0-446" name="__codelineno-0-446"></a>        <span class="n">detail_view_config</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_refine_detail_view_config</span><span class="p">(</span><span class="n">detail_view_config</span><span class="p">,</span> <span class="n">tabs</span><span class="p">)</span>
<a id="__codelineno-0-447" name="__codelineno-0-447"></a>
<a id="__codelineno-0-448" name="__codelineno-0-448"></a>        <span class="k">return</span> <span class="p">{</span>
<a id="__codelineno-0-449" name="__codelineno-0-449"></a>            <span class="n">bettertitle</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Meta</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">verbose_name</span><span class="p">):</span> <span class="n">detail_view_config</span><span class="p">,</span>
<a id="__codelineno-0-450" name="__codelineno-0-450"></a>            <span class="o">**</span><span class="n">tabs</span><span class="p">,</span>
<a id="__codelineno-0-451" name="__codelineno-0-451"></a>        <span class="p">}</span>
<a id="__codelineno-0-452" name="__codelineno-0-452"></a>
<a id="__codelineno-0-453" name="__codelineno-0-453"></a>    <span class="k">def</span> <span class="nf">get_additional_detail_view_tabs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-454" name="__codelineno-0-454"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-455" name="__codelineno-0-455"></a><span class="sd">        Retrieve definitions of non-default detail view tabs.</span>
<a id="__codelineno-0-456" name="__codelineno-0-456"></a>
<a id="__codelineno-0-457" name="__codelineno-0-457"></a><span class="sd">        By default provides an &quot;Advanced&quot; tab containing `self.advanced_tab_fields`, but subclasses</span>
<a id="__codelineno-0-458" name="__codelineno-0-458"></a><span class="sd">        can override this to move additional serializer fields to this or other tabs.</span>
<a id="__codelineno-0-459" name="__codelineno-0-459"></a>
<a id="__codelineno-0-460" name="__codelineno-0-460"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-461" name="__codelineno-0-461"></a><span class="sd">            (dict): `{&lt;tab label&gt;: [{&lt;panel label&gt;: {&quot;fields&quot;: [&lt;list of fields&gt;]}, ...}, ...], ...}`</span>
<a id="__codelineno-0-462" name="__codelineno-0-462"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-463" name="__codelineno-0-463"></a>        <span class="k">return</span> <span class="p">{</span>
<a id="__codelineno-0-464" name="__codelineno-0-464"></a>            <span class="s2">&quot;Advanced&quot;</span><span class="p">:</span> <span class="p">[{</span><span class="s2">&quot;Object Details&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;fields&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">advanced_tab_fields</span><span class="p">}}],</span>
<a id="__codelineno-0-465" name="__codelineno-0-465"></a>        <span class="p">}</span>
<a id="__codelineno-0-466" name="__codelineno-0-466"></a>
<a id="__codelineno-0-467" name="__codelineno-0-467"></a>    <span class="k">def</span> <span class="nf">_get_default_detail_view_config</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-468" name="__codelineno-0-468"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-469" name="__codelineno-0-469"></a><span class="sd">        Generate detail view config for the view based on the serializer&#39;s fields.</span>
<a id="__codelineno-0-470" name="__codelineno-0-470"></a>
<a id="__codelineno-0-471" name="__codelineno-0-471"></a><span class="sd">        Examples:</span>
<a id="__codelineno-0-472" name="__codelineno-0-472"></a><span class="sd">            &gt;&gt;&gt; DeviceSerializer._get_default_detail_view_config().</span>
<a id="__codelineno-0-473" name="__codelineno-0-473"></a><span class="sd">            {</span>
<a id="__codelineno-0-474" name="__codelineno-0-474"></a><span class="sd">                &quot;layout&quot;:[</span>
<a id="__codelineno-0-475" name="__codelineno-0-475"></a><span class="sd">                    {</span>
<a id="__codelineno-0-476" name="__codelineno-0-476"></a><span class="sd">                        Device: {</span>
<a id="__codelineno-0-477" name="__codelineno-0-477"></a><span class="sd">                            &quot;fields&quot;: [&quot;name&quot;, &quot;subdevice_role&quot;, &quot;height&quot;, &quot;comments&quot;...]</span>
<a id="__codelineno-0-478" name="__codelineno-0-478"></a><span class="sd">                        }</span>
<a id="__codelineno-0-479" name="__codelineno-0-479"></a><span class="sd">                    },</span>
<a id="__codelineno-0-480" name="__codelineno-0-480"></a><span class="sd">                    {</span>
<a id="__codelineno-0-481" name="__codelineno-0-481"></a><span class="sd">                        Tags: {</span>
<a id="__codelineno-0-482" name="__codelineno-0-482"></a><span class="sd">                            &quot;fields&quot;: [&quot;tags&quot;]</span>
<a id="__codelineno-0-483" name="__codelineno-0-483"></a><span class="sd">                        }</span>
<a id="__codelineno-0-484" name="__codelineno-0-484"></a><span class="sd">                    }</span>
<a id="__codelineno-0-485" name="__codelineno-0-485"></a><span class="sd">                ]</span>
<a id="__codelineno-0-486" name="__codelineno-0-486"></a><span class="sd">            }</span>
<a id="__codelineno-0-487" name="__codelineno-0-487"></a>
<a id="__codelineno-0-488" name="__codelineno-0-488"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-489" name="__codelineno-0-489"></a><span class="sd">            (list): A list representing the view config.</span>
<a id="__codelineno-0-490" name="__codelineno-0-490"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-491" name="__codelineno-0-491"></a>        <span class="n">m2m_fields</span><span class="p">,</span> <span class="n">other_fields</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_m2m_and_non_m2m_fields</span><span class="p">()</span>
<a id="__codelineno-0-492" name="__codelineno-0-492"></a>        <span class="c1"># TODO(timizuo): How do we get verbose_name of not model serializers?</span>
<a id="__codelineno-0-493" name="__codelineno-0-493"></a>        <span class="n">model_verbose_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Meta</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">verbose_name</span>
<a id="__codelineno-0-494" name="__codelineno-0-494"></a>        <span class="k">return</span> <span class="p">{</span>
<a id="__codelineno-0-495" name="__codelineno-0-495"></a>            <span class="s2">&quot;layout&quot;</span><span class="p">:</span> <span class="p">[</span>
<a id="__codelineno-0-496" name="__codelineno-0-496"></a>                <span class="p">{</span>
<a id="__codelineno-0-497" name="__codelineno-0-497"></a>                    <span class="n">bettertitle</span><span class="p">(</span><span class="n">model_verbose_name</span><span class="p">):</span> <span class="p">{</span>
<a id="__codelineno-0-498" name="__codelineno-0-498"></a>                        <span class="s2">&quot;fields&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">field</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">other_fields</span><span class="p">],</span>
<a id="__codelineno-0-499" name="__codelineno-0-499"></a>                    <span class="p">}</span>
<a id="__codelineno-0-500" name="__codelineno-0-500"></a>                <span class="p">},</span>
<a id="__codelineno-0-501" name="__codelineno-0-501"></a>                <span class="p">{</span><span class="n">field</span><span class="p">[</span><span class="s2">&quot;label&quot;</span><span class="p">]:</span> <span class="p">{</span><span class="s2">&quot;fields&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">field</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]]}</span> <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">m2m_fields</span><span class="p">},</span>
<a id="__codelineno-0-502" name="__codelineno-0-502"></a>            <span class="p">]</span>
<a id="__codelineno-0-503" name="__codelineno-0-503"></a>        <span class="p">}</span>
<a id="__codelineno-0-504" name="__codelineno-0-504"></a>
<a id="__codelineno-0-505" name="__codelineno-0-505"></a>    <span class="k">def</span> <span class="nf">_get_m2m_and_non_m2m_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-506" name="__codelineno-0-506"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-507" name="__codelineno-0-507"></a><span class="sd">        Retrieve the many-to-many (m2m) fields and other non-m2m fields from the serializer.</span>
<a id="__codelineno-0-508" name="__codelineno-0-508"></a>
<a id="__codelineno-0-509" name="__codelineno-0-509"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-510" name="__codelineno-0-510"></a><span class="sd">            A tuple containing two lists: m2m_fields and non m2m fields.</span>
<a id="__codelineno-0-511" name="__codelineno-0-511"></a><span class="sd">                - m2m_fields: A list of dictionaries, each containing the name and label of an m2m field.</span>
<a id="__codelineno-0-512" name="__codelineno-0-512"></a><span class="sd">                - non_m2m_fields: A list of dictionaries, each containing the name and label of a non m2m field.</span>
<a id="__codelineno-0-513" name="__codelineno-0-513"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-514" name="__codelineno-0-514"></a>        <span class="n">m2m_fields</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-515" name="__codelineno-0-515"></a>        <span class="n">non_m2m_fields</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-516" name="__codelineno-0-516"></a>
<a id="__codelineno-0-517" name="__codelineno-0-517"></a>        <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">field</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
<a id="__codelineno-0-518" name="__codelineno-0-518"></a>            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">field</span><span class="p">,</span> <span class="n">drf_relations</span><span class="o">.</span><span class="n">ManyRelatedField</span><span class="p">):</span>
<a id="__codelineno-0-519" name="__codelineno-0-519"></a>                <span class="n">m2m_fields</span><span class="o">.</span><span class="n">append</span><span class="p">({</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">field_name</span><span class="p">,</span> <span class="s2">&quot;label&quot;</span><span class="p">:</span> <span class="n">field</span><span class="o">.</span><span class="n">label</span> <span class="ow">or</span> <span class="n">field_name</span><span class="p">})</span>
<a id="__codelineno-0-520" name="__codelineno-0-520"></a>            <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-521" name="__codelineno-0-521"></a>                <span class="n">non_m2m_fields</span><span class="o">.</span><span class="n">append</span><span class="p">({</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">field_name</span><span class="p">,</span> <span class="s2">&quot;label&quot;</span><span class="p">:</span> <span class="n">field</span><span class="o">.</span><span class="n">label</span> <span class="ow">or</span> <span class="n">field_name</span><span class="p">})</span>
<a id="__codelineno-0-522" name="__codelineno-0-522"></a>
<a id="__codelineno-0-523" name="__codelineno-0-523"></a>        <span class="k">return</span> <span class="n">m2m_fields</span><span class="p">,</span> <span class="n">non_m2m_fields</span>
<a id="__codelineno-0-524" name="__codelineno-0-524"></a>
<a id="__codelineno-0-525" name="__codelineno-0-525"></a>    <span class="k">def</span> <span class="nf">_refine_detail_view_config</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">detail_view_config</span><span class="p">,</span> <span class="n">other_tabs</span><span class="p">):</span>
<a id="__codelineno-0-526" name="__codelineno-0-526"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-527" name="__codelineno-0-527"></a><span class="sd">        Refine the detail view config for the default tab (auto-generated, or as defined by Meta.detail_view_config).</span>
<a id="__codelineno-0-528" name="__codelineno-0-528"></a>
<a id="__codelineno-0-529" name="__codelineno-0-529"></a><span class="sd">        - Remove fields that should never be present in the detail view config (e.g. `notes_url`).</span>
<a id="__codelineno-0-530" name="__codelineno-0-530"></a><span class="sd">        - Ensure that fields that are already present in `other_tabs` aren&#39;t included in the detail view config.</span>
<a id="__codelineno-0-531" name="__codelineno-0-531"></a><span class="sd">        - Ensure that certain fields such as `tags` are always included in the detail view config if applicable.</span>
<a id="__codelineno-0-532" name="__codelineno-0-532"></a>
<a id="__codelineno-0-533" name="__codelineno-0-533"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-534" name="__codelineno-0-534"></a><span class="sd">            detail_view_config (dict): `{&quot;layout&quot;: [{&lt;left-column&gt;}, {&lt;right-column}], &quot;include_others&quot;: False}`</span>
<a id="__codelineno-0-535" name="__codelineno-0-535"></a>
<a id="__codelineno-0-536" name="__codelineno-0-536"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-537" name="__codelineno-0-537"></a><span class="sd">            (list): `[{&quot;Panel 1 Name&quot;: {&quot;fields&quot;: [&quot;field1&quot;, &quot;field2&quot;, ...]}, &quot;Panel 2 Name&quot;: ...}, {...}]`</span>
<a id="__codelineno-0-538" name="__codelineno-0-538"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-539" name="__codelineno-0-539"></a>        <span class="n">fields_to_always_move_to_right_column</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-0-540" name="__codelineno-0-540"></a>            <span class="s2">&quot;comments&quot;</span><span class="p">,</span>
<a id="__codelineno-0-541" name="__codelineno-0-541"></a>            <span class="s2">&quot;tags&quot;</span><span class="p">,</span>
<a id="__codelineno-0-542" name="__codelineno-0-542"></a>        <span class="p">]</span>
<a id="__codelineno-0-543" name="__codelineno-0-543"></a>        <span class="n">fields_to_always_remove</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-0-544" name="__codelineno-0-544"></a>            <span class="c1"># always handled explicitly by the UI</span>
<a id="__codelineno-0-545" name="__codelineno-0-545"></a>            <span class="s2">&quot;display&quot;</span><span class="p">,</span>
<a id="__codelineno-0-546" name="__codelineno-0-546"></a>            <span class="s2">&quot;status&quot;</span><span class="p">,</span>
<a id="__codelineno-0-547" name="__codelineno-0-547"></a>            <span class="c1"># not yet supported in the UI</span>
<a id="__codelineno-0-548" name="__codelineno-0-548"></a>            <span class="s2">&quot;custom_fields&quot;</span><span class="p">,</span>
<a id="__codelineno-0-549" name="__codelineno-0-549"></a>            <span class="s2">&quot;relationships&quot;</span><span class="p">,</span>
<a id="__codelineno-0-550" name="__codelineno-0-550"></a>            <span class="s2">&quot;computed_fields&quot;</span><span class="p">,</span>
<a id="__codelineno-0-551" name="__codelineno-0-551"></a>            <span class="c1"># irrelevant to the UI</span>
<a id="__codelineno-0-552" name="__codelineno-0-552"></a>            <span class="s2">&quot;notes_url&quot;</span><span class="p">,</span>
<a id="__codelineno-0-553" name="__codelineno-0-553"></a>        <span class="p">]</span>
<a id="__codelineno-0-554" name="__codelineno-0-554"></a>        <span class="n">fields_to_remove</span> <span class="o">=</span> <span class="n">fields_to_always_remove</span> <span class="o">+</span> <span class="n">fields_to_always_move_to_right_column</span>
<a id="__codelineno-0-555" name="__codelineno-0-555"></a>        <span class="c1"># Any field that&#39;s already present in another tab</span>
<a id="__codelineno-0-556" name="__codelineno-0-556"></a>        <span class="k">for</span> <span class="n">tab_layout</span> <span class="ow">in</span> <span class="n">other_tabs</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
<a id="__codelineno-0-557" name="__codelineno-0-557"></a>            <span class="k">for</span> <span class="n">column</span> <span class="ow">in</span> <span class="n">tab_layout</span><span class="p">:</span>
<a id="__codelineno-0-558" name="__codelineno-0-558"></a>                <span class="k">for</span> <span class="n">grouping</span> <span class="ow">in</span> <span class="n">column</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
<a id="__codelineno-0-559" name="__codelineno-0-559"></a>                    <span class="n">fields_to_remove</span> <span class="o">+=</span> <span class="n">grouping</span><span class="p">[</span><span class="s2">&quot;fields&quot;</span><span class="p">]</span>
<a id="__codelineno-0-560" name="__codelineno-0-560"></a>
<a id="__codelineno-0-561" name="__codelineno-0-561"></a>        <span class="c1"># Make a deepcopy to avoid altering view_config</span>
<a id="__codelineno-0-562" name="__codelineno-0-562"></a>        <span class="n">view_config_layout</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">detail_view_config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;layout&quot;</span><span class="p">))</span>
<a id="__codelineno-0-563" name="__codelineno-0-563"></a>
<a id="__codelineno-0-564" name="__codelineno-0-564"></a>        <span class="c1"># Remove fields_to_remove from the view_config_layout</span>
<a id="__codelineno-0-565" name="__codelineno-0-565"></a>        <span class="k">for</span> <span class="n">column</span> <span class="ow">in</span> <span class="n">view_config_layout</span><span class="p">:</span>
<a id="__codelineno-0-566" name="__codelineno-0-566"></a>            <span class="k">for</span> <span class="n">section</span> <span class="ow">in</span> <span class="n">column</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
<a id="__codelineno-0-567" name="__codelineno-0-567"></a>                <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">fields_to_remove</span><span class="p">:</span>
<a id="__codelineno-0-568" name="__codelineno-0-568"></a>                    <span class="k">if</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">section</span><span class="p">[</span><span class="s2">&quot;fields&quot;</span><span class="p">]:</span>
<a id="__codelineno-0-569" name="__codelineno-0-569"></a>                        <span class="n">section</span><span class="p">[</span><span class="s2">&quot;fields&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">field</span><span class="p">)</span>
<a id="__codelineno-0-570" name="__codelineno-0-570"></a>
<a id="__codelineno-0-571" name="__codelineno-0-571"></a>        <span class="n">serializer_fields</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">)</span>
<a id="__codelineno-0-572" name="__codelineno-0-572"></a>
<a id="__codelineno-0-573" name="__codelineno-0-573"></a>        <span class="c1"># Add special-cased fields to right column</span>
<a id="__codelineno-0-574" name="__codelineno-0-574"></a>        <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">fields_to_always_move_to_right_column</span><span class="p">:</span>
<a id="__codelineno-0-575" name="__codelineno-0-575"></a>            <span class="k">if</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">serializer_fields</span><span class="p">:</span>
<a id="__codelineno-0-576" name="__codelineno-0-576"></a>                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">view_config_layout</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">:</span>
<a id="__codelineno-0-577" name="__codelineno-0-577"></a>                    <span class="n">view_config_layout</span><span class="o">.</span><span class="n">append</span><span class="p">({})</span>
<a id="__codelineno-0-578" name="__codelineno-0-578"></a>                <span class="n">view_config_layout</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">bettertitle</span><span class="p">(</span><span class="n">field</span><span class="p">),</span> <span class="p">{})</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s2">&quot;fields&quot;</span><span class="p">,</span> <span class="p">[])</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">field</span><span class="p">)</span>
<a id="__codelineno-0-579" name="__codelineno-0-579"></a>
<a id="__codelineno-0-580" name="__codelineno-0-580"></a>        <span class="c1"># Add fields not otherwise included in another tab, only if include_others is set to True.</span>
<a id="__codelineno-0-581" name="__codelineno-0-581"></a>        <span class="k">if</span> <span class="n">detail_view_config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;include_others&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">):</span>
<a id="__codelineno-0-582" name="__codelineno-0-582"></a>            <span class="n">view_config_fields</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-0-583" name="__codelineno-0-583"></a>                <span class="n">field</span> <span class="k">for</span> <span class="n">column</span> <span class="ow">in</span> <span class="n">view_config_layout</span> <span class="k">for</span> <span class="n">section</span> <span class="ow">in</span> <span class="n">column</span><span class="o">.</span><span class="n">values</span><span class="p">()</span> <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">section</span><span class="p">[</span><span class="s2">&quot;fields&quot;</span><span class="p">]</span>
<a id="__codelineno-0-584" name="__codelineno-0-584"></a>            <span class="p">]</span>
<a id="__codelineno-0-585" name="__codelineno-0-585"></a>            <span class="n">missing_fields</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">serializer_fields</span><span class="p">)</span> <span class="o">-</span> <span class="nb">set</span><span class="p">(</span><span class="n">view_config_fields</span><span class="p">)</span> <span class="o">-</span> <span class="nb">set</span><span class="p">(</span><span class="n">fields_to_remove</span><span class="p">))</span>
<a id="__codelineno-0-586" name="__codelineno-0-586"></a>            <span class="n">view_config_layout</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;Other Fields&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;fields&quot;</span><span class="p">:</span> <span class="n">missing_fields</span><span class="p">}</span>
<a id="__codelineno-0-587" name="__codelineno-0-587"></a>
<a id="__codelineno-0-588" name="__codelineno-0-588"></a>        <span class="k">return</span> <span class="n">view_config_layout</span>
<a id="__codelineno-0-589" name="__codelineno-0-589"></a>
<a id="__codelineno-0-590" name="__codelineno-0-590"></a>    <span class="k">def</span> <span class="nf">_validate_view_config</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">view_config</span><span class="p">):</span>
<a id="__codelineno-0-591" name="__codelineno-0-591"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Validate view config.&quot;&quot;&quot;</span>
<a id="__codelineno-0-592" name="__codelineno-0-592"></a>        <span class="c1"># 1. Validate key `layout` is in view_config; as this is a required key is creating a view config</span>
<a id="__codelineno-0-593" name="__codelineno-0-593"></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">view_config</span><span class="p">[</span><span class="s2">&quot;layout&quot;</span><span class="p">]:</span>
<a id="__codelineno-0-594" name="__codelineno-0-594"></a>            <span class="k">raise</span> <span class="n">ViewConfigException</span><span class="p">(</span><span class="s2">&quot;`layout` is a required key in creating a custom view_config&quot;</span><span class="p">)</span>
<a id="__codelineno-0-595" name="__codelineno-0-595"></a>
<a id="__codelineno-0-596" name="__codelineno-0-596"></a>        <span class="c1"># 2. Validate `Other Fields` is not part of a layout group name, as this is a reserved keyword for group names</span>
<a id="__codelineno-0-597" name="__codelineno-0-597"></a>        <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">view_config</span><span class="p">[</span><span class="s2">&quot;layout&quot;</span><span class="p">]:</span>
<a id="__codelineno-0-598" name="__codelineno-0-598"></a>            <span class="k">for</span> <span class="n">group_name</span> <span class="ow">in</span> <span class="n">col</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
<a id="__codelineno-0-599" name="__codelineno-0-599"></a>                <span class="k">if</span> <span class="n">group_name</span> <span class="ow">in</span> <span class="n">constants</span><span class="o">.</span><span class="n">RESERVED_NAMES_FOR_OBJECT_DETAIL_VIEW_SCHEMA</span><span class="p">:</span>
<a id="__codelineno-0-600" name="__codelineno-0-600"></a>                    <span class="k">raise</span> <span class="n">ViewConfigException</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;`</span><span class="si">{</span><span class="n">group_name</span><span class="si">}</span><span class="s2">` is a reserved group name keyword.&quot;</span><span class="p">)</span>
<a id="__codelineno-0-601" name="__codelineno-0-601"></a>
<a id="__codelineno-0-602" name="__codelineno-0-602"></a>        <span class="k">return</span> <span class="n">view_config</span>
<a id="__codelineno-0-603" name="__codelineno-0-603"></a>
<a id="__codelineno-0-604" name="__codelineno-0-604"></a>    <span class="k">def</span> <span class="nf">build_field</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">info</span><span class="p">,</span> <span class="n">model_class</span><span class="p">,</span> <span class="n">nested_depth</span><span class="p">):</span>
<a id="__codelineno-0-605" name="__codelineno-0-605"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-606" name="__codelineno-0-606"></a><span class="sd">        Return a two tuple of (cls, kwargs) to build a serializer field with.</span>
<a id="__codelineno-0-607" name="__codelineno-0-607"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-608" name="__codelineno-0-608"></a>        <span class="n">request</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;request&quot;</span><span class="p">)</span>
<a id="__codelineno-0-609" name="__codelineno-0-609"></a>        <span class="c1"># Make sure that PATCH/POST/PUT method response serializers are consistent</span>
<a id="__codelineno-0-610" name="__codelineno-0-610"></a>        <span class="c1"># with depth of 0</span>
<a id="__codelineno-0-611" name="__codelineno-0-611"></a>        <span class="k">if</span> <span class="n">request</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">!=</span> <span class="s2">&quot;GET&quot;</span><span class="p">:</span>
<a id="__codelineno-0-612" name="__codelineno-0-612"></a>            <span class="n">nested_depth</span> <span class="o">=</span> <span class="mi">0</span>
<a id="__codelineno-0-613" name="__codelineno-0-613"></a>        <span class="c1"># For tags field, DRF does not recognize the relationship between tags and the model itself (?)</span>
<a id="__codelineno-0-614" name="__codelineno-0-614"></a>        <span class="c1"># so instead of calling build_nested_field() it will call build_property_field() which</span>
<a id="__codelineno-0-615" name="__codelineno-0-615"></a>        <span class="c1"># makes the field impervious to the `?depth` parameter.</span>
<a id="__codelineno-0-616" name="__codelineno-0-616"></a>        <span class="c1"># So we intercept it here to call build_nested_field()</span>
<a id="__codelineno-0-617" name="__codelineno-0-617"></a>        <span class="c1"># which will make the tags field be rendered with TagSerializer() and respect the `depth` parameter.</span>
<a id="__codelineno-0-618" name="__codelineno-0-618"></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="n">model_class</span><span class="p">,</span> <span class="n">field_name</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="n">TagsManager</span><span class="p">)</span> <span class="ow">and</span> <span class="n">nested_depth</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
<a id="__codelineno-0-619" name="__codelineno-0-619"></a>            <span class="n">tags_field</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">model_class</span><span class="p">,</span> <span class="n">field_name</span><span class="p">)</span>
<a id="__codelineno-0-620" name="__codelineno-0-620"></a>            <span class="n">relation_info</span> <span class="o">=</span> <span class="n">RelationInfo</span><span class="p">(</span>
<a id="__codelineno-0-621" name="__codelineno-0-621"></a>                <span class="n">model_field</span><span class="o">=</span><span class="n">tags_field</span><span class="p">,</span>
<a id="__codelineno-0-622" name="__codelineno-0-622"></a>                <span class="n">related_model</span><span class="o">=</span><span class="n">Tag</span><span class="p">,</span>
<a id="__codelineno-0-623" name="__codelineno-0-623"></a>                <span class="n">to_many</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<a id="__codelineno-0-624" name="__codelineno-0-624"></a>                <span class="n">has_through_model</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<a id="__codelineno-0-625" name="__codelineno-0-625"></a>                <span class="n">to_field</span><span class="o">=</span><span class="n">_get_to_field</span><span class="p">(</span><span class="n">tags_field</span><span class="p">),</span>
<a id="__codelineno-0-626" name="__codelineno-0-626"></a>                <span class="n">reverse</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<a id="__codelineno-0-627" name="__codelineno-0-627"></a>            <span class="p">)</span>
<a id="__codelineno-0-628" name="__codelineno-0-628"></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_nested_field</span><span class="p">(</span><span class="n">field_name</span><span class="p">,</span> <span class="n">relation_info</span><span class="p">,</span> <span class="n">nested_depth</span><span class="p">)</span>
<a id="__codelineno-0-629" name="__codelineno-0-629"></a>
<a id="__codelineno-0-630" name="__codelineno-0-630"></a>        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">build_field</span><span class="p">(</span><span class="n">field_name</span><span class="p">,</span> <span class="n">info</span><span class="p">,</span> <span class="n">model_class</span><span class="p">,</span> <span class="n">nested_depth</span><span class="p">)</span>
<a id="__codelineno-0-631" name="__codelineno-0-631"></a>
<a id="__codelineno-0-632" name="__codelineno-0-632"></a>    <span class="k">def</span> <span class="nf">_get_natural_key_lookups_value_for_field</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">natural_key_field_instance</span><span class="p">):</span>
<a id="__codelineno-0-633" name="__codelineno-0-633"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Extract natural key field lookups for a specific field name.</span>
<a id="__codelineno-0-634" name="__codelineno-0-634"></a>
<a id="__codelineno-0-635" name="__codelineno-0-635"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-636" name="__codelineno-0-636"></a><span class="sd">            field_name (str): The field name to extract lookups for.</span>
<a id="__codelineno-0-637" name="__codelineno-0-637"></a><span class="sd">            natural_key_field_instance (dict): The dict containing natural key field values.</span>
<a id="__codelineno-0-638" name="__codelineno-0-638"></a>
<a id="__codelineno-0-639" name="__codelineno-0-639"></a><span class="sd">        Example:</span>
<a id="__codelineno-0-640" name="__codelineno-0-640"></a><span class="sd">            &gt;&gt;&gt; natural_key_field_instance = Device.objects.values(&quot;tenant__name&quot;, &quot;location__name&quot;, &quot;location__parent__name&quot;, ...)</span>
<a id="__codelineno-0-641" name="__codelineno-0-641"></a><span class="sd">            &gt;&gt;&gt; _get_natural_key_lookups_value_for_field(&quot;location&quot;, natural_key_field_instance)</span>
<a id="__codelineno-0-642" name="__codelineno-0-642"></a><span class="sd">            {</span>
<a id="__codelineno-0-643" name="__codelineno-0-643"></a><span class="sd">                &quot;location__name&quot;: &quot;Sample Location&quot;,</span>
<a id="__codelineno-0-644" name="__codelineno-0-644"></a><span class="sd">                &quot;location__parent__name&quot;: &quot;Sample Location Parent Name&quot;,</span>
<a id="__codelineno-0-645" name="__codelineno-0-645"></a><span class="sd">                &quot;location__parent__parent__name&quot;: &quot;NoObject&quot;</span>
<a id="__codelineno-0-646" name="__codelineno-0-646"></a><span class="sd">                ...</span>
<a id="__codelineno-0-647" name="__codelineno-0-647"></a><span class="sd">            }</span>
<a id="__codelineno-0-648" name="__codelineno-0-648"></a>
<a id="__codelineno-0-649" name="__codelineno-0-649"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-650" name="__codelineno-0-650"></a>        <span class="n">data</span> <span class="o">=</span> <span class="p">{}</span>
<a id="__codelineno-0-651" name="__codelineno-0-651"></a>        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">natural_key_field_instance</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
<a id="__codelineno-0-652" name="__codelineno-0-652"></a>            <span class="k">if</span> <span class="n">key</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">field_name</span><span class="si">}</span><span class="s2">__&quot;</span><span class="p">):</span>
<a id="__codelineno-0-653" name="__codelineno-0-653"></a>                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">uuid</span><span class="o">.</span><span class="n">UUID</span><span class="p">):</span>
<a id="__codelineno-0-654" name="__codelineno-0-654"></a>                    <span class="n">data</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
<a id="__codelineno-0-655" name="__codelineno-0-655"></a>                <span class="k">elif</span> <span class="n">value</span> <span class="o">==</span> <span class="n">constants</span><span class="o">.</span><span class="n">VARBINARY_IP_FIELD_REPR_OF_CSV_NO_OBJECT</span><span class="p">:</span>
<a id="__codelineno-0-656" name="__codelineno-0-656"></a>                    <span class="n">data</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">constants</span><span class="o">.</span><span class="n">CSV_NO_OBJECT</span>
<a id="__codelineno-0-657" name="__codelineno-0-657"></a>                <span class="k">elif</span> <span class="ow">not</span> <span class="n">value</span><span class="p">:</span>
<a id="__codelineno-0-658" name="__codelineno-0-658"></a>                    <span class="n">data</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">constants</span><span class="o">.</span><span class="n">CSV_NULL_TYPE</span>
<a id="__codelineno-0-659" name="__codelineno-0-659"></a>                <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-660" name="__codelineno-0-660"></a>                    <span class="n">data</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
<a id="__codelineno-0-661" name="__codelineno-0-661"></a>        <span class="k">return</span> <span class="n">data</span>
<a id="__codelineno-0-662" name="__codelineno-0-662"></a>
<a id="__codelineno-0-663" name="__codelineno-0-663"></a>    <span class="k">def</span> <span class="nf">to_representation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">instance</span><span class="p">):</span>
<a id="__codelineno-0-664" name="__codelineno-0-664"></a>        <span class="n">data</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">to_representation</span><span class="p">(</span><span class="n">instance</span><span class="p">)</span>
<a id="__codelineno-0-665" name="__codelineno-0-665"></a>        <span class="n">altered_data</span> <span class="o">=</span> <span class="p">{}</span>
<a id="__codelineno-0-666" name="__codelineno-0-666"></a>
<a id="__codelineno-0-667" name="__codelineno-0-667"></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_csv_request</span><span class="p">()</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">natural_keys_values</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-668" name="__codelineno-0-668"></a>            <span class="k">if</span> <span class="n">natural_key_field_instance</span> <span class="o">:=</span> <span class="p">[</span><span class="n">item</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">natural_keys_values</span> <span class="k">if</span> <span class="n">item</span><span class="p">[</span><span class="s2">&quot;pk&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">instance</span><span class="o">.</span><span class="n">pk</span><span class="p">]:</span>
<a id="__codelineno-0-669" name="__codelineno-0-669"></a>                <span class="n">cleaned_natural_key_field_instance</span> <span class="o">=</span> <span class="n">natural_key_field_instance</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<a id="__codelineno-0-670" name="__codelineno-0-670"></a>                <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">data</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
<a id="__codelineno-0-671" name="__codelineno-0-671"></a>                    <span class="c1"># FK field with natural_field_lookups</span>
<a id="__codelineno-0-672" name="__codelineno-0-672"></a>                    <span class="k">if</span> <span class="n">natural_key_field_lookups_for_field</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_natural_key_lookups_value_for_field</span><span class="p">(</span>
<a id="__codelineno-0-673" name="__codelineno-0-673"></a>                        <span class="n">key</span><span class="p">,</span> <span class="n">cleaned_natural_key_field_instance</span>
<a id="__codelineno-0-674" name="__codelineno-0-674"></a>                    <span class="p">):</span>
<a id="__codelineno-0-675" name="__codelineno-0-675"></a>                        <span class="n">altered_data</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">natural_key_field_lookups_for_field</span><span class="p">)</span>
<a id="__codelineno-0-676" name="__codelineno-0-676"></a>                    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-677" name="__codelineno-0-677"></a>                        <span class="c1"># Not FK field</span>
<a id="__codelineno-0-678" name="__codelineno-0-678"></a>                        <span class="n">altered_data</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">constants</span><span class="o">.</span><span class="n">CSV_NULL_TYPE</span> <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">value</span>
<a id="__codelineno-0-679" name="__codelineno-0-679"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-680" name="__codelineno-0-680"></a>            <span class="n">altered_data</span> <span class="o">=</span> <span class="n">data</span>
<a id="__codelineno-0-681" name="__codelineno-0-681"></a>
<a id="__codelineno-0-682" name="__codelineno-0-682"></a>        <span class="k">return</span> <span class="n">altered_data</span>
<a id="__codelineno-0-683" name="__codelineno-0-683"></a>
<a id="__codelineno-0-684" name="__codelineno-0-684"></a>    <span class="k">def</span> <span class="nf">build_relational_field</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">relation_info</span><span class="p">):</span>
<a id="__codelineno-0-685" name="__codelineno-0-685"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Override DRF&#39;s default relational-field construction to be app-aware.&quot;&quot;&quot;</span>
<a id="__codelineno-0-686" name="__codelineno-0-686"></a>        <span class="n">field_class</span><span class="p">,</span> <span class="n">field_kwargs</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">build_relational_field</span><span class="p">(</span><span class="n">field_name</span><span class="p">,</span> <span class="n">relation_info</span><span class="p">)</span>
<a id="__codelineno-0-687" name="__codelineno-0-687"></a>        <span class="k">if</span> <span class="s2">&quot;view_name&quot;</span> <span class="ow">in</span> <span class="n">field_kwargs</span><span class="p">:</span>
<a id="__codelineno-0-688" name="__codelineno-0-688"></a>            <span class="n">field_kwargs</span><span class="p">[</span><span class="s2">&quot;view_name&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">get_route_for_model</span><span class="p">(</span><span class="n">relation_info</span><span class="o">.</span><span class="n">related_model</span><span class="p">,</span> <span class="s2">&quot;detail&quot;</span><span class="p">,</span> <span class="n">api</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-0-689" name="__codelineno-0-689"></a>        <span class="k">return</span> <span class="n">field_class</span><span class="p">,</span> <span class="n">field_kwargs</span>
<a id="__codelineno-0-690" name="__codelineno-0-690"></a>
<a id="__codelineno-0-691" name="__codelineno-0-691"></a>    <span class="k">def</span> <span class="nf">build_property_field</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">model_class</span><span class="p">):</span>
<a id="__codelineno-0-692" name="__codelineno-0-692"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-693" name="__codelineno-0-693"></a><span class="sd">        Create a property field for model methods and properties.</span>
<a id="__codelineno-0-694" name="__codelineno-0-694"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-695" name="__codelineno-0-695"></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="n">model_class</span><span class="p">,</span> <span class="n">field_name</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="n">TagsManager</span><span class="p">):</span>
<a id="__codelineno-0-696" name="__codelineno-0-696"></a>            <span class="n">field_class</span> <span class="o">=</span> <span class="n">NautobotHyperlinkedRelatedField</span>
<a id="__codelineno-0-697" name="__codelineno-0-697"></a>            <span class="n">field_kwargs</span> <span class="o">=</span> <span class="p">{</span>
<a id="__codelineno-0-698" name="__codelineno-0-698"></a>                <span class="s2">&quot;queryset&quot;</span><span class="p">:</span> <span class="n">Tag</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get_for_model</span><span class="p">(</span><span class="n">model_class</span><span class="p">),</span>
<a id="__codelineno-0-699" name="__codelineno-0-699"></a>                <span class="s2">&quot;many&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
<a id="__codelineno-0-700" name="__codelineno-0-700"></a>                <span class="s2">&quot;required&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
<a id="__codelineno-0-701" name="__codelineno-0-701"></a>            <span class="p">}</span>
<a id="__codelineno-0-702" name="__codelineno-0-702"></a>
<a id="__codelineno-0-703" name="__codelineno-0-703"></a>            <span class="k">return</span> <span class="n">field_class</span><span class="p">,</span> <span class="n">field_kwargs</span>
<a id="__codelineno-0-704" name="__codelineno-0-704"></a>        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">build_property_field</span><span class="p">(</span><span class="n">field_name</span><span class="p">,</span> <span class="n">model_class</span><span class="p">)</span>
<a id="__codelineno-0-705" name="__codelineno-0-705"></a>
<a id="__codelineno-0-706" name="__codelineno-0-706"></a>    <span class="k">def</span> <span class="nf">build_nested_field</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">relation_info</span><span class="p">,</span> <span class="n">nested_depth</span><span class="p">):</span>
<a id="__codelineno-0-707" name="__codelineno-0-707"></a>        <span class="k">return</span> <span class="n">nested_serializer_factory</span><span class="p">(</span><span class="n">relation_info</span><span class="p">,</span> <span class="n">nested_depth</span><span class="p">)</span>
<a id="__codelineno-0-708" name="__codelineno-0-708"></a>
<a id="__codelineno-0-709" name="__codelineno-0-709"></a>    <span class="k">def</span> <span class="nf">build_url_field</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">model_class</span><span class="p">):</span>
<a id="__codelineno-0-710" name="__codelineno-0-710"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Override DRF&#39;s default &#39;url&#39; field construction to be app-aware.&quot;&quot;&quot;</span>
<a id="__codelineno-0-711" name="__codelineno-0-711"></a>        <span class="n">field_class</span><span class="p">,</span> <span class="n">field_kwargs</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">build_url_field</span><span class="p">(</span><span class="n">field_name</span><span class="p">,</span> <span class="n">model_class</span><span class="p">)</span>
<a id="__codelineno-0-712" name="__codelineno-0-712"></a>        <span class="k">if</span> <span class="s2">&quot;view_name&quot;</span> <span class="ow">in</span> <span class="n">field_kwargs</span><span class="p">:</span>
<a id="__codelineno-0-713" name="__codelineno-0-713"></a>            <span class="n">field_kwargs</span><span class="p">[</span><span class="s2">&quot;view_name&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">get_route_for_model</span><span class="p">(</span><span class="n">model_class</span><span class="p">,</span> <span class="s2">&quot;detail&quot;</span><span class="p">,</span> <span class="n">api</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-0-714" name="__codelineno-0-714"></a>        <span class="k">return</span> <span class="n">field_class</span><span class="p">,</span> <span class="n">field_kwargs</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="nautobot.core.api.serializers.BaseModelSerializer.is_nested" class="doc doc-heading">
<code class="highlight language-python"><span class="n">is_nested</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#nautobot.core.api.serializers.BaseModelSerializer.is_nested" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Return whether this is a nested serializer.</p>
  </div>

</div>




<div class="doc doc-object doc-function">



<h3 id="nautobot.core.api.serializers.BaseModelSerializer.build_field" class="doc doc-heading">
<code class="highlight language-python"><span class="n">build_field</span><span class="p">(</span><span class="n">field_name</span><span class="p">,</span> <span class="n">info</span><span class="p">,</span> <span class="n">model_class</span><span class="p">,</span> <span class="n">nested_depth</span><span class="p">)</span></code>

<a href="#nautobot.core.api.serializers.BaseModelSerializer.build_field" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Return a two tuple of (cls, kwargs) to build a serializer field with.</p>

          <details class="quote">
            <summary>Source code in <code>nautobot/core/api/serializers.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-604">604</a></span>
<span class="normal"><a href="#__codelineno-0-605">605</a></span>
<span class="normal"><a href="#__codelineno-0-606">606</a></span>
<span class="normal"><a href="#__codelineno-0-607">607</a></span>
<span class="normal"><a href="#__codelineno-0-608">608</a></span>
<span class="normal"><a href="#__codelineno-0-609">609</a></span>
<span class="normal"><a href="#__codelineno-0-610">610</a></span>
<span class="normal"><a href="#__codelineno-0-611">611</a></span>
<span class="normal"><a href="#__codelineno-0-612">612</a></span>
<span class="normal"><a href="#__codelineno-0-613">613</a></span>
<span class="normal"><a href="#__codelineno-0-614">614</a></span>
<span class="normal"><a href="#__codelineno-0-615">615</a></span>
<span class="normal"><a href="#__codelineno-0-616">616</a></span>
<span class="normal"><a href="#__codelineno-0-617">617</a></span>
<span class="normal"><a href="#__codelineno-0-618">618</a></span>
<span class="normal"><a href="#__codelineno-0-619">619</a></span>
<span class="normal"><a href="#__codelineno-0-620">620</a></span>
<span class="normal"><a href="#__codelineno-0-621">621</a></span>
<span class="normal"><a href="#__codelineno-0-622">622</a></span>
<span class="normal"><a href="#__codelineno-0-623">623</a></span>
<span class="normal"><a href="#__codelineno-0-624">624</a></span>
<span class="normal"><a href="#__codelineno-0-625">625</a></span>
<span class="normal"><a href="#__codelineno-0-626">626</a></span>
<span class="normal"><a href="#__codelineno-0-627">627</a></span>
<span class="normal"><a href="#__codelineno-0-628">628</a></span>
<span class="normal"><a href="#__codelineno-0-629">629</a></span>
<span class="normal"><a href="#__codelineno-0-630">630</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-604" name="__codelineno-0-604"></a><span class="k">def</span> <span class="nf">build_field</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">info</span><span class="p">,</span> <span class="n">model_class</span><span class="p">,</span> <span class="n">nested_depth</span><span class="p">):</span>
<a id="__codelineno-0-605" name="__codelineno-0-605"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-606" name="__codelineno-0-606"></a><span class="sd">    Return a two tuple of (cls, kwargs) to build a serializer field with.</span>
<a id="__codelineno-0-607" name="__codelineno-0-607"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-608" name="__codelineno-0-608"></a>    <span class="n">request</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;request&quot;</span><span class="p">)</span>
<a id="__codelineno-0-609" name="__codelineno-0-609"></a>    <span class="c1"># Make sure that PATCH/POST/PUT method response serializers are consistent</span>
<a id="__codelineno-0-610" name="__codelineno-0-610"></a>    <span class="c1"># with depth of 0</span>
<a id="__codelineno-0-611" name="__codelineno-0-611"></a>    <span class="k">if</span> <span class="n">request</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">!=</span> <span class="s2">&quot;GET&quot;</span><span class="p">:</span>
<a id="__codelineno-0-612" name="__codelineno-0-612"></a>        <span class="n">nested_depth</span> <span class="o">=</span> <span class="mi">0</span>
<a id="__codelineno-0-613" name="__codelineno-0-613"></a>    <span class="c1"># For tags field, DRF does not recognize the relationship between tags and the model itself (?)</span>
<a id="__codelineno-0-614" name="__codelineno-0-614"></a>    <span class="c1"># so instead of calling build_nested_field() it will call build_property_field() which</span>
<a id="__codelineno-0-615" name="__codelineno-0-615"></a>    <span class="c1"># makes the field impervious to the `?depth` parameter.</span>
<a id="__codelineno-0-616" name="__codelineno-0-616"></a>    <span class="c1"># So we intercept it here to call build_nested_field()</span>
<a id="__codelineno-0-617" name="__codelineno-0-617"></a>    <span class="c1"># which will make the tags field be rendered with TagSerializer() and respect the `depth` parameter.</span>
<a id="__codelineno-0-618" name="__codelineno-0-618"></a>    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="n">model_class</span><span class="p">,</span> <span class="n">field_name</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="n">TagsManager</span><span class="p">)</span> <span class="ow">and</span> <span class="n">nested_depth</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
<a id="__codelineno-0-619" name="__codelineno-0-619"></a>        <span class="n">tags_field</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">model_class</span><span class="p">,</span> <span class="n">field_name</span><span class="p">)</span>
<a id="__codelineno-0-620" name="__codelineno-0-620"></a>        <span class="n">relation_info</span> <span class="o">=</span> <span class="n">RelationInfo</span><span class="p">(</span>
<a id="__codelineno-0-621" name="__codelineno-0-621"></a>            <span class="n">model_field</span><span class="o">=</span><span class="n">tags_field</span><span class="p">,</span>
<a id="__codelineno-0-622" name="__codelineno-0-622"></a>            <span class="n">related_model</span><span class="o">=</span><span class="n">Tag</span><span class="p">,</span>
<a id="__codelineno-0-623" name="__codelineno-0-623"></a>            <span class="n">to_many</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<a id="__codelineno-0-624" name="__codelineno-0-624"></a>            <span class="n">has_through_model</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<a id="__codelineno-0-625" name="__codelineno-0-625"></a>            <span class="n">to_field</span><span class="o">=</span><span class="n">_get_to_field</span><span class="p">(</span><span class="n">tags_field</span><span class="p">),</span>
<a id="__codelineno-0-626" name="__codelineno-0-626"></a>            <span class="n">reverse</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<a id="__codelineno-0-627" name="__codelineno-0-627"></a>        <span class="p">)</span>
<a id="__codelineno-0-628" name="__codelineno-0-628"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_nested_field</span><span class="p">(</span><span class="n">field_name</span><span class="p">,</span> <span class="n">relation_info</span><span class="p">,</span> <span class="n">nested_depth</span><span class="p">)</span>
<a id="__codelineno-0-629" name="__codelineno-0-629"></a>
<a id="__codelineno-0-630" name="__codelineno-0-630"></a>    <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">build_field</span><span class="p">(</span><span class="n">field_name</span><span class="p">,</span> <span class="n">info</span><span class="p">,</span> <span class="n">model_class</span><span class="p">,</span> <span class="n">nested_depth</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h3 id="nautobot.core.api.serializers.BaseModelSerializer.build_property_field" class="doc doc-heading">
<code class="highlight language-python"><span class="n">build_property_field</span><span class="p">(</span><span class="n">field_name</span><span class="p">,</span> <span class="n">model_class</span><span class="p">)</span></code>

<a href="#nautobot.core.api.serializers.BaseModelSerializer.build_property_field" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Create a property field for model methods and properties.</p>

          <details class="quote">
            <summary>Source code in <code>nautobot/core/api/serializers.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-691">691</a></span>
<span class="normal"><a href="#__codelineno-0-692">692</a></span>
<span class="normal"><a href="#__codelineno-0-693">693</a></span>
<span class="normal"><a href="#__codelineno-0-694">694</a></span>
<span class="normal"><a href="#__codelineno-0-695">695</a></span>
<span class="normal"><a href="#__codelineno-0-696">696</a></span>
<span class="normal"><a href="#__codelineno-0-697">697</a></span>
<span class="normal"><a href="#__codelineno-0-698">698</a></span>
<span class="normal"><a href="#__codelineno-0-699">699</a></span>
<span class="normal"><a href="#__codelineno-0-700">700</a></span>
<span class="normal"><a href="#__codelineno-0-701">701</a></span>
<span class="normal"><a href="#__codelineno-0-702">702</a></span>
<span class="normal"><a href="#__codelineno-0-703">703</a></span>
<span class="normal"><a href="#__codelineno-0-704">704</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-691" name="__codelineno-0-691"></a><span class="k">def</span> <span class="nf">build_property_field</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">model_class</span><span class="p">):</span>
<a id="__codelineno-0-692" name="__codelineno-0-692"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-693" name="__codelineno-0-693"></a><span class="sd">    Create a property field for model methods and properties.</span>
<a id="__codelineno-0-694" name="__codelineno-0-694"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-695" name="__codelineno-0-695"></a>    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="n">model_class</span><span class="p">,</span> <span class="n">field_name</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="n">TagsManager</span><span class="p">):</span>
<a id="__codelineno-0-696" name="__codelineno-0-696"></a>        <span class="n">field_class</span> <span class="o">=</span> <span class="n">NautobotHyperlinkedRelatedField</span>
<a id="__codelineno-0-697" name="__codelineno-0-697"></a>        <span class="n">field_kwargs</span> <span class="o">=</span> <span class="p">{</span>
<a id="__codelineno-0-698" name="__codelineno-0-698"></a>            <span class="s2">&quot;queryset&quot;</span><span class="p">:</span> <span class="n">Tag</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get_for_model</span><span class="p">(</span><span class="n">model_class</span><span class="p">),</span>
<a id="__codelineno-0-699" name="__codelineno-0-699"></a>            <span class="s2">&quot;many&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
<a id="__codelineno-0-700" name="__codelineno-0-700"></a>            <span class="s2">&quot;required&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
<a id="__codelineno-0-701" name="__codelineno-0-701"></a>        <span class="p">}</span>
<a id="__codelineno-0-702" name="__codelineno-0-702"></a>
<a id="__codelineno-0-703" name="__codelineno-0-703"></a>        <span class="k">return</span> <span class="n">field_class</span><span class="p">,</span> <span class="n">field_kwargs</span>
<a id="__codelineno-0-704" name="__codelineno-0-704"></a>    <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">build_property_field</span><span class="p">(</span><span class="n">field_name</span><span class="p">,</span> <span class="n">model_class</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h3 id="nautobot.core.api.serializers.BaseModelSerializer.build_relational_field" class="doc doc-heading">
<code class="highlight language-python"><span class="n">build_relational_field</span><span class="p">(</span><span class="n">field_name</span><span class="p">,</span> <span class="n">relation_info</span><span class="p">)</span></code>

<a href="#nautobot.core.api.serializers.BaseModelSerializer.build_relational_field" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Override DRF's default relational-field construction to be app-aware.</p>

          <details class="quote">
            <summary>Source code in <code>nautobot/core/api/serializers.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-684">684</a></span>
<span class="normal"><a href="#__codelineno-0-685">685</a></span>
<span class="normal"><a href="#__codelineno-0-686">686</a></span>
<span class="normal"><a href="#__codelineno-0-687">687</a></span>
<span class="normal"><a href="#__codelineno-0-688">688</a></span>
<span class="normal"><a href="#__codelineno-0-689">689</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-684" name="__codelineno-0-684"></a><span class="k">def</span> <span class="nf">build_relational_field</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">relation_info</span><span class="p">):</span>
<a id="__codelineno-0-685" name="__codelineno-0-685"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Override DRF&#39;s default relational-field construction to be app-aware.&quot;&quot;&quot;</span>
<a id="__codelineno-0-686" name="__codelineno-0-686"></a>    <span class="n">field_class</span><span class="p">,</span> <span class="n">field_kwargs</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">build_relational_field</span><span class="p">(</span><span class="n">field_name</span><span class="p">,</span> <span class="n">relation_info</span><span class="p">)</span>
<a id="__codelineno-0-687" name="__codelineno-0-687"></a>    <span class="k">if</span> <span class="s2">&quot;view_name&quot;</span> <span class="ow">in</span> <span class="n">field_kwargs</span><span class="p">:</span>
<a id="__codelineno-0-688" name="__codelineno-0-688"></a>        <span class="n">field_kwargs</span><span class="p">[</span><span class="s2">&quot;view_name&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">get_route_for_model</span><span class="p">(</span><span class="n">relation_info</span><span class="o">.</span><span class="n">related_model</span><span class="p">,</span> <span class="s2">&quot;detail&quot;</span><span class="p">,</span> <span class="n">api</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-0-689" name="__codelineno-0-689"></a>    <span class="k">return</span> <span class="n">field_class</span><span class="p">,</span> <span class="n">field_kwargs</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h3 id="nautobot.core.api.serializers.BaseModelSerializer.build_url_field" class="doc doc-heading">
<code class="highlight language-python"><span class="n">build_url_field</span><span class="p">(</span><span class="n">field_name</span><span class="p">,</span> <span class="n">model_class</span><span class="p">)</span></code>

<a href="#nautobot.core.api.serializers.BaseModelSerializer.build_url_field" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Override DRF's default 'url' field construction to be app-aware.</p>

          <details class="quote">
            <summary>Source code in <code>nautobot/core/api/serializers.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-709">709</a></span>
<span class="normal"><a href="#__codelineno-0-710">710</a></span>
<span class="normal"><a href="#__codelineno-0-711">711</a></span>
<span class="normal"><a href="#__codelineno-0-712">712</a></span>
<span class="normal"><a href="#__codelineno-0-713">713</a></span>
<span class="normal"><a href="#__codelineno-0-714">714</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-709" name="__codelineno-0-709"></a><span class="k">def</span> <span class="nf">build_url_field</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">model_class</span><span class="p">):</span>
<a id="__codelineno-0-710" name="__codelineno-0-710"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Override DRF&#39;s default &#39;url&#39; field construction to be app-aware.&quot;&quot;&quot;</span>
<a id="__codelineno-0-711" name="__codelineno-0-711"></a>    <span class="n">field_class</span><span class="p">,</span> <span class="n">field_kwargs</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">build_url_field</span><span class="p">(</span><span class="n">field_name</span><span class="p">,</span> <span class="n">model_class</span><span class="p">)</span>
<a id="__codelineno-0-712" name="__codelineno-0-712"></a>    <span class="k">if</span> <span class="s2">&quot;view_name&quot;</span> <span class="ow">in</span> <span class="n">field_kwargs</span><span class="p">:</span>
<a id="__codelineno-0-713" name="__codelineno-0-713"></a>        <span class="n">field_kwargs</span><span class="p">[</span><span class="s2">&quot;view_name&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">get_route_for_model</span><span class="p">(</span><span class="n">model_class</span><span class="p">,</span> <span class="s2">&quot;detail&quot;</span><span class="p">,</span> <span class="n">api</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-0-714" name="__codelineno-0-714"></a>    <span class="k">return</span> <span class="n">field_class</span><span class="p">,</span> <span class="n">field_kwargs</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h3 id="nautobot.core.api.serializers.BaseModelSerializer.determine_view_options" class="doc doc-heading">
<code class="highlight language-python"><span class="n">determine_view_options</span><span class="p">(</span><span class="n">request</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#nautobot.core.api.serializers.BaseModelSerializer.determine_view_options" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Determine view options to use for rendering the list and detail views associated with this serializer.</p>

          <details class="quote">
            <summary>Source code in <code>nautobot/core/api/serializers.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-389">389</a></span>
<span class="normal"><a href="#__codelineno-0-390">390</a></span>
<span class="normal"><a href="#__codelineno-0-391">391</a></span>
<span class="normal"><a href="#__codelineno-0-392">392</a></span>
<span class="normal"><a href="#__codelineno-0-393">393</a></span>
<span class="normal"><a href="#__codelineno-0-394">394</a></span>
<span class="normal"><a href="#__codelineno-0-395">395</a></span>
<span class="normal"><a href="#__codelineno-0-396">396</a></span>
<span class="normal"><a href="#__codelineno-0-397">397</a></span>
<span class="normal"><a href="#__codelineno-0-398">398</a></span>
<span class="normal"><a href="#__codelineno-0-399">399</a></span>
<span class="normal"><a href="#__codelineno-0-400">400</a></span>
<span class="normal"><a href="#__codelineno-0-401">401</a></span>
<span class="normal"><a href="#__codelineno-0-402">402</a></span>
<span class="normal"><a href="#__codelineno-0-403">403</a></span>
<span class="normal"><a href="#__codelineno-0-404">404</a></span>
<span class="normal"><a href="#__codelineno-0-405">405</a></span>
<span class="normal"><a href="#__codelineno-0-406">406</a></span>
<span class="normal"><a href="#__codelineno-0-407">407</a></span>
<span class="normal"><a href="#__codelineno-0-408">408</a></span>
<span class="normal"><a href="#__codelineno-0-409">409</a></span>
<span class="normal"><a href="#__codelineno-0-410">410</a></span>
<span class="normal"><a href="#__codelineno-0-411">411</a></span>
<span class="normal"><a href="#__codelineno-0-412">412</a></span>
<span class="normal"><a href="#__codelineno-0-413">413</a></span>
<span class="normal"><a href="#__codelineno-0-414">414</a></span>
<span class="normal"><a href="#__codelineno-0-415">415</a></span>
<span class="normal"><a href="#__codelineno-0-416">416</a></span>
<span class="normal"><a href="#__codelineno-0-417">417</a></span>
<span class="normal"><a href="#__codelineno-0-418">418</a></span>
<span class="normal"><a href="#__codelineno-0-419">419</a></span>
<span class="normal"><a href="#__codelineno-0-420">420</a></span>
<span class="normal"><a href="#__codelineno-0-421">421</a></span>
<span class="normal"><a href="#__codelineno-0-422">422</a></span>
<span class="normal"><a href="#__codelineno-0-423">423</a></span>
<span class="normal"><a href="#__codelineno-0-424">424</a></span>
<span class="normal"><a href="#__codelineno-0-425">425</a></span>
<span class="normal"><a href="#__codelineno-0-426">426</a></span>
<span class="normal"><a href="#__codelineno-0-427">427</a></span>
<span class="normal"><a href="#__codelineno-0-428">428</a></span>
<span class="normal"><a href="#__codelineno-0-429">429</a></span>
<span class="normal"><a href="#__codelineno-0-430">430</a></span>
<span class="normal"><a href="#__codelineno-0-431">431</a></span>
<span class="normal"><a href="#__codelineno-0-432">432</a></span>
<span class="normal"><a href="#__codelineno-0-433">433</a></span>
<span class="normal"><a href="#__codelineno-0-434">434</a></span>
<span class="normal"><a href="#__codelineno-0-435">435</a></span>
<span class="normal"><a href="#__codelineno-0-436">436</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-389" name="__codelineno-0-389"></a><span class="k">def</span> <span class="nf">determine_view_options</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<a id="__codelineno-0-390" name="__codelineno-0-390"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-391" name="__codelineno-0-391"></a><span class="sd">    Determine view options to use for rendering the list and detail views associated with this serializer.</span>
<a id="__codelineno-0-392" name="__codelineno-0-392"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-393" name="__codelineno-0-393"></a>    <span class="n">list_display</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-394" name="__codelineno-0-394"></a>    <span class="n">fields</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-395" name="__codelineno-0-395"></a>
<a id="__codelineno-0-396" name="__codelineno-0-396"></a>    <span class="kn">from</span> <span class="nn">nautobot.core.api.metadata</span> <span class="kn">import</span> <span class="n">NautobotColumnProcessor</span>  <span class="c1"># avoid circular import</span>
<a id="__codelineno-0-397" name="__codelineno-0-397"></a>
<a id="__codelineno-0-398" name="__codelineno-0-398"></a>    <span class="n">processor</span> <span class="o">=</span> <span class="n">NautobotColumnProcessor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="o">.</span><span class="n">parser_context</span> <span class="k">if</span> <span class="n">request</span> <span class="k">else</span> <span class="p">{})</span>
<a id="__codelineno-0-399" name="__codelineno-0-399"></a>    <span class="n">field_map</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">)</span>
<a id="__codelineno-0-400" name="__codelineno-0-400"></a>    <span class="n">all_fields</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">field_map</span><span class="p">)</span>
<a id="__codelineno-0-401" name="__codelineno-0-401"></a>
<a id="__codelineno-0-402" name="__codelineno-0-402"></a>    <span class="c1"># Explicitly order the &quot;big ugly&quot; fields to the bottom</span>
<a id="__codelineno-0-403" name="__codelineno-0-403"></a>    <span class="n">processor</span><span class="o">.</span><span class="n">order_fields</span><span class="p">(</span><span class="n">all_fields</span><span class="p">)</span>
<a id="__codelineno-0-404" name="__codelineno-0-404"></a>    <span class="n">list_display_fields</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">list_display_fields</span>
<a id="__codelineno-0-405" name="__codelineno-0-405"></a>
<a id="__codelineno-0-406" name="__codelineno-0-406"></a>    <span class="c1"># Process the list_display_fields first.</span>
<a id="__codelineno-0-407" name="__codelineno-0-407"></a>    <span class="k">for</span> <span class="n">field_name</span> <span class="ow">in</span> <span class="n">list_display_fields</span><span class="p">:</span>
<a id="__codelineno-0-408" name="__codelineno-0-408"></a>        <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-0-409" name="__codelineno-0-409"></a>            <span class="n">field</span> <span class="o">=</span> <span class="n">field_map</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span>
<a id="__codelineno-0-410" name="__codelineno-0-410"></a>        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
<a id="__codelineno-0-411" name="__codelineno-0-411"></a>            <span class="k">continue</span>  <span class="c1"># Ignore unknown fields.</span>
<a id="__codelineno-0-412" name="__codelineno-0-412"></a>        <span class="n">column_data</span> <span class="o">=</span> <span class="n">processor</span><span class="o">.</span><span class="n">_get_column_properties</span><span class="p">(</span><span class="n">field</span><span class="p">,</span> <span class="n">field_name</span><span class="p">)</span>
<a id="__codelineno-0-413" name="__codelineno-0-413"></a>        <span class="n">list_display</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">column_data</span><span class="p">)</span>
<a id="__codelineno-0-414" name="__codelineno-0-414"></a>        <span class="n">fields</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">column_data</span><span class="p">)</span>
<a id="__codelineno-0-415" name="__codelineno-0-415"></a>
<a id="__codelineno-0-416" name="__codelineno-0-416"></a>    <span class="c1"># Process the rest of the fields second.</span>
<a id="__codelineno-0-417" name="__codelineno-0-417"></a>    <span class="k">for</span> <span class="n">field_name</span> <span class="ow">in</span> <span class="n">all_fields</span><span class="p">:</span>
<a id="__codelineno-0-418" name="__codelineno-0-418"></a>        <span class="c1"># Don&#39;t process list display fields twice.</span>
<a id="__codelineno-0-419" name="__codelineno-0-419"></a>        <span class="k">if</span> <span class="n">field_name</span> <span class="ow">in</span> <span class="n">list_display_fields</span><span class="p">:</span>
<a id="__codelineno-0-420" name="__codelineno-0-420"></a>            <span class="k">continue</span>
<a id="__codelineno-0-421" name="__codelineno-0-421"></a>        <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-0-422" name="__codelineno-0-422"></a>            <span class="n">field</span> <span class="o">=</span> <span class="n">field_map</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span>
<a id="__codelineno-0-423" name="__codelineno-0-423"></a>        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
<a id="__codelineno-0-424" name="__codelineno-0-424"></a>            <span class="k">continue</span>  <span class="c1"># Ignore unknown fields.</span>
<a id="__codelineno-0-425" name="__codelineno-0-425"></a>        <span class="n">column_data</span> <span class="o">=</span> <span class="n">processor</span><span class="o">.</span><span class="n">_get_column_properties</span><span class="p">(</span><span class="n">field</span><span class="p">,</span> <span class="n">field_name</span><span class="p">)</span>
<a id="__codelineno-0-426" name="__codelineno-0-426"></a>        <span class="n">fields</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">column_data</span><span class="p">)</span>
<a id="__codelineno-0-427" name="__codelineno-0-427"></a>
<a id="__codelineno-0-428" name="__codelineno-0-428"></a>    <span class="k">return</span> <span class="p">{</span>
<a id="__codelineno-0-429" name="__codelineno-0-429"></a>        <span class="s2">&quot;retrieve&quot;</span><span class="p">:</span> <span class="p">{</span>
<a id="__codelineno-0-430" name="__codelineno-0-430"></a>            <span class="s2">&quot;tabs&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_determine_detail_view_tabs</span><span class="p">(),</span>
<a id="__codelineno-0-431" name="__codelineno-0-431"></a>        <span class="p">},</span>
<a id="__codelineno-0-432" name="__codelineno-0-432"></a>        <span class="s2">&quot;list&quot;</span><span class="p">:</span> <span class="p">{</span>
<a id="__codelineno-0-433" name="__codelineno-0-433"></a>            <span class="s2">&quot;default_fields&quot;</span><span class="p">:</span> <span class="n">list_display</span><span class="p">,</span>
<a id="__codelineno-0-434" name="__codelineno-0-434"></a>            <span class="s2">&quot;all_fields&quot;</span><span class="p">:</span> <span class="n">fields</span><span class="p">,</span>
<a id="__codelineno-0-435" name="__codelineno-0-435"></a>        <span class="p">},</span>
<a id="__codelineno-0-436" name="__codelineno-0-436"></a>    <span class="p">}</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h3 id="nautobot.core.api.serializers.BaseModelSerializer.extend_field_names" class="doc doc-heading">
<code class="highlight language-python"><span class="n">extend_field_names</span><span class="p">(</span><span class="n">fields</span><span class="p">,</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">at_start</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">opt_in_only</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

<a href="#nautobot.core.api.serializers.BaseModelSerializer.extend_field_names" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Prepend or append the given field_name to <code>fields</code> and optionally self.Meta.opt_in_fields as well.</p>

          <details class="quote">
            <summary>Source code in <code>nautobot/core/api/serializers.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-329">329</a></span>
<span class="normal"><a href="#__codelineno-0-330">330</a></span>
<span class="normal"><a href="#__codelineno-0-331">331</a></span>
<span class="normal"><a href="#__codelineno-0-332">332</a></span>
<span class="normal"><a href="#__codelineno-0-333">333</a></span>
<span class="normal"><a href="#__codelineno-0-334">334</a></span>
<span class="normal"><a href="#__codelineno-0-335">335</a></span>
<span class="normal"><a href="#__codelineno-0-336">336</a></span>
<span class="normal"><a href="#__codelineno-0-337">337</a></span>
<span class="normal"><a href="#__codelineno-0-338">338</a></span>
<span class="normal"><a href="#__codelineno-0-339">339</a></span>
<span class="normal"><a href="#__codelineno-0-340">340</a></span>
<span class="normal"><a href="#__codelineno-0-341">341</a></span>
<span class="normal"><a href="#__codelineno-0-342">342</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-329" name="__codelineno-0-329"></a><span class="k">def</span> <span class="nf">extend_field_names</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fields</span><span class="p">,</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">at_start</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">opt_in_only</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<a id="__codelineno-0-330" name="__codelineno-0-330"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Prepend or append the given field_name to `fields` and optionally self.Meta.opt_in_fields as well.&quot;&quot;&quot;</span>
<a id="__codelineno-0-331" name="__codelineno-0-331"></a>    <span class="k">if</span> <span class="n">field_name</span> <span class="ow">in</span> <span class="n">fields</span><span class="p">:</span>
<a id="__codelineno-0-332" name="__codelineno-0-332"></a>        <span class="n">fields</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">field_name</span><span class="p">)</span>
<a id="__codelineno-0-333" name="__codelineno-0-333"></a>    <span class="k">if</span> <span class="n">at_start</span><span class="p">:</span>
<a id="__codelineno-0-334" name="__codelineno-0-334"></a>        <span class="n">fields</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">field_name</span><span class="p">)</span>
<a id="__codelineno-0-335" name="__codelineno-0-335"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-336" name="__codelineno-0-336"></a>        <span class="n">fields</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">field_name</span><span class="p">)</span>
<a id="__codelineno-0-337" name="__codelineno-0-337"></a>    <span class="k">if</span> <span class="n">opt_in_only</span><span class="p">:</span>
<a id="__codelineno-0-338" name="__codelineno-0-338"></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Meta</span><span class="p">,</span> <span class="s2">&quot;opt_in_fields&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">):</span>
<a id="__codelineno-0-339" name="__codelineno-0-339"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">Meta</span><span class="o">.</span><span class="n">opt_in_fields</span> <span class="o">=</span> <span class="p">[</span><span class="n">field_name</span><span class="p">]</span>
<a id="__codelineno-0-340" name="__codelineno-0-340"></a>        <span class="k">elif</span> <span class="n">field_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">Meta</span><span class="o">.</span><span class="n">opt_in_fields</span><span class="p">:</span>
<a id="__codelineno-0-341" name="__codelineno-0-341"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">Meta</span><span class="o">.</span><span class="n">opt_in_fields</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">field_name</span><span class="p">)</span>
<a id="__codelineno-0-342" name="__codelineno-0-342"></a>    <span class="k">return</span> <span class="n">fields</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h3 id="nautobot.core.api.serializers.BaseModelSerializer.get_additional_detail_view_tabs" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_additional_detail_view_tabs</span><span class="p">()</span></code>

<a href="#nautobot.core.api.serializers.BaseModelSerializer.get_additional_detail_view_tabs" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Retrieve definitions of non-default detail view tabs.</p>
<p>By default provides an "Advanced" tab containing <code>self.advanced_tab_fields</code>, but subclasses
can override this to move additional serializer fields to this or other tabs.</p>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>dict</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p><code>{&lt;tab label&gt;: [{&lt;panel label&gt;: {"fields": [&lt;list of fields&gt;]}, ...}, ...], ...}</code></p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>nautobot/core/api/serializers.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-453">453</a></span>
<span class="normal"><a href="#__codelineno-0-454">454</a></span>
<span class="normal"><a href="#__codelineno-0-455">455</a></span>
<span class="normal"><a href="#__codelineno-0-456">456</a></span>
<span class="normal"><a href="#__codelineno-0-457">457</a></span>
<span class="normal"><a href="#__codelineno-0-458">458</a></span>
<span class="normal"><a href="#__codelineno-0-459">459</a></span>
<span class="normal"><a href="#__codelineno-0-460">460</a></span>
<span class="normal"><a href="#__codelineno-0-461">461</a></span>
<span class="normal"><a href="#__codelineno-0-462">462</a></span>
<span class="normal"><a href="#__codelineno-0-463">463</a></span>
<span class="normal"><a href="#__codelineno-0-464">464</a></span>
<span class="normal"><a href="#__codelineno-0-465">465</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-453" name="__codelineno-0-453"></a><span class="k">def</span> <span class="nf">get_additional_detail_view_tabs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-454" name="__codelineno-0-454"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-455" name="__codelineno-0-455"></a><span class="sd">    Retrieve definitions of non-default detail view tabs.</span>
<a id="__codelineno-0-456" name="__codelineno-0-456"></a>
<a id="__codelineno-0-457" name="__codelineno-0-457"></a><span class="sd">    By default provides an &quot;Advanced&quot; tab containing `self.advanced_tab_fields`, but subclasses</span>
<a id="__codelineno-0-458" name="__codelineno-0-458"></a><span class="sd">    can override this to move additional serializer fields to this or other tabs.</span>
<a id="__codelineno-0-459" name="__codelineno-0-459"></a>
<a id="__codelineno-0-460" name="__codelineno-0-460"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-461" name="__codelineno-0-461"></a><span class="sd">        (dict): `{&lt;tab label&gt;: [{&lt;panel label&gt;: {&quot;fields&quot;: [&lt;list of fields&gt;]}, ...}, ...], ...}`</span>
<a id="__codelineno-0-462" name="__codelineno-0-462"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-463" name="__codelineno-0-463"></a>    <span class="k">return</span> <span class="p">{</span>
<a id="__codelineno-0-464" name="__codelineno-0-464"></a>        <span class="s2">&quot;Advanced&quot;</span><span class="p">:</span> <span class="p">[{</span><span class="s2">&quot;Object Details&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;fields&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">advanced_tab_fields</span><span class="p">}}],</span>
<a id="__codelineno-0-465" name="__codelineno-0-465"></a>    <span class="p">}</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h3 id="nautobot.core.api.serializers.BaseModelSerializer.get_display" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_display</span><span class="p">(</span><span class="n">instance</span><span class="p">)</span></code>

<a href="#nautobot.core.api.serializers.BaseModelSerializer.get_display" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Return either the <code>display</code> property of the instance or <code>str(instance)</code></p>

          <details class="quote">
            <summary>Source code in <code>nautobot/core/api/serializers.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-296">296</a></span>
<span class="normal"><a href="#__codelineno-0-297">297</a></span>
<span class="normal"><a href="#__codelineno-0-298">298</a></span>
<span class="normal"><a href="#__codelineno-0-299">299</a></span>
<span class="normal"><a href="#__codelineno-0-300">300</a></span>
<span class="normal"><a href="#__codelineno-0-301">301</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-296" name="__codelineno-0-296"></a><span class="nd">@extend_schema_field</span><span class="p">(</span><span class="n">serializers</span><span class="o">.</span><span class="n">CharField</span><span class="p">)</span>
<a id="__codelineno-0-297" name="__codelineno-0-297"></a><span class="k">def</span> <span class="nf">get_display</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">instance</span><span class="p">):</span>
<a id="__codelineno-0-298" name="__codelineno-0-298"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-299" name="__codelineno-0-299"></a><span class="sd">    Return either the `display` property of the instance or `str(instance)`</span>
<a id="__codelineno-0-300" name="__codelineno-0-300"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-301" name="__codelineno-0-301"></a>    <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">instance</span><span class="p">,</span> <span class="s2">&quot;display&quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">instance</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h3 id="nautobot.core.api.serializers.BaseModelSerializer.get_field_names" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_field_names</span><span class="p">(</span><span class="n">declared_fields</span><span class="p">,</span> <span class="n">info</span><span class="p">)</span></code>

<a href="#nautobot.core.api.serializers.BaseModelSerializer.get_field_names" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Override get_field_names() to add some custom logic.</p>
<p>Assuming that we follow the pattern where <code>fields = "__all__" for the vast majority of serializers in Nautobot,
we do not strictly need to use this method to protect against inadvertently omitting standard fields
like</code>display<code>,</code>created<code>, and</code>last_updated`. However, we continue to do as a bit of redundant safety.</p>
<p>The other purpose of this method now is to manipulate the set of fields that "<strong>all</strong>" actually means as a
way of <em>excluding</em> fields that we <em>don't</em> want to include by default for performance or data exposure reasons.</p>

          <details class="quote">
            <summary>Source code in <code>nautobot/core/api/serializers.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-344">344</a></span>
<span class="normal"><a href="#__codelineno-0-345">345</a></span>
<span class="normal"><a href="#__codelineno-0-346">346</a></span>
<span class="normal"><a href="#__codelineno-0-347">347</a></span>
<span class="normal"><a href="#__codelineno-0-348">348</a></span>
<span class="normal"><a href="#__codelineno-0-349">349</a></span>
<span class="normal"><a href="#__codelineno-0-350">350</a></span>
<span class="normal"><a href="#__codelineno-0-351">351</a></span>
<span class="normal"><a href="#__codelineno-0-352">352</a></span>
<span class="normal"><a href="#__codelineno-0-353">353</a></span>
<span class="normal"><a href="#__codelineno-0-354">354</a></span>
<span class="normal"><a href="#__codelineno-0-355">355</a></span>
<span class="normal"><a href="#__codelineno-0-356">356</a></span>
<span class="normal"><a href="#__codelineno-0-357">357</a></span>
<span class="normal"><a href="#__codelineno-0-358">358</a></span>
<span class="normal"><a href="#__codelineno-0-359">359</a></span>
<span class="normal"><a href="#__codelineno-0-360">360</a></span>
<span class="normal"><a href="#__codelineno-0-361">361</a></span>
<span class="normal"><a href="#__codelineno-0-362">362</a></span>
<span class="normal"><a href="#__codelineno-0-363">363</a></span>
<span class="normal"><a href="#__codelineno-0-364">364</a></span>
<span class="normal"><a href="#__codelineno-0-365">365</a></span>
<span class="normal"><a href="#__codelineno-0-366">366</a></span>
<span class="normal"><a href="#__codelineno-0-367">367</a></span>
<span class="normal"><a href="#__codelineno-0-368">368</a></span>
<span class="normal"><a href="#__codelineno-0-369">369</a></span>
<span class="normal"><a href="#__codelineno-0-370">370</a></span>
<span class="normal"><a href="#__codelineno-0-371">371</a></span>
<span class="normal"><a href="#__codelineno-0-372">372</a></span>
<span class="normal"><a href="#__codelineno-0-373">373</a></span>
<span class="normal"><a href="#__codelineno-0-374">374</a></span>
<span class="normal"><a href="#__codelineno-0-375">375</a></span>
<span class="normal"><a href="#__codelineno-0-376">376</a></span>
<span class="normal"><a href="#__codelineno-0-377">377</a></span>
<span class="normal"><a href="#__codelineno-0-378">378</a></span>
<span class="normal"><a href="#__codelineno-0-379">379</a></span>
<span class="normal"><a href="#__codelineno-0-380">380</a></span>
<span class="normal"><a href="#__codelineno-0-381">381</a></span>
<span class="normal"><a href="#__codelineno-0-382">382</a></span>
<span class="normal"><a href="#__codelineno-0-383">383</a></span>
<span class="normal"><a href="#__codelineno-0-384">384</a></span>
<span class="normal"><a href="#__codelineno-0-385">385</a></span>
<span class="normal"><a href="#__codelineno-0-386">386</a></span>
<span class="normal"><a href="#__codelineno-0-387">387</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-344" name="__codelineno-0-344"></a><span class="k">def</span> <span class="nf">get_field_names</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">declared_fields</span><span class="p">,</span> <span class="n">info</span><span class="p">):</span>
<a id="__codelineno-0-345" name="__codelineno-0-345"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-346" name="__codelineno-0-346"></a><span class="sd">    Override get_field_names() to add some custom logic.</span>
<a id="__codelineno-0-347" name="__codelineno-0-347"></a>
<a id="__codelineno-0-348" name="__codelineno-0-348"></a><span class="sd">    Assuming that we follow the pattern where `fields = &quot;__all__&quot; for the vast majority of serializers in Nautobot,</span>
<a id="__codelineno-0-349" name="__codelineno-0-349"></a><span class="sd">    we do not strictly need to use this method to protect against inadvertently omitting standard fields</span>
<a id="__codelineno-0-350" name="__codelineno-0-350"></a><span class="sd">    like `display`, `created`, and `last_updated`. However, we continue to do as a bit of redundant safety.</span>
<a id="__codelineno-0-351" name="__codelineno-0-351"></a>
<a id="__codelineno-0-352" name="__codelineno-0-352"></a><span class="sd">    The other purpose of this method now is to manipulate the set of fields that &quot;__all__&quot; actually means as a</span>
<a id="__codelineno-0-353" name="__codelineno-0-353"></a><span class="sd">    way of *excluding* fields that we *don&#39;t* want to include by default for performance or data exposure reasons.</span>
<a id="__codelineno-0-354" name="__codelineno-0-354"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-355" name="__codelineno-0-355"></a>    <span class="n">fields</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">get_field_names</span><span class="p">(</span><span class="n">declared_fields</span><span class="p">,</span> <span class="n">info</span><span class="p">))</span>  <span class="c1"># Meta.fields could be defined as a tuple</span>
<a id="__codelineno-0-356" name="__codelineno-0-356"></a>
<a id="__codelineno-0-357" name="__codelineno-0-357"></a>    <span class="c1"># Add initial fields in &quot;reverse&quot; order since they&#39;re each inserted at the start of the list.</span>
<a id="__codelineno-0-358" name="__codelineno-0-358"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">extend_field_names</span><span class="p">(</span><span class="n">fields</span><span class="p">,</span> <span class="s2">&quot;display&quot;</span><span class="p">,</span> <span class="n">at_start</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-0-359" name="__codelineno-0-359"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">extend_field_names</span><span class="p">(</span><span class="n">fields</span><span class="p">,</span> <span class="s2">&quot;object_type&quot;</span><span class="p">,</span> <span class="n">at_start</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-0-360" name="__codelineno-0-360"></a>    <span class="c1"># Since we use HyperlinkedModelSerializer as our base class, &quot;url&quot; is auto-included by &quot;__all__&quot; but &quot;id&quot; isn&#39;t.</span>
<a id="__codelineno-0-361" name="__codelineno-0-361"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">extend_field_names</span><span class="p">(</span><span class="n">fields</span><span class="p">,</span> <span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="n">at_start</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-0-362" name="__codelineno-0-362"></a>
<a id="__codelineno-0-363" name="__codelineno-0-363"></a>    <span class="c1"># Move these fields to the end</span>
<a id="__codelineno-0-364" name="__codelineno-0-364"></a>    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Meta</span><span class="o">.</span><span class="n">model</span><span class="p">,</span> <span class="s2">&quot;created&quot;</span><span class="p">):</span>
<a id="__codelineno-0-365" name="__codelineno-0-365"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">extend_field_names</span><span class="p">(</span><span class="n">fields</span><span class="p">,</span> <span class="s2">&quot;created&quot;</span><span class="p">)</span>
<a id="__codelineno-0-366" name="__codelineno-0-366"></a>    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Meta</span><span class="o">.</span><span class="n">model</span><span class="p">,</span> <span class="s2">&quot;last_updated&quot;</span><span class="p">):</span>
<a id="__codelineno-0-367" name="__codelineno-0-367"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">extend_field_names</span><span class="p">(</span><span class="n">fields</span><span class="p">,</span> <span class="s2">&quot;last_updated&quot;</span><span class="p">)</span>
<a id="__codelineno-0-368" name="__codelineno-0-368"></a>
<a id="__codelineno-0-369" name="__codelineno-0-369"></a>    <span class="k">def</span> <span class="nf">filter_field</span><span class="p">(</span><span class="n">field</span><span class="p">):</span>
<a id="__codelineno-0-370" name="__codelineno-0-370"></a>        <span class="c1"># Eliminate all field names that start with &quot;_&quot; as those fields are not user-facing</span>
<a id="__codelineno-0-371" name="__codelineno-0-371"></a>        <span class="k">if</span> <span class="n">field</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">):</span>
<a id="__codelineno-0-372" name="__codelineno-0-372"></a>            <span class="k">return</span> <span class="kc">False</span>
<a id="__codelineno-0-373" name="__codelineno-0-373"></a>        <span class="c1"># These are expensive to look up, so we have decided not to include them on nested serializers</span>
<a id="__codelineno-0-374" name="__codelineno-0-374"></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_nested</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Meta</span><span class="o">.</span><span class="n">model</span><span class="p">,</span> <span class="n">field</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="n">ManyToManyDescriptor</span><span class="p">):</span>
<a id="__codelineno-0-375" name="__codelineno-0-375"></a>            <span class="k">return</span> <span class="kc">False</span>
<a id="__codelineno-0-376" name="__codelineno-0-376"></a>
<a id="__codelineno-0-377" name="__codelineno-0-377"></a>        <span class="c1"># Ignore M2M fields</span>
<a id="__codelineno-0-378" name="__codelineno-0-378"></a>        <span class="k">with</span> <span class="n">contextlib</span><span class="o">.</span><span class="n">suppress</span><span class="p">(</span><span class="n">FieldDoesNotExist</span><span class="p">):</span>
<a id="__codelineno-0-379" name="__codelineno-0-379"></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_csv_request</span><span class="p">():</span>
<a id="__codelineno-0-380" name="__codelineno-0-380"></a>                <span class="n">field</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Meta</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">get_field</span><span class="p">(</span><span class="n">field</span><span class="p">)</span>
<a id="__codelineno-0-381" name="__codelineno-0-381"></a>                <span class="c1"># ContentType is ManyToMany Field that is specially handled, Hence it can be exported/imported</span>
<a id="__codelineno-0-382" name="__codelineno-0-382"></a>                <span class="k">if</span> <span class="n">field</span><span class="o">.</span><span class="n">many_to_many</span> <span class="ow">and</span> <span class="n">field</span><span class="o">.</span><span class="n">related_model</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">ContentType</span><span class="p">:</span>
<a id="__codelineno-0-383" name="__codelineno-0-383"></a>                    <span class="k">return</span> <span class="kc">False</span>
<a id="__codelineno-0-384" name="__codelineno-0-384"></a>        <span class="k">return</span> <span class="kc">True</span>
<a id="__codelineno-0-385" name="__codelineno-0-385"></a>
<a id="__codelineno-0-386" name="__codelineno-0-386"></a>    <span class="n">fields</span> <span class="o">=</span> <span class="p">[</span><span class="n">field</span> <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">fields</span> <span class="k">if</span> <span class="n">filter_field</span><span class="p">(</span><span class="n">field</span><span class="p">)]</span>
<a id="__codelineno-0-387" name="__codelineno-0-387"></a>    <span class="k">return</span> <span class="n">fields</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="nautobot.apps.api.BulkDestroyModelMixin" class="doc doc-heading">
          <code>nautobot.apps.api.BulkDestroyModelMixin</code>


<a href="#nautobot.apps.api.BulkDestroyModelMixin" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">

  
      <p>Support bulk deletion of objects using the list endpoint for a model. Accepts a DELETE action with a list of one
or more JSON objects, each specifying the UUID of an object to be deleted. For example:</p>
<p>DELETE /api/dcim/locations/
[
    {"id": "3f01f169-49b9-42d5-a526-df9118635d62"},
    {"id": "c27d6c5b-7ea8-41e7-b9dd-c065efd5d9cd"}
]</p>

            <details class="quote">
              <summary>Source code in <code>nautobot/core/api/views.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-130">130</a></span>
<span class="normal"><a href="#__codelineno-0-131">131</a></span>
<span class="normal"><a href="#__codelineno-0-132">132</a></span>
<span class="normal"><a href="#__codelineno-0-133">133</a></span>
<span class="normal"><a href="#__codelineno-0-134">134</a></span>
<span class="normal"><a href="#__codelineno-0-135">135</a></span>
<span class="normal"><a href="#__codelineno-0-136">136</a></span>
<span class="normal"><a href="#__codelineno-0-137">137</a></span>
<span class="normal"><a href="#__codelineno-0-138">138</a></span>
<span class="normal"><a href="#__codelineno-0-139">139</a></span>
<span class="normal"><a href="#__codelineno-0-140">140</a></span>
<span class="normal"><a href="#__codelineno-0-141">141</a></span>
<span class="normal"><a href="#__codelineno-0-142">142</a></span>
<span class="normal"><a href="#__codelineno-0-143">143</a></span>
<span class="normal"><a href="#__codelineno-0-144">144</a></span>
<span class="normal"><a href="#__codelineno-0-145">145</a></span>
<span class="normal"><a href="#__codelineno-0-146">146</a></span>
<span class="normal"><a href="#__codelineno-0-147">147</a></span>
<span class="normal"><a href="#__codelineno-0-148">148</a></span>
<span class="normal"><a href="#__codelineno-0-149">149</a></span>
<span class="normal"><a href="#__codelineno-0-150">150</a></span>
<span class="normal"><a href="#__codelineno-0-151">151</a></span>
<span class="normal"><a href="#__codelineno-0-152">152</a></span>
<span class="normal"><a href="#__codelineno-0-153">153</a></span>
<span class="normal"><a href="#__codelineno-0-154">154</a></span>
<span class="normal"><a href="#__codelineno-0-155">155</a></span>
<span class="normal"><a href="#__codelineno-0-156">156</a></span>
<span class="normal"><a href="#__codelineno-0-157">157</a></span>
<span class="normal"><a href="#__codelineno-0-158">158</a></span>
<span class="normal"><a href="#__codelineno-0-159">159</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-130" name="__codelineno-0-130"></a><span class="k">class</span> <span class="nc">BulkDestroyModelMixin</span><span class="p">:</span>
<a id="__codelineno-0-131" name="__codelineno-0-131"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-132" name="__codelineno-0-132"></a><span class="sd">    Support bulk deletion of objects using the list endpoint for a model. Accepts a DELETE action with a list of one</span>
<a id="__codelineno-0-133" name="__codelineno-0-133"></a><span class="sd">    or more JSON objects, each specifying the UUID of an object to be deleted. For example:</span>
<a id="__codelineno-0-134" name="__codelineno-0-134"></a>
<a id="__codelineno-0-135" name="__codelineno-0-135"></a><span class="sd">    DELETE /api/dcim/locations/</span>
<a id="__codelineno-0-136" name="__codelineno-0-136"></a><span class="sd">    [</span>
<a id="__codelineno-0-137" name="__codelineno-0-137"></a><span class="sd">        {&quot;id&quot;: &quot;3f01f169-49b9-42d5-a526-df9118635d62&quot;},</span>
<a id="__codelineno-0-138" name="__codelineno-0-138"></a><span class="sd">        {&quot;id&quot;: &quot;c27d6c5b-7ea8-41e7-b9dd-c065efd5d9cd&quot;}</span>
<a id="__codelineno-0-139" name="__codelineno-0-139"></a><span class="sd">    ]</span>
<a id="__codelineno-0-140" name="__codelineno-0-140"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-141" name="__codelineno-0-141"></a>
<a id="__codelineno-0-142" name="__codelineno-0-142"></a>    <span class="n">bulk_operation_serializer_class</span> <span class="o">=</span> <span class="n">BulkOperationSerializer</span>
<a id="__codelineno-0-143" name="__codelineno-0-143"></a>
<a id="__codelineno-0-144" name="__codelineno-0-144"></a>    <span class="nd">@extend_schema</span><span class="p">(</span>
<a id="__codelineno-0-145" name="__codelineno-0-145"></a>        <span class="n">request</span><span class="o">=</span><span class="n">BulkOperationSerializer</span><span class="p">(</span><span class="n">many</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
<a id="__codelineno-0-146" name="__codelineno-0-146"></a>    <span class="p">)</span>
<a id="__codelineno-0-147" name="__codelineno-0-147"></a>    <span class="k">def</span> <span class="nf">bulk_destroy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<a id="__codelineno-0-148" name="__codelineno-0-148"></a>        <span class="n">serializer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">bulk_operation_serializer_class</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">many</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-0-149" name="__codelineno-0-149"></a>        <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">(</span><span class="n">raise_exception</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-0-150" name="__codelineno-0-150"></a>        <span class="n">qs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_queryset</span><span class="p">()</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">pk__in</span><span class="o">=</span><span class="p">[</span><span class="n">o</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">o</span> <span class="ow">in</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="p">])</span>
<a id="__codelineno-0-151" name="__codelineno-0-151"></a>
<a id="__codelineno-0-152" name="__codelineno-0-152"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">perform_bulk_destroy</span><span class="p">(</span><span class="n">qs</span><span class="p">)</span>
<a id="__codelineno-0-153" name="__codelineno-0-153"></a>
<a id="__codelineno-0-154" name="__codelineno-0-154"></a>        <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_204_NO_CONTENT</span><span class="p">)</span>
<a id="__codelineno-0-155" name="__codelineno-0-155"></a>
<a id="__codelineno-0-156" name="__codelineno-0-156"></a>    <span class="k">def</span> <span class="nf">perform_bulk_destroy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">objects</span><span class="p">):</span>
<a id="__codelineno-0-157" name="__codelineno-0-157"></a>        <span class="k">with</span> <span class="n">transaction</span><span class="o">.</span><span class="n">atomic</span><span class="p">():</span>
<a id="__codelineno-0-158" name="__codelineno-0-158"></a>            <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">objects</span><span class="p">:</span>
<a id="__codelineno-0-159" name="__codelineno-0-159"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">perform_destroy</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">











  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="nautobot.apps.api.BulkUpdateModelMixin" class="doc doc-heading">
          <code>nautobot.apps.api.BulkUpdateModelMixin</code>


<a href="#nautobot.apps.api.BulkUpdateModelMixin" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">

  
      <p>Support bulk modification of objects using the list endpoint for a model. Accepts a PATCH action with a list of one
or more JSON objects, each specifying the UUID of an object to be updated as well as the attributes to be set.
For example:</p>
<p>PATCH /api/dcim/locations/
[
    {
        "id": "1f554d07-d099-437d-8d48-7d6e35ec8fa3",
        "name": "New name"
    },
    {
        "id": "1f554d07-d099-437d-8d48-7d6e65ec8fa3",
        "status": "planned"
    }
]</p>

            <details class="quote">
              <summary>Source code in <code>nautobot/core/api/views.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-77"> 77</a></span>
<span class="normal"><a href="#__codelineno-0-78"> 78</a></span>
<span class="normal"><a href="#__codelineno-0-79"> 79</a></span>
<span class="normal"><a href="#__codelineno-0-80"> 80</a></span>
<span class="normal"><a href="#__codelineno-0-81"> 81</a></span>
<span class="normal"><a href="#__codelineno-0-82"> 82</a></span>
<span class="normal"><a href="#__codelineno-0-83"> 83</a></span>
<span class="normal"><a href="#__codelineno-0-84"> 84</a></span>
<span class="normal"><a href="#__codelineno-0-85"> 85</a></span>
<span class="normal"><a href="#__codelineno-0-86"> 86</a></span>
<span class="normal"><a href="#__codelineno-0-87"> 87</a></span>
<span class="normal"><a href="#__codelineno-0-88"> 88</a></span>
<span class="normal"><a href="#__codelineno-0-89"> 89</a></span>
<span class="normal"><a href="#__codelineno-0-90"> 90</a></span>
<span class="normal"><a href="#__codelineno-0-91"> 91</a></span>
<span class="normal"><a href="#__codelineno-0-92"> 92</a></span>
<span class="normal"><a href="#__codelineno-0-93"> 93</a></span>
<span class="normal"><a href="#__codelineno-0-94"> 94</a></span>
<span class="normal"><a href="#__codelineno-0-95"> 95</a></span>
<span class="normal"><a href="#__codelineno-0-96"> 96</a></span>
<span class="normal"><a href="#__codelineno-0-97"> 97</a></span>
<span class="normal"><a href="#__codelineno-0-98"> 98</a></span>
<span class="normal"><a href="#__codelineno-0-99"> 99</a></span>
<span class="normal"><a href="#__codelineno-0-100">100</a></span>
<span class="normal"><a href="#__codelineno-0-101">101</a></span>
<span class="normal"><a href="#__codelineno-0-102">102</a></span>
<span class="normal"><a href="#__codelineno-0-103">103</a></span>
<span class="normal"><a href="#__codelineno-0-104">104</a></span>
<span class="normal"><a href="#__codelineno-0-105">105</a></span>
<span class="normal"><a href="#__codelineno-0-106">106</a></span>
<span class="normal"><a href="#__codelineno-0-107">107</a></span>
<span class="normal"><a href="#__codelineno-0-108">108</a></span>
<span class="normal"><a href="#__codelineno-0-109">109</a></span>
<span class="normal"><a href="#__codelineno-0-110">110</a></span>
<span class="normal"><a href="#__codelineno-0-111">111</a></span>
<span class="normal"><a href="#__codelineno-0-112">112</a></span>
<span class="normal"><a href="#__codelineno-0-113">113</a></span>
<span class="normal"><a href="#__codelineno-0-114">114</a></span>
<span class="normal"><a href="#__codelineno-0-115">115</a></span>
<span class="normal"><a href="#__codelineno-0-116">116</a></span>
<span class="normal"><a href="#__codelineno-0-117">117</a></span>
<span class="normal"><a href="#__codelineno-0-118">118</a></span>
<span class="normal"><a href="#__codelineno-0-119">119</a></span>
<span class="normal"><a href="#__codelineno-0-120">120</a></span>
<span class="normal"><a href="#__codelineno-0-121">121</a></span>
<span class="normal"><a href="#__codelineno-0-122">122</a></span>
<span class="normal"><a href="#__codelineno-0-123">123</a></span>
<span class="normal"><a href="#__codelineno-0-124">124</a></span>
<span class="normal"><a href="#__codelineno-0-125">125</a></span>
<span class="normal"><a href="#__codelineno-0-126">126</a></span>
<span class="normal"><a href="#__codelineno-0-127">127</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-77" name="__codelineno-0-77"></a><span class="k">class</span> <span class="nc">BulkUpdateModelMixin</span><span class="p">:</span>
<a id="__codelineno-0-78" name="__codelineno-0-78"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-79" name="__codelineno-0-79"></a><span class="sd">    Support bulk modification of objects using the list endpoint for a model. Accepts a PATCH action with a list of one</span>
<a id="__codelineno-0-80" name="__codelineno-0-80"></a><span class="sd">    or more JSON objects, each specifying the UUID of an object to be updated as well as the attributes to be set.</span>
<a id="__codelineno-0-81" name="__codelineno-0-81"></a><span class="sd">    For example:</span>
<a id="__codelineno-0-82" name="__codelineno-0-82"></a>
<a id="__codelineno-0-83" name="__codelineno-0-83"></a><span class="sd">    PATCH /api/dcim/locations/</span>
<a id="__codelineno-0-84" name="__codelineno-0-84"></a><span class="sd">    [</span>
<a id="__codelineno-0-85" name="__codelineno-0-85"></a><span class="sd">        {</span>
<a id="__codelineno-0-86" name="__codelineno-0-86"></a><span class="sd">            &quot;id&quot;: &quot;1f554d07-d099-437d-8d48-7d6e35ec8fa3&quot;,</span>
<a id="__codelineno-0-87" name="__codelineno-0-87"></a><span class="sd">            &quot;name&quot;: &quot;New name&quot;</span>
<a id="__codelineno-0-88" name="__codelineno-0-88"></a><span class="sd">        },</span>
<a id="__codelineno-0-89" name="__codelineno-0-89"></a><span class="sd">        {</span>
<a id="__codelineno-0-90" name="__codelineno-0-90"></a><span class="sd">            &quot;id&quot;: &quot;1f554d07-d099-437d-8d48-7d6e65ec8fa3&quot;,</span>
<a id="__codelineno-0-91" name="__codelineno-0-91"></a><span class="sd">            &quot;status&quot;: &quot;planned&quot;</span>
<a id="__codelineno-0-92" name="__codelineno-0-92"></a><span class="sd">        }</span>
<a id="__codelineno-0-93" name="__codelineno-0-93"></a><span class="sd">    ]</span>
<a id="__codelineno-0-94" name="__codelineno-0-94"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-95" name="__codelineno-0-95"></a>
<a id="__codelineno-0-96" name="__codelineno-0-96"></a>    <span class="n">bulk_operation_serializer_class</span> <span class="o">=</span> <span class="n">BulkOperationSerializer</span>
<a id="__codelineno-0-97" name="__codelineno-0-97"></a>
<a id="__codelineno-0-98" name="__codelineno-0-98"></a>    <span class="k">def</span> <span class="nf">bulk_update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<a id="__codelineno-0-99" name="__codelineno-0-99"></a>        <span class="n">partial</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;partial&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
<a id="__codelineno-0-100" name="__codelineno-0-100"></a>        <span class="n">serializer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">bulk_operation_serializer_class</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">many</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-0-101" name="__codelineno-0-101"></a>        <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">(</span><span class="n">raise_exception</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-0-102" name="__codelineno-0-102"></a>        <span class="n">qs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_queryset</span><span class="p">()</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">pk__in</span><span class="o">=</span><span class="p">[</span><span class="n">o</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">o</span> <span class="ow">in</span> <span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="p">])</span>
<a id="__codelineno-0-103" name="__codelineno-0-103"></a>
<a id="__codelineno-0-104" name="__codelineno-0-104"></a>        <span class="c1"># Map update data by object ID</span>
<a id="__codelineno-0-105" name="__codelineno-0-105"></a>        <span class="n">update_data</span> <span class="o">=</span> <span class="p">{</span><span class="n">obj</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">):</span> <span class="n">obj</span> <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="p">}</span>
<a id="__codelineno-0-106" name="__codelineno-0-106"></a>
<a id="__codelineno-0-107" name="__codelineno-0-107"></a>        <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">perform_bulk_update</span><span class="p">(</span><span class="n">qs</span><span class="p">,</span> <span class="n">update_data</span><span class="p">,</span> <span class="n">partial</span><span class="o">=</span><span class="n">partial</span><span class="p">)</span>
<a id="__codelineno-0-108" name="__codelineno-0-108"></a>
<a id="__codelineno-0-109" name="__codelineno-0-109"></a>        <span class="c1"># 2.0 TODO: this should be wrapped with a paginator so as to match the same format as the list endpoint,</span>
<a id="__codelineno-0-110" name="__codelineno-0-110"></a>        <span class="c1"># i.e. `{&quot;results&quot;: [{instance}, {instance}, ...]}` instead of bare list `[{instance}, {instance}, ...]`</span>
<a id="__codelineno-0-111" name="__codelineno-0-111"></a>        <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_200_OK</span><span class="p">)</span>
<a id="__codelineno-0-112" name="__codelineno-0-112"></a>
<a id="__codelineno-0-113" name="__codelineno-0-113"></a>    <span class="k">def</span> <span class="nf">perform_bulk_update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">objects</span><span class="p">,</span> <span class="n">update_data</span><span class="p">,</span> <span class="n">partial</span><span class="p">):</span>
<a id="__codelineno-0-114" name="__codelineno-0-114"></a>        <span class="k">with</span> <span class="n">transaction</span><span class="o">.</span><span class="n">atomic</span><span class="p">():</span>
<a id="__codelineno-0-115" name="__codelineno-0-115"></a>            <span class="n">data_list</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-116" name="__codelineno-0-116"></a>            <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">objects</span><span class="p">:</span>
<a id="__codelineno-0-117" name="__codelineno-0-117"></a>                <span class="n">data</span> <span class="o">=</span> <span class="n">update_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">id</span><span class="p">))</span>
<a id="__codelineno-0-118" name="__codelineno-0-118"></a>                <span class="n">serializer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_serializer</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">partial</span><span class="o">=</span><span class="n">partial</span><span class="p">)</span>
<a id="__codelineno-0-119" name="__codelineno-0-119"></a>                <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">(</span><span class="n">raise_exception</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-0-120" name="__codelineno-0-120"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">perform_update</span><span class="p">(</span><span class="n">serializer</span><span class="p">)</span>
<a id="__codelineno-0-121" name="__codelineno-0-121"></a>                <span class="n">data_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
<a id="__codelineno-0-122" name="__codelineno-0-122"></a>
<a id="__codelineno-0-123" name="__codelineno-0-123"></a>            <span class="k">return</span> <span class="n">data_list</span>
<a id="__codelineno-0-124" name="__codelineno-0-124"></a>
<a id="__codelineno-0-125" name="__codelineno-0-125"></a>    <span class="k">def</span> <span class="nf">bulk_partial_update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<a id="__codelineno-0-126" name="__codelineno-0-126"></a>        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;partial&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
<a id="__codelineno-0-127" name="__codelineno-0-127"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">bulk_update</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">











  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="nautobot.apps.api.ChoiceField" class="doc doc-heading">
          <code>nautobot.apps.api.ChoiceField</code>


<a href="#nautobot.apps.api.ChoiceField" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code><span title="rest_framework.serializers">serializers</span>.<span title="rest_framework.serializers.Field">Field</span></code></p>

  
      <p>Represent a ChoiceField as {'value': <DB value>, 'label': <string>}. Accepts a single value on write.</p>
<p>:param choices: An iterable of choices in the form (value, key).
:param allow_blank: Allow blank values in addition to the listed choices.</p>

            <details class="quote">
              <summary>Source code in <code>nautobot/core/api/fields.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-21">21</a></span>
<span class="normal"><a href="#__codelineno-0-22">22</a></span>
<span class="normal"><a href="#__codelineno-0-23">23</a></span>
<span class="normal"><a href="#__codelineno-0-24">24</a></span>
<span class="normal"><a href="#__codelineno-0-25">25</a></span>
<span class="normal"><a href="#__codelineno-0-26">26</a></span>
<span class="normal"><a href="#__codelineno-0-27">27</a></span>
<span class="normal"><a href="#__codelineno-0-28">28</a></span>
<span class="normal"><a href="#__codelineno-0-29">29</a></span>
<span class="normal"><a href="#__codelineno-0-30">30</a></span>
<span class="normal"><a href="#__codelineno-0-31">31</a></span>
<span class="normal"><a href="#__codelineno-0-32">32</a></span>
<span class="normal"><a href="#__codelineno-0-33">33</a></span>
<span class="normal"><a href="#__codelineno-0-34">34</a></span>
<span class="normal"><a href="#__codelineno-0-35">35</a></span>
<span class="normal"><a href="#__codelineno-0-36">36</a></span>
<span class="normal"><a href="#__codelineno-0-37">37</a></span>
<span class="normal"><a href="#__codelineno-0-38">38</a></span>
<span class="normal"><a href="#__codelineno-0-39">39</a></span>
<span class="normal"><a href="#__codelineno-0-40">40</a></span>
<span class="normal"><a href="#__codelineno-0-41">41</a></span>
<span class="normal"><a href="#__codelineno-0-42">42</a></span>
<span class="normal"><a href="#__codelineno-0-43">43</a></span>
<span class="normal"><a href="#__codelineno-0-44">44</a></span>
<span class="normal"><a href="#__codelineno-0-45">45</a></span>
<span class="normal"><a href="#__codelineno-0-46">46</a></span>
<span class="normal"><a href="#__codelineno-0-47">47</a></span>
<span class="normal"><a href="#__codelineno-0-48">48</a></span>
<span class="normal"><a href="#__codelineno-0-49">49</a></span>
<span class="normal"><a href="#__codelineno-0-50">50</a></span>
<span class="normal"><a href="#__codelineno-0-51">51</a></span>
<span class="normal"><a href="#__codelineno-0-52">52</a></span>
<span class="normal"><a href="#__codelineno-0-53">53</a></span>
<span class="normal"><a href="#__codelineno-0-54">54</a></span>
<span class="normal"><a href="#__codelineno-0-55">55</a></span>
<span class="normal"><a href="#__codelineno-0-56">56</a></span>
<span class="normal"><a href="#__codelineno-0-57">57</a></span>
<span class="normal"><a href="#__codelineno-0-58">58</a></span>
<span class="normal"><a href="#__codelineno-0-59">59</a></span>
<span class="normal"><a href="#__codelineno-0-60">60</a></span>
<span class="normal"><a href="#__codelineno-0-61">61</a></span>
<span class="normal"><a href="#__codelineno-0-62">62</a></span>
<span class="normal"><a href="#__codelineno-0-63">63</a></span>
<span class="normal"><a href="#__codelineno-0-64">64</a></span>
<span class="normal"><a href="#__codelineno-0-65">65</a></span>
<span class="normal"><a href="#__codelineno-0-66">66</a></span>
<span class="normal"><a href="#__codelineno-0-67">67</a></span>
<span class="normal"><a href="#__codelineno-0-68">68</a></span>
<span class="normal"><a href="#__codelineno-0-69">69</a></span>
<span class="normal"><a href="#__codelineno-0-70">70</a></span>
<span class="normal"><a href="#__codelineno-0-71">71</a></span>
<span class="normal"><a href="#__codelineno-0-72">72</a></span>
<span class="normal"><a href="#__codelineno-0-73">73</a></span>
<span class="normal"><a href="#__codelineno-0-74">74</a></span>
<span class="normal"><a href="#__codelineno-0-75">75</a></span>
<span class="normal"><a href="#__codelineno-0-76">76</a></span>
<span class="normal"><a href="#__codelineno-0-77">77</a></span>
<span class="normal"><a href="#__codelineno-0-78">78</a></span>
<span class="normal"><a href="#__codelineno-0-79">79</a></span>
<span class="normal"><a href="#__codelineno-0-80">80</a></span>
<span class="normal"><a href="#__codelineno-0-81">81</a></span>
<span class="normal"><a href="#__codelineno-0-82">82</a></span>
<span class="normal"><a href="#__codelineno-0-83">83</a></span>
<span class="normal"><a href="#__codelineno-0-84">84</a></span>
<span class="normal"><a href="#__codelineno-0-85">85</a></span>
<span class="normal"><a href="#__codelineno-0-86">86</a></span>
<span class="normal"><a href="#__codelineno-0-87">87</a></span>
<span class="normal"><a href="#__codelineno-0-88">88</a></span>
<span class="normal"><a href="#__codelineno-0-89">89</a></span>
<span class="normal"><a href="#__codelineno-0-90">90</a></span>
<span class="normal"><a href="#__codelineno-0-91">91</a></span>
<span class="normal"><a href="#__codelineno-0-92">92</a></span>
<span class="normal"><a href="#__codelineno-0-93">93</a></span>
<span class="normal"><a href="#__codelineno-0-94">94</a></span>
<span class="normal"><a href="#__codelineno-0-95">95</a></span>
<span class="normal"><a href="#__codelineno-0-96">96</a></span>
<span class="normal"><a href="#__codelineno-0-97">97</a></span>
<span class="normal"><a href="#__codelineno-0-98">98</a></span>
<span class="normal"><a href="#__codelineno-0-99">99</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-21" name="__codelineno-0-21"></a><span class="k">class</span> <span class="nc">ChoiceField</span><span class="p">(</span><span class="n">serializers</span><span class="o">.</span><span class="n">Field</span><span class="p">):</span>
<a id="__codelineno-0-22" name="__codelineno-0-22"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-23" name="__codelineno-0-23"></a><span class="sd">    Represent a ChoiceField as {&#39;value&#39;: &lt;DB value&gt;, &#39;label&#39;: &lt;string&gt;}. Accepts a single value on write.</span>
<a id="__codelineno-0-24" name="__codelineno-0-24"></a>
<a id="__codelineno-0-25" name="__codelineno-0-25"></a><span class="sd">    :param choices: An iterable of choices in the form (value, key).</span>
<a id="__codelineno-0-26" name="__codelineno-0-26"></a><span class="sd">    :param allow_blank: Allow blank values in addition to the listed choices.</span>
<a id="__codelineno-0-27" name="__codelineno-0-27"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-28" name="__codelineno-0-28"></a>
<a id="__codelineno-0-29" name="__codelineno-0-29"></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">choices</span><span class="p">,</span> <span class="n">allow_blank</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<a id="__codelineno-0-30" name="__codelineno-0-30"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">choiceset</span> <span class="o">=</span> <span class="n">choices</span>
<a id="__codelineno-0-31" name="__codelineno-0-31"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">allow_blank</span> <span class="o">=</span> <span class="n">allow_blank</span>
<a id="__codelineno-0-32" name="__codelineno-0-32"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_choices</span> <span class="o">=</span> <span class="p">{}</span>
<a id="__codelineno-0-33" name="__codelineno-0-33"></a>
<a id="__codelineno-0-34" name="__codelineno-0-34"></a>        <span class="c1"># Unpack grouped choices</span>
<a id="__codelineno-0-35" name="__codelineno-0-35"></a>        <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">choices</span><span class="p">:</span>
<a id="__codelineno-0-36" name="__codelineno-0-36"></a>            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">)):</span>
<a id="__codelineno-0-37" name="__codelineno-0-37"></a>                <span class="k">for</span> <span class="n">k2</span><span class="p">,</span> <span class="n">v2</span> <span class="ow">in</span> <span class="n">v</span><span class="p">:</span>
<a id="__codelineno-0-38" name="__codelineno-0-38"></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_choices</span><span class="p">[</span><span class="n">k2</span><span class="p">]</span> <span class="o">=</span> <span class="n">v2</span>
<a id="__codelineno-0-39" name="__codelineno-0-39"></a>            <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-40" name="__codelineno-0-40"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_choices</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span>
<a id="__codelineno-0-41" name="__codelineno-0-41"></a>
<a id="__codelineno-0-42" name="__codelineno-0-42"></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
<a id="__codelineno-0-43" name="__codelineno-0-43"></a>
<a id="__codelineno-0-44" name="__codelineno-0-44"></a>    <span class="k">def</span> <span class="nf">validate_empty_values</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
<a id="__codelineno-0-45" name="__codelineno-0-45"></a>        <span class="c1"># Convert null to an empty string unless allow_null == True</span>
<a id="__codelineno-0-46" name="__codelineno-0-46"></a>        <span class="k">if</span> <span class="n">data</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-47" name="__codelineno-0-47"></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">allow_null</span><span class="p">:</span>
<a id="__codelineno-0-48" name="__codelineno-0-48"></a>                <span class="k">return</span> <span class="kc">True</span><span class="p">,</span> <span class="kc">None</span>
<a id="__codelineno-0-49" name="__codelineno-0-49"></a>            <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-50" name="__codelineno-0-50"></a>                <span class="n">data</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
<a id="__codelineno-0-51" name="__codelineno-0-51"></a>        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">validate_empty_values</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<a id="__codelineno-0-52" name="__codelineno-0-52"></a>
<a id="__codelineno-0-53" name="__codelineno-0-53"></a>    <span class="k">def</span> <span class="nf">to_representation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
<a id="__codelineno-0-54" name="__codelineno-0-54"></a>        <span class="k">if</span> <span class="n">obj</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
<a id="__codelineno-0-55" name="__codelineno-0-55"></a>            <span class="k">return</span> <span class="kc">None</span>
<a id="__codelineno-0-56" name="__codelineno-0-56"></a>        <span class="k">return</span> <span class="n">OrderedDict</span><span class="p">([(</span><span class="s2">&quot;value&quot;</span><span class="p">,</span> <span class="n">obj</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;label&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_choices</span><span class="p">[</span><span class="n">obj</span><span class="p">])])</span>
<a id="__codelineno-0-57" name="__codelineno-0-57"></a>
<a id="__codelineno-0-58" name="__codelineno-0-58"></a>    <span class="k">def</span> <span class="nf">to_internal_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
<a id="__codelineno-0-59" name="__codelineno-0-59"></a>        <span class="k">if</span> <span class="n">data</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
<a id="__codelineno-0-60" name="__codelineno-0-60"></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">allow_blank</span><span class="p">:</span>
<a id="__codelineno-0-61" name="__codelineno-0-61"></a>                <span class="k">return</span> <span class="n">data</span>
<a id="__codelineno-0-62" name="__codelineno-0-62"></a>            <span class="k">raise</span> <span class="n">ValidationError</span><span class="p">(</span><span class="s2">&quot;This field may not be blank.&quot;</span><span class="p">)</span>
<a id="__codelineno-0-63" name="__codelineno-0-63"></a>
<a id="__codelineno-0-64" name="__codelineno-0-64"></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
<a id="__codelineno-0-65" name="__codelineno-0-65"></a>            <span class="k">if</span> <span class="s2">&quot;value&quot;</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
<a id="__codelineno-0-66" name="__codelineno-0-66"></a>                <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;value&quot;</span><span class="p">]</span>
<a id="__codelineno-0-67" name="__codelineno-0-67"></a>            <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-68" name="__codelineno-0-68"></a>                <span class="k">raise</span> <span class="n">ValidationError</span><span class="p">(</span>
<a id="__codelineno-0-69" name="__codelineno-0-69"></a>                    <span class="s1">&#39;Value must be passed directly (e.g. &quot;foo&quot;: 123) &#39;</span>
<a id="__codelineno-0-70" name="__codelineno-0-70"></a>                    <span class="s1">&#39;or as a dict with key &quot;value&quot; (e.g. &quot;foo&quot;: {&quot;value&quot;: 123}).&#39;</span>
<a id="__codelineno-0-71" name="__codelineno-0-71"></a>                <span class="p">)</span>
<a id="__codelineno-0-72" name="__codelineno-0-72"></a>
<a id="__codelineno-0-73" name="__codelineno-0-73"></a>        <span class="c1"># Provide an explicit error message if the request is trying to write a dict or list</span>
<a id="__codelineno-0-74" name="__codelineno-0-74"></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
<a id="__codelineno-0-75" name="__codelineno-0-75"></a>            <span class="k">raise</span> <span class="n">ValidationError</span><span class="p">(</span><span class="s1">&#39;Value must be passed directly (e.g. &quot;foo&quot;: 123); do not use a list.&#39;</span><span class="p">)</span>
<a id="__codelineno-0-76" name="__codelineno-0-76"></a>
<a id="__codelineno-0-77" name="__codelineno-0-77"></a>        <span class="c1"># Check for string representations of boolean/integer values</span>
<a id="__codelineno-0-78" name="__codelineno-0-78"></a>        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s2">&quot;lower&quot;</span><span class="p">):</span>
<a id="__codelineno-0-79" name="__codelineno-0-79"></a>            <span class="k">if</span> <span class="n">data</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;true&quot;</span><span class="p">:</span>
<a id="__codelineno-0-80" name="__codelineno-0-80"></a>                <span class="n">data</span> <span class="o">=</span> <span class="kc">True</span>
<a id="__codelineno-0-81" name="__codelineno-0-81"></a>            <span class="k">elif</span> <span class="n">data</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;false&quot;</span><span class="p">:</span>
<a id="__codelineno-0-82" name="__codelineno-0-82"></a>                <span class="n">data</span> <span class="o">=</span> <span class="kc">False</span>
<a id="__codelineno-0-83" name="__codelineno-0-83"></a>            <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-84" name="__codelineno-0-84"></a>                <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-0-85" name="__codelineno-0-85"></a>                    <span class="n">data</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<a id="__codelineno-0-86" name="__codelineno-0-86"></a>                <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
<a id="__codelineno-0-87" name="__codelineno-0-87"></a>                    <span class="k">pass</span>
<a id="__codelineno-0-88" name="__codelineno-0-88"></a>
<a id="__codelineno-0-89" name="__codelineno-0-89"></a>        <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-0-90" name="__codelineno-0-90"></a>            <span class="k">if</span> <span class="n">data</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_choices</span><span class="p">:</span>
<a id="__codelineno-0-91" name="__codelineno-0-91"></a>                <span class="k">return</span> <span class="n">data</span>
<a id="__codelineno-0-92" name="__codelineno-0-92"></a>        <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>  <span class="c1"># Input is an unhashable type</span>
<a id="__codelineno-0-93" name="__codelineno-0-93"></a>            <span class="k">pass</span>
<a id="__codelineno-0-94" name="__codelineno-0-94"></a>
<a id="__codelineno-0-95" name="__codelineno-0-95"></a>        <span class="k">raise</span> <span class="n">ValidationError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">data</span><span class="si">}</span><span class="s2"> is not a valid choice.&quot;</span><span class="p">)</span>
<a id="__codelineno-0-96" name="__codelineno-0-96"></a>
<a id="__codelineno-0-97" name="__codelineno-0-97"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-98" name="__codelineno-0-98"></a>    <span class="k">def</span> <span class="nf">choices</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-99" name="__codelineno-0-99"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_choices</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">











  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="nautobot.apps.api.ContentTypeField" class="doc doc-heading">
          <code>nautobot.apps.api.ContentTypeField</code>


<a href="#nautobot.apps.api.ContentTypeField" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code><span title="rest_framework.relations.RelatedField">RelatedField</span></code></p>

  
      <p>Represent a ContentType as '<app_label>.<model>'</p>

            <details class="quote">
              <summary>Source code in <code>nautobot/core/api/fields.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-102">102</a></span>
<span class="normal"><a href="#__codelineno-0-103">103</a></span>
<span class="normal"><a href="#__codelineno-0-104">104</a></span>
<span class="normal"><a href="#__codelineno-0-105">105</a></span>
<span class="normal"><a href="#__codelineno-0-106">106</a></span>
<span class="normal"><a href="#__codelineno-0-107">107</a></span>
<span class="normal"><a href="#__codelineno-0-108">108</a></span>
<span class="normal"><a href="#__codelineno-0-109">109</a></span>
<span class="normal"><a href="#__codelineno-0-110">110</a></span>
<span class="normal"><a href="#__codelineno-0-111">111</a></span>
<span class="normal"><a href="#__codelineno-0-112">112</a></span>
<span class="normal"><a href="#__codelineno-0-113">113</a></span>
<span class="normal"><a href="#__codelineno-0-114">114</a></span>
<span class="normal"><a href="#__codelineno-0-115">115</a></span>
<span class="normal"><a href="#__codelineno-0-116">116</a></span>
<span class="normal"><a href="#__codelineno-0-117">117</a></span>
<span class="normal"><a href="#__codelineno-0-118">118</a></span>
<span class="normal"><a href="#__codelineno-0-119">119</a></span>
<span class="normal"><a href="#__codelineno-0-120">120</a></span>
<span class="normal"><a href="#__codelineno-0-121">121</a></span>
<span class="normal"><a href="#__codelineno-0-122">122</a></span>
<span class="normal"><a href="#__codelineno-0-123">123</a></span>
<span class="normal"><a href="#__codelineno-0-124">124</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-102" name="__codelineno-0-102"></a><span class="nd">@extend_schema_field</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span>
<a id="__codelineno-0-103" name="__codelineno-0-103"></a><span class="k">class</span> <span class="nc">ContentTypeField</span><span class="p">(</span><span class="n">RelatedField</span><span class="p">):</span>
<a id="__codelineno-0-104" name="__codelineno-0-104"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-105" name="__codelineno-0-105"></a><span class="sd">    Represent a ContentType as &#39;&lt;app_label&gt;.&lt;model&gt;&#39;</span>
<a id="__codelineno-0-106" name="__codelineno-0-106"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-107" name="__codelineno-0-107"></a>
<a id="__codelineno-0-108" name="__codelineno-0-108"></a>    <span class="n">default_error_messages</span> <span class="o">=</span> <span class="p">{</span>
<a id="__codelineno-0-109" name="__codelineno-0-109"></a>        <span class="s2">&quot;does_not_exist&quot;</span><span class="p">:</span> <span class="s2">&quot;Invalid content type: </span><span class="si">{content_type}</span><span class="s2">&quot;</span><span class="p">,</span>
<a id="__codelineno-0-110" name="__codelineno-0-110"></a>        <span class="s2">&quot;invalid&quot;</span><span class="p">:</span> <span class="s2">&quot;Invalid value. Specify a content type as &#39;&lt;app_label&gt;.&lt;model_name&gt;&#39;.&quot;</span><span class="p">,</span>
<a id="__codelineno-0-111" name="__codelineno-0-111"></a>    <span class="p">}</span>
<a id="__codelineno-0-112" name="__codelineno-0-112"></a>
<a id="__codelineno-0-113" name="__codelineno-0-113"></a>    <span class="k">def</span> <span class="nf">to_internal_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
<a id="__codelineno-0-114" name="__codelineno-0-114"></a>        <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-0-115" name="__codelineno-0-115"></a>            <span class="n">app_label</span><span class="p">,</span> <span class="n">model</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)</span>
<a id="__codelineno-0-116" name="__codelineno-0-116"></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">queryset</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">app_label</span><span class="o">=</span><span class="n">app_label</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="n">model</span><span class="p">)</span>
<a id="__codelineno-0-117" name="__codelineno-0-117"></a>        <span class="k">except</span> <span class="n">ObjectDoesNotExist</span><span class="p">:</span>
<a id="__codelineno-0-118" name="__codelineno-0-118"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="s2">&quot;does_not_exist&quot;</span><span class="p">,</span> <span class="n">content_type</span><span class="o">=</span><span class="n">data</span><span class="p">)</span>
<a id="__codelineno-0-119" name="__codelineno-0-119"></a>        <span class="k">except</span> <span class="p">(</span><span class="ne">AttributeError</span><span class="p">,</span> <span class="ne">TypeError</span><span class="p">,</span> <span class="ne">ValueError</span><span class="p">):</span>
<a id="__codelineno-0-120" name="__codelineno-0-120"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="s2">&quot;invalid&quot;</span><span class="p">)</span>
<a id="__codelineno-0-121" name="__codelineno-0-121"></a>        <span class="k">return</span> <span class="kc">None</span>
<a id="__codelineno-0-122" name="__codelineno-0-122"></a>
<a id="__codelineno-0-123" name="__codelineno-0-123"></a>    <span class="k">def</span> <span class="nf">to_representation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
<a id="__codelineno-0-124" name="__codelineno-0-124"></a>        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">obj</span><span class="o">.</span><span class="n">app_label</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">obj</span><span class="o">.</span><span class="n">model</span><span class="si">}</span><span class="s2">&quot;</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">











  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="nautobot.apps.api.CustomFieldModelSerializerMixin" class="doc doc-heading">
          <code>nautobot.apps.api.CustomFieldModelSerializerMixin</code>


<a href="#nautobot.apps.api.CustomFieldModelSerializerMixin" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code><a class="autorefs autorefs-internal" title="nautobot.core.api.serializers.ValidatedModelSerializer" href="#nautobot.apps.api.ValidatedModelSerializer">ValidatedModelSerializer</a></code></p>

  
      <p>Extends ModelSerializer to render any CustomFields and their values associated with an object.</p>

            <details class="quote">
              <summary>Source code in <code>nautobot/core/api/serializers.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-890">890</a></span>
<span class="normal"><a href="#__codelineno-0-891">891</a></span>
<span class="normal"><a href="#__codelineno-0-892">892</a></span>
<span class="normal"><a href="#__codelineno-0-893">893</a></span>
<span class="normal"><a href="#__codelineno-0-894">894</a></span>
<span class="normal"><a href="#__codelineno-0-895">895</a></span>
<span class="normal"><a href="#__codelineno-0-896">896</a></span>
<span class="normal"><a href="#__codelineno-0-897">897</a></span>
<span class="normal"><a href="#__codelineno-0-898">898</a></span>
<span class="normal"><a href="#__codelineno-0-899">899</a></span>
<span class="normal"><a href="#__codelineno-0-900">900</a></span>
<span class="normal"><a href="#__codelineno-0-901">901</a></span>
<span class="normal"><a href="#__codelineno-0-902">902</a></span>
<span class="normal"><a href="#__codelineno-0-903">903</a></span>
<span class="normal"><a href="#__codelineno-0-904">904</a></span>
<span class="normal"><a href="#__codelineno-0-905">905</a></span>
<span class="normal"><a href="#__codelineno-0-906">906</a></span>
<span class="normal"><a href="#__codelineno-0-907">907</a></span>
<span class="normal"><a href="#__codelineno-0-908">908</a></span>
<span class="normal"><a href="#__codelineno-0-909">909</a></span>
<span class="normal"><a href="#__codelineno-0-910">910</a></span>
<span class="normal"><a href="#__codelineno-0-911">911</a></span>
<span class="normal"><a href="#__codelineno-0-912">912</a></span>
<span class="normal"><a href="#__codelineno-0-913">913</a></span>
<span class="normal"><a href="#__codelineno-0-914">914</a></span>
<span class="normal"><a href="#__codelineno-0-915">915</a></span>
<span class="normal"><a href="#__codelineno-0-916">916</a></span>
<span class="normal"><a href="#__codelineno-0-917">917</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-890" name="__codelineno-0-890"></a><span class="k">class</span> <span class="nc">CustomFieldModelSerializerMixin</span><span class="p">(</span><span class="n">ValidatedModelSerializer</span><span class="p">):</span>
<a id="__codelineno-0-891" name="__codelineno-0-891"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-892" name="__codelineno-0-892"></a><span class="sd">    Extends ModelSerializer to render any CustomFields and their values associated with an object.</span>
<a id="__codelineno-0-893" name="__codelineno-0-893"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-894" name="__codelineno-0-894"></a>
<a id="__codelineno-0-895" name="__codelineno-0-895"></a>    <span class="n">computed_fields</span> <span class="o">=</span> <span class="n">SerializerMethodField</span><span class="p">(</span><span class="n">read_only</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-0-896" name="__codelineno-0-896"></a>    <span class="n">custom_fields</span> <span class="o">=</span> <span class="n">CustomFieldsDataField</span><span class="p">(</span>
<a id="__codelineno-0-897" name="__codelineno-0-897"></a>        <span class="n">source</span><span class="o">=</span><span class="s2">&quot;_custom_field_data&quot;</span><span class="p">,</span>
<a id="__codelineno-0-898" name="__codelineno-0-898"></a>        <span class="n">default</span><span class="o">=</span><span class="n">CreateOnlyDefault</span><span class="p">(</span><span class="n">CustomFieldDefaultValues</span><span class="p">()),</span>
<a id="__codelineno-0-899" name="__codelineno-0-899"></a>    <span class="p">)</span>
<a id="__codelineno-0-900" name="__codelineno-0-900"></a>
<a id="__codelineno-0-901" name="__codelineno-0-901"></a>    <span class="nd">@extend_schema_field</span><span class="p">(</span><span class="n">OpenApiTypes</span><span class="o">.</span><span class="n">OBJECT</span><span class="p">)</span>
<a id="__codelineno-0-902" name="__codelineno-0-902"></a>    <span class="k">def</span> <span class="nf">get_computed_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
<a id="__codelineno-0-903" name="__codelineno-0-903"></a>        <span class="k">return</span> <span class="n">obj</span><span class="o">.</span><span class="n">get_computed_fields</span><span class="p">()</span>
<a id="__codelineno-0-904" name="__codelineno-0-904"></a>
<a id="__codelineno-0-905" name="__codelineno-0-905"></a>    <span class="k">def</span> <span class="nf">get_field_names</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">declared_fields</span><span class="p">,</span> <span class="n">info</span><span class="p">):</span>
<a id="__codelineno-0-906" name="__codelineno-0-906"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Ensure that &quot;custom_fields&quot; and &quot;computed_fields&quot; are included appropriately.&quot;&quot;&quot;</span>
<a id="__codelineno-0-907" name="__codelineno-0-907"></a>        <span class="n">fields</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">get_field_names</span><span class="p">(</span><span class="n">declared_fields</span><span class="p">,</span> <span class="n">info</span><span class="p">))</span>
<a id="__codelineno-0-908" name="__codelineno-0-908"></a>        <span class="c1"># Ensure that custom_fields field appears at the end, not the start, of the fields</span>
<a id="__codelineno-0-909" name="__codelineno-0-909"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">extend_field_names</span><span class="p">(</span><span class="n">fields</span><span class="p">,</span> <span class="s2">&quot;custom_fields&quot;</span><span class="p">)</span>
<a id="__codelineno-0-910" name="__codelineno-0-910"></a>        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_nested</span><span class="p">:</span>
<a id="__codelineno-0-911" name="__codelineno-0-911"></a>            <span class="c1"># Only include computed_fields as opt-in.</span>
<a id="__codelineno-0-912" name="__codelineno-0-912"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">extend_field_names</span><span class="p">(</span><span class="n">fields</span><span class="p">,</span> <span class="s2">&quot;computed_fields&quot;</span><span class="p">,</span> <span class="n">opt_in_only</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-0-913" name="__codelineno-0-913"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-914" name="__codelineno-0-914"></a>            <span class="c1"># As computed fields are expensive, do not include them in nested serializers even if opted-in at the root</span>
<a id="__codelineno-0-915" name="__codelineno-0-915"></a>            <span class="k">if</span> <span class="s2">&quot;computed_fields&quot;</span> <span class="ow">in</span> <span class="n">fields</span><span class="p">:</span>
<a id="__codelineno-0-916" name="__codelineno-0-916"></a>                <span class="n">fields</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="s2">&quot;computed_fields&quot;</span><span class="p">)</span>
<a id="__codelineno-0-917" name="__codelineno-0-917"></a>        <span class="k">return</span> <span class="n">fields</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">










<div class="doc doc-object doc-function">



<h3 id="nautobot.core.api.serializers.CustomFieldModelSerializerMixin.get_field_names" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_field_names</span><span class="p">(</span><span class="n">declared_fields</span><span class="p">,</span> <span class="n">info</span><span class="p">)</span></code>

<a href="#nautobot.core.api.serializers.CustomFieldModelSerializerMixin.get_field_names" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Ensure that "custom_fields" and "computed_fields" are included appropriately.</p>

          <details class="quote">
            <summary>Source code in <code>nautobot/core/api/serializers.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-905">905</a></span>
<span class="normal"><a href="#__codelineno-0-906">906</a></span>
<span class="normal"><a href="#__codelineno-0-907">907</a></span>
<span class="normal"><a href="#__codelineno-0-908">908</a></span>
<span class="normal"><a href="#__codelineno-0-909">909</a></span>
<span class="normal"><a href="#__codelineno-0-910">910</a></span>
<span class="normal"><a href="#__codelineno-0-911">911</a></span>
<span class="normal"><a href="#__codelineno-0-912">912</a></span>
<span class="normal"><a href="#__codelineno-0-913">913</a></span>
<span class="normal"><a href="#__codelineno-0-914">914</a></span>
<span class="normal"><a href="#__codelineno-0-915">915</a></span>
<span class="normal"><a href="#__codelineno-0-916">916</a></span>
<span class="normal"><a href="#__codelineno-0-917">917</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-905" name="__codelineno-0-905"></a><span class="k">def</span> <span class="nf">get_field_names</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">declared_fields</span><span class="p">,</span> <span class="n">info</span><span class="p">):</span>
<a id="__codelineno-0-906" name="__codelineno-0-906"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Ensure that &quot;custom_fields&quot; and &quot;computed_fields&quot; are included appropriately.&quot;&quot;&quot;</span>
<a id="__codelineno-0-907" name="__codelineno-0-907"></a>    <span class="n">fields</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">get_field_names</span><span class="p">(</span><span class="n">declared_fields</span><span class="p">,</span> <span class="n">info</span><span class="p">))</span>
<a id="__codelineno-0-908" name="__codelineno-0-908"></a>    <span class="c1"># Ensure that custom_fields field appears at the end, not the start, of the fields</span>
<a id="__codelineno-0-909" name="__codelineno-0-909"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">extend_field_names</span><span class="p">(</span><span class="n">fields</span><span class="p">,</span> <span class="s2">&quot;custom_fields&quot;</span><span class="p">)</span>
<a id="__codelineno-0-910" name="__codelineno-0-910"></a>    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_nested</span><span class="p">:</span>
<a id="__codelineno-0-911" name="__codelineno-0-911"></a>        <span class="c1"># Only include computed_fields as opt-in.</span>
<a id="__codelineno-0-912" name="__codelineno-0-912"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">extend_field_names</span><span class="p">(</span><span class="n">fields</span><span class="p">,</span> <span class="s2">&quot;computed_fields&quot;</span><span class="p">,</span> <span class="n">opt_in_only</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-0-913" name="__codelineno-0-913"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-914" name="__codelineno-0-914"></a>        <span class="c1"># As computed fields are expensive, do not include them in nested serializers even if opted-in at the root</span>
<a id="__codelineno-0-915" name="__codelineno-0-915"></a>        <span class="k">if</span> <span class="s2">&quot;computed_fields&quot;</span> <span class="ow">in</span> <span class="n">fields</span><span class="p">:</span>
<a id="__codelineno-0-916" name="__codelineno-0-916"></a>            <span class="n">fields</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="s2">&quot;computed_fields&quot;</span><span class="p">)</span>
<a id="__codelineno-0-917" name="__codelineno-0-917"></a>    <span class="k">return</span> <span class="n">fields</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="nautobot.apps.api.CustomFieldModelViewSet" class="doc doc-heading">
          <code>nautobot.apps.api.CustomFieldModelViewSet</code>


<a href="#nautobot.apps.api.CustomFieldModelViewSet" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code><a class="autorefs autorefs-internal" title="nautobot.core.api.views.ModelViewSet" href="#nautobot.apps.api.ModelViewSet">ModelViewSet</a></code></p>

  
      <p>Include the applicable set of CustomFields in the ModelViewSet context.</p>

            <details class="quote">
              <summary>Source code in <code>nautobot/extras/api/views.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-232">232</a></span>
<span class="normal"><a href="#__codelineno-0-233">233</a></span>
<span class="normal"><a href="#__codelineno-0-234">234</a></span>
<span class="normal"><a href="#__codelineno-0-235">235</a></span>
<span class="normal"><a href="#__codelineno-0-236">236</a></span>
<span class="normal"><a href="#__codelineno-0-237">237</a></span>
<span class="normal"><a href="#__codelineno-0-238">238</a></span>
<span class="normal"><a href="#__codelineno-0-239">239</a></span>
<span class="normal"><a href="#__codelineno-0-240">240</a></span>
<span class="normal"><a href="#__codelineno-0-241">241</a></span>
<span class="normal"><a href="#__codelineno-0-242">242</a></span>
<span class="normal"><a href="#__codelineno-0-243">243</a></span>
<span class="normal"><a href="#__codelineno-0-244">244</a></span>
<span class="normal"><a href="#__codelineno-0-245">245</a></span>
<span class="normal"><a href="#__codelineno-0-246">246</a></span>
<span class="normal"><a href="#__codelineno-0-247">247</a></span>
<span class="normal"><a href="#__codelineno-0-248">248</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-232" name="__codelineno-0-232"></a><span class="k">class</span> <span class="nc">CustomFieldModelViewSet</span><span class="p">(</span><span class="n">ModelViewSet</span><span class="p">):</span>
<a id="__codelineno-0-233" name="__codelineno-0-233"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-234" name="__codelineno-0-234"></a><span class="sd">    Include the applicable set of CustomFields in the ModelViewSet context.</span>
<a id="__codelineno-0-235" name="__codelineno-0-235"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-236" name="__codelineno-0-236"></a>
<a id="__codelineno-0-237" name="__codelineno-0-237"></a>    <span class="k">def</span> <span class="nf">get_serializer_context</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-238" name="__codelineno-0-238"></a>        <span class="c1"># Gather all custom fields for the model</span>
<a id="__codelineno-0-239" name="__codelineno-0-239"></a>        <span class="n">content_type</span> <span class="o">=</span> <span class="n">ContentType</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get_for_model</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">queryset</span><span class="o">.</span><span class="n">model</span><span class="p">)</span>
<a id="__codelineno-0-240" name="__codelineno-0-240"></a>        <span class="n">custom_fields</span> <span class="o">=</span> <span class="n">content_type</span><span class="o">.</span><span class="n">custom_fields</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
<a id="__codelineno-0-241" name="__codelineno-0-241"></a>
<a id="__codelineno-0-242" name="__codelineno-0-242"></a>        <span class="n">context</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">get_serializer_context</span><span class="p">()</span>
<a id="__codelineno-0-243" name="__codelineno-0-243"></a>        <span class="n">context</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
<a id="__codelineno-0-244" name="__codelineno-0-244"></a>            <span class="p">{</span>
<a id="__codelineno-0-245" name="__codelineno-0-245"></a>                <span class="s2">&quot;custom_fields&quot;</span><span class="p">:</span> <span class="n">custom_fields</span><span class="p">,</span>
<a id="__codelineno-0-246" name="__codelineno-0-246"></a>            <span class="p">}</span>
<a id="__codelineno-0-247" name="__codelineno-0-247"></a>        <span class="p">)</span>
<a id="__codelineno-0-248" name="__codelineno-0-248"></a>        <span class="k">return</span> <span class="n">context</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">











  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="nautobot.apps.api.GetObjectCountsView" class="doc doc-heading">
          <code>nautobot.apps.api.GetObjectCountsView</code>


<a href="#nautobot.apps.api.GetObjectCountsView" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code><span title="nautobot.core.api.views.NautobotAPIVersionMixin">NautobotAPIVersionMixin</span></code>, <code><span title="rest_framework.views.APIView">APIView</span></code></p>

  
      <p>Enumerate the models listed on the Nautobot home page and return data structure
containing verbose_name_plural, url and count.</p>

            <details class="quote">
              <summary>Source code in <code>nautobot/core/api/views.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-804">804</a></span>
<span class="normal"><a href="#__codelineno-0-805">805</a></span>
<span class="normal"><a href="#__codelineno-0-806">806</a></span>
<span class="normal"><a href="#__codelineno-0-807">807</a></span>
<span class="normal"><a href="#__codelineno-0-808">808</a></span>
<span class="normal"><a href="#__codelineno-0-809">809</a></span>
<span class="normal"><a href="#__codelineno-0-810">810</a></span>
<span class="normal"><a href="#__codelineno-0-811">811</a></span>
<span class="normal"><a href="#__codelineno-0-812">812</a></span>
<span class="normal"><a href="#__codelineno-0-813">813</a></span>
<span class="normal"><a href="#__codelineno-0-814">814</a></span>
<span class="normal"><a href="#__codelineno-0-815">815</a></span>
<span class="normal"><a href="#__codelineno-0-816">816</a></span>
<span class="normal"><a href="#__codelineno-0-817">817</a></span>
<span class="normal"><a href="#__codelineno-0-818">818</a></span>
<span class="normal"><a href="#__codelineno-0-819">819</a></span>
<span class="normal"><a href="#__codelineno-0-820">820</a></span>
<span class="normal"><a href="#__codelineno-0-821">821</a></span>
<span class="normal"><a href="#__codelineno-0-822">822</a></span>
<span class="normal"><a href="#__codelineno-0-823">823</a></span>
<span class="normal"><a href="#__codelineno-0-824">824</a></span>
<span class="normal"><a href="#__codelineno-0-825">825</a></span>
<span class="normal"><a href="#__codelineno-0-826">826</a></span>
<span class="normal"><a href="#__codelineno-0-827">827</a></span>
<span class="normal"><a href="#__codelineno-0-828">828</a></span>
<span class="normal"><a href="#__codelineno-0-829">829</a></span>
<span class="normal"><a href="#__codelineno-0-830">830</a></span>
<span class="normal"><a href="#__codelineno-0-831">831</a></span>
<span class="normal"><a href="#__codelineno-0-832">832</a></span>
<span class="normal"><a href="#__codelineno-0-833">833</a></span>
<span class="normal"><a href="#__codelineno-0-834">834</a></span>
<span class="normal"><a href="#__codelineno-0-835">835</a></span>
<span class="normal"><a href="#__codelineno-0-836">836</a></span>
<span class="normal"><a href="#__codelineno-0-837">837</a></span>
<span class="normal"><a href="#__codelineno-0-838">838</a></span>
<span class="normal"><a href="#__codelineno-0-839">839</a></span>
<span class="normal"><a href="#__codelineno-0-840">840</a></span>
<span class="normal"><a href="#__codelineno-0-841">841</a></span>
<span class="normal"><a href="#__codelineno-0-842">842</a></span>
<span class="normal"><a href="#__codelineno-0-843">843</a></span>
<span class="normal"><a href="#__codelineno-0-844">844</a></span>
<span class="normal"><a href="#__codelineno-0-845">845</a></span>
<span class="normal"><a href="#__codelineno-0-846">846</a></span>
<span class="normal"><a href="#__codelineno-0-847">847</a></span>
<span class="normal"><a href="#__codelineno-0-848">848</a></span>
<span class="normal"><a href="#__codelineno-0-849">849</a></span>
<span class="normal"><a href="#__codelineno-0-850">850</a></span>
<span class="normal"><a href="#__codelineno-0-851">851</a></span>
<span class="normal"><a href="#__codelineno-0-852">852</a></span>
<span class="normal"><a href="#__codelineno-0-853">853</a></span>
<span class="normal"><a href="#__codelineno-0-854">854</a></span>
<span class="normal"><a href="#__codelineno-0-855">855</a></span>
<span class="normal"><a href="#__codelineno-0-856">856</a></span>
<span class="normal"><a href="#__codelineno-0-857">857</a></span>
<span class="normal"><a href="#__codelineno-0-858">858</a></span>
<span class="normal"><a href="#__codelineno-0-859">859</a></span>
<span class="normal"><a href="#__codelineno-0-860">860</a></span>
<span class="normal"><a href="#__codelineno-0-861">861</a></span>
<span class="normal"><a href="#__codelineno-0-862">862</a></span>
<span class="normal"><a href="#__codelineno-0-863">863</a></span>
<span class="normal"><a href="#__codelineno-0-864">864</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-804" name="__codelineno-0-804"></a><span class="k">class</span> <span class="nc">GetObjectCountsView</span><span class="p">(</span><span class="n">NautobotAPIVersionMixin</span><span class="p">,</span> <span class="n">APIView</span><span class="p">):</span>
<a id="__codelineno-0-805" name="__codelineno-0-805"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-806" name="__codelineno-0-806"></a><span class="sd">    Enumerate the models listed on the Nautobot home page and return data structure</span>
<a id="__codelineno-0-807" name="__codelineno-0-807"></a><span class="sd">    containing verbose_name_plural, url and count.</span>
<a id="__codelineno-0-808" name="__codelineno-0-808"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-809" name="__codelineno-0-809"></a>
<a id="__codelineno-0-810" name="__codelineno-0-810"></a>    <span class="n">permission_classes</span> <span class="o">=</span> <span class="p">[</span><span class="n">IsAuthenticated</span><span class="p">]</span>
<a id="__codelineno-0-811" name="__codelineno-0-811"></a>
<a id="__codelineno-0-812" name="__codelineno-0-812"></a>    <span class="nd">@extend_schema</span><span class="p">(</span><span class="n">exclude</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-0-813" name="__codelineno-0-813"></a>    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
<a id="__codelineno-0-814" name="__codelineno-0-814"></a>        <span class="n">object_counts</span> <span class="o">=</span> <span class="p">{</span>
<a id="__codelineno-0-815" name="__codelineno-0-815"></a>            <span class="s2">&quot;Inventory&quot;</span><span class="p">:</span> <span class="p">[</span>
<a id="__codelineno-0-816" name="__codelineno-0-816"></a>                <span class="p">{</span><span class="s2">&quot;model&quot;</span><span class="p">:</span> <span class="s2">&quot;dcim.rack&quot;</span><span class="p">},</span>
<a id="__codelineno-0-817" name="__codelineno-0-817"></a>                <span class="p">{</span><span class="s2">&quot;model&quot;</span><span class="p">:</span> <span class="s2">&quot;dcim.devicetype&quot;</span><span class="p">},</span>
<a id="__codelineno-0-818" name="__codelineno-0-818"></a>                <span class="p">{</span><span class="s2">&quot;model&quot;</span><span class="p">:</span> <span class="s2">&quot;dcim.device&quot;</span><span class="p">},</span>
<a id="__codelineno-0-819" name="__codelineno-0-819"></a>                <span class="p">{</span><span class="s2">&quot;model&quot;</span><span class="p">:</span> <span class="s2">&quot;dcim.virtualchassis&quot;</span><span class="p">},</span>
<a id="__codelineno-0-820" name="__codelineno-0-820"></a>                <span class="p">{</span><span class="s2">&quot;model&quot;</span><span class="p">:</span> <span class="s2">&quot;dcim.deviceredundancygroup&quot;</span><span class="p">},</span>
<a id="__codelineno-0-821" name="__codelineno-0-821"></a>                <span class="p">{</span><span class="s2">&quot;model&quot;</span><span class="p">:</span> <span class="s2">&quot;dcim.cable&quot;</span><span class="p">},</span>
<a id="__codelineno-0-822" name="__codelineno-0-822"></a>            <span class="p">],</span>
<a id="__codelineno-0-823" name="__codelineno-0-823"></a>            <span class="s2">&quot;Networks&quot;</span><span class="p">:</span> <span class="p">[</span>
<a id="__codelineno-0-824" name="__codelineno-0-824"></a>                <span class="p">{</span><span class="s2">&quot;model&quot;</span><span class="p">:</span> <span class="s2">&quot;ipam.vrf&quot;</span><span class="p">},</span>
<a id="__codelineno-0-825" name="__codelineno-0-825"></a>                <span class="p">{</span><span class="s2">&quot;model&quot;</span><span class="p">:</span> <span class="s2">&quot;ipam.prefix&quot;</span><span class="p">},</span>
<a id="__codelineno-0-826" name="__codelineno-0-826"></a>                <span class="p">{</span><span class="s2">&quot;model&quot;</span><span class="p">:</span> <span class="s2">&quot;ipam.ipaddress&quot;</span><span class="p">},</span>
<a id="__codelineno-0-827" name="__codelineno-0-827"></a>                <span class="p">{</span><span class="s2">&quot;model&quot;</span><span class="p">:</span> <span class="s2">&quot;ipam.vlan&quot;</span><span class="p">},</span>
<a id="__codelineno-0-828" name="__codelineno-0-828"></a>            <span class="p">],</span>
<a id="__codelineno-0-829" name="__codelineno-0-829"></a>            <span class="s2">&quot;Security&quot;</span><span class="p">:</span> <span class="p">[{</span><span class="s2">&quot;model&quot;</span><span class="p">:</span> <span class="s2">&quot;extras.secret&quot;</span><span class="p">}],</span>
<a id="__codelineno-0-830" name="__codelineno-0-830"></a>            <span class="s2">&quot;Platform&quot;</span><span class="p">:</span> <span class="p">[</span>
<a id="__codelineno-0-831" name="__codelineno-0-831"></a>                <span class="p">{</span><span class="s2">&quot;model&quot;</span><span class="p">:</span> <span class="s2">&quot;extras.gitrepository&quot;</span><span class="p">},</span>
<a id="__codelineno-0-832" name="__codelineno-0-832"></a>                <span class="p">{</span><span class="s2">&quot;model&quot;</span><span class="p">:</span> <span class="s2">&quot;extras.relationship&quot;</span><span class="p">},</span>
<a id="__codelineno-0-833" name="__codelineno-0-833"></a>                <span class="p">{</span><span class="s2">&quot;model&quot;</span><span class="p">:</span> <span class="s2">&quot;extras.computedfield&quot;</span><span class="p">},</span>
<a id="__codelineno-0-834" name="__codelineno-0-834"></a>                <span class="p">{</span><span class="s2">&quot;model&quot;</span><span class="p">:</span> <span class="s2">&quot;extras.customfield&quot;</span><span class="p">},</span>
<a id="__codelineno-0-835" name="__codelineno-0-835"></a>                <span class="p">{</span><span class="s2">&quot;model&quot;</span><span class="p">:</span> <span class="s2">&quot;extras.customlink&quot;</span><span class="p">},</span>
<a id="__codelineno-0-836" name="__codelineno-0-836"></a>                <span class="p">{</span><span class="s2">&quot;model&quot;</span><span class="p">:</span> <span class="s2">&quot;extras.tag&quot;</span><span class="p">},</span>
<a id="__codelineno-0-837" name="__codelineno-0-837"></a>                <span class="p">{</span><span class="s2">&quot;model&quot;</span><span class="p">:</span> <span class="s2">&quot;extras.status&quot;</span><span class="p">},</span>
<a id="__codelineno-0-838" name="__codelineno-0-838"></a>                <span class="p">{</span><span class="s2">&quot;model&quot;</span><span class="p">:</span> <span class="s2">&quot;extras.role&quot;</span><span class="p">},</span>
<a id="__codelineno-0-839" name="__codelineno-0-839"></a>            <span class="p">],</span>
<a id="__codelineno-0-840" name="__codelineno-0-840"></a>        <span class="p">}</span>
<a id="__codelineno-0-841" name="__codelineno-0-841"></a>        <span class="n">HIDE_RESTRICTED_UI</span> <span class="o">=</span> <span class="n">get_settings_or_config</span><span class="p">(</span><span class="s2">&quot;HIDE_RESTRICTED_UI&quot;</span><span class="p">)</span>
<a id="__codelineno-0-842" name="__codelineno-0-842"></a>
<a id="__codelineno-0-843" name="__codelineno-0-843"></a>        <span class="k">for</span> <span class="n">entry</span> <span class="ow">in</span> <span class="n">itertools</span><span class="o">.</span><span class="n">chain</span><span class="p">(</span><span class="o">*</span><span class="n">object_counts</span><span class="o">.</span><span class="n">values</span><span class="p">()):</span>
<a id="__codelineno-0-844" name="__codelineno-0-844"></a>            <span class="n">app_label</span><span class="p">,</span> <span class="n">model_name</span> <span class="o">=</span> <span class="n">entry</span><span class="p">[</span><span class="s2">&quot;model&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)</span>
<a id="__codelineno-0-845" name="__codelineno-0-845"></a>            <span class="n">model</span> <span class="o">=</span> <span class="n">apps</span><span class="o">.</span><span class="n">get_model</span><span class="p">(</span><span class="n">app_label</span><span class="p">,</span> <span class="n">model_name</span><span class="p">)</span>
<a id="__codelineno-0-846" name="__codelineno-0-846"></a>            <span class="n">permission</span> <span class="o">=</span> <span class="n">get_permission_for_model</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="s2">&quot;view&quot;</span><span class="p">)</span>
<a id="__codelineno-0-847" name="__codelineno-0-847"></a>            <span class="k">if</span> <span class="n">HIDE_RESTRICTED_UI</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">has_perm</span><span class="p">(</span><span class="n">permission</span><span class="p">):</span>
<a id="__codelineno-0-848" name="__codelineno-0-848"></a>                <span class="k">continue</span>
<a id="__codelineno-0-849" name="__codelineno-0-849"></a>            <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">model</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">verbose_name_plural</span><span class="p">}</span>
<a id="__codelineno-0-850" name="__codelineno-0-850"></a>            <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-0-851" name="__codelineno-0-851"></a>                <span class="n">data</span><span class="p">[</span><span class="s2">&quot;url&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">django_reverse</span><span class="p">(</span><span class="n">get_route_for_model</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="s2">&quot;list&quot;</span><span class="p">))</span>
<a id="__codelineno-0-852" name="__codelineno-0-852"></a>            <span class="k">except</span> <span class="n">NoReverseMatch</span><span class="p">:</span>
<a id="__codelineno-0-853" name="__codelineno-0-853"></a>                <span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<a id="__codelineno-0-854" name="__codelineno-0-854"></a>                <span class="n">route</span> <span class="o">=</span> <span class="n">get_route_for_model</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="s2">&quot;list&quot;</span><span class="p">)</span>
<a id="__codelineno-0-855" name="__codelineno-0-855"></a>                <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Handled expected exception when generating filter field: </span><span class="si">{</span><span class="n">route</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-856" name="__codelineno-0-856"></a>            <span class="n">manager</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">objects</span>
<a id="__codelineno-0-857" name="__codelineno-0-857"></a>            <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">has_perm</span><span class="p">(</span><span class="n">permission</span><span class="p">):</span>
<a id="__codelineno-0-858" name="__codelineno-0-858"></a>                <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">manager</span><span class="p">,</span> <span class="s2">&quot;restrict&quot;</span><span class="p">):</span>
<a id="__codelineno-0-859" name="__codelineno-0-859"></a>                    <span class="n">data</span><span class="p">[</span><span class="s2">&quot;count&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">restrict</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="p">)</span><span class="o">.</span><span class="n">count</span><span class="p">()</span>
<a id="__codelineno-0-860" name="__codelineno-0-860"></a>                <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-861" name="__codelineno-0-861"></a>                    <span class="n">data</span><span class="p">[</span><span class="s2">&quot;count&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">count</span><span class="p">()</span>
<a id="__codelineno-0-862" name="__codelineno-0-862"></a>            <span class="n">entry</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<a id="__codelineno-0-863" name="__codelineno-0-863"></a>
<a id="__codelineno-0-864" name="__codelineno-0-864"></a>        <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">object_counts</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">











  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="nautobot.apps.api.ModelViewSet" class="doc doc-heading">
          <code>nautobot.apps.api.ModelViewSet</code>


<a href="#nautobot.apps.api.ModelViewSet" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code><span title="nautobot.core.api.views.NautobotAPIVersionMixin">NautobotAPIVersionMixin</span></code>, <code><a class="autorefs autorefs-internal" title="nautobot.core.api.views.BulkUpdateModelMixin" href="#nautobot.apps.api.BulkUpdateModelMixin">BulkUpdateModelMixin</a></code>, <code><a class="autorefs autorefs-internal" title="nautobot.core.api.views.BulkDestroyModelMixin" href="#nautobot.apps.api.BulkDestroyModelMixin">BulkDestroyModelMixin</a></code>, <code><a class="autorefs autorefs-internal" title="nautobot.core.api.views.ModelViewSetMixin" href="#nautobot.apps.api.ModelViewSetMixin">ModelViewSetMixin</a></code>, <code><span title="rest_framework.viewsets.ModelViewSet">ModelViewSet_</span></code></p>

  
      <p>Extend DRF's ModelViewSet to support bulk update and delete functions.</p>

            <details class="quote">
              <summary>Source code in <code>nautobot/core/api/views.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-277">277</a></span>
<span class="normal"><a href="#__codelineno-0-278">278</a></span>
<span class="normal"><a href="#__codelineno-0-279">279</a></span>
<span class="normal"><a href="#__codelineno-0-280">280</a></span>
<span class="normal"><a href="#__codelineno-0-281">281</a></span>
<span class="normal"><a href="#__codelineno-0-282">282</a></span>
<span class="normal"><a href="#__codelineno-0-283">283</a></span>
<span class="normal"><a href="#__codelineno-0-284">284</a></span>
<span class="normal"><a href="#__codelineno-0-285">285</a></span>
<span class="normal"><a href="#__codelineno-0-286">286</a></span>
<span class="normal"><a href="#__codelineno-0-287">287</a></span>
<span class="normal"><a href="#__codelineno-0-288">288</a></span>
<span class="normal"><a href="#__codelineno-0-289">289</a></span>
<span class="normal"><a href="#__codelineno-0-290">290</a></span>
<span class="normal"><a href="#__codelineno-0-291">291</a></span>
<span class="normal"><a href="#__codelineno-0-292">292</a></span>
<span class="normal"><a href="#__codelineno-0-293">293</a></span>
<span class="normal"><a href="#__codelineno-0-294">294</a></span>
<span class="normal"><a href="#__codelineno-0-295">295</a></span>
<span class="normal"><a href="#__codelineno-0-296">296</a></span>
<span class="normal"><a href="#__codelineno-0-297">297</a></span>
<span class="normal"><a href="#__codelineno-0-298">298</a></span>
<span class="normal"><a href="#__codelineno-0-299">299</a></span>
<span class="normal"><a href="#__codelineno-0-300">300</a></span>
<span class="normal"><a href="#__codelineno-0-301">301</a></span>
<span class="normal"><a href="#__codelineno-0-302">302</a></span>
<span class="normal"><a href="#__codelineno-0-303">303</a></span>
<span class="normal"><a href="#__codelineno-0-304">304</a></span>
<span class="normal"><a href="#__codelineno-0-305">305</a></span>
<span class="normal"><a href="#__codelineno-0-306">306</a></span>
<span class="normal"><a href="#__codelineno-0-307">307</a></span>
<span class="normal"><a href="#__codelineno-0-308">308</a></span>
<span class="normal"><a href="#__codelineno-0-309">309</a></span>
<span class="normal"><a href="#__codelineno-0-310">310</a></span>
<span class="normal"><a href="#__codelineno-0-311">311</a></span>
<span class="normal"><a href="#__codelineno-0-312">312</a></span>
<span class="normal"><a href="#__codelineno-0-313">313</a></span>
<span class="normal"><a href="#__codelineno-0-314">314</a></span>
<span class="normal"><a href="#__codelineno-0-315">315</a></span>
<span class="normal"><a href="#__codelineno-0-316">316</a></span>
<span class="normal"><a href="#__codelineno-0-317">317</a></span>
<span class="normal"><a href="#__codelineno-0-318">318</a></span>
<span class="normal"><a href="#__codelineno-0-319">319</a></span>
<span class="normal"><a href="#__codelineno-0-320">320</a></span>
<span class="normal"><a href="#__codelineno-0-321">321</a></span>
<span class="normal"><a href="#__codelineno-0-322">322</a></span>
<span class="normal"><a href="#__codelineno-0-323">323</a></span>
<span class="normal"><a href="#__codelineno-0-324">324</a></span>
<span class="normal"><a href="#__codelineno-0-325">325</a></span>
<span class="normal"><a href="#__codelineno-0-326">326</a></span>
<span class="normal"><a href="#__codelineno-0-327">327</a></span>
<span class="normal"><a href="#__codelineno-0-328">328</a></span>
<span class="normal"><a href="#__codelineno-0-329">329</a></span>
<span class="normal"><a href="#__codelineno-0-330">330</a></span>
<span class="normal"><a href="#__codelineno-0-331">331</a></span>
<span class="normal"><a href="#__codelineno-0-332">332</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-277" name="__codelineno-0-277"></a><span class="k">class</span> <span class="nc">ModelViewSet</span><span class="p">(</span>
<a id="__codelineno-0-278" name="__codelineno-0-278"></a>    <span class="n">NautobotAPIVersionMixin</span><span class="p">,</span>
<a id="__codelineno-0-279" name="__codelineno-0-279"></a>    <span class="n">BulkUpdateModelMixin</span><span class="p">,</span>
<a id="__codelineno-0-280" name="__codelineno-0-280"></a>    <span class="n">BulkDestroyModelMixin</span><span class="p">,</span>
<a id="__codelineno-0-281" name="__codelineno-0-281"></a>    <span class="n">ModelViewSetMixin</span><span class="p">,</span>
<a id="__codelineno-0-282" name="__codelineno-0-282"></a>    <span class="n">ModelViewSet_</span><span class="p">,</span>
<a id="__codelineno-0-283" name="__codelineno-0-283"></a><span class="p">):</span>
<a id="__codelineno-0-284" name="__codelineno-0-284"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-285" name="__codelineno-0-285"></a><span class="sd">    Extend DRF&#39;s ModelViewSet to support bulk update and delete functions.</span>
<a id="__codelineno-0-286" name="__codelineno-0-286"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-287" name="__codelineno-0-287"></a>
<a id="__codelineno-0-288" name="__codelineno-0-288"></a>    <span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span> <span class="o">+</span> <span class="s2">&quot;.ModelViewSet&quot;</span><span class="p">)</span>
<a id="__codelineno-0-289" name="__codelineno-0-289"></a>
<a id="__codelineno-0-290" name="__codelineno-0-290"></a>    <span class="k">def</span> <span class="nf">_validate_objects</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">instance</span><span class="p">):</span>
<a id="__codelineno-0-291" name="__codelineno-0-291"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-292" name="__codelineno-0-292"></a><span class="sd">        Check that the provided instance or list of instances are matched by the current queryset. This confirms that</span>
<a id="__codelineno-0-293" name="__codelineno-0-293"></a><span class="sd">        any newly created or modified objects abide by the attributes granted by any applicable ObjectPermissions.</span>
<a id="__codelineno-0-294" name="__codelineno-0-294"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-295" name="__codelineno-0-295"></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">instance</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
<a id="__codelineno-0-296" name="__codelineno-0-296"></a>            <span class="c1"># Check that all instances are still included in the view&#39;s queryset</span>
<a id="__codelineno-0-297" name="__codelineno-0-297"></a>            <span class="n">conforming_count</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">queryset</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">pk__in</span><span class="o">=</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">pk</span> <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">instance</span><span class="p">])</span><span class="o">.</span><span class="n">count</span><span class="p">()</span>
<a id="__codelineno-0-298" name="__codelineno-0-298"></a>            <span class="k">if</span> <span class="n">conforming_count</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">instance</span><span class="p">):</span>
<a id="__codelineno-0-299" name="__codelineno-0-299"></a>                <span class="k">raise</span> <span class="n">ObjectDoesNotExist</span>
<a id="__codelineno-0-300" name="__codelineno-0-300"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-301" name="__codelineno-0-301"></a>            <span class="c1"># Check that the instance is matched by the view&#39;s queryset</span>
<a id="__codelineno-0-302" name="__codelineno-0-302"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">queryset</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">pk</span><span class="o">=</span><span class="n">instance</span><span class="o">.</span><span class="n">pk</span><span class="p">)</span>
<a id="__codelineno-0-303" name="__codelineno-0-303"></a>
<a id="__codelineno-0-304" name="__codelineno-0-304"></a>    <span class="k">def</span> <span class="nf">perform_create</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">serializer</span><span class="p">):</span>
<a id="__codelineno-0-305" name="__codelineno-0-305"></a>        <span class="n">model</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">queryset</span><span class="o">.</span><span class="n">model</span>
<a id="__codelineno-0-306" name="__codelineno-0-306"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Creating new </span><span class="si">{</span><span class="n">model</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">verbose_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-307" name="__codelineno-0-307"></a>
<a id="__codelineno-0-308" name="__codelineno-0-308"></a>        <span class="c1"># Enforce object-level permissions on save()</span>
<a id="__codelineno-0-309" name="__codelineno-0-309"></a>        <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-0-310" name="__codelineno-0-310"></a>            <span class="k">with</span> <span class="n">transaction</span><span class="o">.</span><span class="n">atomic</span><span class="p">():</span>
<a id="__codelineno-0-311" name="__codelineno-0-311"></a>                <span class="n">instance</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
<a id="__codelineno-0-312" name="__codelineno-0-312"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_validate_objects</span><span class="p">(</span><span class="n">instance</span><span class="p">)</span>
<a id="__codelineno-0-313" name="__codelineno-0-313"></a>        <span class="k">except</span> <span class="n">ObjectDoesNotExist</span><span class="p">:</span>
<a id="__codelineno-0-314" name="__codelineno-0-314"></a>            <span class="k">raise</span> <span class="n">PermissionDenied</span><span class="p">()</span>
<a id="__codelineno-0-315" name="__codelineno-0-315"></a>
<a id="__codelineno-0-316" name="__codelineno-0-316"></a>    <span class="k">def</span> <span class="nf">perform_update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">serializer</span><span class="p">):</span>
<a id="__codelineno-0-317" name="__codelineno-0-317"></a>        <span class="n">model</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">queryset</span><span class="o">.</span><span class="n">model</span>
<a id="__codelineno-0-318" name="__codelineno-0-318"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Updating </span><span class="si">{</span><span class="n">model</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">verbose_name</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">serializer</span><span class="o">.</span><span class="n">instance</span><span class="si">}</span><span class="s2"> (PK: </span><span class="si">{</span><span class="n">serializer</span><span class="o">.</span><span class="n">instance</span><span class="o">.</span><span class="n">pk</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">)</span>
<a id="__codelineno-0-319" name="__codelineno-0-319"></a>
<a id="__codelineno-0-320" name="__codelineno-0-320"></a>        <span class="c1"># Enforce object-level permissions on save()</span>
<a id="__codelineno-0-321" name="__codelineno-0-321"></a>        <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-0-322" name="__codelineno-0-322"></a>            <span class="k">with</span> <span class="n">transaction</span><span class="o">.</span><span class="n">atomic</span><span class="p">():</span>
<a id="__codelineno-0-323" name="__codelineno-0-323"></a>                <span class="n">instance</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
<a id="__codelineno-0-324" name="__codelineno-0-324"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_validate_objects</span><span class="p">(</span><span class="n">instance</span><span class="p">)</span>
<a id="__codelineno-0-325" name="__codelineno-0-325"></a>        <span class="k">except</span> <span class="n">ObjectDoesNotExist</span><span class="p">:</span>
<a id="__codelineno-0-326" name="__codelineno-0-326"></a>            <span class="k">raise</span> <span class="n">PermissionDenied</span><span class="p">()</span>
<a id="__codelineno-0-327" name="__codelineno-0-327"></a>
<a id="__codelineno-0-328" name="__codelineno-0-328"></a>    <span class="k">def</span> <span class="nf">perform_destroy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">instance</span><span class="p">):</span>
<a id="__codelineno-0-329" name="__codelineno-0-329"></a>        <span class="n">model</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">queryset</span><span class="o">.</span><span class="n">model</span>
<a id="__codelineno-0-330" name="__codelineno-0-330"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Deleting </span><span class="si">{</span><span class="n">model</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">verbose_name</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">instance</span><span class="si">}</span><span class="s2"> (PK: </span><span class="si">{</span><span class="n">instance</span><span class="o">.</span><span class="n">pk</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">)</span>
<a id="__codelineno-0-331" name="__codelineno-0-331"></a>
<a id="__codelineno-0-332" name="__codelineno-0-332"></a>        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">perform_destroy</span><span class="p">(</span><span class="n">instance</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">











  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="nautobot.apps.api.ModelViewSetMixin" class="doc doc-heading">
          <code>nautobot.apps.api.ModelViewSetMixin</code>


<a href="#nautobot.apps.api.ModelViewSetMixin" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">


            <details class="quote">
              <summary>Source code in <code>nautobot/core/api/views.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-167">167</a></span>
<span class="normal"><a href="#__codelineno-0-168">168</a></span>
<span class="normal"><a href="#__codelineno-0-169">169</a></span>
<span class="normal"><a href="#__codelineno-0-170">170</a></span>
<span class="normal"><a href="#__codelineno-0-171">171</a></span>
<span class="normal"><a href="#__codelineno-0-172">172</a></span>
<span class="normal"><a href="#__codelineno-0-173">173</a></span>
<span class="normal"><a href="#__codelineno-0-174">174</a></span>
<span class="normal"><a href="#__codelineno-0-175">175</a></span>
<span class="normal"><a href="#__codelineno-0-176">176</a></span>
<span class="normal"><a href="#__codelineno-0-177">177</a></span>
<span class="normal"><a href="#__codelineno-0-178">178</a></span>
<span class="normal"><a href="#__codelineno-0-179">179</a></span>
<span class="normal"><a href="#__codelineno-0-180">180</a></span>
<span class="normal"><a href="#__codelineno-0-181">181</a></span>
<span class="normal"><a href="#__codelineno-0-182">182</a></span>
<span class="normal"><a href="#__codelineno-0-183">183</a></span>
<span class="normal"><a href="#__codelineno-0-184">184</a></span>
<span class="normal"><a href="#__codelineno-0-185">185</a></span>
<span class="normal"><a href="#__codelineno-0-186">186</a></span>
<span class="normal"><a href="#__codelineno-0-187">187</a></span>
<span class="normal"><a href="#__codelineno-0-188">188</a></span>
<span class="normal"><a href="#__codelineno-0-189">189</a></span>
<span class="normal"><a href="#__codelineno-0-190">190</a></span>
<span class="normal"><a href="#__codelineno-0-191">191</a></span>
<span class="normal"><a href="#__codelineno-0-192">192</a></span>
<span class="normal"><a href="#__codelineno-0-193">193</a></span>
<span class="normal"><a href="#__codelineno-0-194">194</a></span>
<span class="normal"><a href="#__codelineno-0-195">195</a></span>
<span class="normal"><a href="#__codelineno-0-196">196</a></span>
<span class="normal"><a href="#__codelineno-0-197">197</a></span>
<span class="normal"><a href="#__codelineno-0-198">198</a></span>
<span class="normal"><a href="#__codelineno-0-199">199</a></span>
<span class="normal"><a href="#__codelineno-0-200">200</a></span>
<span class="normal"><a href="#__codelineno-0-201">201</a></span>
<span class="normal"><a href="#__codelineno-0-202">202</a></span>
<span class="normal"><a href="#__codelineno-0-203">203</a></span>
<span class="normal"><a href="#__codelineno-0-204">204</a></span>
<span class="normal"><a href="#__codelineno-0-205">205</a></span>
<span class="normal"><a href="#__codelineno-0-206">206</a></span>
<span class="normal"><a href="#__codelineno-0-207">207</a></span>
<span class="normal"><a href="#__codelineno-0-208">208</a></span>
<span class="normal"><a href="#__codelineno-0-209">209</a></span>
<span class="normal"><a href="#__codelineno-0-210">210</a></span>
<span class="normal"><a href="#__codelineno-0-211">211</a></span>
<span class="normal"><a href="#__codelineno-0-212">212</a></span>
<span class="normal"><a href="#__codelineno-0-213">213</a></span>
<span class="normal"><a href="#__codelineno-0-214">214</a></span>
<span class="normal"><a href="#__codelineno-0-215">215</a></span>
<span class="normal"><a href="#__codelineno-0-216">216</a></span>
<span class="normal"><a href="#__codelineno-0-217">217</a></span>
<span class="normal"><a href="#__codelineno-0-218">218</a></span>
<span class="normal"><a href="#__codelineno-0-219">219</a></span>
<span class="normal"><a href="#__codelineno-0-220">220</a></span>
<span class="normal"><a href="#__codelineno-0-221">221</a></span>
<span class="normal"><a href="#__codelineno-0-222">222</a></span>
<span class="normal"><a href="#__codelineno-0-223">223</a></span>
<span class="normal"><a href="#__codelineno-0-224">224</a></span>
<span class="normal"><a href="#__codelineno-0-225">225</a></span>
<span class="normal"><a href="#__codelineno-0-226">226</a></span>
<span class="normal"><a href="#__codelineno-0-227">227</a></span>
<span class="normal"><a href="#__codelineno-0-228">228</a></span>
<span class="normal"><a href="#__codelineno-0-229">229</a></span>
<span class="normal"><a href="#__codelineno-0-230">230</a></span>
<span class="normal"><a href="#__codelineno-0-231">231</a></span>
<span class="normal"><a href="#__codelineno-0-232">232</a></span>
<span class="normal"><a href="#__codelineno-0-233">233</a></span>
<span class="normal"><a href="#__codelineno-0-234">234</a></span>
<span class="normal"><a href="#__codelineno-0-235">235</a></span>
<span class="normal"><a href="#__codelineno-0-236">236</a></span>
<span class="normal"><a href="#__codelineno-0-237">237</a></span>
<span class="normal"><a href="#__codelineno-0-238">238</a></span>
<span class="normal"><a href="#__codelineno-0-239">239</a></span>
<span class="normal"><a href="#__codelineno-0-240">240</a></span>
<span class="normal"><a href="#__codelineno-0-241">241</a></span>
<span class="normal"><a href="#__codelineno-0-242">242</a></span>
<span class="normal"><a href="#__codelineno-0-243">243</a></span>
<span class="normal"><a href="#__codelineno-0-244">244</a></span>
<span class="normal"><a href="#__codelineno-0-245">245</a></span>
<span class="normal"><a href="#__codelineno-0-246">246</a></span>
<span class="normal"><a href="#__codelineno-0-247">247</a></span>
<span class="normal"><a href="#__codelineno-0-248">248</a></span>
<span class="normal"><a href="#__codelineno-0-249">249</a></span>
<span class="normal"><a href="#__codelineno-0-250">250</a></span>
<span class="normal"><a href="#__codelineno-0-251">251</a></span>
<span class="normal"><a href="#__codelineno-0-252">252</a></span>
<span class="normal"><a href="#__codelineno-0-253">253</a></span>
<span class="normal"><a href="#__codelineno-0-254">254</a></span>
<span class="normal"><a href="#__codelineno-0-255">255</a></span>
<span class="normal"><a href="#__codelineno-0-256">256</a></span>
<span class="normal"><a href="#__codelineno-0-257">257</a></span>
<span class="normal"><a href="#__codelineno-0-258">258</a></span>
<span class="normal"><a href="#__codelineno-0-259">259</a></span>
<span class="normal"><a href="#__codelineno-0-260">260</a></span>
<span class="normal"><a href="#__codelineno-0-261">261</a></span>
<span class="normal"><a href="#__codelineno-0-262">262</a></span>
<span class="normal"><a href="#__codelineno-0-263">263</a></span>
<span class="normal"><a href="#__codelineno-0-264">264</a></span>
<span class="normal"><a href="#__codelineno-0-265">265</a></span>
<span class="normal"><a href="#__codelineno-0-266">266</a></span>
<span class="normal"><a href="#__codelineno-0-267">267</a></span>
<span class="normal"><a href="#__codelineno-0-268">268</a></span>
<span class="normal"><a href="#__codelineno-0-269">269</a></span>
<span class="normal"><a href="#__codelineno-0-270">270</a></span>
<span class="normal"><a href="#__codelineno-0-271">271</a></span>
<span class="normal"><a href="#__codelineno-0-272">272</a></span>
<span class="normal"><a href="#__codelineno-0-273">273</a></span>
<span class="normal"><a href="#__codelineno-0-274">274</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-167" name="__codelineno-0-167"></a><span class="k">class</span> <span class="nc">ModelViewSetMixin</span><span class="p">:</span>
<a id="__codelineno-0-168" name="__codelineno-0-168"></a>    <span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span> <span class="o">+</span> <span class="s2">&quot;.ModelViewSet&quot;</span><span class="p">)</span>
<a id="__codelineno-0-169" name="__codelineno-0-169"></a>
<a id="__codelineno-0-170" name="__codelineno-0-170"></a>    <span class="c1"># TODO: can&#39;t set lookup_value_regex globally; some models/viewsets (ContentType, Group) have integer rather than</span>
<a id="__codelineno-0-171" name="__codelineno-0-171"></a>    <span class="c1">#       UUID PKs and also do NOT support composite-keys.</span>
<a id="__codelineno-0-172" name="__codelineno-0-172"></a>    <span class="c1">#       The impact of NOT setting this is that per the OpenAPI schema, only UUIDs are permitted for most ViewSets;</span>
<a id="__codelineno-0-173" name="__codelineno-0-173"></a>    <span class="c1">#       however, &quot;secretly&quot; due to our custom get_object() implementation below, you can actually also specify a</span>
<a id="__codelineno-0-174" name="__codelineno-0-174"></a>    <span class="c1">#       composite_key value instead of a UUID. We&#39;re not currently documenting/using this feature, so OK for now</span>
<a id="__codelineno-0-175" name="__codelineno-0-175"></a>    <span class="c1"># lookup_value_regex = r&quot;[^/]+&quot;</span>
<a id="__codelineno-0-176" name="__codelineno-0-176"></a>
<a id="__codelineno-0-177" name="__codelineno-0-177"></a>    <span class="k">def</span> <span class="nf">get_object</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-178" name="__codelineno-0-178"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Extend rest_framework.generics.GenericAPIView.get_object to allow &quot;pk&quot; lookups to use a composite-key.&quot;&quot;&quot;</span>
<a id="__codelineno-0-179" name="__codelineno-0-179"></a>        <span class="n">queryset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">filter_queryset</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_queryset</span><span class="p">())</span>
<a id="__codelineno-0-180" name="__codelineno-0-180"></a>        <span class="n">lookup_url_kwarg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lookup_url_kwarg</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">lookup_field</span>
<a id="__codelineno-0-181" name="__codelineno-0-181"></a>
<a id="__codelineno-0-182" name="__codelineno-0-182"></a>        <span class="k">assert</span> <span class="n">lookup_url_kwarg</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">,</span> <span class="p">(</span>
<a id="__codelineno-0-183" name="__codelineno-0-183"></a>            <span class="sa">f</span><span class="s2">&quot;Expected view </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2"> to be called with a URL keyword argument named &quot;</span>
<a id="__codelineno-0-184" name="__codelineno-0-184"></a>            <span class="sa">f</span><span class="s1">&#39;&quot;</span><span class="si">{</span><span class="n">lookup_url_kwarg</span><span class="si">}</span><span class="s1">&quot;. Fix your URL conf, or set the `.lookup_field` attribute on the view correctly.&#39;</span>
<a id="__codelineno-0-185" name="__codelineno-0-185"></a>        <span class="p">)</span>
<a id="__codelineno-0-186" name="__codelineno-0-186"></a>
<a id="__codelineno-0-187" name="__codelineno-0-187"></a>        <span class="k">if</span> <span class="n">lookup_url_kwarg</span> <span class="o">==</span> <span class="s2">&quot;pk&quot;</span> <span class="ow">and</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">queryset</span><span class="o">.</span><span class="n">model</span><span class="p">,</span> <span class="s2">&quot;composite_key&quot;</span><span class="p">):</span>
<a id="__codelineno-0-188" name="__codelineno-0-188"></a>            <span class="c1"># Support lookup by either PK (UUID) or composite_key</span>
<a id="__codelineno-0-189" name="__codelineno-0-189"></a>            <span class="n">lookup_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;pk&quot;</span><span class="p">]</span>
<a id="__codelineno-0-190" name="__codelineno-0-190"></a>            <span class="k">if</span> <span class="n">is_uuid</span><span class="p">(</span><span class="n">lookup_value</span><span class="p">):</span>
<a id="__codelineno-0-191" name="__codelineno-0-191"></a>                <span class="n">obj</span> <span class="o">=</span> <span class="n">get_object_or_404</span><span class="p">(</span><span class="n">queryset</span><span class="p">,</span> <span class="n">pk</span><span class="o">=</span><span class="n">lookup_value</span><span class="p">)</span>
<a id="__codelineno-0-192" name="__codelineno-0-192"></a>            <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-193" name="__codelineno-0-193"></a>                <span class="n">obj</span> <span class="o">=</span> <span class="n">get_object_or_404</span><span class="p">(</span><span class="n">queryset</span><span class="p">,</span> <span class="n">composite_key</span><span class="o">=</span><span class="n">lookup_value</span><span class="p">)</span>
<a id="__codelineno-0-194" name="__codelineno-0-194"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-195" name="__codelineno-0-195"></a>            <span class="c1"># Default DRF lookup behavior, just in case a viewset has overridden `lookup_url_kwarg` for its own needs</span>
<a id="__codelineno-0-196" name="__codelineno-0-196"></a>            <span class="n">obj</span> <span class="o">=</span> <span class="n">get_object_or_404</span><span class="p">(</span><span class="n">queryset</span><span class="p">,</span> <span class="o">**</span><span class="p">{</span><span class="bp">self</span><span class="o">.</span><span class="n">lookup_field</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="n">lookup_url_kwarg</span><span class="p">]})</span>
<a id="__codelineno-0-197" name="__codelineno-0-197"></a>
<a id="__codelineno-0-198" name="__codelineno-0-198"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">check_object_permissions</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="n">obj</span><span class="p">)</span>
<a id="__codelineno-0-199" name="__codelineno-0-199"></a>
<a id="__codelineno-0-200" name="__codelineno-0-200"></a>        <span class="k">return</span> <span class="n">obj</span>
<a id="__codelineno-0-201" name="__codelineno-0-201"></a>
<a id="__codelineno-0-202" name="__codelineno-0-202"></a>    <span class="k">def</span> <span class="nf">get_serializer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<a id="__codelineno-0-203" name="__codelineno-0-203"></a>        <span class="c1"># If a list of objects has been provided, initialize the serializer with many=True</span>
<a id="__codelineno-0-204" name="__codelineno-0-204"></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;data&quot;</span><span class="p">,</span> <span class="p">{}),</span> <span class="nb">list</span><span class="p">):</span>
<a id="__codelineno-0-205" name="__codelineno-0-205"></a>            <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;many&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
<a id="__codelineno-0-206" name="__codelineno-0-206"></a>
<a id="__codelineno-0-207" name="__codelineno-0-207"></a>        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">get_serializer</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
<a id="__codelineno-0-208" name="__codelineno-0-208"></a>
<a id="__codelineno-0-209" name="__codelineno-0-209"></a>    <span class="k">def</span> <span class="nf">get_serializer_context</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-210" name="__codelineno-0-210"></a>        <span class="n">context</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">get_serializer_context</span><span class="p">()</span>
<a id="__codelineno-0-211" name="__codelineno-0-211"></a>        <span class="k">if</span> <span class="s2">&quot;text/csv&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">accepted_media_type</span><span class="p">:</span>
<a id="__codelineno-0-212" name="__codelineno-0-212"></a>            <span class="c1"># CSV rendering should always use depth 0</span>
<a id="__codelineno-0-213" name="__codelineno-0-213"></a>            <span class="n">context</span><span class="p">[</span><span class="s2">&quot;depth&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
<a id="__codelineno-0-214" name="__codelineno-0-214"></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="s2">&quot;GET&quot;</span><span class="p">:</span>
<a id="__codelineno-0-215" name="__codelineno-0-215"></a>            <span class="c1"># Only allow the depth to be greater than 0 in GET requests</span>
<a id="__codelineno-0-216" name="__codelineno-0-216"></a>            <span class="n">depth</span> <span class="o">=</span> <span class="mi">0</span>
<a id="__codelineno-0-217" name="__codelineno-0-217"></a>            <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-0-218" name="__codelineno-0-218"></a>                <span class="n">depth</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">query_params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;depth&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
<a id="__codelineno-0-219" name="__codelineno-0-219"></a>            <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
<a id="__codelineno-0-220" name="__codelineno-0-220"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;The depth parameter must be an integer between 0 and 10&quot;</span><span class="p">)</span>
<a id="__codelineno-0-221" name="__codelineno-0-221"></a>
<a id="__codelineno-0-222" name="__codelineno-0-222"></a>            <span class="n">context</span><span class="p">[</span><span class="s2">&quot;depth&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">depth</span>
<a id="__codelineno-0-223" name="__codelineno-0-223"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-224" name="__codelineno-0-224"></a>            <span class="c1"># Use depth=0 in all write type requests.</span>
<a id="__codelineno-0-225" name="__codelineno-0-225"></a>            <span class="n">context</span><span class="p">[</span><span class="s2">&quot;depth&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
<a id="__codelineno-0-226" name="__codelineno-0-226"></a>
<a id="__codelineno-0-227" name="__codelineno-0-227"></a>        <span class="k">return</span> <span class="n">context</span>
<a id="__codelineno-0-228" name="__codelineno-0-228"></a>
<a id="__codelineno-0-229" name="__codelineno-0-229"></a>    <span class="k">def</span> <span class="nf">restrict_queryset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<a id="__codelineno-0-230" name="__codelineno-0-230"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-231" name="__codelineno-0-231"></a><span class="sd">        Restrict the view&#39;s queryset to allow only the permitted objects for the given request.</span>
<a id="__codelineno-0-232" name="__codelineno-0-232"></a>
<a id="__codelineno-0-233" name="__codelineno-0-233"></a><span class="sd">        Subclasses (such as nautobot.extras.api.views.JobModelViewSet) may wish to override this.</span>
<a id="__codelineno-0-234" name="__codelineno-0-234"></a>
<a id="__codelineno-0-235" name="__codelineno-0-235"></a><span class="sd">        Called by initial(), below.</span>
<a id="__codelineno-0-236" name="__codelineno-0-236"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-237" name="__codelineno-0-237"></a>        <span class="c1"># Restrict the view&#39;s QuerySet to allow only the permitted objects for the given user, if applicable</span>
<a id="__codelineno-0-238" name="__codelineno-0-238"></a>        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">is_authenticated</span><span class="p">:</span>
<a id="__codelineno-0-239" name="__codelineno-0-239"></a>            <span class="n">http_action</span> <span class="o">=</span> <span class="n">HTTP_ACTIONS</span><span class="p">[</span><span class="n">request</span><span class="o">.</span><span class="n">method</span><span class="p">]</span>
<a id="__codelineno-0-240" name="__codelineno-0-240"></a>            <span class="k">if</span> <span class="n">http_action</span><span class="p">:</span>
<a id="__codelineno-0-241" name="__codelineno-0-241"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">queryset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">queryset</span><span class="o">.</span><span class="n">restrict</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="p">,</span> <span class="n">http_action</span><span class="p">)</span>
<a id="__codelineno-0-242" name="__codelineno-0-242"></a>
<a id="__codelineno-0-243" name="__codelineno-0-243"></a>    <span class="k">def</span> <span class="nf">initial</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<a id="__codelineno-0-244" name="__codelineno-0-244"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-245" name="__codelineno-0-245"></a><span class="sd">        Runs anything that needs to occur prior to calling the method handler.</span>
<a id="__codelineno-0-246" name="__codelineno-0-246"></a>
<a id="__codelineno-0-247" name="__codelineno-0-247"></a><span class="sd">        Override of internal Django Rest Framework API.</span>
<a id="__codelineno-0-248" name="__codelineno-0-248"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-249" name="__codelineno-0-249"></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">initial</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
<a id="__codelineno-0-250" name="__codelineno-0-250"></a>
<a id="__codelineno-0-251" name="__codelineno-0-251"></a>        <span class="c1"># Django Rest Framework stores the raw API version string e.g. &quot;1.2&quot; as request.version.</span>
<a id="__codelineno-0-252" name="__codelineno-0-252"></a>        <span class="c1"># For convenience we split it out into integer major/minor versions as well.</span>
<a id="__codelineno-0-253" name="__codelineno-0-253"></a>        <span class="n">major</span><span class="p">,</span> <span class="n">minor</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">version</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)</span>
<a id="__codelineno-0-254" name="__codelineno-0-254"></a>        <span class="n">request</span><span class="o">.</span><span class="n">major_version</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">major</span><span class="p">)</span>
<a id="__codelineno-0-255" name="__codelineno-0-255"></a>        <span class="n">request</span><span class="o">.</span><span class="n">minor_version</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">minor</span><span class="p">)</span>
<a id="__codelineno-0-256" name="__codelineno-0-256"></a>
<a id="__codelineno-0-257" name="__codelineno-0-257"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">restrict_queryset</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
<a id="__codelineno-0-258" name="__codelineno-0-258"></a>
<a id="__codelineno-0-259" name="__codelineno-0-259"></a>    <span class="k">def</span> <span class="nf">dispatch</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<a id="__codelineno-0-260" name="__codelineno-0-260"></a>        <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-0-261" name="__codelineno-0-261"></a>            <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">dispatch</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
<a id="__codelineno-0-262" name="__codelineno-0-262"></a>        <span class="k">except</span> <span class="n">ProtectedError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
<a id="__codelineno-0-263" name="__codelineno-0-263"></a>            <span class="n">protected_objects</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">protected_objects</span><span class="p">)</span>
<a id="__codelineno-0-264" name="__codelineno-0-264"></a>            <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Unable to delete object. </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">protected_objects</span><span class="p">)</span><span class="si">}</span><span class="s2"> dependent objects were found: &quot;</span>
<a id="__codelineno-0-265" name="__codelineno-0-265"></a>            <span class="n">msg</span> <span class="o">+=</span> <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">obj</span><span class="si">}</span><span class="s2"> (</span><span class="si">{</span><span class="n">obj</span><span class="o">.</span><span class="n">pk</span><span class="si">}</span><span class="s2">)&quot;</span> <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">protected_objects</span><span class="p">])</span>
<a id="__codelineno-0-266" name="__codelineno-0-266"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
<a id="__codelineno-0-267" name="__codelineno-0-267"></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">finalize_response</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">Response</span><span class="p">({</span><span class="s2">&quot;detail&quot;</span><span class="p">:</span> <span class="n">msg</span><span class="p">},</span> <span class="n">status</span><span class="o">=</span><span class="mi">409</span><span class="p">),</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
<a id="__codelineno-0-268" name="__codelineno-0-268"></a>
<a id="__codelineno-0-269" name="__codelineno-0-269"></a>    <span class="k">def</span> <span class="nf">finalize_response</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">response</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<a id="__codelineno-0-270" name="__codelineno-0-270"></a>        <span class="c1"># In the case of certain errors, we might not even get to the point of setting request.accepted_media_type</span>
<a id="__codelineno-0-271" name="__codelineno-0-271"></a>        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s2">&quot;accepted_media_type&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="s2">&quot;text/csv&quot;</span> <span class="ow">in</span> <span class="n">request</span><span class="o">.</span><span class="n">accepted_media_type</span><span class="p">:</span>
<a id="__codelineno-0-272" name="__codelineno-0-272"></a>            <span class="n">filename</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">settings</span><span class="o">.</span><span class="n">BRANDING_PREPENDED_FILENAME</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">queryset</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="vm">__name__</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="si">}</span><span class="s2">_data.csv&quot;</span>
<a id="__codelineno-0-273" name="__codelineno-0-273"></a>            <span class="n">response</span><span class="p">[</span><span class="s2">&quot;Content-Disposition&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;attachment; filename=&quot;</span><span class="si">{</span><span class="n">filename</span><span class="si">}</span><span class="s1">&quot;&#39;</span>
<a id="__codelineno-0-274" name="__codelineno-0-274"></a>        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">finalize_response</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">response</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">










<div class="doc doc-object doc-function">



<h3 id="nautobot.core.api.views.ModelViewSetMixin.get_object" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_object</span><span class="p">()</span></code>

<a href="#nautobot.core.api.views.ModelViewSetMixin.get_object" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Extend rest_framework.generics.GenericAPIView.get_object to allow "pk" lookups to use a composite-key.</p>

          <details class="quote">
            <summary>Source code in <code>nautobot/core/api/views.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-177">177</a></span>
<span class="normal"><a href="#__codelineno-0-178">178</a></span>
<span class="normal"><a href="#__codelineno-0-179">179</a></span>
<span class="normal"><a href="#__codelineno-0-180">180</a></span>
<span class="normal"><a href="#__codelineno-0-181">181</a></span>
<span class="normal"><a href="#__codelineno-0-182">182</a></span>
<span class="normal"><a href="#__codelineno-0-183">183</a></span>
<span class="normal"><a href="#__codelineno-0-184">184</a></span>
<span class="normal"><a href="#__codelineno-0-185">185</a></span>
<span class="normal"><a href="#__codelineno-0-186">186</a></span>
<span class="normal"><a href="#__codelineno-0-187">187</a></span>
<span class="normal"><a href="#__codelineno-0-188">188</a></span>
<span class="normal"><a href="#__codelineno-0-189">189</a></span>
<span class="normal"><a href="#__codelineno-0-190">190</a></span>
<span class="normal"><a href="#__codelineno-0-191">191</a></span>
<span class="normal"><a href="#__codelineno-0-192">192</a></span>
<span class="normal"><a href="#__codelineno-0-193">193</a></span>
<span class="normal"><a href="#__codelineno-0-194">194</a></span>
<span class="normal"><a href="#__codelineno-0-195">195</a></span>
<span class="normal"><a href="#__codelineno-0-196">196</a></span>
<span class="normal"><a href="#__codelineno-0-197">197</a></span>
<span class="normal"><a href="#__codelineno-0-198">198</a></span>
<span class="normal"><a href="#__codelineno-0-199">199</a></span>
<span class="normal"><a href="#__codelineno-0-200">200</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-177" name="__codelineno-0-177"></a><span class="k">def</span> <span class="nf">get_object</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-178" name="__codelineno-0-178"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Extend rest_framework.generics.GenericAPIView.get_object to allow &quot;pk&quot; lookups to use a composite-key.&quot;&quot;&quot;</span>
<a id="__codelineno-0-179" name="__codelineno-0-179"></a>    <span class="n">queryset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">filter_queryset</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_queryset</span><span class="p">())</span>
<a id="__codelineno-0-180" name="__codelineno-0-180"></a>    <span class="n">lookup_url_kwarg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lookup_url_kwarg</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">lookup_field</span>
<a id="__codelineno-0-181" name="__codelineno-0-181"></a>
<a id="__codelineno-0-182" name="__codelineno-0-182"></a>    <span class="k">assert</span> <span class="n">lookup_url_kwarg</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">,</span> <span class="p">(</span>
<a id="__codelineno-0-183" name="__codelineno-0-183"></a>        <span class="sa">f</span><span class="s2">&quot;Expected view </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2"> to be called with a URL keyword argument named &quot;</span>
<a id="__codelineno-0-184" name="__codelineno-0-184"></a>        <span class="sa">f</span><span class="s1">&#39;&quot;</span><span class="si">{</span><span class="n">lookup_url_kwarg</span><span class="si">}</span><span class="s1">&quot;. Fix your URL conf, or set the `.lookup_field` attribute on the view correctly.&#39;</span>
<a id="__codelineno-0-185" name="__codelineno-0-185"></a>    <span class="p">)</span>
<a id="__codelineno-0-186" name="__codelineno-0-186"></a>
<a id="__codelineno-0-187" name="__codelineno-0-187"></a>    <span class="k">if</span> <span class="n">lookup_url_kwarg</span> <span class="o">==</span> <span class="s2">&quot;pk&quot;</span> <span class="ow">and</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">queryset</span><span class="o">.</span><span class="n">model</span><span class="p">,</span> <span class="s2">&quot;composite_key&quot;</span><span class="p">):</span>
<a id="__codelineno-0-188" name="__codelineno-0-188"></a>        <span class="c1"># Support lookup by either PK (UUID) or composite_key</span>
<a id="__codelineno-0-189" name="__codelineno-0-189"></a>        <span class="n">lookup_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;pk&quot;</span><span class="p">]</span>
<a id="__codelineno-0-190" name="__codelineno-0-190"></a>        <span class="k">if</span> <span class="n">is_uuid</span><span class="p">(</span><span class="n">lookup_value</span><span class="p">):</span>
<a id="__codelineno-0-191" name="__codelineno-0-191"></a>            <span class="n">obj</span> <span class="o">=</span> <span class="n">get_object_or_404</span><span class="p">(</span><span class="n">queryset</span><span class="p">,</span> <span class="n">pk</span><span class="o">=</span><span class="n">lookup_value</span><span class="p">)</span>
<a id="__codelineno-0-192" name="__codelineno-0-192"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-193" name="__codelineno-0-193"></a>            <span class="n">obj</span> <span class="o">=</span> <span class="n">get_object_or_404</span><span class="p">(</span><span class="n">queryset</span><span class="p">,</span> <span class="n">composite_key</span><span class="o">=</span><span class="n">lookup_value</span><span class="p">)</span>
<a id="__codelineno-0-194" name="__codelineno-0-194"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-195" name="__codelineno-0-195"></a>        <span class="c1"># Default DRF lookup behavior, just in case a viewset has overridden `lookup_url_kwarg` for its own needs</span>
<a id="__codelineno-0-196" name="__codelineno-0-196"></a>        <span class="n">obj</span> <span class="o">=</span> <span class="n">get_object_or_404</span><span class="p">(</span><span class="n">queryset</span><span class="p">,</span> <span class="o">**</span><span class="p">{</span><span class="bp">self</span><span class="o">.</span><span class="n">lookup_field</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="n">lookup_url_kwarg</span><span class="p">]})</span>
<a id="__codelineno-0-197" name="__codelineno-0-197"></a>
<a id="__codelineno-0-198" name="__codelineno-0-198"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">check_object_permissions</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="n">obj</span><span class="p">)</span>
<a id="__codelineno-0-199" name="__codelineno-0-199"></a>
<a id="__codelineno-0-200" name="__codelineno-0-200"></a>    <span class="k">return</span> <span class="n">obj</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h3 id="nautobot.core.api.views.ModelViewSetMixin.initial" class="doc doc-heading">
<code class="highlight language-python"><span class="n">initial</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

<a href="#nautobot.core.api.views.ModelViewSetMixin.initial" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Runs anything that needs to occur prior to calling the method handler.</p>
<p>Override of internal Django Rest Framework API.</p>

          <details class="quote">
            <summary>Source code in <code>nautobot/core/api/views.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-243">243</a></span>
<span class="normal"><a href="#__codelineno-0-244">244</a></span>
<span class="normal"><a href="#__codelineno-0-245">245</a></span>
<span class="normal"><a href="#__codelineno-0-246">246</a></span>
<span class="normal"><a href="#__codelineno-0-247">247</a></span>
<span class="normal"><a href="#__codelineno-0-248">248</a></span>
<span class="normal"><a href="#__codelineno-0-249">249</a></span>
<span class="normal"><a href="#__codelineno-0-250">250</a></span>
<span class="normal"><a href="#__codelineno-0-251">251</a></span>
<span class="normal"><a href="#__codelineno-0-252">252</a></span>
<span class="normal"><a href="#__codelineno-0-253">253</a></span>
<span class="normal"><a href="#__codelineno-0-254">254</a></span>
<span class="normal"><a href="#__codelineno-0-255">255</a></span>
<span class="normal"><a href="#__codelineno-0-256">256</a></span>
<span class="normal"><a href="#__codelineno-0-257">257</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-243" name="__codelineno-0-243"></a><span class="k">def</span> <span class="nf">initial</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<a id="__codelineno-0-244" name="__codelineno-0-244"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-245" name="__codelineno-0-245"></a><span class="sd">    Runs anything that needs to occur prior to calling the method handler.</span>
<a id="__codelineno-0-246" name="__codelineno-0-246"></a>
<a id="__codelineno-0-247" name="__codelineno-0-247"></a><span class="sd">    Override of internal Django Rest Framework API.</span>
<a id="__codelineno-0-248" name="__codelineno-0-248"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-249" name="__codelineno-0-249"></a>    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">initial</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
<a id="__codelineno-0-250" name="__codelineno-0-250"></a>
<a id="__codelineno-0-251" name="__codelineno-0-251"></a>    <span class="c1"># Django Rest Framework stores the raw API version string e.g. &quot;1.2&quot; as request.version.</span>
<a id="__codelineno-0-252" name="__codelineno-0-252"></a>    <span class="c1"># For convenience we split it out into integer major/minor versions as well.</span>
<a id="__codelineno-0-253" name="__codelineno-0-253"></a>    <span class="n">major</span><span class="p">,</span> <span class="n">minor</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">version</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)</span>
<a id="__codelineno-0-254" name="__codelineno-0-254"></a>    <span class="n">request</span><span class="o">.</span><span class="n">major_version</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">major</span><span class="p">)</span>
<a id="__codelineno-0-255" name="__codelineno-0-255"></a>    <span class="n">request</span><span class="o">.</span><span class="n">minor_version</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">minor</span><span class="p">)</span>
<a id="__codelineno-0-256" name="__codelineno-0-256"></a>
<a id="__codelineno-0-257" name="__codelineno-0-257"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">restrict_queryset</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h3 id="nautobot.core.api.views.ModelViewSetMixin.restrict_queryset" class="doc doc-heading">
<code class="highlight language-python"><span class="n">restrict_queryset</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

<a href="#nautobot.core.api.views.ModelViewSetMixin.restrict_queryset" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Restrict the view's queryset to allow only the permitted objects for the given request.</p>
<p>Subclasses (such as nautobot.extras.api.views.JobModelViewSet) may wish to override this.</p>
<p>Called by initial(), below.</p>

          <details class="quote">
            <summary>Source code in <code>nautobot/core/api/views.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-229">229</a></span>
<span class="normal"><a href="#__codelineno-0-230">230</a></span>
<span class="normal"><a href="#__codelineno-0-231">231</a></span>
<span class="normal"><a href="#__codelineno-0-232">232</a></span>
<span class="normal"><a href="#__codelineno-0-233">233</a></span>
<span class="normal"><a href="#__codelineno-0-234">234</a></span>
<span class="normal"><a href="#__codelineno-0-235">235</a></span>
<span class="normal"><a href="#__codelineno-0-236">236</a></span>
<span class="normal"><a href="#__codelineno-0-237">237</a></span>
<span class="normal"><a href="#__codelineno-0-238">238</a></span>
<span class="normal"><a href="#__codelineno-0-239">239</a></span>
<span class="normal"><a href="#__codelineno-0-240">240</a></span>
<span class="normal"><a href="#__codelineno-0-241">241</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-229" name="__codelineno-0-229"></a><span class="k">def</span> <span class="nf">restrict_queryset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<a id="__codelineno-0-230" name="__codelineno-0-230"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-231" name="__codelineno-0-231"></a><span class="sd">    Restrict the view&#39;s queryset to allow only the permitted objects for the given request.</span>
<a id="__codelineno-0-232" name="__codelineno-0-232"></a>
<a id="__codelineno-0-233" name="__codelineno-0-233"></a><span class="sd">    Subclasses (such as nautobot.extras.api.views.JobModelViewSet) may wish to override this.</span>
<a id="__codelineno-0-234" name="__codelineno-0-234"></a>
<a id="__codelineno-0-235" name="__codelineno-0-235"></a><span class="sd">    Called by initial(), below.</span>
<a id="__codelineno-0-236" name="__codelineno-0-236"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-237" name="__codelineno-0-237"></a>    <span class="c1"># Restrict the view&#39;s QuerySet to allow only the permitted objects for the given user, if applicable</span>
<a id="__codelineno-0-238" name="__codelineno-0-238"></a>    <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">is_authenticated</span><span class="p">:</span>
<a id="__codelineno-0-239" name="__codelineno-0-239"></a>        <span class="n">http_action</span> <span class="o">=</span> <span class="n">HTTP_ACTIONS</span><span class="p">[</span><span class="n">request</span><span class="o">.</span><span class="n">method</span><span class="p">]</span>
<a id="__codelineno-0-240" name="__codelineno-0-240"></a>        <span class="k">if</span> <span class="n">http_action</span><span class="p">:</span>
<a id="__codelineno-0-241" name="__codelineno-0-241"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">queryset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">queryset</span><span class="o">.</span><span class="n">restrict</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="p">,</span> <span class="n">http_action</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="nautobot.apps.api.MultipleChoiceJSONField" class="doc doc-heading">
          <code>nautobot.apps.api.MultipleChoiceJSONField</code>


<a href="#nautobot.apps.api.MultipleChoiceJSONField" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code><span title="rest_framework.serializers">serializers</span>.<span title="rest_framework.serializers.MultipleChoiceField">MultipleChoiceField</span></code></p>

  
      <p>A MultipleChoiceField that renders the received value as a JSON-compatible list rather than a set.</p>

            <details class="quote">
              <summary>Source code in <code>nautobot/extras/api/fields.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-0-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-0-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-0-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-0-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-0-10">10</a></span>
<span class="normal"><a href="#__codelineno-0-11">11</a></span>
<span class="normal"><a href="#__codelineno-0-12">12</a></span>
<span class="normal"><a href="#__codelineno-0-13">13</a></span>
<span class="normal"><a href="#__codelineno-0-14">14</a></span>
<span class="normal"><a href="#__codelineno-0-15">15</a></span>
<span class="normal"><a href="#__codelineno-0-16">16</a></span>
<span class="normal"><a href="#__codelineno-0-17">17</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-5" name="__codelineno-0-5"></a><span class="k">class</span> <span class="nc">MultipleChoiceJSONField</span><span class="p">(</span><span class="n">serializers</span><span class="o">.</span><span class="n">MultipleChoiceField</span><span class="p">):</span>
<a id="__codelineno-0-6" name="__codelineno-0-6"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;A MultipleChoiceField that renders the received value as a JSON-compatible list rather than a set.&quot;&quot;&quot;</span>
<a id="__codelineno-0-7" name="__codelineno-0-7"></a>
<a id="__codelineno-0-8" name="__codelineno-0-8"></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<a id="__codelineno-0-9" name="__codelineno-0-9"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Overload default choices handling to also accept a callable.&quot;&quot;&quot;</span>
<a id="__codelineno-0-10" name="__codelineno-0-10"></a>        <span class="n">choices</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;choices&quot;</span><span class="p">)</span>
<a id="__codelineno-0-11" name="__codelineno-0-11"></a>        <span class="k">if</span> <span class="nb">callable</span><span class="p">(</span><span class="n">choices</span><span class="p">):</span>
<a id="__codelineno-0-12" name="__codelineno-0-12"></a>            <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;choices&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">CallableChoiceIterator</span><span class="p">(</span><span class="n">choices</span><span class="p">)</span>
<a id="__codelineno-0-13" name="__codelineno-0-13"></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
<a id="__codelineno-0-14" name="__codelineno-0-14"></a>
<a id="__codelineno-0-15" name="__codelineno-0-15"></a>    <span class="k">def</span> <span class="nf">to_internal_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
<a id="__codelineno-0-16" name="__codelineno-0-16"></a>        <span class="n">set_value</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">to_internal_value</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<a id="__codelineno-0-17" name="__codelineno-0-17"></a>        <span class="k">return</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">set_value</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">










<div class="doc doc-object doc-function">



<h3 id="nautobot.extras.api.fields.MultipleChoiceJSONField.__init__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

<a href="#nautobot.extras.api.fields.MultipleChoiceJSONField.__init__" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Overload default choices handling to also accept a callable.</p>

          <details class="quote">
            <summary>Source code in <code>nautobot/extras/api/fields.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-0-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-0-10">10</a></span>
<span class="normal"><a href="#__codelineno-0-11">11</a></span>
<span class="normal"><a href="#__codelineno-0-12">12</a></span>
<span class="normal"><a href="#__codelineno-0-13">13</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-8" name="__codelineno-0-8"></a><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<a id="__codelineno-0-9" name="__codelineno-0-9"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Overload default choices handling to also accept a callable.&quot;&quot;&quot;</span>
<a id="__codelineno-0-10" name="__codelineno-0-10"></a>    <span class="n">choices</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;choices&quot;</span><span class="p">)</span>
<a id="__codelineno-0-11" name="__codelineno-0-11"></a>    <span class="k">if</span> <span class="nb">callable</span><span class="p">(</span><span class="n">choices</span><span class="p">):</span>
<a id="__codelineno-0-12" name="__codelineno-0-12"></a>        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;choices&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">CallableChoiceIterator</span><span class="p">(</span><span class="n">choices</span><span class="p">)</span>
<a id="__codelineno-0-13" name="__codelineno-0-13"></a>    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="nautobot.apps.api.NautobotAutoSchema" class="doc doc-heading">
          <code>nautobot.apps.api.NautobotAutoSchema</code>


<a href="#nautobot.apps.api.NautobotAutoSchema" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code><span title="drf_spectacular.openapi.AutoSchema">AutoSchema</span></code></p>

  
      <p>Nautobot-specific extensions to drf-spectacular's AutoSchema.</p>

            <details class="quote">
              <summary>Source code in <code>nautobot/core/api/schema.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-22"> 22</a></span>
<span class="normal"><a href="#__codelineno-0-23"> 23</a></span>
<span class="normal"><a href="#__codelineno-0-24"> 24</a></span>
<span class="normal"><a href="#__codelineno-0-25"> 25</a></span>
<span class="normal"><a href="#__codelineno-0-26"> 26</a></span>
<span class="normal"><a href="#__codelineno-0-27"> 27</a></span>
<span class="normal"><a href="#__codelineno-0-28"> 28</a></span>
<span class="normal"><a href="#__codelineno-0-29"> 29</a></span>
<span class="normal"><a href="#__codelineno-0-30"> 30</a></span>
<span class="normal"><a href="#__codelineno-0-31"> 31</a></span>
<span class="normal"><a href="#__codelineno-0-32"> 32</a></span>
<span class="normal"><a href="#__codelineno-0-33"> 33</a></span>
<span class="normal"><a href="#__codelineno-0-34"> 34</a></span>
<span class="normal"><a href="#__codelineno-0-35"> 35</a></span>
<span class="normal"><a href="#__codelineno-0-36"> 36</a></span>
<span class="normal"><a href="#__codelineno-0-37"> 37</a></span>
<span class="normal"><a href="#__codelineno-0-38"> 38</a></span>
<span class="normal"><a href="#__codelineno-0-39"> 39</a></span>
<span class="normal"><a href="#__codelineno-0-40"> 40</a></span>
<span class="normal"><a href="#__codelineno-0-41"> 41</a></span>
<span class="normal"><a href="#__codelineno-0-42"> 42</a></span>
<span class="normal"><a href="#__codelineno-0-43"> 43</a></span>
<span class="normal"><a href="#__codelineno-0-44"> 44</a></span>
<span class="normal"><a href="#__codelineno-0-45"> 45</a></span>
<span class="normal"><a href="#__codelineno-0-46"> 46</a></span>
<span class="normal"><a href="#__codelineno-0-47"> 47</a></span>
<span class="normal"><a href="#__codelineno-0-48"> 48</a></span>
<span class="normal"><a href="#__codelineno-0-49"> 49</a></span>
<span class="normal"><a href="#__codelineno-0-50"> 50</a></span>
<span class="normal"><a href="#__codelineno-0-51"> 51</a></span>
<span class="normal"><a href="#__codelineno-0-52"> 52</a></span>
<span class="normal"><a href="#__codelineno-0-53"> 53</a></span>
<span class="normal"><a href="#__codelineno-0-54"> 54</a></span>
<span class="normal"><a href="#__codelineno-0-55"> 55</a></span>
<span class="normal"><a href="#__codelineno-0-56"> 56</a></span>
<span class="normal"><a href="#__codelineno-0-57"> 57</a></span>
<span class="normal"><a href="#__codelineno-0-58"> 58</a></span>
<span class="normal"><a href="#__codelineno-0-59"> 59</a></span>
<span class="normal"><a href="#__codelineno-0-60"> 60</a></span>
<span class="normal"><a href="#__codelineno-0-61"> 61</a></span>
<span class="normal"><a href="#__codelineno-0-62"> 62</a></span>
<span class="normal"><a href="#__codelineno-0-63"> 63</a></span>
<span class="normal"><a href="#__codelineno-0-64"> 64</a></span>
<span class="normal"><a href="#__codelineno-0-65"> 65</a></span>
<span class="normal"><a href="#__codelineno-0-66"> 66</a></span>
<span class="normal"><a href="#__codelineno-0-67"> 67</a></span>
<span class="normal"><a href="#__codelineno-0-68"> 68</a></span>
<span class="normal"><a href="#__codelineno-0-69"> 69</a></span>
<span class="normal"><a href="#__codelineno-0-70"> 70</a></span>
<span class="normal"><a href="#__codelineno-0-71"> 71</a></span>
<span class="normal"><a href="#__codelineno-0-72"> 72</a></span>
<span class="normal"><a href="#__codelineno-0-73"> 73</a></span>
<span class="normal"><a href="#__codelineno-0-74"> 74</a></span>
<span class="normal"><a href="#__codelineno-0-75"> 75</a></span>
<span class="normal"><a href="#__codelineno-0-76"> 76</a></span>
<span class="normal"><a href="#__codelineno-0-77"> 77</a></span>
<span class="normal"><a href="#__codelineno-0-78"> 78</a></span>
<span class="normal"><a href="#__codelineno-0-79"> 79</a></span>
<span class="normal"><a href="#__codelineno-0-80"> 80</a></span>
<span class="normal"><a href="#__codelineno-0-81"> 81</a></span>
<span class="normal"><a href="#__codelineno-0-82"> 82</a></span>
<span class="normal"><a href="#__codelineno-0-83"> 83</a></span>
<span class="normal"><a href="#__codelineno-0-84"> 84</a></span>
<span class="normal"><a href="#__codelineno-0-85"> 85</a></span>
<span class="normal"><a href="#__codelineno-0-86"> 86</a></span>
<span class="normal"><a href="#__codelineno-0-87"> 87</a></span>
<span class="normal"><a href="#__codelineno-0-88"> 88</a></span>
<span class="normal"><a href="#__codelineno-0-89"> 89</a></span>
<span class="normal"><a href="#__codelineno-0-90"> 90</a></span>
<span class="normal"><a href="#__codelineno-0-91"> 91</a></span>
<span class="normal"><a href="#__codelineno-0-92"> 92</a></span>
<span class="normal"><a href="#__codelineno-0-93"> 93</a></span>
<span class="normal"><a href="#__codelineno-0-94"> 94</a></span>
<span class="normal"><a href="#__codelineno-0-95"> 95</a></span>
<span class="normal"><a href="#__codelineno-0-96"> 96</a></span>
<span class="normal"><a href="#__codelineno-0-97"> 97</a></span>
<span class="normal"><a href="#__codelineno-0-98"> 98</a></span>
<span class="normal"><a href="#__codelineno-0-99"> 99</a></span>
<span class="normal"><a href="#__codelineno-0-100">100</a></span>
<span class="normal"><a href="#__codelineno-0-101">101</a></span>
<span class="normal"><a href="#__codelineno-0-102">102</a></span>
<span class="normal"><a href="#__codelineno-0-103">103</a></span>
<span class="normal"><a href="#__codelineno-0-104">104</a></span>
<span class="normal"><a href="#__codelineno-0-105">105</a></span>
<span class="normal"><a href="#__codelineno-0-106">106</a></span>
<span class="normal"><a href="#__codelineno-0-107">107</a></span>
<span class="normal"><a href="#__codelineno-0-108">108</a></span>
<span class="normal"><a href="#__codelineno-0-109">109</a></span>
<span class="normal"><a href="#__codelineno-0-110">110</a></span>
<span class="normal"><a href="#__codelineno-0-111">111</a></span>
<span class="normal"><a href="#__codelineno-0-112">112</a></span>
<span class="normal"><a href="#__codelineno-0-113">113</a></span>
<span class="normal"><a href="#__codelineno-0-114">114</a></span>
<span class="normal"><a href="#__codelineno-0-115">115</a></span>
<span class="normal"><a href="#__codelineno-0-116">116</a></span>
<span class="normal"><a href="#__codelineno-0-117">117</a></span>
<span class="normal"><a href="#__codelineno-0-118">118</a></span>
<span class="normal"><a href="#__codelineno-0-119">119</a></span>
<span class="normal"><a href="#__codelineno-0-120">120</a></span>
<span class="normal"><a href="#__codelineno-0-121">121</a></span>
<span class="normal"><a href="#__codelineno-0-122">122</a></span>
<span class="normal"><a href="#__codelineno-0-123">123</a></span>
<span class="normal"><a href="#__codelineno-0-124">124</a></span>
<span class="normal"><a href="#__codelineno-0-125">125</a></span>
<span class="normal"><a href="#__codelineno-0-126">126</a></span>
<span class="normal"><a href="#__codelineno-0-127">127</a></span>
<span class="normal"><a href="#__codelineno-0-128">128</a></span>
<span class="normal"><a href="#__codelineno-0-129">129</a></span>
<span class="normal"><a href="#__codelineno-0-130">130</a></span>
<span class="normal"><a href="#__codelineno-0-131">131</a></span>
<span class="normal"><a href="#__codelineno-0-132">132</a></span>
<span class="normal"><a href="#__codelineno-0-133">133</a></span>
<span class="normal"><a href="#__codelineno-0-134">134</a></span>
<span class="normal"><a href="#__codelineno-0-135">135</a></span>
<span class="normal"><a href="#__codelineno-0-136">136</a></span>
<span class="normal"><a href="#__codelineno-0-137">137</a></span>
<span class="normal"><a href="#__codelineno-0-138">138</a></span>
<span class="normal"><a href="#__codelineno-0-139">139</a></span>
<span class="normal"><a href="#__codelineno-0-140">140</a></span>
<span class="normal"><a href="#__codelineno-0-141">141</a></span>
<span class="normal"><a href="#__codelineno-0-142">142</a></span>
<span class="normal"><a href="#__codelineno-0-143">143</a></span>
<span class="normal"><a href="#__codelineno-0-144">144</a></span>
<span class="normal"><a href="#__codelineno-0-145">145</a></span>
<span class="normal"><a href="#__codelineno-0-146">146</a></span>
<span class="normal"><a href="#__codelineno-0-147">147</a></span>
<span class="normal"><a href="#__codelineno-0-148">148</a></span>
<span class="normal"><a href="#__codelineno-0-149">149</a></span>
<span class="normal"><a href="#__codelineno-0-150">150</a></span>
<span class="normal"><a href="#__codelineno-0-151">151</a></span>
<span class="normal"><a href="#__codelineno-0-152">152</a></span>
<span class="normal"><a href="#__codelineno-0-153">153</a></span>
<span class="normal"><a href="#__codelineno-0-154">154</a></span>
<span class="normal"><a href="#__codelineno-0-155">155</a></span>
<span class="normal"><a href="#__codelineno-0-156">156</a></span>
<span class="normal"><a href="#__codelineno-0-157">157</a></span>
<span class="normal"><a href="#__codelineno-0-158">158</a></span>
<span class="normal"><a href="#__codelineno-0-159">159</a></span>
<span class="normal"><a href="#__codelineno-0-160">160</a></span>
<span class="normal"><a href="#__codelineno-0-161">161</a></span>
<span class="normal"><a href="#__codelineno-0-162">162</a></span>
<span class="normal"><a href="#__codelineno-0-163">163</a></span>
<span class="normal"><a href="#__codelineno-0-164">164</a></span>
<span class="normal"><a href="#__codelineno-0-165">165</a></span>
<span class="normal"><a href="#__codelineno-0-166">166</a></span>
<span class="normal"><a href="#__codelineno-0-167">167</a></span>
<span class="normal"><a href="#__codelineno-0-168">168</a></span>
<span class="normal"><a href="#__codelineno-0-169">169</a></span>
<span class="normal"><a href="#__codelineno-0-170">170</a></span>
<span class="normal"><a href="#__codelineno-0-171">171</a></span>
<span class="normal"><a href="#__codelineno-0-172">172</a></span>
<span class="normal"><a href="#__codelineno-0-173">173</a></span>
<span class="normal"><a href="#__codelineno-0-174">174</a></span>
<span class="normal"><a href="#__codelineno-0-175">175</a></span>
<span class="normal"><a href="#__codelineno-0-176">176</a></span>
<span class="normal"><a href="#__codelineno-0-177">177</a></span>
<span class="normal"><a href="#__codelineno-0-178">178</a></span>
<span class="normal"><a href="#__codelineno-0-179">179</a></span>
<span class="normal"><a href="#__codelineno-0-180">180</a></span>
<span class="normal"><a href="#__codelineno-0-181">181</a></span>
<span class="normal"><a href="#__codelineno-0-182">182</a></span>
<span class="normal"><a href="#__codelineno-0-183">183</a></span>
<span class="normal"><a href="#__codelineno-0-184">184</a></span>
<span class="normal"><a href="#__codelineno-0-185">185</a></span>
<span class="normal"><a href="#__codelineno-0-186">186</a></span>
<span class="normal"><a href="#__codelineno-0-187">187</a></span>
<span class="normal"><a href="#__codelineno-0-188">188</a></span>
<span class="normal"><a href="#__codelineno-0-189">189</a></span>
<span class="normal"><a href="#__codelineno-0-190">190</a></span>
<span class="normal"><a href="#__codelineno-0-191">191</a></span>
<span class="normal"><a href="#__codelineno-0-192">192</a></span>
<span class="normal"><a href="#__codelineno-0-193">193</a></span>
<span class="normal"><a href="#__codelineno-0-194">194</a></span>
<span class="normal"><a href="#__codelineno-0-195">195</a></span>
<span class="normal"><a href="#__codelineno-0-196">196</a></span>
<span class="normal"><a href="#__codelineno-0-197">197</a></span>
<span class="normal"><a href="#__codelineno-0-198">198</a></span>
<span class="normal"><a href="#__codelineno-0-199">199</a></span>
<span class="normal"><a href="#__codelineno-0-200">200</a></span>
<span class="normal"><a href="#__codelineno-0-201">201</a></span>
<span class="normal"><a href="#__codelineno-0-202">202</a></span>
<span class="normal"><a href="#__codelineno-0-203">203</a></span>
<span class="normal"><a href="#__codelineno-0-204">204</a></span>
<span class="normal"><a href="#__codelineno-0-205">205</a></span>
<span class="normal"><a href="#__codelineno-0-206">206</a></span>
<span class="normal"><a href="#__codelineno-0-207">207</a></span>
<span class="normal"><a href="#__codelineno-0-208">208</a></span>
<span class="normal"><a href="#__codelineno-0-209">209</a></span>
<span class="normal"><a href="#__codelineno-0-210">210</a></span>
<span class="normal"><a href="#__codelineno-0-211">211</a></span>
<span class="normal"><a href="#__codelineno-0-212">212</a></span>
<span class="normal"><a href="#__codelineno-0-213">213</a></span>
<span class="normal"><a href="#__codelineno-0-214">214</a></span>
<span class="normal"><a href="#__codelineno-0-215">215</a></span>
<span class="normal"><a href="#__codelineno-0-216">216</a></span>
<span class="normal"><a href="#__codelineno-0-217">217</a></span>
<span class="normal"><a href="#__codelineno-0-218">218</a></span>
<span class="normal"><a href="#__codelineno-0-219">219</a></span>
<span class="normal"><a href="#__codelineno-0-220">220</a></span>
<span class="normal"><a href="#__codelineno-0-221">221</a></span>
<span class="normal"><a href="#__codelineno-0-222">222</a></span>
<span class="normal"><a href="#__codelineno-0-223">223</a></span>
<span class="normal"><a href="#__codelineno-0-224">224</a></span>
<span class="normal"><a href="#__codelineno-0-225">225</a></span>
<span class="normal"><a href="#__codelineno-0-226">226</a></span>
<span class="normal"><a href="#__codelineno-0-227">227</a></span>
<span class="normal"><a href="#__codelineno-0-228">228</a></span>
<span class="normal"><a href="#__codelineno-0-229">229</a></span>
<span class="normal"><a href="#__codelineno-0-230">230</a></span>
<span class="normal"><a href="#__codelineno-0-231">231</a></span>
<span class="normal"><a href="#__codelineno-0-232">232</a></span>
<span class="normal"><a href="#__codelineno-0-233">233</a></span>
<span class="normal"><a href="#__codelineno-0-234">234</a></span>
<span class="normal"><a href="#__codelineno-0-235">235</a></span>
<span class="normal"><a href="#__codelineno-0-236">236</a></span>
<span class="normal"><a href="#__codelineno-0-237">237</a></span>
<span class="normal"><a href="#__codelineno-0-238">238</a></span>
<span class="normal"><a href="#__codelineno-0-239">239</a></span>
<span class="normal"><a href="#__codelineno-0-240">240</a></span>
<span class="normal"><a href="#__codelineno-0-241">241</a></span>
<span class="normal"><a href="#__codelineno-0-242">242</a></span>
<span class="normal"><a href="#__codelineno-0-243">243</a></span>
<span class="normal"><a href="#__codelineno-0-244">244</a></span>
<span class="normal"><a href="#__codelineno-0-245">245</a></span>
<span class="normal"><a href="#__codelineno-0-246">246</a></span>
<span class="normal"><a href="#__codelineno-0-247">247</a></span>
<span class="normal"><a href="#__codelineno-0-248">248</a></span>
<span class="normal"><a href="#__codelineno-0-249">249</a></span>
<span class="normal"><a href="#__codelineno-0-250">250</a></span>
<span class="normal"><a href="#__codelineno-0-251">251</a></span>
<span class="normal"><a href="#__codelineno-0-252">252</a></span>
<span class="normal"><a href="#__codelineno-0-253">253</a></span>
<span class="normal"><a href="#__codelineno-0-254">254</a></span>
<span class="normal"><a href="#__codelineno-0-255">255</a></span>
<span class="normal"><a href="#__codelineno-0-256">256</a></span>
<span class="normal"><a href="#__codelineno-0-257">257</a></span>
<span class="normal"><a href="#__codelineno-0-258">258</a></span>
<span class="normal"><a href="#__codelineno-0-259">259</a></span>
<span class="normal"><a href="#__codelineno-0-260">260</a></span>
<span class="normal"><a href="#__codelineno-0-261">261</a></span>
<span class="normal"><a href="#__codelineno-0-262">262</a></span>
<span class="normal"><a href="#__codelineno-0-263">263</a></span>
<span class="normal"><a href="#__codelineno-0-264">264</a></span>
<span class="normal"><a href="#__codelineno-0-265">265</a></span>
<span class="normal"><a href="#__codelineno-0-266">266</a></span>
<span class="normal"><a href="#__codelineno-0-267">267</a></span>
<span class="normal"><a href="#__codelineno-0-268">268</a></span>
<span class="normal"><a href="#__codelineno-0-269">269</a></span>
<span class="normal"><a href="#__codelineno-0-270">270</a></span>
<span class="normal"><a href="#__codelineno-0-271">271</a></span>
<span class="normal"><a href="#__codelineno-0-272">272</a></span>
<span class="normal"><a href="#__codelineno-0-273">273</a></span>
<span class="normal"><a href="#__codelineno-0-274">274</a></span>
<span class="normal"><a href="#__codelineno-0-275">275</a></span>
<span class="normal"><a href="#__codelineno-0-276">276</a></span>
<span class="normal"><a href="#__codelineno-0-277">277</a></span>
<span class="normal"><a href="#__codelineno-0-278">278</a></span>
<span class="normal"><a href="#__codelineno-0-279">279</a></span>
<span class="normal"><a href="#__codelineno-0-280">280</a></span>
<span class="normal"><a href="#__codelineno-0-281">281</a></span>
<span class="normal"><a href="#__codelineno-0-282">282</a></span>
<span class="normal"><a href="#__codelineno-0-283">283</a></span>
<span class="normal"><a href="#__codelineno-0-284">284</a></span>
<span class="normal"><a href="#__codelineno-0-285">285</a></span>
<span class="normal"><a href="#__codelineno-0-286">286</a></span>
<span class="normal"><a href="#__codelineno-0-287">287</a></span>
<span class="normal"><a href="#__codelineno-0-288">288</a></span>
<span class="normal"><a href="#__codelineno-0-289">289</a></span>
<span class="normal"><a href="#__codelineno-0-290">290</a></span>
<span class="normal"><a href="#__codelineno-0-291">291</a></span>
<span class="normal"><a href="#__codelineno-0-292">292</a></span>
<span class="normal"><a href="#__codelineno-0-293">293</a></span>
<span class="normal"><a href="#__codelineno-0-294">294</a></span>
<span class="normal"><a href="#__codelineno-0-295">295</a></span>
<span class="normal"><a href="#__codelineno-0-296">296</a></span>
<span class="normal"><a href="#__codelineno-0-297">297</a></span>
<span class="normal"><a href="#__codelineno-0-298">298</a></span>
<span class="normal"><a href="#__codelineno-0-299">299</a></span>
<span class="normal"><a href="#__codelineno-0-300">300</a></span>
<span class="normal"><a href="#__codelineno-0-301">301</a></span>
<span class="normal"><a href="#__codelineno-0-302">302</a></span>
<span class="normal"><a href="#__codelineno-0-303">303</a></span>
<span class="normal"><a href="#__codelineno-0-304">304</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-22" name="__codelineno-0-22"></a><span class="k">class</span> <span class="nc">NautobotAutoSchema</span><span class="p">(</span><span class="n">AutoSchema</span><span class="p">):</span>
<a id="__codelineno-0-23" name="__codelineno-0-23"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Nautobot-specific extensions to drf-spectacular&#39;s AutoSchema.&quot;&quot;&quot;</span>
<a id="__codelineno-0-24" name="__codelineno-0-24"></a>
<a id="__codelineno-0-25" name="__codelineno-0-25"></a>    <span class="n">custom_actions</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;bulk_update&quot;</span><span class="p">,</span> <span class="s2">&quot;bulk_partial_update&quot;</span><span class="p">,</span> <span class="s2">&quot;bulk_destroy&quot;</span><span class="p">]</span>
<a id="__codelineno-0-26" name="__codelineno-0-26"></a>
<a id="__codelineno-0-27" name="__codelineno-0-27"></a>    <span class="c1"># Primarily, method_mapping is used to map HTTP method verbs to viewset method names,</span>
<a id="__codelineno-0-28" name="__codelineno-0-28"></a>    <span class="c1"># which doesn&#39;t account for the fact that with our custom actions there are multiple viewset methods per verb,</span>
<a id="__codelineno-0-29" name="__codelineno-0-29"></a>    <span class="c1"># hence why we have to override get_operation_id() below.</span>
<a id="__codelineno-0-30" name="__codelineno-0-30"></a>    <span class="c1"># Secondarily, drf-spectacular uses method_mapping.values() to identify which methods are view methods,</span>
<a id="__codelineno-0-31" name="__codelineno-0-31"></a>    <span class="c1"># so need to make sure these methods are represented as values in the mapping even if not under the actual verbs.</span>
<a id="__codelineno-0-32" name="__codelineno-0-32"></a>    <span class="n">method_mapping</span> <span class="o">=</span> <span class="n">AutoSchema</span><span class="o">.</span><span class="n">method_mapping</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<a id="__codelineno-0-33" name="__codelineno-0-33"></a>    <span class="n">method_mapping</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
<a id="__codelineno-0-34" name="__codelineno-0-34"></a>        <span class="p">{</span>
<a id="__codelineno-0-35" name="__codelineno-0-35"></a>            <span class="s2">&quot;_put&quot;</span><span class="p">:</span> <span class="s2">&quot;bulk_update&quot;</span><span class="p">,</span>
<a id="__codelineno-0-36" name="__codelineno-0-36"></a>            <span class="s2">&quot;_patch&quot;</span><span class="p">:</span> <span class="s2">&quot;bulk_partial_update&quot;</span><span class="p">,</span>
<a id="__codelineno-0-37" name="__codelineno-0-37"></a>            <span class="s2">&quot;_delete&quot;</span><span class="p">:</span> <span class="s2">&quot;bulk_destroy&quot;</span><span class="p">,</span>
<a id="__codelineno-0-38" name="__codelineno-0-38"></a>        <span class="p">}</span>
<a id="__codelineno-0-39" name="__codelineno-0-39"></a>    <span class="p">)</span>
<a id="__codelineno-0-40" name="__codelineno-0-40"></a>
<a id="__codelineno-0-41" name="__codelineno-0-41"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-42" name="__codelineno-0-42"></a>    <span class="k">def</span> <span class="nf">is_bulk_action</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-43" name="__codelineno-0-43"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Custom property for convenience.&quot;&quot;&quot;</span>
<a id="__codelineno-0-44" name="__codelineno-0-44"></a>        <span class="k">return</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="p">,</span> <span class="s2">&quot;action&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">action</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">custom_actions</span>
<a id="__codelineno-0-45" name="__codelineno-0-45"></a>
<a id="__codelineno-0-46" name="__codelineno-0-46"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-47" name="__codelineno-0-47"></a>    <span class="k">def</span> <span class="nf">is_partial_action</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-48" name="__codelineno-0-48"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Custom property for convenience.&quot;&quot;&quot;</span>
<a id="__codelineno-0-49" name="__codelineno-0-49"></a>        <span class="k">return</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="p">,</span> <span class="s2">&quot;action&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">action</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;partial_update&quot;</span><span class="p">,</span> <span class="s2">&quot;bulk_partial_update&quot;</span><span class="p">]</span>
<a id="__codelineno-0-50" name="__codelineno-0-50"></a>
<a id="__codelineno-0-51" name="__codelineno-0-51"></a>    <span class="k">def</span> <span class="nf">_get_paginator</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-52" name="__codelineno-0-52"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Nautobot&#39;s custom bulk operations, even though they return a list of records, are NOT paginated.&quot;&quot;&quot;</span>
<a id="__codelineno-0-53" name="__codelineno-0-53"></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_bulk_action</span><span class="p">:</span>
<a id="__codelineno-0-54" name="__codelineno-0-54"></a>            <span class="k">return</span> <span class="kc">None</span>
<a id="__codelineno-0-55" name="__codelineno-0-55"></a>        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">_get_paginator</span><span class="p">()</span>
<a id="__codelineno-0-56" name="__codelineno-0-56"></a>
<a id="__codelineno-0-57" name="__codelineno-0-57"></a>    <span class="k">def</span> <span class="nf">get_description</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-58" name="__codelineno-0-58"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-59" name="__codelineno-0-59"></a><span class="sd">        Get the appropriate description for a given API endpoint.</span>
<a id="__codelineno-0-60" name="__codelineno-0-60"></a>
<a id="__codelineno-0-61" name="__codelineno-0-61"></a><span class="sd">        By default, if a specific action doesn&#39;t have its own docstring, and neither does the view class,</span>
<a id="__codelineno-0-62" name="__codelineno-0-62"></a><span class="sd">        drf-spectacular will walk up the MRO of the view class until it finds a docstring, and use that.</span>
<a id="__codelineno-0-63" name="__codelineno-0-63"></a><span class="sd">        Most of our viewsets (for better or for worse) do not have docstrings, and so it&#39;ll find and use the generic</span>
<a id="__codelineno-0-64" name="__codelineno-0-64"></a><span class="sd">        docstring of the `NautobotModelViewSet` class, which isn&#39;t very useful to the end user. Instead of doing that,</span>
<a id="__codelineno-0-65" name="__codelineno-0-65"></a><span class="sd">        we only use the docstring of the view itself (ignoring its parent class docstrings), or if none exists, we</span>
<a id="__codelineno-0-66" name="__codelineno-0-66"></a><span class="sd">        make an attempt at rendering a basically accurate default description.</span>
<a id="__codelineno-0-67" name="__codelineno-0-67"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-68" name="__codelineno-0-68"></a>        <span class="n">action_or_method</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="p">,</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="p">,</span> <span class="s2">&quot;action&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">method</span><span class="o">.</span><span class="n">lower</span><span class="p">()),</span> <span class="kc">None</span><span class="p">)</span>
<a id="__codelineno-0-69" name="__codelineno-0-69"></a>        <span class="n">action_doc</span> <span class="o">=</span> <span class="n">get_doc</span><span class="p">(</span><span class="n">action_or_method</span><span class="p">)</span>
<a id="__codelineno-0-70" name="__codelineno-0-70"></a>        <span class="k">if</span> <span class="n">action_doc</span><span class="p">:</span>
<a id="__codelineno-0-71" name="__codelineno-0-71"></a>            <span class="k">return</span> <span class="n">action_doc</span>
<a id="__codelineno-0-72" name="__codelineno-0-72"></a>
<a id="__codelineno-0-73" name="__codelineno-0-73"></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="vm">__doc__</span><span class="p">:</span>
<a id="__codelineno-0-74" name="__codelineno-0-74"></a>            <span class="n">view_doc</span> <span class="o">=</span> <span class="n">get_doc</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="vm">__class__</span><span class="p">)</span>
<a id="__codelineno-0-75" name="__codelineno-0-75"></a>            <span class="k">if</span> <span class="n">view_doc</span><span class="p">:</span>
<a id="__codelineno-0-76" name="__codelineno-0-76"></a>                <span class="k">return</span> <span class="n">view_doc</span>
<a id="__codelineno-0-77" name="__codelineno-0-77"></a>
<a id="__codelineno-0-78" name="__codelineno-0-78"></a>        <span class="c1"># Fall back to a generic default description</span>
<a id="__codelineno-0-79" name="__codelineno-0-79"></a>        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="p">,</span> <span class="s2">&quot;queryset&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">method</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">method_mapping</span><span class="p">:</span>
<a id="__codelineno-0-80" name="__codelineno-0-80"></a>            <span class="n">action</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">method_mapping</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">method</span><span class="o">.</span><span class="n">lower</span><span class="p">()]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">,</span> <span class="s2">&quot; &quot;</span><span class="p">)</span><span class="o">.</span><span class="n">capitalize</span><span class="p">()</span>
<a id="__codelineno-0-81" name="__codelineno-0-81"></a>            <span class="n">model_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">queryset</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">verbose_name</span>
<a id="__codelineno-0-82" name="__codelineno-0-82"></a>            <span class="k">if</span> <span class="n">action</span> <span class="o">==</span> <span class="s2">&quot;Create&quot;</span><span class="p">:</span>
<a id="__codelineno-0-83" name="__codelineno-0-83"></a>                <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">action</span><span class="si">}</span><span class="s2"> one or more </span><span class="si">{</span><span class="n">model_name</span><span class="si">}</span><span class="s2"> objects.&quot;</span>
<a id="__codelineno-0-84" name="__codelineno-0-84"></a>            <span class="k">if</span> <span class="s2">&quot;</span><span class="si">{id}</span><span class="s2">&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">:</span>
<a id="__codelineno-0-85" name="__codelineno-0-85"></a>                <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">action</span><span class="si">}</span><span class="s2"> a </span><span class="si">{</span><span class="n">model_name</span><span class="si">}</span><span class="s2"> object.&quot;</span>
<a id="__codelineno-0-86" name="__codelineno-0-86"></a>            <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">action</span><span class="si">}</span><span class="s2"> a list of </span><span class="si">{</span><span class="n">model_name</span><span class="si">}</span><span class="s2"> objects.&quot;</span>
<a id="__codelineno-0-87" name="__codelineno-0-87"></a>
<a id="__codelineno-0-88" name="__codelineno-0-88"></a>        <span class="c1"># Give up</span>
<a id="__codelineno-0-89" name="__codelineno-0-89"></a>        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">get_description</span><span class="p">()</span>
<a id="__codelineno-0-90" name="__codelineno-0-90"></a>
<a id="__codelineno-0-91" name="__codelineno-0-91"></a>    <span class="k">def</span> <span class="nf">get_filter_backends</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-92" name="__codelineno-0-92"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Nautobot&#39;s custom bulk operations, even though they return a list of records, are NOT filterable.&quot;&quot;&quot;</span>
<a id="__codelineno-0-93" name="__codelineno-0-93"></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_bulk_action</span><span class="p">:</span>
<a id="__codelineno-0-94" name="__codelineno-0-94"></a>            <span class="k">return</span> <span class="p">[]</span>
<a id="__codelineno-0-95" name="__codelineno-0-95"></a>        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">get_filter_backends</span><span class="p">()</span>
<a id="__codelineno-0-96" name="__codelineno-0-96"></a>
<a id="__codelineno-0-97" name="__codelineno-0-97"></a>    <span class="k">def</span> <span class="nf">get_operation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<a id="__codelineno-0-98" name="__codelineno-0-98"></a>        <span class="n">operation</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">get_operation</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
<a id="__codelineno-0-99" name="__codelineno-0-99"></a>        <span class="c1"># drf-spectacular never generates a requestBody for DELETE operations, but our bulk-delete operations need one</span>
<a id="__codelineno-0-100" name="__codelineno-0-100"></a>        <span class="k">if</span> <span class="n">operation</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="s2">&quot;requestBody&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">operation</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_bulk_action</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="s2">&quot;DELETE&quot;</span><span class="p">:</span>
<a id="__codelineno-0-101" name="__codelineno-0-101"></a>            <span class="c1"># based on drf-spectacular&#39;s `_get_request_body()`, `_get_request_for_media_type()`,</span>
<a id="__codelineno-0-102" name="__codelineno-0-102"></a>            <span class="c1"># `_unwrap_list_serializer()`, and `_get_request_for_media_type()` methods</span>
<a id="__codelineno-0-103" name="__codelineno-0-103"></a>            <span class="n">request_serializer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_request_serializer</span><span class="p">()</span>
<a id="__codelineno-0-104" name="__codelineno-0-104"></a>
<a id="__codelineno-0-105" name="__codelineno-0-105"></a>            <span class="c1"># We skip past a number of checks from the aforementioned private methods, as this is a very specific case</span>
<a id="__codelineno-0-106" name="__codelineno-0-106"></a>            <span class="n">component</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">resolve_serializer</span><span class="p">(</span><span class="n">request_serializer</span><span class="o">.</span><span class="n">child</span><span class="p">,</span> <span class="s2">&quot;request&quot;</span><span class="p">)</span>
<a id="__codelineno-0-107" name="__codelineno-0-107"></a>
<a id="__codelineno-0-108" name="__codelineno-0-108"></a>            <span class="n">operation</span><span class="p">[</span><span class="s2">&quot;requestBody&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
<a id="__codelineno-0-109" name="__codelineno-0-109"></a>                <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="p">{</span>
<a id="__codelineno-0-110" name="__codelineno-0-110"></a>                    <span class="n">media_type</span><span class="p">:</span> <span class="n">build_media_type_object</span><span class="p">(</span><span class="n">build_array_type</span><span class="p">(</span><span class="n">component</span><span class="o">.</span><span class="n">ref</span><span class="p">))</span>
<a id="__codelineno-0-111" name="__codelineno-0-111"></a>                    <span class="k">for</span> <span class="n">media_type</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">map_parsers</span><span class="p">()</span>
<a id="__codelineno-0-112" name="__codelineno-0-112"></a>                <span class="p">},</span>
<a id="__codelineno-0-113" name="__codelineno-0-113"></a>                <span class="s2">&quot;required&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
<a id="__codelineno-0-114" name="__codelineno-0-114"></a>            <span class="p">}</span>
<a id="__codelineno-0-115" name="__codelineno-0-115"></a>
<a id="__codelineno-0-116" name="__codelineno-0-116"></a>        <span class="c1"># Inject a custom description for the &quot;id&quot; parameter since ours has custom lookup behavior.</span>
<a id="__codelineno-0-117" name="__codelineno-0-117"></a>        <span class="k">if</span> <span class="s2">&quot;parameters&quot;</span> <span class="ow">in</span> <span class="n">operation</span><span class="p">:</span>
<a id="__codelineno-0-118" name="__codelineno-0-118"></a>            <span class="k">for</span> <span class="n">param</span> <span class="ow">in</span> <span class="n">operation</span><span class="p">[</span><span class="s2">&quot;parameters&quot;</span><span class="p">]:</span>
<a id="__codelineno-0-119" name="__codelineno-0-119"></a>                <span class="k">if</span> <span class="n">param</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;id&quot;</span> <span class="ow">and</span> <span class="s2">&quot;description&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">param</span><span class="p">:</span>
<a id="__codelineno-0-120" name="__codelineno-0-120"></a>                    <span class="n">param</span><span class="p">[</span><span class="s2">&quot;description&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Unique object identifier, either a UUID primary key or a composite key.&quot;</span>
<a id="__codelineno-0-121" name="__codelineno-0-121"></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="s2">&quot;GET&quot;</span><span class="p">:</span>
<a id="__codelineno-0-122" name="__codelineno-0-122"></a>                <span class="k">if</span> <span class="s2">&quot;depth&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">operation</span><span class="p">[</span><span class="s2">&quot;parameters&quot;</span><span class="p">]:</span>
<a id="__codelineno-0-123" name="__codelineno-0-123"></a>                    <span class="n">operation</span><span class="p">[</span><span class="s2">&quot;parameters&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
<a id="__codelineno-0-124" name="__codelineno-0-124"></a>                        <span class="p">{</span>
<a id="__codelineno-0-125" name="__codelineno-0-125"></a>                            <span class="s2">&quot;in&quot;</span><span class="p">:</span> <span class="s2">&quot;query&quot;</span><span class="p">,</span>
<a id="__codelineno-0-126" name="__codelineno-0-126"></a>                            <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;depth&quot;</span><span class="p">,</span>
<a id="__codelineno-0-127" name="__codelineno-0-127"></a>                            <span class="s2">&quot;required&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
<a id="__codelineno-0-128" name="__codelineno-0-128"></a>                            <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Serializer Depth&quot;</span><span class="p">,</span>
<a id="__codelineno-0-129" name="__codelineno-0-129"></a>                            <span class="s2">&quot;schema&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;integer&quot;</span><span class="p">,</span> <span class="s2">&quot;minimum&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;maximum&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">},</span>
<a id="__codelineno-0-130" name="__codelineno-0-130"></a>                        <span class="p">}</span>
<a id="__codelineno-0-131" name="__codelineno-0-131"></a>                    <span class="p">)</span>
<a id="__codelineno-0-132" name="__codelineno-0-132"></a>        <span class="k">return</span> <span class="n">operation</span>
<a id="__codelineno-0-133" name="__codelineno-0-133"></a>
<a id="__codelineno-0-134" name="__codelineno-0-134"></a>    <span class="k">def</span> <span class="nf">get_operation_id</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-135" name="__codelineno-0-135"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Extend the base method to handle Nautobot&#39;s REST API bulk operations.</span>
<a id="__codelineno-0-136" name="__codelineno-0-136"></a>
<a id="__codelineno-0-137" name="__codelineno-0-137"></a><span class="sd">        Without this extension, every one of our ModelViewSet classes will result in drf-spectacular complaining</span>
<a id="__codelineno-0-138" name="__codelineno-0-138"></a><span class="sd">        about operationId collisions, e.g. between DELETE /api/dcim/devices/ and DELETE /api/dcim/devices/&lt;pk&gt;/ would</span>
<a id="__codelineno-0-139" name="__codelineno-0-139"></a><span class="sd">        both get resolved to the same &quot;dcim_devices_destroy&quot; operation-id and this would make drf-spectacular complain.</span>
<a id="__codelineno-0-140" name="__codelineno-0-140"></a>
<a id="__codelineno-0-141" name="__codelineno-0-141"></a><span class="sd">        With this extension, the bulk endpoints automatically get a different operation-id from the non-bulk endpoints.</span>
<a id="__codelineno-0-142" name="__codelineno-0-142"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-143" name="__codelineno-0-143"></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_bulk_action</span><span class="p">:</span>
<a id="__codelineno-0-144" name="__codelineno-0-144"></a>            <span class="c1"># Same basic sequence of calls as AutoSchema.get_operation_id,</span>
<a id="__codelineno-0-145" name="__codelineno-0-145"></a>            <span class="c1"># except we use &quot;self.view.action&quot; instead of &quot;self.method_mapping[self.method]&quot; to get the action verb</span>
<a id="__codelineno-0-146" name="__codelineno-0-146"></a>            <span class="n">tokenized_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tokenize_path</span><span class="p">()</span>
<a id="__codelineno-0-147" name="__codelineno-0-147"></a>            <span class="n">tokenized_path</span> <span class="o">=</span> <span class="p">[</span><span class="n">t</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;-&quot;</span><span class="p">,</span> <span class="s2">&quot;_&quot;</span><span class="p">)</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">tokenized_path</span><span class="p">]</span>
<a id="__codelineno-0-148" name="__codelineno-0-148"></a>
<a id="__codelineno-0-149" name="__codelineno-0-149"></a>            <span class="n">action</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">action</span>
<a id="__codelineno-0-150" name="__codelineno-0-150"></a>
<a id="__codelineno-0-151" name="__codelineno-0-151"></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">tokenized_path</span><span class="p">:</span>
<a id="__codelineno-0-152" name="__codelineno-0-152"></a>                <span class="n">tokenized_path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;root&quot;</span><span class="p">)</span>
<a id="__codelineno-0-153" name="__codelineno-0-153"></a>            <span class="k">if</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;&lt;drf_format_suffix\w*:\w+&gt;&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">path_regex</span><span class="p">):</span>
<a id="__codelineno-0-154" name="__codelineno-0-154"></a>                <span class="n">tokenized_path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;formatted&quot;</span><span class="p">)</span>
<a id="__codelineno-0-155" name="__codelineno-0-155"></a>
<a id="__codelineno-0-156" name="__codelineno-0-156"></a>            <span class="k">return</span> <span class="s2">&quot;_&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">tokenized_path</span> <span class="o">+</span> <span class="p">[</span><span class="n">action</span><span class="p">])</span>
<a id="__codelineno-0-157" name="__codelineno-0-157"></a>
<a id="__codelineno-0-158" name="__codelineno-0-158"></a>        <span class="c1"># For all other view actions, operation-id is the same as in the base class</span>
<a id="__codelineno-0-159" name="__codelineno-0-159"></a>        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">get_operation_id</span><span class="p">()</span>
<a id="__codelineno-0-160" name="__codelineno-0-160"></a>
<a id="__codelineno-0-161" name="__codelineno-0-161"></a>    <span class="k">def</span> <span class="nf">get_request_serializer</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-162" name="__codelineno-0-162"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-163" name="__codelineno-0-163"></a><span class="sd">        Return the request serializer (used for describing/parsing the request payload) for this endpoint.</span>
<a id="__codelineno-0-164" name="__codelineno-0-164"></a>
<a id="__codelineno-0-165" name="__codelineno-0-165"></a><span class="sd">        We override the default drf-spectacular behavior for the case where the endpoint describes a write request</span>
<a id="__codelineno-0-166" name="__codelineno-0-166"></a><span class="sd">        with required data (PATCH, POST, PUT). In those cases we replace FooSerializer with a dynamically-defined</span>
<a id="__codelineno-0-167" name="__codelineno-0-167"></a><span class="sd">        WritableFooSerializer class in order to more accurately represent the available options on write.</span>
<a id="__codelineno-0-168" name="__codelineno-0-168"></a>
<a id="__codelineno-0-169" name="__codelineno-0-169"></a><span class="sd">        We also override for the case where the endpoint is one of Nautobot&#39;s custom bulk API endpoints, which</span>
<a id="__codelineno-0-170" name="__codelineno-0-170"></a><span class="sd">        require a list of serializers as input, rather than a single one.</span>
<a id="__codelineno-0-171" name="__codelineno-0-171"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-172" name="__codelineno-0-172"></a>        <span class="n">serializer</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">get_request_serializer</span><span class="p">()</span>
<a id="__codelineno-0-173" name="__codelineno-0-173"></a>
<a id="__codelineno-0-174" name="__codelineno-0-174"></a>        <span class="c1"># For bulk operations, make sure we use a &quot;many&quot; serializer.</span>
<a id="__codelineno-0-175" name="__codelineno-0-175"></a>        <span class="n">many</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_bulk_action</span>
<a id="__codelineno-0-176" name="__codelineno-0-176"></a>        <span class="n">partial</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_partial_action</span>
<a id="__codelineno-0-177" name="__codelineno-0-177"></a>
<a id="__codelineno-0-178" name="__codelineno-0-178"></a>        <span class="k">if</span> <span class="n">serializer</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">method</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;PATCH&quot;</span><span class="p">,</span> <span class="s2">&quot;POST&quot;</span><span class="p">,</span> <span class="s2">&quot;PUT&quot;</span><span class="p">]:</span>
<a id="__codelineno-0-179" name="__codelineno-0-179"></a>            <span class="n">writable_class</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_writable_class</span><span class="p">(</span><span class="n">serializer</span><span class="p">,</span> <span class="n">bulk</span><span class="o">=</span><span class="n">many</span><span class="p">)</span>
<a id="__codelineno-0-180" name="__codelineno-0-180"></a>            <span class="k">if</span> <span class="n">writable_class</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-181" name="__codelineno-0-181"></a>                <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">serializer</span><span class="p">,</span> <span class="s2">&quot;child&quot;</span><span class="p">):</span>
<a id="__codelineno-0-182" name="__codelineno-0-182"></a>                    <span class="n">child_serializer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_writable_class</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">child</span><span class="p">,</span> <span class="n">bulk</span><span class="o">=</span><span class="n">many</span><span class="p">)</span>
<a id="__codelineno-0-183" name="__codelineno-0-183"></a>                    <span class="n">serializer</span> <span class="o">=</span> <span class="n">writable_class</span><span class="p">(</span><span class="n">child</span><span class="o">=</span><span class="n">child_serializer</span><span class="p">,</span> <span class="n">many</span><span class="o">=</span><span class="n">many</span><span class="p">,</span> <span class="n">partial</span><span class="o">=</span><span class="n">partial</span><span class="p">)</span>
<a id="__codelineno-0-184" name="__codelineno-0-184"></a>                <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-185" name="__codelineno-0-185"></a>                    <span class="n">serializer</span> <span class="o">=</span> <span class="n">writable_class</span><span class="p">(</span><span class="n">many</span><span class="o">=</span><span class="n">many</span><span class="p">,</span> <span class="n">partial</span><span class="o">=</span><span class="n">partial</span><span class="p">)</span>
<a id="__codelineno-0-186" name="__codelineno-0-186"></a>
<a id="__codelineno-0-187" name="__codelineno-0-187"></a>        <span class="k">return</span> <span class="n">serializer</span>
<a id="__codelineno-0-188" name="__codelineno-0-188"></a>
<a id="__codelineno-0-189" name="__codelineno-0-189"></a>    <span class="k">def</span> <span class="nf">get_response_serializers</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-190" name="__codelineno-0-190"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-191" name="__codelineno-0-191"></a><span class="sd">        Return the response serializer (used for describing the response payload) for this endpoint.</span>
<a id="__codelineno-0-192" name="__codelineno-0-192"></a>
<a id="__codelineno-0-193" name="__codelineno-0-193"></a><span class="sd">        We override the default drf-spectacular behavior for the case where the endpoint describes a write request</span>
<a id="__codelineno-0-194" name="__codelineno-0-194"></a><span class="sd">        to a bulk endpoint, which returns a list of serializers, rather than a single one.</span>
<a id="__codelineno-0-195" name="__codelineno-0-195"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-196" name="__codelineno-0-196"></a>        <span class="n">response_serializers</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">get_response_serializers</span><span class="p">()</span>
<a id="__codelineno-0-197" name="__codelineno-0-197"></a>
<a id="__codelineno-0-198" name="__codelineno-0-198"></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_bulk_action</span><span class="p">:</span>
<a id="__codelineno-0-199" name="__codelineno-0-199"></a>            <span class="k">if</span> <span class="n">is_serializer</span><span class="p">(</span><span class="n">response_serializers</span><span class="p">):</span>
<a id="__codelineno-0-200" name="__codelineno-0-200"></a>                <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="n">response_serializers</span><span class="p">)(</span><span class="n">many</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-0-201" name="__codelineno-0-201"></a>
<a id="__codelineno-0-202" name="__codelineno-0-202"></a>        <span class="k">return</span> <span class="n">response_serializers</span>
<a id="__codelineno-0-203" name="__codelineno-0-203"></a>
<a id="__codelineno-0-204" name="__codelineno-0-204"></a>    <span class="c1"># Cache of existing dynamically-defined WritableFooSerializer classes.</span>
<a id="__codelineno-0-205" name="__codelineno-0-205"></a>    <span class="n">writable_serializers</span> <span class="o">=</span> <span class="p">{}</span>
<a id="__codelineno-0-206" name="__codelineno-0-206"></a>
<a id="__codelineno-0-207" name="__codelineno-0-207"></a>    <span class="k">def</span> <span class="nf">get_writable_class</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">serializer</span><span class="p">,</span> <span class="n">bulk</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<a id="__codelineno-0-208" name="__codelineno-0-208"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-209" name="__codelineno-0-209"></a><span class="sd">        Given a FooSerializer instance, look up or construct a [Bulk]WritableFooSerializer class if necessary.</span>
<a id="__codelineno-0-210" name="__codelineno-0-210"></a>
<a id="__codelineno-0-211" name="__codelineno-0-211"></a><span class="sd">        If no [Bulk]WritableFooSerializer class is needed, returns None instead.</span>
<a id="__codelineno-0-212" name="__codelineno-0-212"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-213" name="__codelineno-0-213"></a>        <span class="n">properties</span> <span class="o">=</span> <span class="p">{}</span>
<a id="__codelineno-0-214" name="__codelineno-0-214"></a>        <span class="c1"># Does this serializer have any fields of certain special types?</span>
<a id="__codelineno-0-215" name="__codelineno-0-215"></a>        <span class="c1"># These are the field types that are asymmetric between request (write) and response (read); if any such fields</span>
<a id="__codelineno-0-216" name="__codelineno-0-216"></a>        <span class="c1"># are present, we should generate a distinct WritableFooSerializer to reflect that asymmetry in the schema.</span>
<a id="__codelineno-0-217" name="__codelineno-0-217"></a>        <span class="n">fields</span> <span class="o">=</span> <span class="p">{}</span> <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">serializer</span><span class="p">,</span> <span class="s2">&quot;child&quot;</span><span class="p">)</span> <span class="k">else</span> <span class="n">serializer</span><span class="o">.</span><span class="n">fields</span>
<a id="__codelineno-0-218" name="__codelineno-0-218"></a>        <span class="k">for</span> <span class="n">child_name</span><span class="p">,</span> <span class="n">child</span> <span class="ow">in</span> <span class="n">fields</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
<a id="__codelineno-0-219" name="__codelineno-0-219"></a>            <span class="c1"># Don&#39;t consider read_only fields (since we&#39;re planning specifically for the writable serializer).</span>
<a id="__codelineno-0-220" name="__codelineno-0-220"></a>            <span class="k">if</span> <span class="n">child</span><span class="o">.</span><span class="n">read_only</span><span class="p">:</span>
<a id="__codelineno-0-221" name="__codelineno-0-221"></a>                <span class="k">continue</span>
<a id="__codelineno-0-222" name="__codelineno-0-222"></a>
<a id="__codelineno-0-223" name="__codelineno-0-223"></a>            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">child</span><span class="p">,</span> <span class="p">(</span><span class="n">ChoiceField</span><span class="p">,</span> <span class="n">WritableNestedSerializer</span><span class="p">)):</span>
<a id="__codelineno-0-224" name="__codelineno-0-224"></a>                <span class="n">properties</span><span class="p">[</span><span class="n">child_name</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-225" name="__codelineno-0-225"></a>            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">child</span><span class="p">,</span> <span class="n">ManyRelatedField</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">child</span><span class="o">.</span><span class="n">child_relation</span><span class="p">,</span> <span class="n">SerializedPKRelatedField</span><span class="p">):</span>
<a id="__codelineno-0-226" name="__codelineno-0-226"></a>                <span class="n">properties</span><span class="p">[</span><span class="n">child_name</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-227" name="__codelineno-0-227"></a>
<a id="__codelineno-0-228" name="__codelineno-0-228"></a>        <span class="k">if</span> <span class="n">bulk</span><span class="p">:</span>
<a id="__codelineno-0-229" name="__codelineno-0-229"></a>            <span class="c1"># The &quot;id&quot; field is always different in bulk serializers</span>
<a id="__codelineno-0-230" name="__codelineno-0-230"></a>            <span class="n">properties</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-231" name="__codelineno-0-231"></a>
<a id="__codelineno-0-232" name="__codelineno-0-232"></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">properties</span><span class="p">:</span>
<a id="__codelineno-0-233" name="__codelineno-0-233"></a>            <span class="c1"># There&#39;s nothing about this serializer that requires a special WritableSerializer class to be defined.</span>
<a id="__codelineno-0-234" name="__codelineno-0-234"></a>            <span class="k">return</span> <span class="kc">None</span>
<a id="__codelineno-0-235" name="__codelineno-0-235"></a>
<a id="__codelineno-0-236" name="__codelineno-0-236"></a>        <span class="c1"># Have we already created a [Bulk]WritableFooSerializer class or do we need to do so now?</span>
<a id="__codelineno-0-237" name="__codelineno-0-237"></a>        <span class="n">writable_name</span> <span class="o">=</span> <span class="s2">&quot;Writable&quot;</span> <span class="o">+</span> <span class="nb">type</span><span class="p">(</span><span class="n">serializer</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span>
<a id="__codelineno-0-238" name="__codelineno-0-238"></a>        <span class="k">if</span> <span class="n">bulk</span><span class="p">:</span>
<a id="__codelineno-0-239" name="__codelineno-0-239"></a>            <span class="n">writable_name</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Bulk</span><span class="si">{</span><span class="n">writable_name</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-240" name="__codelineno-0-240"></a>        <span class="k">if</span> <span class="n">writable_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">writable_serializers</span><span class="p">:</span>
<a id="__codelineno-0-241" name="__codelineno-0-241"></a>            <span class="c1"># We need to create a new class to use</span>
<a id="__codelineno-0-242" name="__codelineno-0-242"></a>            <span class="c1"># If the original serializer class has a Meta, make sure we set Meta.ref_name appropriately</span>
<a id="__codelineno-0-243" name="__codelineno-0-243"></a>            <span class="n">meta_class</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">serializer</span><span class="p">),</span> <span class="s2">&quot;Meta&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
<a id="__codelineno-0-244" name="__codelineno-0-244"></a>            <span class="k">if</span> <span class="n">meta_class</span><span class="p">:</span>
<a id="__codelineno-0-245" name="__codelineno-0-245"></a>                <span class="n">ref_name</span> <span class="o">=</span> <span class="s2">&quot;Writable&quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_serializer_ref_name</span><span class="p">(</span><span class="n">serializer</span><span class="p">)</span>
<a id="__codelineno-0-246" name="__codelineno-0-246"></a>                <span class="k">if</span> <span class="n">bulk</span><span class="p">:</span>
<a id="__codelineno-0-247" name="__codelineno-0-247"></a>                    <span class="n">ref_name</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Bulk</span><span class="si">{</span><span class="n">ref_name</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-248" name="__codelineno-0-248"></a>                <span class="n">writable_meta</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="s2">&quot;Meta&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">meta_class</span><span class="p">,),</span> <span class="p">{</span><span class="s2">&quot;ref_name&quot;</span><span class="p">:</span> <span class="n">ref_name</span><span class="p">})</span>
<a id="__codelineno-0-249" name="__codelineno-0-249"></a>                <span class="n">properties</span><span class="p">[</span><span class="s2">&quot;Meta&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">writable_meta</span>
<a id="__codelineno-0-250" name="__codelineno-0-250"></a>
<a id="__codelineno-0-251" name="__codelineno-0-251"></a>            <span class="c1"># Define and cache a new [Bulk]WritableFooSerializer class</span>
<a id="__codelineno-0-252" name="__codelineno-0-252"></a>            <span class="k">if</span> <span class="n">bulk</span><span class="p">:</span>
<a id="__codelineno-0-253" name="__codelineno-0-253"></a>
<a id="__codelineno-0-254" name="__codelineno-0-254"></a>                <span class="k">def</span> <span class="nf">get_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-255" name="__codelineno-0-255"></a><span class="w">                    </span><span class="sd">&quot;&quot;&quot;For Nautobot&#39;s bulk_update/partial_update/delete APIs, the `id` field is mandatory.&quot;&quot;&quot;</span>
<a id="__codelineno-0-256" name="__codelineno-0-256"></a>                    <span class="n">new_fields</span> <span class="o">=</span> <span class="p">{}</span>
<a id="__codelineno-0-257" name="__codelineno-0-257"></a>                    <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">field</span> <span class="ow">in</span> <span class="nb">type</span><span class="p">(</span><span class="n">serializer</span><span class="p">)()</span><span class="o">.</span><span class="n">get_fields</span><span class="p">()</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
<a id="__codelineno-0-258" name="__codelineno-0-258"></a>                        <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;id&quot;</span><span class="p">:</span>
<a id="__codelineno-0-259" name="__codelineno-0-259"></a>                            <span class="n">field</span><span class="o">.</span><span class="n">read_only</span> <span class="o">=</span> <span class="kc">False</span>
<a id="__codelineno-0-260" name="__codelineno-0-260"></a>                            <span class="n">field</span><span class="o">.</span><span class="n">required</span> <span class="o">=</span> <span class="kc">True</span>
<a id="__codelineno-0-261" name="__codelineno-0-261"></a>                        <span class="n">new_fields</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span>
<a id="__codelineno-0-262" name="__codelineno-0-262"></a>                    <span class="k">return</span> <span class="n">new_fields</span>
<a id="__codelineno-0-263" name="__codelineno-0-263"></a>
<a id="__codelineno-0-264" name="__codelineno-0-264"></a>                <span class="n">properties</span><span class="p">[</span><span class="s2">&quot;get_fields&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">get_fields</span>
<a id="__codelineno-0-265" name="__codelineno-0-265"></a>
<a id="__codelineno-0-266" name="__codelineno-0-266"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">writable_serializers</span><span class="p">[</span><span class="n">writable_name</span><span class="p">]</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="n">writable_name</span><span class="p">,</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">serializer</span><span class="p">),),</span> <span class="n">properties</span><span class="p">)</span>
<a id="__codelineno-0-267" name="__codelineno-0-267"></a>
<a id="__codelineno-0-268" name="__codelineno-0-268"></a>        <span class="n">writable_class</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">writable_serializers</span><span class="p">[</span><span class="n">writable_name</span><span class="p">]</span>
<a id="__codelineno-0-269" name="__codelineno-0-269"></a>        <span class="k">return</span> <span class="n">writable_class</span>
<a id="__codelineno-0-270" name="__codelineno-0-270"></a>
<a id="__codelineno-0-271" name="__codelineno-0-271"></a>    <span class="k">def</span> <span class="nf">get_serializer_ref_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">serializer</span><span class="p">):</span>
<a id="__codelineno-0-272" name="__codelineno-0-272"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-273" name="__codelineno-0-273"></a><span class="sd">        Get the serializer&#39;s ref_name Meta attribute if set, or else derive a ref_name automatically.</span>
<a id="__codelineno-0-274" name="__codelineno-0-274"></a>
<a id="__codelineno-0-275" name="__codelineno-0-275"></a><span class="sd">        Based on drf_yasg.utils.get_serializer_ref_name().</span>
<a id="__codelineno-0-276" name="__codelineno-0-276"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-277" name="__codelineno-0-277"></a>        <span class="n">serializer_meta</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">serializer</span><span class="p">,</span> <span class="s2">&quot;Meta&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
<a id="__codelineno-0-278" name="__codelineno-0-278"></a>        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">serializer_meta</span><span class="p">,</span> <span class="s2">&quot;ref_name&quot;</span><span class="p">):</span>
<a id="__codelineno-0-279" name="__codelineno-0-279"></a>            <span class="k">return</span> <span class="n">serializer_meta</span><span class="o">.</span><span class="n">ref_name</span>
<a id="__codelineno-0-280" name="__codelineno-0-280"></a>        <span class="n">serializer_name</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="n">serializer</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span>
<a id="__codelineno-0-281" name="__codelineno-0-281"></a>        <span class="k">if</span> <span class="n">serializer_name</span> <span class="o">==</span> <span class="s2">&quot;NestedSerializer&quot;</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">serializer</span><span class="p">,</span> <span class="n">serializers</span><span class="o">.</span><span class="n">ModelSerializer</span><span class="p">):</span>
<a id="__codelineno-0-282" name="__codelineno-0-282"></a>            <span class="k">return</span> <span class="kc">None</span>
<a id="__codelineno-0-283" name="__codelineno-0-283"></a>        <span class="n">ref_name</span> <span class="o">=</span> <span class="n">serializer_name</span>
<a id="__codelineno-0-284" name="__codelineno-0-284"></a>        <span class="k">if</span> <span class="n">ref_name</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;Serializer&quot;</span><span class="p">):</span>
<a id="__codelineno-0-285" name="__codelineno-0-285"></a>            <span class="n">ref_name</span> <span class="o">=</span> <span class="n">ref_name</span><span class="p">[:</span> <span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="s2">&quot;Serializer&quot;</span><span class="p">)]</span>
<a id="__codelineno-0-286" name="__codelineno-0-286"></a>        <span class="k">return</span> <span class="n">ref_name</span>
<a id="__codelineno-0-287" name="__codelineno-0-287"></a>
<a id="__codelineno-0-288" name="__codelineno-0-288"></a>    <span class="k">def</span> <span class="nf">resolve_serializer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">serializer</span><span class="p">,</span> <span class="n">direction</span><span class="p">,</span> <span class="n">bypass_extensions</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<a id="__codelineno-0-289" name="__codelineno-0-289"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-290" name="__codelineno-0-290"></a><span class="sd">        Re-add required `id` field on bulk_partial_update action.</span>
<a id="__codelineno-0-291" name="__codelineno-0-291"></a>
<a id="__codelineno-0-292" name="__codelineno-0-292"></a><span class="sd">        drf-spectacular clears the `required` list for any partial serializers in its `_map_basic_serializer()`,</span>
<a id="__codelineno-0-293" name="__codelineno-0-293"></a><span class="sd">        but Nautobot bulk partial updates require the `id` field to be specified for each object to update.</span>
<a id="__codelineno-0-294" name="__codelineno-0-294"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-295" name="__codelineno-0-295"></a>        <span class="n">component</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">resolve_serializer</span><span class="p">(</span><span class="n">serializer</span><span class="p">,</span> <span class="n">direction</span><span class="p">,</span> <span class="n">bypass_extensions</span><span class="p">)</span>
<a id="__codelineno-0-296" name="__codelineno-0-296"></a>        <span class="k">if</span> <span class="p">(</span>
<a id="__codelineno-0-297" name="__codelineno-0-297"></a>            <span class="n">component</span>
<a id="__codelineno-0-298" name="__codelineno-0-298"></a>            <span class="ow">and</span> <span class="n">component</span><span class="o">.</span><span class="n">schema</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
<a id="__codelineno-0-299" name="__codelineno-0-299"></a>            <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_bulk_action</span>
<a id="__codelineno-0-300" name="__codelineno-0-300"></a>            <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_partial_action</span>
<a id="__codelineno-0-301" name="__codelineno-0-301"></a>            <span class="ow">and</span> <span class="n">direction</span> <span class="o">==</span> <span class="s2">&quot;request&quot;</span>
<a id="__codelineno-0-302" name="__codelineno-0-302"></a>        <span class="p">):</span>
<a id="__codelineno-0-303" name="__codelineno-0-303"></a>            <span class="n">component</span><span class="o">.</span><span class="n">schema</span><span class="p">[</span><span class="s2">&quot;required&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]</span>
<a id="__codelineno-0-304" name="__codelineno-0-304"></a>        <span class="k">return</span> <span class="n">component</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="nautobot.core.api.schema.NautobotAutoSchema.is_bulk_action" class="doc doc-heading">
<code class="highlight language-python"><span class="n">is_bulk_action</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#nautobot.core.api.schema.NautobotAutoSchema.is_bulk_action" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Custom property for convenience.</p>
  </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="nautobot.core.api.schema.NautobotAutoSchema.is_partial_action" class="doc doc-heading">
<code class="highlight language-python"><span class="n">is_partial_action</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#nautobot.core.api.schema.NautobotAutoSchema.is_partial_action" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Custom property for convenience.</p>
  </div>

</div>




<div class="doc doc-object doc-function">



<h3 id="nautobot.core.api.schema.NautobotAutoSchema.get_description" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_description</span><span class="p">()</span></code>

<a href="#nautobot.core.api.schema.NautobotAutoSchema.get_description" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Get the appropriate description for a given API endpoint.</p>
<p>By default, if a specific action doesn't have its own docstring, and neither does the view class,
drf-spectacular will walk up the MRO of the view class until it finds a docstring, and use that.
Most of our viewsets (for better or for worse) do not have docstrings, and so it'll find and use the generic
docstring of the <code>NautobotModelViewSet</code> class, which isn't very useful to the end user. Instead of doing that,
we only use the docstring of the view itself (ignoring its parent class docstrings), or if none exists, we
make an attempt at rendering a basically accurate default description.</p>

          <details class="quote">
            <summary>Source code in <code>nautobot/core/api/schema.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-57">57</a></span>
<span class="normal"><a href="#__codelineno-0-58">58</a></span>
<span class="normal"><a href="#__codelineno-0-59">59</a></span>
<span class="normal"><a href="#__codelineno-0-60">60</a></span>
<span class="normal"><a href="#__codelineno-0-61">61</a></span>
<span class="normal"><a href="#__codelineno-0-62">62</a></span>
<span class="normal"><a href="#__codelineno-0-63">63</a></span>
<span class="normal"><a href="#__codelineno-0-64">64</a></span>
<span class="normal"><a href="#__codelineno-0-65">65</a></span>
<span class="normal"><a href="#__codelineno-0-66">66</a></span>
<span class="normal"><a href="#__codelineno-0-67">67</a></span>
<span class="normal"><a href="#__codelineno-0-68">68</a></span>
<span class="normal"><a href="#__codelineno-0-69">69</a></span>
<span class="normal"><a href="#__codelineno-0-70">70</a></span>
<span class="normal"><a href="#__codelineno-0-71">71</a></span>
<span class="normal"><a href="#__codelineno-0-72">72</a></span>
<span class="normal"><a href="#__codelineno-0-73">73</a></span>
<span class="normal"><a href="#__codelineno-0-74">74</a></span>
<span class="normal"><a href="#__codelineno-0-75">75</a></span>
<span class="normal"><a href="#__codelineno-0-76">76</a></span>
<span class="normal"><a href="#__codelineno-0-77">77</a></span>
<span class="normal"><a href="#__codelineno-0-78">78</a></span>
<span class="normal"><a href="#__codelineno-0-79">79</a></span>
<span class="normal"><a href="#__codelineno-0-80">80</a></span>
<span class="normal"><a href="#__codelineno-0-81">81</a></span>
<span class="normal"><a href="#__codelineno-0-82">82</a></span>
<span class="normal"><a href="#__codelineno-0-83">83</a></span>
<span class="normal"><a href="#__codelineno-0-84">84</a></span>
<span class="normal"><a href="#__codelineno-0-85">85</a></span>
<span class="normal"><a href="#__codelineno-0-86">86</a></span>
<span class="normal"><a href="#__codelineno-0-87">87</a></span>
<span class="normal"><a href="#__codelineno-0-88">88</a></span>
<span class="normal"><a href="#__codelineno-0-89">89</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-57" name="__codelineno-0-57"></a><span class="k">def</span> <span class="nf">get_description</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-58" name="__codelineno-0-58"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-59" name="__codelineno-0-59"></a><span class="sd">    Get the appropriate description for a given API endpoint.</span>
<a id="__codelineno-0-60" name="__codelineno-0-60"></a>
<a id="__codelineno-0-61" name="__codelineno-0-61"></a><span class="sd">    By default, if a specific action doesn&#39;t have its own docstring, and neither does the view class,</span>
<a id="__codelineno-0-62" name="__codelineno-0-62"></a><span class="sd">    drf-spectacular will walk up the MRO of the view class until it finds a docstring, and use that.</span>
<a id="__codelineno-0-63" name="__codelineno-0-63"></a><span class="sd">    Most of our viewsets (for better or for worse) do not have docstrings, and so it&#39;ll find and use the generic</span>
<a id="__codelineno-0-64" name="__codelineno-0-64"></a><span class="sd">    docstring of the `NautobotModelViewSet` class, which isn&#39;t very useful to the end user. Instead of doing that,</span>
<a id="__codelineno-0-65" name="__codelineno-0-65"></a><span class="sd">    we only use the docstring of the view itself (ignoring its parent class docstrings), or if none exists, we</span>
<a id="__codelineno-0-66" name="__codelineno-0-66"></a><span class="sd">    make an attempt at rendering a basically accurate default description.</span>
<a id="__codelineno-0-67" name="__codelineno-0-67"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-68" name="__codelineno-0-68"></a>    <span class="n">action_or_method</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="p">,</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="p">,</span> <span class="s2">&quot;action&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">method</span><span class="o">.</span><span class="n">lower</span><span class="p">()),</span> <span class="kc">None</span><span class="p">)</span>
<a id="__codelineno-0-69" name="__codelineno-0-69"></a>    <span class="n">action_doc</span> <span class="o">=</span> <span class="n">get_doc</span><span class="p">(</span><span class="n">action_or_method</span><span class="p">)</span>
<a id="__codelineno-0-70" name="__codelineno-0-70"></a>    <span class="k">if</span> <span class="n">action_doc</span><span class="p">:</span>
<a id="__codelineno-0-71" name="__codelineno-0-71"></a>        <span class="k">return</span> <span class="n">action_doc</span>
<a id="__codelineno-0-72" name="__codelineno-0-72"></a>
<a id="__codelineno-0-73" name="__codelineno-0-73"></a>    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="vm">__doc__</span><span class="p">:</span>
<a id="__codelineno-0-74" name="__codelineno-0-74"></a>        <span class="n">view_doc</span> <span class="o">=</span> <span class="n">get_doc</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="vm">__class__</span><span class="p">)</span>
<a id="__codelineno-0-75" name="__codelineno-0-75"></a>        <span class="k">if</span> <span class="n">view_doc</span><span class="p">:</span>
<a id="__codelineno-0-76" name="__codelineno-0-76"></a>            <span class="k">return</span> <span class="n">view_doc</span>
<a id="__codelineno-0-77" name="__codelineno-0-77"></a>
<a id="__codelineno-0-78" name="__codelineno-0-78"></a>    <span class="c1"># Fall back to a generic default description</span>
<a id="__codelineno-0-79" name="__codelineno-0-79"></a>    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="p">,</span> <span class="s2">&quot;queryset&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">method</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">method_mapping</span><span class="p">:</span>
<a id="__codelineno-0-80" name="__codelineno-0-80"></a>        <span class="n">action</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">method_mapping</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">method</span><span class="o">.</span><span class="n">lower</span><span class="p">()]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">,</span> <span class="s2">&quot; &quot;</span><span class="p">)</span><span class="o">.</span><span class="n">capitalize</span><span class="p">()</span>
<a id="__codelineno-0-81" name="__codelineno-0-81"></a>        <span class="n">model_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">queryset</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">verbose_name</span>
<a id="__codelineno-0-82" name="__codelineno-0-82"></a>        <span class="k">if</span> <span class="n">action</span> <span class="o">==</span> <span class="s2">&quot;Create&quot;</span><span class="p">:</span>
<a id="__codelineno-0-83" name="__codelineno-0-83"></a>            <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">action</span><span class="si">}</span><span class="s2"> one or more </span><span class="si">{</span><span class="n">model_name</span><span class="si">}</span><span class="s2"> objects.&quot;</span>
<a id="__codelineno-0-84" name="__codelineno-0-84"></a>        <span class="k">if</span> <span class="s2">&quot;</span><span class="si">{id}</span><span class="s2">&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">:</span>
<a id="__codelineno-0-85" name="__codelineno-0-85"></a>            <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">action</span><span class="si">}</span><span class="s2"> a </span><span class="si">{</span><span class="n">model_name</span><span class="si">}</span><span class="s2"> object.&quot;</span>
<a id="__codelineno-0-86" name="__codelineno-0-86"></a>        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">action</span><span class="si">}</span><span class="s2"> a list of </span><span class="si">{</span><span class="n">model_name</span><span class="si">}</span><span class="s2"> objects.&quot;</span>
<a id="__codelineno-0-87" name="__codelineno-0-87"></a>
<a id="__codelineno-0-88" name="__codelineno-0-88"></a>    <span class="c1"># Give up</span>
<a id="__codelineno-0-89" name="__codelineno-0-89"></a>    <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">get_description</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h3 id="nautobot.core.api.schema.NautobotAutoSchema.get_filter_backends" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_filter_backends</span><span class="p">()</span></code>

<a href="#nautobot.core.api.schema.NautobotAutoSchema.get_filter_backends" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Nautobot's custom bulk operations, even though they return a list of records, are NOT filterable.</p>

          <details class="quote">
            <summary>Source code in <code>nautobot/core/api/schema.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-91">91</a></span>
<span class="normal"><a href="#__codelineno-0-92">92</a></span>
<span class="normal"><a href="#__codelineno-0-93">93</a></span>
<span class="normal"><a href="#__codelineno-0-94">94</a></span>
<span class="normal"><a href="#__codelineno-0-95">95</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-91" name="__codelineno-0-91"></a><span class="k">def</span> <span class="nf">get_filter_backends</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-92" name="__codelineno-0-92"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Nautobot&#39;s custom bulk operations, even though they return a list of records, are NOT filterable.&quot;&quot;&quot;</span>
<a id="__codelineno-0-93" name="__codelineno-0-93"></a>    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_bulk_action</span><span class="p">:</span>
<a id="__codelineno-0-94" name="__codelineno-0-94"></a>        <span class="k">return</span> <span class="p">[]</span>
<a id="__codelineno-0-95" name="__codelineno-0-95"></a>    <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">get_filter_backends</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h3 id="nautobot.core.api.schema.NautobotAutoSchema.get_operation_id" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_operation_id</span><span class="p">()</span></code>

<a href="#nautobot.core.api.schema.NautobotAutoSchema.get_operation_id" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Extend the base method to handle Nautobot's REST API bulk operations.</p>
<p>Without this extension, every one of our ModelViewSet classes will result in drf-spectacular complaining
about operationId collisions, e.g. between DELETE /api/dcim/devices/ and DELETE /api/dcim/devices/<pk>/ would
both get resolved to the same "dcim_devices_destroy" operation-id and this would make drf-spectacular complain.</p>
<p>With this extension, the bulk endpoints automatically get a different operation-id from the non-bulk endpoints.</p>

          <details class="quote">
            <summary>Source code in <code>nautobot/core/api/schema.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-134">134</a></span>
<span class="normal"><a href="#__codelineno-0-135">135</a></span>
<span class="normal"><a href="#__codelineno-0-136">136</a></span>
<span class="normal"><a href="#__codelineno-0-137">137</a></span>
<span class="normal"><a href="#__codelineno-0-138">138</a></span>
<span class="normal"><a href="#__codelineno-0-139">139</a></span>
<span class="normal"><a href="#__codelineno-0-140">140</a></span>
<span class="normal"><a href="#__codelineno-0-141">141</a></span>
<span class="normal"><a href="#__codelineno-0-142">142</a></span>
<span class="normal"><a href="#__codelineno-0-143">143</a></span>
<span class="normal"><a href="#__codelineno-0-144">144</a></span>
<span class="normal"><a href="#__codelineno-0-145">145</a></span>
<span class="normal"><a href="#__codelineno-0-146">146</a></span>
<span class="normal"><a href="#__codelineno-0-147">147</a></span>
<span class="normal"><a href="#__codelineno-0-148">148</a></span>
<span class="normal"><a href="#__codelineno-0-149">149</a></span>
<span class="normal"><a href="#__codelineno-0-150">150</a></span>
<span class="normal"><a href="#__codelineno-0-151">151</a></span>
<span class="normal"><a href="#__codelineno-0-152">152</a></span>
<span class="normal"><a href="#__codelineno-0-153">153</a></span>
<span class="normal"><a href="#__codelineno-0-154">154</a></span>
<span class="normal"><a href="#__codelineno-0-155">155</a></span>
<span class="normal"><a href="#__codelineno-0-156">156</a></span>
<span class="normal"><a href="#__codelineno-0-157">157</a></span>
<span class="normal"><a href="#__codelineno-0-158">158</a></span>
<span class="normal"><a href="#__codelineno-0-159">159</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-134" name="__codelineno-0-134"></a><span class="k">def</span> <span class="nf">get_operation_id</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-135" name="__codelineno-0-135"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Extend the base method to handle Nautobot&#39;s REST API bulk operations.</span>
<a id="__codelineno-0-136" name="__codelineno-0-136"></a>
<a id="__codelineno-0-137" name="__codelineno-0-137"></a><span class="sd">    Without this extension, every one of our ModelViewSet classes will result in drf-spectacular complaining</span>
<a id="__codelineno-0-138" name="__codelineno-0-138"></a><span class="sd">    about operationId collisions, e.g. between DELETE /api/dcim/devices/ and DELETE /api/dcim/devices/&lt;pk&gt;/ would</span>
<a id="__codelineno-0-139" name="__codelineno-0-139"></a><span class="sd">    both get resolved to the same &quot;dcim_devices_destroy&quot; operation-id and this would make drf-spectacular complain.</span>
<a id="__codelineno-0-140" name="__codelineno-0-140"></a>
<a id="__codelineno-0-141" name="__codelineno-0-141"></a><span class="sd">    With this extension, the bulk endpoints automatically get a different operation-id from the non-bulk endpoints.</span>
<a id="__codelineno-0-142" name="__codelineno-0-142"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-143" name="__codelineno-0-143"></a>    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_bulk_action</span><span class="p">:</span>
<a id="__codelineno-0-144" name="__codelineno-0-144"></a>        <span class="c1"># Same basic sequence of calls as AutoSchema.get_operation_id,</span>
<a id="__codelineno-0-145" name="__codelineno-0-145"></a>        <span class="c1"># except we use &quot;self.view.action&quot; instead of &quot;self.method_mapping[self.method]&quot; to get the action verb</span>
<a id="__codelineno-0-146" name="__codelineno-0-146"></a>        <span class="n">tokenized_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tokenize_path</span><span class="p">()</span>
<a id="__codelineno-0-147" name="__codelineno-0-147"></a>        <span class="n">tokenized_path</span> <span class="o">=</span> <span class="p">[</span><span class="n">t</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;-&quot;</span><span class="p">,</span> <span class="s2">&quot;_&quot;</span><span class="p">)</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">tokenized_path</span><span class="p">]</span>
<a id="__codelineno-0-148" name="__codelineno-0-148"></a>
<a id="__codelineno-0-149" name="__codelineno-0-149"></a>        <span class="n">action</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">action</span>
<a id="__codelineno-0-150" name="__codelineno-0-150"></a>
<a id="__codelineno-0-151" name="__codelineno-0-151"></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">tokenized_path</span><span class="p">:</span>
<a id="__codelineno-0-152" name="__codelineno-0-152"></a>            <span class="n">tokenized_path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;root&quot;</span><span class="p">)</span>
<a id="__codelineno-0-153" name="__codelineno-0-153"></a>        <span class="k">if</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;&lt;drf_format_suffix\w*:\w+&gt;&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">path_regex</span><span class="p">):</span>
<a id="__codelineno-0-154" name="__codelineno-0-154"></a>            <span class="n">tokenized_path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;formatted&quot;</span><span class="p">)</span>
<a id="__codelineno-0-155" name="__codelineno-0-155"></a>
<a id="__codelineno-0-156" name="__codelineno-0-156"></a>        <span class="k">return</span> <span class="s2">&quot;_&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">tokenized_path</span> <span class="o">+</span> <span class="p">[</span><span class="n">action</span><span class="p">])</span>
<a id="__codelineno-0-157" name="__codelineno-0-157"></a>
<a id="__codelineno-0-158" name="__codelineno-0-158"></a>    <span class="c1"># For all other view actions, operation-id is the same as in the base class</span>
<a id="__codelineno-0-159" name="__codelineno-0-159"></a>    <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">get_operation_id</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h3 id="nautobot.core.api.schema.NautobotAutoSchema.get_request_serializer" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_request_serializer</span><span class="p">()</span></code>

<a href="#nautobot.core.api.schema.NautobotAutoSchema.get_request_serializer" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Return the request serializer (used for describing/parsing the request payload) for this endpoint.</p>
<p>We override the default drf-spectacular behavior for the case where the endpoint describes a write request
with required data (PATCH, POST, PUT). In those cases we replace FooSerializer with a dynamically-defined
WritableFooSerializer class in order to more accurately represent the available options on write.</p>
<p>We also override for the case where the endpoint is one of Nautobot's custom bulk API endpoints, which
require a list of serializers as input, rather than a single one.</p>

          <details class="quote">
            <summary>Source code in <code>nautobot/core/api/schema.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-161">161</a></span>
<span class="normal"><a href="#__codelineno-0-162">162</a></span>
<span class="normal"><a href="#__codelineno-0-163">163</a></span>
<span class="normal"><a href="#__codelineno-0-164">164</a></span>
<span class="normal"><a href="#__codelineno-0-165">165</a></span>
<span class="normal"><a href="#__codelineno-0-166">166</a></span>
<span class="normal"><a href="#__codelineno-0-167">167</a></span>
<span class="normal"><a href="#__codelineno-0-168">168</a></span>
<span class="normal"><a href="#__codelineno-0-169">169</a></span>
<span class="normal"><a href="#__codelineno-0-170">170</a></span>
<span class="normal"><a href="#__codelineno-0-171">171</a></span>
<span class="normal"><a href="#__codelineno-0-172">172</a></span>
<span class="normal"><a href="#__codelineno-0-173">173</a></span>
<span class="normal"><a href="#__codelineno-0-174">174</a></span>
<span class="normal"><a href="#__codelineno-0-175">175</a></span>
<span class="normal"><a href="#__codelineno-0-176">176</a></span>
<span class="normal"><a href="#__codelineno-0-177">177</a></span>
<span class="normal"><a href="#__codelineno-0-178">178</a></span>
<span class="normal"><a href="#__codelineno-0-179">179</a></span>
<span class="normal"><a href="#__codelineno-0-180">180</a></span>
<span class="normal"><a href="#__codelineno-0-181">181</a></span>
<span class="normal"><a href="#__codelineno-0-182">182</a></span>
<span class="normal"><a href="#__codelineno-0-183">183</a></span>
<span class="normal"><a href="#__codelineno-0-184">184</a></span>
<span class="normal"><a href="#__codelineno-0-185">185</a></span>
<span class="normal"><a href="#__codelineno-0-186">186</a></span>
<span class="normal"><a href="#__codelineno-0-187">187</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-161" name="__codelineno-0-161"></a><span class="k">def</span> <span class="nf">get_request_serializer</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-162" name="__codelineno-0-162"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-163" name="__codelineno-0-163"></a><span class="sd">    Return the request serializer (used for describing/parsing the request payload) for this endpoint.</span>
<a id="__codelineno-0-164" name="__codelineno-0-164"></a>
<a id="__codelineno-0-165" name="__codelineno-0-165"></a><span class="sd">    We override the default drf-spectacular behavior for the case where the endpoint describes a write request</span>
<a id="__codelineno-0-166" name="__codelineno-0-166"></a><span class="sd">    with required data (PATCH, POST, PUT). In those cases we replace FooSerializer with a dynamically-defined</span>
<a id="__codelineno-0-167" name="__codelineno-0-167"></a><span class="sd">    WritableFooSerializer class in order to more accurately represent the available options on write.</span>
<a id="__codelineno-0-168" name="__codelineno-0-168"></a>
<a id="__codelineno-0-169" name="__codelineno-0-169"></a><span class="sd">    We also override for the case where the endpoint is one of Nautobot&#39;s custom bulk API endpoints, which</span>
<a id="__codelineno-0-170" name="__codelineno-0-170"></a><span class="sd">    require a list of serializers as input, rather than a single one.</span>
<a id="__codelineno-0-171" name="__codelineno-0-171"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-172" name="__codelineno-0-172"></a>    <span class="n">serializer</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">get_request_serializer</span><span class="p">()</span>
<a id="__codelineno-0-173" name="__codelineno-0-173"></a>
<a id="__codelineno-0-174" name="__codelineno-0-174"></a>    <span class="c1"># For bulk operations, make sure we use a &quot;many&quot; serializer.</span>
<a id="__codelineno-0-175" name="__codelineno-0-175"></a>    <span class="n">many</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_bulk_action</span>
<a id="__codelineno-0-176" name="__codelineno-0-176"></a>    <span class="n">partial</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_partial_action</span>
<a id="__codelineno-0-177" name="__codelineno-0-177"></a>
<a id="__codelineno-0-178" name="__codelineno-0-178"></a>    <span class="k">if</span> <span class="n">serializer</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">method</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;PATCH&quot;</span><span class="p">,</span> <span class="s2">&quot;POST&quot;</span><span class="p">,</span> <span class="s2">&quot;PUT&quot;</span><span class="p">]:</span>
<a id="__codelineno-0-179" name="__codelineno-0-179"></a>        <span class="n">writable_class</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_writable_class</span><span class="p">(</span><span class="n">serializer</span><span class="p">,</span> <span class="n">bulk</span><span class="o">=</span><span class="n">many</span><span class="p">)</span>
<a id="__codelineno-0-180" name="__codelineno-0-180"></a>        <span class="k">if</span> <span class="n">writable_class</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-181" name="__codelineno-0-181"></a>            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">serializer</span><span class="p">,</span> <span class="s2">&quot;child&quot;</span><span class="p">):</span>
<a id="__codelineno-0-182" name="__codelineno-0-182"></a>                <span class="n">child_serializer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_writable_class</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">child</span><span class="p">,</span> <span class="n">bulk</span><span class="o">=</span><span class="n">many</span><span class="p">)</span>
<a id="__codelineno-0-183" name="__codelineno-0-183"></a>                <span class="n">serializer</span> <span class="o">=</span> <span class="n">writable_class</span><span class="p">(</span><span class="n">child</span><span class="o">=</span><span class="n">child_serializer</span><span class="p">,</span> <span class="n">many</span><span class="o">=</span><span class="n">many</span><span class="p">,</span> <span class="n">partial</span><span class="o">=</span><span class="n">partial</span><span class="p">)</span>
<a id="__codelineno-0-184" name="__codelineno-0-184"></a>            <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-185" name="__codelineno-0-185"></a>                <span class="n">serializer</span> <span class="o">=</span> <span class="n">writable_class</span><span class="p">(</span><span class="n">many</span><span class="o">=</span><span class="n">many</span><span class="p">,</span> <span class="n">partial</span><span class="o">=</span><span class="n">partial</span><span class="p">)</span>
<a id="__codelineno-0-186" name="__codelineno-0-186"></a>
<a id="__codelineno-0-187" name="__codelineno-0-187"></a>    <span class="k">return</span> <span class="n">serializer</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h3 id="nautobot.core.api.schema.NautobotAutoSchema.get_response_serializers" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_response_serializers</span><span class="p">()</span></code>

<a href="#nautobot.core.api.schema.NautobotAutoSchema.get_response_serializers" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Return the response serializer (used for describing the response payload) for this endpoint.</p>
<p>We override the default drf-spectacular behavior for the case where the endpoint describes a write request
to a bulk endpoint, which returns a list of serializers, rather than a single one.</p>

          <details class="quote">
            <summary>Source code in <code>nautobot/core/api/schema.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-189">189</a></span>
<span class="normal"><a href="#__codelineno-0-190">190</a></span>
<span class="normal"><a href="#__codelineno-0-191">191</a></span>
<span class="normal"><a href="#__codelineno-0-192">192</a></span>
<span class="normal"><a href="#__codelineno-0-193">193</a></span>
<span class="normal"><a href="#__codelineno-0-194">194</a></span>
<span class="normal"><a href="#__codelineno-0-195">195</a></span>
<span class="normal"><a href="#__codelineno-0-196">196</a></span>
<span class="normal"><a href="#__codelineno-0-197">197</a></span>
<span class="normal"><a href="#__codelineno-0-198">198</a></span>
<span class="normal"><a href="#__codelineno-0-199">199</a></span>
<span class="normal"><a href="#__codelineno-0-200">200</a></span>
<span class="normal"><a href="#__codelineno-0-201">201</a></span>
<span class="normal"><a href="#__codelineno-0-202">202</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-189" name="__codelineno-0-189"></a><span class="k">def</span> <span class="nf">get_response_serializers</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-190" name="__codelineno-0-190"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-191" name="__codelineno-0-191"></a><span class="sd">    Return the response serializer (used for describing the response payload) for this endpoint.</span>
<a id="__codelineno-0-192" name="__codelineno-0-192"></a>
<a id="__codelineno-0-193" name="__codelineno-0-193"></a><span class="sd">    We override the default drf-spectacular behavior for the case where the endpoint describes a write request</span>
<a id="__codelineno-0-194" name="__codelineno-0-194"></a><span class="sd">    to a bulk endpoint, which returns a list of serializers, rather than a single one.</span>
<a id="__codelineno-0-195" name="__codelineno-0-195"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-196" name="__codelineno-0-196"></a>    <span class="n">response_serializers</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">get_response_serializers</span><span class="p">()</span>
<a id="__codelineno-0-197" name="__codelineno-0-197"></a>
<a id="__codelineno-0-198" name="__codelineno-0-198"></a>    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_bulk_action</span><span class="p">:</span>
<a id="__codelineno-0-199" name="__codelineno-0-199"></a>        <span class="k">if</span> <span class="n">is_serializer</span><span class="p">(</span><span class="n">response_serializers</span><span class="p">):</span>
<a id="__codelineno-0-200" name="__codelineno-0-200"></a>            <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="n">response_serializers</span><span class="p">)(</span><span class="n">many</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-0-201" name="__codelineno-0-201"></a>
<a id="__codelineno-0-202" name="__codelineno-0-202"></a>    <span class="k">return</span> <span class="n">response_serializers</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h3 id="nautobot.core.api.schema.NautobotAutoSchema.get_serializer_ref_name" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_serializer_ref_name</span><span class="p">(</span><span class="n">serializer</span><span class="p">)</span></code>

<a href="#nautobot.core.api.schema.NautobotAutoSchema.get_serializer_ref_name" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Get the serializer's ref_name Meta attribute if set, or else derive a ref_name automatically.</p>
<p>Based on drf_yasg.utils.get_serializer_ref_name().</p>

          <details class="quote">
            <summary>Source code in <code>nautobot/core/api/schema.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-271">271</a></span>
<span class="normal"><a href="#__codelineno-0-272">272</a></span>
<span class="normal"><a href="#__codelineno-0-273">273</a></span>
<span class="normal"><a href="#__codelineno-0-274">274</a></span>
<span class="normal"><a href="#__codelineno-0-275">275</a></span>
<span class="normal"><a href="#__codelineno-0-276">276</a></span>
<span class="normal"><a href="#__codelineno-0-277">277</a></span>
<span class="normal"><a href="#__codelineno-0-278">278</a></span>
<span class="normal"><a href="#__codelineno-0-279">279</a></span>
<span class="normal"><a href="#__codelineno-0-280">280</a></span>
<span class="normal"><a href="#__codelineno-0-281">281</a></span>
<span class="normal"><a href="#__codelineno-0-282">282</a></span>
<span class="normal"><a href="#__codelineno-0-283">283</a></span>
<span class="normal"><a href="#__codelineno-0-284">284</a></span>
<span class="normal"><a href="#__codelineno-0-285">285</a></span>
<span class="normal"><a href="#__codelineno-0-286">286</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-271" name="__codelineno-0-271"></a><span class="k">def</span> <span class="nf">get_serializer_ref_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">serializer</span><span class="p">):</span>
<a id="__codelineno-0-272" name="__codelineno-0-272"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-273" name="__codelineno-0-273"></a><span class="sd">    Get the serializer&#39;s ref_name Meta attribute if set, or else derive a ref_name automatically.</span>
<a id="__codelineno-0-274" name="__codelineno-0-274"></a>
<a id="__codelineno-0-275" name="__codelineno-0-275"></a><span class="sd">    Based on drf_yasg.utils.get_serializer_ref_name().</span>
<a id="__codelineno-0-276" name="__codelineno-0-276"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-277" name="__codelineno-0-277"></a>    <span class="n">serializer_meta</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">serializer</span><span class="p">,</span> <span class="s2">&quot;Meta&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
<a id="__codelineno-0-278" name="__codelineno-0-278"></a>    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">serializer_meta</span><span class="p">,</span> <span class="s2">&quot;ref_name&quot;</span><span class="p">):</span>
<a id="__codelineno-0-279" name="__codelineno-0-279"></a>        <span class="k">return</span> <span class="n">serializer_meta</span><span class="o">.</span><span class="n">ref_name</span>
<a id="__codelineno-0-280" name="__codelineno-0-280"></a>    <span class="n">serializer_name</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="n">serializer</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span>
<a id="__codelineno-0-281" name="__codelineno-0-281"></a>    <span class="k">if</span> <span class="n">serializer_name</span> <span class="o">==</span> <span class="s2">&quot;NestedSerializer&quot;</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">serializer</span><span class="p">,</span> <span class="n">serializers</span><span class="o">.</span><span class="n">ModelSerializer</span><span class="p">):</span>
<a id="__codelineno-0-282" name="__codelineno-0-282"></a>        <span class="k">return</span> <span class="kc">None</span>
<a id="__codelineno-0-283" name="__codelineno-0-283"></a>    <span class="n">ref_name</span> <span class="o">=</span> <span class="n">serializer_name</span>
<a id="__codelineno-0-284" name="__codelineno-0-284"></a>    <span class="k">if</span> <span class="n">ref_name</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;Serializer&quot;</span><span class="p">):</span>
<a id="__codelineno-0-285" name="__codelineno-0-285"></a>        <span class="n">ref_name</span> <span class="o">=</span> <span class="n">ref_name</span><span class="p">[:</span> <span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="s2">&quot;Serializer&quot;</span><span class="p">)]</span>
<a id="__codelineno-0-286" name="__codelineno-0-286"></a>    <span class="k">return</span> <span class="n">ref_name</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h3 id="nautobot.core.api.schema.NautobotAutoSchema.get_writable_class" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_writable_class</span><span class="p">(</span><span class="n">serializer</span><span class="p">,</span> <span class="n">bulk</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

<a href="#nautobot.core.api.schema.NautobotAutoSchema.get_writable_class" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Given a FooSerializer instance, look up or construct a [Bulk]WritableFooSerializer class if necessary.</p>
<p>If no [Bulk]WritableFooSerializer class is needed, returns None instead.</p>

          <details class="quote">
            <summary>Source code in <code>nautobot/core/api/schema.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-207">207</a></span>
<span class="normal"><a href="#__codelineno-0-208">208</a></span>
<span class="normal"><a href="#__codelineno-0-209">209</a></span>
<span class="normal"><a href="#__codelineno-0-210">210</a></span>
<span class="normal"><a href="#__codelineno-0-211">211</a></span>
<span class="normal"><a href="#__codelineno-0-212">212</a></span>
<span class="normal"><a href="#__codelineno-0-213">213</a></span>
<span class="normal"><a href="#__codelineno-0-214">214</a></span>
<span class="normal"><a href="#__codelineno-0-215">215</a></span>
<span class="normal"><a href="#__codelineno-0-216">216</a></span>
<span class="normal"><a href="#__codelineno-0-217">217</a></span>
<span class="normal"><a href="#__codelineno-0-218">218</a></span>
<span class="normal"><a href="#__codelineno-0-219">219</a></span>
<span class="normal"><a href="#__codelineno-0-220">220</a></span>
<span class="normal"><a href="#__codelineno-0-221">221</a></span>
<span class="normal"><a href="#__codelineno-0-222">222</a></span>
<span class="normal"><a href="#__codelineno-0-223">223</a></span>
<span class="normal"><a href="#__codelineno-0-224">224</a></span>
<span class="normal"><a href="#__codelineno-0-225">225</a></span>
<span class="normal"><a href="#__codelineno-0-226">226</a></span>
<span class="normal"><a href="#__codelineno-0-227">227</a></span>
<span class="normal"><a href="#__codelineno-0-228">228</a></span>
<span class="normal"><a href="#__codelineno-0-229">229</a></span>
<span class="normal"><a href="#__codelineno-0-230">230</a></span>
<span class="normal"><a href="#__codelineno-0-231">231</a></span>
<span class="normal"><a href="#__codelineno-0-232">232</a></span>
<span class="normal"><a href="#__codelineno-0-233">233</a></span>
<span class="normal"><a href="#__codelineno-0-234">234</a></span>
<span class="normal"><a href="#__codelineno-0-235">235</a></span>
<span class="normal"><a href="#__codelineno-0-236">236</a></span>
<span class="normal"><a href="#__codelineno-0-237">237</a></span>
<span class="normal"><a href="#__codelineno-0-238">238</a></span>
<span class="normal"><a href="#__codelineno-0-239">239</a></span>
<span class="normal"><a href="#__codelineno-0-240">240</a></span>
<span class="normal"><a href="#__codelineno-0-241">241</a></span>
<span class="normal"><a href="#__codelineno-0-242">242</a></span>
<span class="normal"><a href="#__codelineno-0-243">243</a></span>
<span class="normal"><a href="#__codelineno-0-244">244</a></span>
<span class="normal"><a href="#__codelineno-0-245">245</a></span>
<span class="normal"><a href="#__codelineno-0-246">246</a></span>
<span class="normal"><a href="#__codelineno-0-247">247</a></span>
<span class="normal"><a href="#__codelineno-0-248">248</a></span>
<span class="normal"><a href="#__codelineno-0-249">249</a></span>
<span class="normal"><a href="#__codelineno-0-250">250</a></span>
<span class="normal"><a href="#__codelineno-0-251">251</a></span>
<span class="normal"><a href="#__codelineno-0-252">252</a></span>
<span class="normal"><a href="#__codelineno-0-253">253</a></span>
<span class="normal"><a href="#__codelineno-0-254">254</a></span>
<span class="normal"><a href="#__codelineno-0-255">255</a></span>
<span class="normal"><a href="#__codelineno-0-256">256</a></span>
<span class="normal"><a href="#__codelineno-0-257">257</a></span>
<span class="normal"><a href="#__codelineno-0-258">258</a></span>
<span class="normal"><a href="#__codelineno-0-259">259</a></span>
<span class="normal"><a href="#__codelineno-0-260">260</a></span>
<span class="normal"><a href="#__codelineno-0-261">261</a></span>
<span class="normal"><a href="#__codelineno-0-262">262</a></span>
<span class="normal"><a href="#__codelineno-0-263">263</a></span>
<span class="normal"><a href="#__codelineno-0-264">264</a></span>
<span class="normal"><a href="#__codelineno-0-265">265</a></span>
<span class="normal"><a href="#__codelineno-0-266">266</a></span>
<span class="normal"><a href="#__codelineno-0-267">267</a></span>
<span class="normal"><a href="#__codelineno-0-268">268</a></span>
<span class="normal"><a href="#__codelineno-0-269">269</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-207" name="__codelineno-0-207"></a><span class="k">def</span> <span class="nf">get_writable_class</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">serializer</span><span class="p">,</span> <span class="n">bulk</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<a id="__codelineno-0-208" name="__codelineno-0-208"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-209" name="__codelineno-0-209"></a><span class="sd">    Given a FooSerializer instance, look up or construct a [Bulk]WritableFooSerializer class if necessary.</span>
<a id="__codelineno-0-210" name="__codelineno-0-210"></a>
<a id="__codelineno-0-211" name="__codelineno-0-211"></a><span class="sd">    If no [Bulk]WritableFooSerializer class is needed, returns None instead.</span>
<a id="__codelineno-0-212" name="__codelineno-0-212"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-213" name="__codelineno-0-213"></a>    <span class="n">properties</span> <span class="o">=</span> <span class="p">{}</span>
<a id="__codelineno-0-214" name="__codelineno-0-214"></a>    <span class="c1"># Does this serializer have any fields of certain special types?</span>
<a id="__codelineno-0-215" name="__codelineno-0-215"></a>    <span class="c1"># These are the field types that are asymmetric between request (write) and response (read); if any such fields</span>
<a id="__codelineno-0-216" name="__codelineno-0-216"></a>    <span class="c1"># are present, we should generate a distinct WritableFooSerializer to reflect that asymmetry in the schema.</span>
<a id="__codelineno-0-217" name="__codelineno-0-217"></a>    <span class="n">fields</span> <span class="o">=</span> <span class="p">{}</span> <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">serializer</span><span class="p">,</span> <span class="s2">&quot;child&quot;</span><span class="p">)</span> <span class="k">else</span> <span class="n">serializer</span><span class="o">.</span><span class="n">fields</span>
<a id="__codelineno-0-218" name="__codelineno-0-218"></a>    <span class="k">for</span> <span class="n">child_name</span><span class="p">,</span> <span class="n">child</span> <span class="ow">in</span> <span class="n">fields</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
<a id="__codelineno-0-219" name="__codelineno-0-219"></a>        <span class="c1"># Don&#39;t consider read_only fields (since we&#39;re planning specifically for the writable serializer).</span>
<a id="__codelineno-0-220" name="__codelineno-0-220"></a>        <span class="k">if</span> <span class="n">child</span><span class="o">.</span><span class="n">read_only</span><span class="p">:</span>
<a id="__codelineno-0-221" name="__codelineno-0-221"></a>            <span class="k">continue</span>
<a id="__codelineno-0-222" name="__codelineno-0-222"></a>
<a id="__codelineno-0-223" name="__codelineno-0-223"></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">child</span><span class="p">,</span> <span class="p">(</span><span class="n">ChoiceField</span><span class="p">,</span> <span class="n">WritableNestedSerializer</span><span class="p">)):</span>
<a id="__codelineno-0-224" name="__codelineno-0-224"></a>            <span class="n">properties</span><span class="p">[</span><span class="n">child_name</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-225" name="__codelineno-0-225"></a>        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">child</span><span class="p">,</span> <span class="n">ManyRelatedField</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">child</span><span class="o">.</span><span class="n">child_relation</span><span class="p">,</span> <span class="n">SerializedPKRelatedField</span><span class="p">):</span>
<a id="__codelineno-0-226" name="__codelineno-0-226"></a>            <span class="n">properties</span><span class="p">[</span><span class="n">child_name</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-227" name="__codelineno-0-227"></a>
<a id="__codelineno-0-228" name="__codelineno-0-228"></a>    <span class="k">if</span> <span class="n">bulk</span><span class="p">:</span>
<a id="__codelineno-0-229" name="__codelineno-0-229"></a>        <span class="c1"># The &quot;id&quot; field is always different in bulk serializers</span>
<a id="__codelineno-0-230" name="__codelineno-0-230"></a>        <span class="n">properties</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-231" name="__codelineno-0-231"></a>
<a id="__codelineno-0-232" name="__codelineno-0-232"></a>    <span class="k">if</span> <span class="ow">not</span> <span class="n">properties</span><span class="p">:</span>
<a id="__codelineno-0-233" name="__codelineno-0-233"></a>        <span class="c1"># There&#39;s nothing about this serializer that requires a special WritableSerializer class to be defined.</span>
<a id="__codelineno-0-234" name="__codelineno-0-234"></a>        <span class="k">return</span> <span class="kc">None</span>
<a id="__codelineno-0-235" name="__codelineno-0-235"></a>
<a id="__codelineno-0-236" name="__codelineno-0-236"></a>    <span class="c1"># Have we already created a [Bulk]WritableFooSerializer class or do we need to do so now?</span>
<a id="__codelineno-0-237" name="__codelineno-0-237"></a>    <span class="n">writable_name</span> <span class="o">=</span> <span class="s2">&quot;Writable&quot;</span> <span class="o">+</span> <span class="nb">type</span><span class="p">(</span><span class="n">serializer</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span>
<a id="__codelineno-0-238" name="__codelineno-0-238"></a>    <span class="k">if</span> <span class="n">bulk</span><span class="p">:</span>
<a id="__codelineno-0-239" name="__codelineno-0-239"></a>        <span class="n">writable_name</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Bulk</span><span class="si">{</span><span class="n">writable_name</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-240" name="__codelineno-0-240"></a>    <span class="k">if</span> <span class="n">writable_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">writable_serializers</span><span class="p">:</span>
<a id="__codelineno-0-241" name="__codelineno-0-241"></a>        <span class="c1"># We need to create a new class to use</span>
<a id="__codelineno-0-242" name="__codelineno-0-242"></a>        <span class="c1"># If the original serializer class has a Meta, make sure we set Meta.ref_name appropriately</span>
<a id="__codelineno-0-243" name="__codelineno-0-243"></a>        <span class="n">meta_class</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">serializer</span><span class="p">),</span> <span class="s2">&quot;Meta&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
<a id="__codelineno-0-244" name="__codelineno-0-244"></a>        <span class="k">if</span> <span class="n">meta_class</span><span class="p">:</span>
<a id="__codelineno-0-245" name="__codelineno-0-245"></a>            <span class="n">ref_name</span> <span class="o">=</span> <span class="s2">&quot;Writable&quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_serializer_ref_name</span><span class="p">(</span><span class="n">serializer</span><span class="p">)</span>
<a id="__codelineno-0-246" name="__codelineno-0-246"></a>            <span class="k">if</span> <span class="n">bulk</span><span class="p">:</span>
<a id="__codelineno-0-247" name="__codelineno-0-247"></a>                <span class="n">ref_name</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Bulk</span><span class="si">{</span><span class="n">ref_name</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-248" name="__codelineno-0-248"></a>            <span class="n">writable_meta</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="s2">&quot;Meta&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">meta_class</span><span class="p">,),</span> <span class="p">{</span><span class="s2">&quot;ref_name&quot;</span><span class="p">:</span> <span class="n">ref_name</span><span class="p">})</span>
<a id="__codelineno-0-249" name="__codelineno-0-249"></a>            <span class="n">properties</span><span class="p">[</span><span class="s2">&quot;Meta&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">writable_meta</span>
<a id="__codelineno-0-250" name="__codelineno-0-250"></a>
<a id="__codelineno-0-251" name="__codelineno-0-251"></a>        <span class="c1"># Define and cache a new [Bulk]WritableFooSerializer class</span>
<a id="__codelineno-0-252" name="__codelineno-0-252"></a>        <span class="k">if</span> <span class="n">bulk</span><span class="p">:</span>
<a id="__codelineno-0-253" name="__codelineno-0-253"></a>
<a id="__codelineno-0-254" name="__codelineno-0-254"></a>            <span class="k">def</span> <span class="nf">get_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-255" name="__codelineno-0-255"></a><span class="w">                </span><span class="sd">&quot;&quot;&quot;For Nautobot&#39;s bulk_update/partial_update/delete APIs, the `id` field is mandatory.&quot;&quot;&quot;</span>
<a id="__codelineno-0-256" name="__codelineno-0-256"></a>                <span class="n">new_fields</span> <span class="o">=</span> <span class="p">{}</span>
<a id="__codelineno-0-257" name="__codelineno-0-257"></a>                <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">field</span> <span class="ow">in</span> <span class="nb">type</span><span class="p">(</span><span class="n">serializer</span><span class="p">)()</span><span class="o">.</span><span class="n">get_fields</span><span class="p">()</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
<a id="__codelineno-0-258" name="__codelineno-0-258"></a>                    <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;id&quot;</span><span class="p">:</span>
<a id="__codelineno-0-259" name="__codelineno-0-259"></a>                        <span class="n">field</span><span class="o">.</span><span class="n">read_only</span> <span class="o">=</span> <span class="kc">False</span>
<a id="__codelineno-0-260" name="__codelineno-0-260"></a>                        <span class="n">field</span><span class="o">.</span><span class="n">required</span> <span class="o">=</span> <span class="kc">True</span>
<a id="__codelineno-0-261" name="__codelineno-0-261"></a>                    <span class="n">new_fields</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span>
<a id="__codelineno-0-262" name="__codelineno-0-262"></a>                <span class="k">return</span> <span class="n">new_fields</span>
<a id="__codelineno-0-263" name="__codelineno-0-263"></a>
<a id="__codelineno-0-264" name="__codelineno-0-264"></a>            <span class="n">properties</span><span class="p">[</span><span class="s2">&quot;get_fields&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">get_fields</span>
<a id="__codelineno-0-265" name="__codelineno-0-265"></a>
<a id="__codelineno-0-266" name="__codelineno-0-266"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">writable_serializers</span><span class="p">[</span><span class="n">writable_name</span><span class="p">]</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="n">writable_name</span><span class="p">,</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">serializer</span><span class="p">),),</span> <span class="n">properties</span><span class="p">)</span>
<a id="__codelineno-0-267" name="__codelineno-0-267"></a>
<a id="__codelineno-0-268" name="__codelineno-0-268"></a>    <span class="n">writable_class</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">writable_serializers</span><span class="p">[</span><span class="n">writable_name</span><span class="p">]</span>
<a id="__codelineno-0-269" name="__codelineno-0-269"></a>    <span class="k">return</span> <span class="n">writable_class</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h3 id="nautobot.core.api.schema.NautobotAutoSchema.resolve_serializer" class="doc doc-heading">
<code class="highlight language-python"><span class="n">resolve_serializer</span><span class="p">(</span><span class="n">serializer</span><span class="p">,</span> <span class="n">direction</span><span class="p">,</span> <span class="n">bypass_extensions</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

<a href="#nautobot.core.api.schema.NautobotAutoSchema.resolve_serializer" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Re-add required <code>id</code> field on bulk_partial_update action.</p>
<p>drf-spectacular clears the <code>required</code> list for any partial serializers in its <code>_map_basic_serializer()</code>,
but Nautobot bulk partial updates require the <code>id</code> field to be specified for each object to update.</p>

          <details class="quote">
            <summary>Source code in <code>nautobot/core/api/schema.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-288">288</a></span>
<span class="normal"><a href="#__codelineno-0-289">289</a></span>
<span class="normal"><a href="#__codelineno-0-290">290</a></span>
<span class="normal"><a href="#__codelineno-0-291">291</a></span>
<span class="normal"><a href="#__codelineno-0-292">292</a></span>
<span class="normal"><a href="#__codelineno-0-293">293</a></span>
<span class="normal"><a href="#__codelineno-0-294">294</a></span>
<span class="normal"><a href="#__codelineno-0-295">295</a></span>
<span class="normal"><a href="#__codelineno-0-296">296</a></span>
<span class="normal"><a href="#__codelineno-0-297">297</a></span>
<span class="normal"><a href="#__codelineno-0-298">298</a></span>
<span class="normal"><a href="#__codelineno-0-299">299</a></span>
<span class="normal"><a href="#__codelineno-0-300">300</a></span>
<span class="normal"><a href="#__codelineno-0-301">301</a></span>
<span class="normal"><a href="#__codelineno-0-302">302</a></span>
<span class="normal"><a href="#__codelineno-0-303">303</a></span>
<span class="normal"><a href="#__codelineno-0-304">304</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-288" name="__codelineno-0-288"></a><span class="k">def</span> <span class="nf">resolve_serializer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">serializer</span><span class="p">,</span> <span class="n">direction</span><span class="p">,</span> <span class="n">bypass_extensions</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<a id="__codelineno-0-289" name="__codelineno-0-289"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-290" name="__codelineno-0-290"></a><span class="sd">    Re-add required `id` field on bulk_partial_update action.</span>
<a id="__codelineno-0-291" name="__codelineno-0-291"></a>
<a id="__codelineno-0-292" name="__codelineno-0-292"></a><span class="sd">    drf-spectacular clears the `required` list for any partial serializers in its `_map_basic_serializer()`,</span>
<a id="__codelineno-0-293" name="__codelineno-0-293"></a><span class="sd">    but Nautobot bulk partial updates require the `id` field to be specified for each object to update.</span>
<a id="__codelineno-0-294" name="__codelineno-0-294"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-295" name="__codelineno-0-295"></a>    <span class="n">component</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">resolve_serializer</span><span class="p">(</span><span class="n">serializer</span><span class="p">,</span> <span class="n">direction</span><span class="p">,</span> <span class="n">bypass_extensions</span><span class="p">)</span>
<a id="__codelineno-0-296" name="__codelineno-0-296"></a>    <span class="k">if</span> <span class="p">(</span>
<a id="__codelineno-0-297" name="__codelineno-0-297"></a>        <span class="n">component</span>
<a id="__codelineno-0-298" name="__codelineno-0-298"></a>        <span class="ow">and</span> <span class="n">component</span><span class="o">.</span><span class="n">schema</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
<a id="__codelineno-0-299" name="__codelineno-0-299"></a>        <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_bulk_action</span>
<a id="__codelineno-0-300" name="__codelineno-0-300"></a>        <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_partial_action</span>
<a id="__codelineno-0-301" name="__codelineno-0-301"></a>        <span class="ow">and</span> <span class="n">direction</span> <span class="o">==</span> <span class="s2">&quot;request&quot;</span>
<a id="__codelineno-0-302" name="__codelineno-0-302"></a>    <span class="p">):</span>
<a id="__codelineno-0-303" name="__codelineno-0-303"></a>        <span class="n">component</span><span class="o">.</span><span class="n">schema</span><span class="p">[</span><span class="s2">&quot;required&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]</span>
<a id="__codelineno-0-304" name="__codelineno-0-304"></a>    <span class="k">return</span> <span class="n">component</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="nautobot.apps.api.NautobotCSVParser" class="doc doc-heading">
          <code>nautobot.apps.api.NautobotCSVParser</code>


<a href="#nautobot.apps.api.NautobotCSVParser" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code><span title="rest_framework.parsers.BaseParser">BaseParser</span></code></p>

  
      <p>Counterpart to NautobotCSVRenderer - import CSV data.</p>

            <details class="quote">
              <summary>Source code in <code>nautobot/core/api/parsers.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-18"> 18</a></span>
<span class="normal"><a href="#__codelineno-0-19"> 19</a></span>
<span class="normal"><a href="#__codelineno-0-20"> 20</a></span>
<span class="normal"><a href="#__codelineno-0-21"> 21</a></span>
<span class="normal"><a href="#__codelineno-0-22"> 22</a></span>
<span class="normal"><a href="#__codelineno-0-23"> 23</a></span>
<span class="normal"><a href="#__codelineno-0-24"> 24</a></span>
<span class="normal"><a href="#__codelineno-0-25"> 25</a></span>
<span class="normal"><a href="#__codelineno-0-26"> 26</a></span>
<span class="normal"><a href="#__codelineno-0-27"> 27</a></span>
<span class="normal"><a href="#__codelineno-0-28"> 28</a></span>
<span class="normal"><a href="#__codelineno-0-29"> 29</a></span>
<span class="normal"><a href="#__codelineno-0-30"> 30</a></span>
<span class="normal"><a href="#__codelineno-0-31"> 31</a></span>
<span class="normal"><a href="#__codelineno-0-32"> 32</a></span>
<span class="normal"><a href="#__codelineno-0-33"> 33</a></span>
<span class="normal"><a href="#__codelineno-0-34"> 34</a></span>
<span class="normal"><a href="#__codelineno-0-35"> 35</a></span>
<span class="normal"><a href="#__codelineno-0-36"> 36</a></span>
<span class="normal"><a href="#__codelineno-0-37"> 37</a></span>
<span class="normal"><a href="#__codelineno-0-38"> 38</a></span>
<span class="normal"><a href="#__codelineno-0-39"> 39</a></span>
<span class="normal"><a href="#__codelineno-0-40"> 40</a></span>
<span class="normal"><a href="#__codelineno-0-41"> 41</a></span>
<span class="normal"><a href="#__codelineno-0-42"> 42</a></span>
<span class="normal"><a href="#__codelineno-0-43"> 43</a></span>
<span class="normal"><a href="#__codelineno-0-44"> 44</a></span>
<span class="normal"><a href="#__codelineno-0-45"> 45</a></span>
<span class="normal"><a href="#__codelineno-0-46"> 46</a></span>
<span class="normal"><a href="#__codelineno-0-47"> 47</a></span>
<span class="normal"><a href="#__codelineno-0-48"> 48</a></span>
<span class="normal"><a href="#__codelineno-0-49"> 49</a></span>
<span class="normal"><a href="#__codelineno-0-50"> 50</a></span>
<span class="normal"><a href="#__codelineno-0-51"> 51</a></span>
<span class="normal"><a href="#__codelineno-0-52"> 52</a></span>
<span class="normal"><a href="#__codelineno-0-53"> 53</a></span>
<span class="normal"><a href="#__codelineno-0-54"> 54</a></span>
<span class="normal"><a href="#__codelineno-0-55"> 55</a></span>
<span class="normal"><a href="#__codelineno-0-56"> 56</a></span>
<span class="normal"><a href="#__codelineno-0-57"> 57</a></span>
<span class="normal"><a href="#__codelineno-0-58"> 58</a></span>
<span class="normal"><a href="#__codelineno-0-59"> 59</a></span>
<span class="normal"><a href="#__codelineno-0-60"> 60</a></span>
<span class="normal"><a href="#__codelineno-0-61"> 61</a></span>
<span class="normal"><a href="#__codelineno-0-62"> 62</a></span>
<span class="normal"><a href="#__codelineno-0-63"> 63</a></span>
<span class="normal"><a href="#__codelineno-0-64"> 64</a></span>
<span class="normal"><a href="#__codelineno-0-65"> 65</a></span>
<span class="normal"><a href="#__codelineno-0-66"> 66</a></span>
<span class="normal"><a href="#__codelineno-0-67"> 67</a></span>
<span class="normal"><a href="#__codelineno-0-68"> 68</a></span>
<span class="normal"><a href="#__codelineno-0-69"> 69</a></span>
<span class="normal"><a href="#__codelineno-0-70"> 70</a></span>
<span class="normal"><a href="#__codelineno-0-71"> 71</a></span>
<span class="normal"><a href="#__codelineno-0-72"> 72</a></span>
<span class="normal"><a href="#__codelineno-0-73"> 73</a></span>
<span class="normal"><a href="#__codelineno-0-74"> 74</a></span>
<span class="normal"><a href="#__codelineno-0-75"> 75</a></span>
<span class="normal"><a href="#__codelineno-0-76"> 76</a></span>
<span class="normal"><a href="#__codelineno-0-77"> 77</a></span>
<span class="normal"><a href="#__codelineno-0-78"> 78</a></span>
<span class="normal"><a href="#__codelineno-0-79"> 79</a></span>
<span class="normal"><a href="#__codelineno-0-80"> 80</a></span>
<span class="normal"><a href="#__codelineno-0-81"> 81</a></span>
<span class="normal"><a href="#__codelineno-0-82"> 82</a></span>
<span class="normal"><a href="#__codelineno-0-83"> 83</a></span>
<span class="normal"><a href="#__codelineno-0-84"> 84</a></span>
<span class="normal"><a href="#__codelineno-0-85"> 85</a></span>
<span class="normal"><a href="#__codelineno-0-86"> 86</a></span>
<span class="normal"><a href="#__codelineno-0-87"> 87</a></span>
<span class="normal"><a href="#__codelineno-0-88"> 88</a></span>
<span class="normal"><a href="#__codelineno-0-89"> 89</a></span>
<span class="normal"><a href="#__codelineno-0-90"> 90</a></span>
<span class="normal"><a href="#__codelineno-0-91"> 91</a></span>
<span class="normal"><a href="#__codelineno-0-92"> 92</a></span>
<span class="normal"><a href="#__codelineno-0-93"> 93</a></span>
<span class="normal"><a href="#__codelineno-0-94"> 94</a></span>
<span class="normal"><a href="#__codelineno-0-95"> 95</a></span>
<span class="normal"><a href="#__codelineno-0-96"> 96</a></span>
<span class="normal"><a href="#__codelineno-0-97"> 97</a></span>
<span class="normal"><a href="#__codelineno-0-98"> 98</a></span>
<span class="normal"><a href="#__codelineno-0-99"> 99</a></span>
<span class="normal"><a href="#__codelineno-0-100">100</a></span>
<span class="normal"><a href="#__codelineno-0-101">101</a></span>
<span class="normal"><a href="#__codelineno-0-102">102</a></span>
<span class="normal"><a href="#__codelineno-0-103">103</a></span>
<span class="normal"><a href="#__codelineno-0-104">104</a></span>
<span class="normal"><a href="#__codelineno-0-105">105</a></span>
<span class="normal"><a href="#__codelineno-0-106">106</a></span>
<span class="normal"><a href="#__codelineno-0-107">107</a></span>
<span class="normal"><a href="#__codelineno-0-108">108</a></span>
<span class="normal"><a href="#__codelineno-0-109">109</a></span>
<span class="normal"><a href="#__codelineno-0-110">110</a></span>
<span class="normal"><a href="#__codelineno-0-111">111</a></span>
<span class="normal"><a href="#__codelineno-0-112">112</a></span>
<span class="normal"><a href="#__codelineno-0-113">113</a></span>
<span class="normal"><a href="#__codelineno-0-114">114</a></span>
<span class="normal"><a href="#__codelineno-0-115">115</a></span>
<span class="normal"><a href="#__codelineno-0-116">116</a></span>
<span class="normal"><a href="#__codelineno-0-117">117</a></span>
<span class="normal"><a href="#__codelineno-0-118">118</a></span>
<span class="normal"><a href="#__codelineno-0-119">119</a></span>
<span class="normal"><a href="#__codelineno-0-120">120</a></span>
<span class="normal"><a href="#__codelineno-0-121">121</a></span>
<span class="normal"><a href="#__codelineno-0-122">122</a></span>
<span class="normal"><a href="#__codelineno-0-123">123</a></span>
<span class="normal"><a href="#__codelineno-0-124">124</a></span>
<span class="normal"><a href="#__codelineno-0-125">125</a></span>
<span class="normal"><a href="#__codelineno-0-126">126</a></span>
<span class="normal"><a href="#__codelineno-0-127">127</a></span>
<span class="normal"><a href="#__codelineno-0-128">128</a></span>
<span class="normal"><a href="#__codelineno-0-129">129</a></span>
<span class="normal"><a href="#__codelineno-0-130">130</a></span>
<span class="normal"><a href="#__codelineno-0-131">131</a></span>
<span class="normal"><a href="#__codelineno-0-132">132</a></span>
<span class="normal"><a href="#__codelineno-0-133">133</a></span>
<span class="normal"><a href="#__codelineno-0-134">134</a></span>
<span class="normal"><a href="#__codelineno-0-135">135</a></span>
<span class="normal"><a href="#__codelineno-0-136">136</a></span>
<span class="normal"><a href="#__codelineno-0-137">137</a></span>
<span class="normal"><a href="#__codelineno-0-138">138</a></span>
<span class="normal"><a href="#__codelineno-0-139">139</a></span>
<span class="normal"><a href="#__codelineno-0-140">140</a></span>
<span class="normal"><a href="#__codelineno-0-141">141</a></span>
<span class="normal"><a href="#__codelineno-0-142">142</a></span>
<span class="normal"><a href="#__codelineno-0-143">143</a></span>
<span class="normal"><a href="#__codelineno-0-144">144</a></span>
<span class="normal"><a href="#__codelineno-0-145">145</a></span>
<span class="normal"><a href="#__codelineno-0-146">146</a></span>
<span class="normal"><a href="#__codelineno-0-147">147</a></span>
<span class="normal"><a href="#__codelineno-0-148">148</a></span>
<span class="normal"><a href="#__codelineno-0-149">149</a></span>
<span class="normal"><a href="#__codelineno-0-150">150</a></span>
<span class="normal"><a href="#__codelineno-0-151">151</a></span>
<span class="normal"><a href="#__codelineno-0-152">152</a></span>
<span class="normal"><a href="#__codelineno-0-153">153</a></span>
<span class="normal"><a href="#__codelineno-0-154">154</a></span>
<span class="normal"><a href="#__codelineno-0-155">155</a></span>
<span class="normal"><a href="#__codelineno-0-156">156</a></span>
<span class="normal"><a href="#__codelineno-0-157">157</a></span>
<span class="normal"><a href="#__codelineno-0-158">158</a></span>
<span class="normal"><a href="#__codelineno-0-159">159</a></span>
<span class="normal"><a href="#__codelineno-0-160">160</a></span>
<span class="normal"><a href="#__codelineno-0-161">161</a></span>
<span class="normal"><a href="#__codelineno-0-162">162</a></span>
<span class="normal"><a href="#__codelineno-0-163">163</a></span>
<span class="normal"><a href="#__codelineno-0-164">164</a></span>
<span class="normal"><a href="#__codelineno-0-165">165</a></span>
<span class="normal"><a href="#__codelineno-0-166">166</a></span>
<span class="normal"><a href="#__codelineno-0-167">167</a></span>
<span class="normal"><a href="#__codelineno-0-168">168</a></span>
<span class="normal"><a href="#__codelineno-0-169">169</a></span>
<span class="normal"><a href="#__codelineno-0-170">170</a></span>
<span class="normal"><a href="#__codelineno-0-171">171</a></span>
<span class="normal"><a href="#__codelineno-0-172">172</a></span>
<span class="normal"><a href="#__codelineno-0-173">173</a></span>
<span class="normal"><a href="#__codelineno-0-174">174</a></span>
<span class="normal"><a href="#__codelineno-0-175">175</a></span>
<span class="normal"><a href="#__codelineno-0-176">176</a></span>
<span class="normal"><a href="#__codelineno-0-177">177</a></span>
<span class="normal"><a href="#__codelineno-0-178">178</a></span>
<span class="normal"><a href="#__codelineno-0-179">179</a></span>
<span class="normal"><a href="#__codelineno-0-180">180</a></span>
<span class="normal"><a href="#__codelineno-0-181">181</a></span>
<span class="normal"><a href="#__codelineno-0-182">182</a></span>
<span class="normal"><a href="#__codelineno-0-183">183</a></span>
<span class="normal"><a href="#__codelineno-0-184">184</a></span>
<span class="normal"><a href="#__codelineno-0-185">185</a></span>
<span class="normal"><a href="#__codelineno-0-186">186</a></span>
<span class="normal"><a href="#__codelineno-0-187">187</a></span>
<span class="normal"><a href="#__codelineno-0-188">188</a></span>
<span class="normal"><a href="#__codelineno-0-189">189</a></span>
<span class="normal"><a href="#__codelineno-0-190">190</a></span>
<span class="normal"><a href="#__codelineno-0-191">191</a></span>
<span class="normal"><a href="#__codelineno-0-192">192</a></span>
<span class="normal"><a href="#__codelineno-0-193">193</a></span>
<span class="normal"><a href="#__codelineno-0-194">194</a></span>
<span class="normal"><a href="#__codelineno-0-195">195</a></span>
<span class="normal"><a href="#__codelineno-0-196">196</a></span>
<span class="normal"><a href="#__codelineno-0-197">197</a></span>
<span class="normal"><a href="#__codelineno-0-198">198</a></span>
<span class="normal"><a href="#__codelineno-0-199">199</a></span>
<span class="normal"><a href="#__codelineno-0-200">200</a></span>
<span class="normal"><a href="#__codelineno-0-201">201</a></span>
<span class="normal"><a href="#__codelineno-0-202">202</a></span>
<span class="normal"><a href="#__codelineno-0-203">203</a></span>
<span class="normal"><a href="#__codelineno-0-204">204</a></span>
<span class="normal"><a href="#__codelineno-0-205">205</a></span>
<span class="normal"><a href="#__codelineno-0-206">206</a></span>
<span class="normal"><a href="#__codelineno-0-207">207</a></span>
<span class="normal"><a href="#__codelineno-0-208">208</a></span>
<span class="normal"><a href="#__codelineno-0-209">209</a></span>
<span class="normal"><a href="#__codelineno-0-210">210</a></span>
<span class="normal"><a href="#__codelineno-0-211">211</a></span>
<span class="normal"><a href="#__codelineno-0-212">212</a></span>
<span class="normal"><a href="#__codelineno-0-213">213</a></span>
<span class="normal"><a href="#__codelineno-0-214">214</a></span>
<span class="normal"><a href="#__codelineno-0-215">215</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-18" name="__codelineno-0-18"></a><span class="k">class</span> <span class="nc">NautobotCSVParser</span><span class="p">(</span><span class="n">BaseParser</span><span class="p">):</span>
<a id="__codelineno-0-19" name="__codelineno-0-19"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Counterpart to NautobotCSVRenderer - import CSV data.&quot;&quot;&quot;</span>
<a id="__codelineno-0-20" name="__codelineno-0-20"></a>
<a id="__codelineno-0-21" name="__codelineno-0-21"></a>    <span class="n">media_type</span> <span class="o">=</span> <span class="s2">&quot;text/csv&quot;</span>
<a id="__codelineno-0-22" name="__codelineno-0-22"></a>
<a id="__codelineno-0-23" name="__codelineno-0-23"></a>    <span class="k">def</span> <span class="nf">parse</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">stream</span><span class="p">,</span> <span class="n">media_type</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">parser_context</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<a id="__codelineno-0-24" name="__codelineno-0-24"></a>        <span class="n">parser_context</span> <span class="o">=</span> <span class="n">parser_context</span> <span class="ow">or</span> <span class="p">{}</span>
<a id="__codelineno-0-25" name="__codelineno-0-25"></a>        <span class="n">encoding</span> <span class="o">=</span> <span class="n">parser_context</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;encoding&quot;</span><span class="p">,</span> <span class="s2">&quot;UTF-8&quot;</span><span class="p">)</span>
<a id="__codelineno-0-26" name="__codelineno-0-26"></a>        <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-0-27" name="__codelineno-0-27"></a>            <span class="k">if</span> <span class="s2">&quot;serializer_class&quot;</span> <span class="ow">in</span> <span class="n">parser_context</span><span class="p">:</span>
<a id="__codelineno-0-28" name="__codelineno-0-28"></a>                <span class="c1"># UI bulk-import case</span>
<a id="__codelineno-0-29" name="__codelineno-0-29"></a>                <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">parser_context</span><span class="p">[</span><span class="s2">&quot;serializer_class&quot;</span><span class="p">]</span>
<a id="__codelineno-0-30" name="__codelineno-0-30"></a>            <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-31" name="__codelineno-0-31"></a>                <span class="c1"># REST API case</span>
<a id="__codelineno-0-32" name="__codelineno-0-32"></a>                <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">parser_context</span><span class="p">[</span><span class="s2">&quot;view&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">get_serializer_class</span><span class="p">()</span>
<a id="__codelineno-0-33" name="__codelineno-0-33"></a>        <span class="k">except</span> <span class="p">(</span><span class="ne">KeyError</span><span class="p">,</span> <span class="ne">AttributeError</span><span class="p">):</span>
<a id="__codelineno-0-34" name="__codelineno-0-34"></a>            <span class="k">raise</span> <span class="n">ParseError</span><span class="p">(</span><span class="s2">&quot;No serializer_class was provided by the parser_context&quot;</span><span class="p">)</span>
<a id="__codelineno-0-35" name="__codelineno-0-35"></a>        <span class="k">if</span> <span class="n">serializer_class</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-36" name="__codelineno-0-36"></a>            <span class="k">raise</span> <span class="n">ParseError</span><span class="p">(</span><span class="s2">&quot;Serializer class for this parser_context is None, unable to proceed&quot;</span><span class="p">)</span>
<a id="__codelineno-0-37" name="__codelineno-0-37"></a>
<a id="__codelineno-0-38" name="__codelineno-0-38"></a>        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializer_class</span><span class="p">(</span><span class="n">context</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;request&quot;</span><span class="p">:</span> <span class="n">parser_context</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;request&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="s2">&quot;depth&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">})</span>
<a id="__codelineno-0-39" name="__codelineno-0-39"></a>
<a id="__codelineno-0-40" name="__codelineno-0-40"></a>        <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-0-41" name="__codelineno-0-41"></a>            <span class="n">text</span> <span class="o">=</span> <span class="n">stream</span><span class="o">.</span><span class="n">read</span><span class="p">()</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="n">encoding</span><span class="p">)</span>
<a id="__codelineno-0-42" name="__codelineno-0-42"></a>            <span class="n">reader</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">DictReader</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">text</span><span class="p">))</span>
<a id="__codelineno-0-43" name="__codelineno-0-43"></a>
<a id="__codelineno-0-44" name="__codelineno-0-44"></a>            <span class="n">data</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-45" name="__codelineno-0-45"></a>            <span class="k">for</span> <span class="n">counter</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">reader</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
<a id="__codelineno-0-46" name="__codelineno-0-46"></a>                <span class="n">data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">row_elements_to_data</span><span class="p">(</span><span class="n">counter</span><span class="p">,</span> <span class="n">row</span><span class="p">,</span> <span class="n">serializer</span><span class="o">=</span><span class="n">serializer</span><span class="p">))</span>
<a id="__codelineno-0-47" name="__codelineno-0-47"></a>
<a id="__codelineno-0-48" name="__codelineno-0-48"></a>            <span class="k">if</span> <span class="s2">&quot;pk&quot;</span> <span class="ow">in</span> <span class="n">parser_context</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;kwargs&quot;</span><span class="p">,</span> <span class="p">{}):</span>
<a id="__codelineno-0-49" name="__codelineno-0-49"></a>                <span class="c1"># Single-object update, not bulk update - strip it so that we get the expected input and return format</span>
<a id="__codelineno-0-50" name="__codelineno-0-50"></a>                <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<a id="__codelineno-0-51" name="__codelineno-0-51"></a>            <span class="c1"># Note that we can&#39;t distinguish between single-create and bulk-create with a list of one object,</span>
<a id="__codelineno-0-52" name="__codelineno-0-52"></a>            <span class="c1"># as both would have the same CSV representation. Therefore create via CSV **always** acts as bulk-create,</span>
<a id="__codelineno-0-53" name="__codelineno-0-53"></a>            <span class="c1"># and the response will always be a list of created objects, never a single object</span>
<a id="__codelineno-0-54" name="__codelineno-0-54"></a>
<a id="__codelineno-0-55" name="__codelineno-0-55"></a>            <span class="k">if</span> <span class="n">settings</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">:</span>
<a id="__codelineno-0-56" name="__codelineno-0-56"></a>                <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;CSV loaded into data:</span><span class="se">\n</span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">))</span>
<a id="__codelineno-0-57" name="__codelineno-0-57"></a>            <span class="k">return</span> <span class="n">data</span>
<a id="__codelineno-0-58" name="__codelineno-0-58"></a>        <span class="k">except</span> <span class="n">ParseError</span><span class="p">:</span>
<a id="__codelineno-0-59" name="__codelineno-0-59"></a>            <span class="k">raise</span>
<a id="__codelineno-0-60" name="__codelineno-0-60"></a>        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
<a id="__codelineno-0-61" name="__codelineno-0-61"></a>            <span class="k">raise</span> <span class="n">ParseError</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">exc</span><span class="p">))</span> <span class="kn">from</span> <span class="nn">exc</span>
<a id="__codelineno-0-62" name="__codelineno-0-62"></a>
<a id="__codelineno-0-63" name="__codelineno-0-63"></a>    <span class="k">def</span> <span class="nf">_group_data_by_field_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
<a id="__codelineno-0-64" name="__codelineno-0-64"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-65" name="__codelineno-0-65"></a><span class="sd">        Converts a dictionary with flat keys separated by &#39;__&#39; into a nested dictionary structure suitable for serialization.</span>
<a id="__codelineno-0-66" name="__codelineno-0-66"></a>
<a id="__codelineno-0-67" name="__codelineno-0-67"></a><span class="sd">        Example:</span>
<a id="__codelineno-0-68" name="__codelineno-0-68"></a><span class="sd">            Input:</span>
<a id="__codelineno-0-69" name="__codelineno-0-69"></a><span class="sd">                {</span>
<a id="__codelineno-0-70" name="__codelineno-0-70"></a><span class="sd">                    &#39;type&#39;: &#39;virtual&#39;,</span>
<a id="__codelineno-0-71" name="__codelineno-0-71"></a><span class="sd">                    &#39;name&#39;: &#39;Interface 4&#39;,</span>
<a id="__codelineno-0-72" name="__codelineno-0-72"></a><span class="sd">                    &#39;device__name&#39;: &#39;Device 1&#39;,</span>
<a id="__codelineno-0-73" name="__codelineno-0-73"></a><span class="sd">                    &#39;device__tenant__name&#39;: &#39;&#39;,</span>
<a id="__codelineno-0-74" name="__codelineno-0-74"></a><span class="sd">                    &#39;device__location&#39;: &#39;Test+Location+1&#39;,</span>
<a id="__codelineno-0-75" name="__codelineno-0-75"></a><span class="sd">                    &#39;status&#39;: &#39;Active&#39;,</span>
<a id="__codelineno-0-76" name="__codelineno-0-76"></a><span class="sd">                }</span>
<a id="__codelineno-0-77" name="__codelineno-0-77"></a>
<a id="__codelineno-0-78" name="__codelineno-0-78"></a><span class="sd">            Output:</span>
<a id="__codelineno-0-79" name="__codelineno-0-79"></a><span class="sd">                {</span>
<a id="__codelineno-0-80" name="__codelineno-0-80"></a><span class="sd">                    &#39;type&#39;: &#39;virtual&#39;,</span>
<a id="__codelineno-0-81" name="__codelineno-0-81"></a><span class="sd">                    &#39;name&#39;: &#39;Interface 4&#39;,</span>
<a id="__codelineno-0-82" name="__codelineno-0-82"></a><span class="sd">                    &#39;device&#39;: {</span>
<a id="__codelineno-0-83" name="__codelineno-0-83"></a><span class="sd">                        &#39;name&#39;: &#39;Device 1&#39;,</span>
<a id="__codelineno-0-84" name="__codelineno-0-84"></a><span class="sd">                        &#39;location&#39;: &#39;Test+Location+1&#39;,</span>
<a id="__codelineno-0-85" name="__codelineno-0-85"></a><span class="sd">                        &quot;tenant&quot;:{</span>
<a id="__codelineno-0-86" name="__codelineno-0-86"></a><span class="sd">                            &quot;name&quot;: &quot;&quot;,</span>
<a id="__codelineno-0-87" name="__codelineno-0-87"></a><span class="sd">                        }</span>
<a id="__codelineno-0-88" name="__codelineno-0-88"></a><span class="sd">                    },</span>
<a id="__codelineno-0-89" name="__codelineno-0-89"></a><span class="sd">                    &#39;status&#39;: &#39;Active&#39;</span>
<a id="__codelineno-0-90" name="__codelineno-0-90"></a><span class="sd">                }</span>
<a id="__codelineno-0-91" name="__codelineno-0-91"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-92" name="__codelineno-0-92"></a>
<a id="__codelineno-0-93" name="__codelineno-0-93"></a>        <span class="k">def</span> <span class="nf">insert_nested_dict</span><span class="p">(</span><span class="n">keys</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">current_dict</span><span class="p">):</span>
<a id="__codelineno-0-94" name="__codelineno-0-94"></a>            <span class="n">key</span> <span class="o">=</span> <span class="n">keys</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<a id="__codelineno-0-95" name="__codelineno-0-95"></a>            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">keys</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
<a id="__codelineno-0-96" name="__codelineno-0-96"></a>                <span class="n">current_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span> <span class="k">if</span> <span class="n">value</span> <span class="ow">in</span> <span class="p">[</span><span class="n">CSV_NO_OBJECT</span><span class="p">,</span> <span class="n">CSV_NULL_TYPE</span><span class="p">]</span> <span class="k">else</span> <span class="n">value</span>
<a id="__codelineno-0-97" name="__codelineno-0-97"></a>            <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-98" name="__codelineno-0-98"></a>                <span class="n">current_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">current_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="p">{})</span>
<a id="__codelineno-0-99" name="__codelineno-0-99"></a>                <span class="n">insert_nested_dict</span><span class="p">(</span><span class="n">keys</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span> <span class="n">value</span><span class="p">,</span> <span class="n">current_dict</span><span class="p">[</span><span class="n">key</span><span class="p">])</span>
<a id="__codelineno-0-100" name="__codelineno-0-100"></a>
<a id="__codelineno-0-101" name="__codelineno-0-101"></a>        <span class="n">result_dict</span> <span class="o">=</span> <span class="p">{}</span>
<a id="__codelineno-0-102" name="__codelineno-0-102"></a>        <span class="k">for</span> <span class="n">original_key</span><span class="p">,</span> <span class="n">original_value</span> <span class="ow">in</span> <span class="n">data</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
<a id="__codelineno-0-103" name="__codelineno-0-103"></a>            <span class="n">split_keys</span> <span class="o">=</span> <span class="n">original_key</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;__&quot;</span><span class="p">)</span>
<a id="__codelineno-0-104" name="__codelineno-0-104"></a>            <span class="n">insert_nested_dict</span><span class="p">(</span><span class="n">split_keys</span><span class="p">,</span> <span class="n">original_value</span><span class="p">,</span> <span class="n">result_dict</span><span class="p">)</span>
<a id="__codelineno-0-105" name="__codelineno-0-105"></a>
<a id="__codelineno-0-106" name="__codelineno-0-106"></a>        <span class="k">return</span> <span class="n">result_dict</span>
<a id="__codelineno-0-107" name="__codelineno-0-107"></a>
<a id="__codelineno-0-108" name="__codelineno-0-108"></a>    <span class="k">def</span> <span class="nf">_field_lookups_not_empty</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field_lookups</span><span class="p">):</span>
<a id="__codelineno-0-109" name="__codelineno-0-109"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Check if all values of the field lookups dict are not all NoObject&quot;&quot;&quot;</span>
<a id="__codelineno-0-110" name="__codelineno-0-110"></a>        <span class="k">return</span> <span class="nb">any</span><span class="p">(</span><span class="n">value</span> <span class="o">!=</span> <span class="n">CSV_NO_OBJECT</span> <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">field_lookups</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
<a id="__codelineno-0-111" name="__codelineno-0-111"></a>
<a id="__codelineno-0-112" name="__codelineno-0-112"></a>    <span class="k">def</span> <span class="nf">_remove_object_not_found_values</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
<a id="__codelineno-0-113" name="__codelineno-0-113"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Remove all `CSV_NO_OBJECT` field lookups from the given data, and swap out `CSV_NULL_TYPE` and</span>
<a id="__codelineno-0-114" name="__codelineno-0-114"></a><span class="sd">        &#39;CSV_NO_OBJECT&#39; values for `None`.</span>
<a id="__codelineno-0-115" name="__codelineno-0-115"></a>
<a id="__codelineno-0-116" name="__codelineno-0-116"></a><span class="sd">        If all the lookups for a field are &#39;CSV_NO_OBJECT&#39;, it indicates that the field does not exist,</span>
<a id="__codelineno-0-117" name="__codelineno-0-117"></a><span class="sd">        and it needs to be removed to prevent unnecessary database queries.</span>
<a id="__codelineno-0-118" name="__codelineno-0-118"></a>
<a id="__codelineno-0-119" name="__codelineno-0-119"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-120" name="__codelineno-0-120"></a><span class="sd">            data (dict): A dictionary containing field natural key lookups and their corresponding values.</span>
<a id="__codelineno-0-121" name="__codelineno-0-121"></a>
<a id="__codelineno-0-122" name="__codelineno-0-122"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-123" name="__codelineno-0-123"></a><span class="sd">            dict: A modified dictionary with field lookups of &#39;CSV_NO_OBJECT&#39; values removed, and &#39;CSV_NULL_TYPE&#39; and &#39;CSV_NO_OBJECT&#39; swapped for `None`.</span>
<a id="__codelineno-0-124" name="__codelineno-0-124"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-125" name="__codelineno-0-125"></a>        <span class="n">lookup_grouped_by_field_name</span> <span class="o">=</span> <span class="p">{}</span>
<a id="__codelineno-0-126" name="__codelineno-0-126"></a>        <span class="k">for</span> <span class="n">lookup</span><span class="p">,</span> <span class="n">lookup_value</span> <span class="ow">in</span> <span class="n">data</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
<a id="__codelineno-0-127" name="__codelineno-0-127"></a>            <span class="n">field_name</span> <span class="o">=</span> <span class="n">lookup</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;__&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
<a id="__codelineno-0-128" name="__codelineno-0-128"></a>            <span class="n">lookup_grouped_by_field_name</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">field_name</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="n">lookup</span><span class="p">:</span> <span class="n">lookup_value</span><span class="p">})</span>
<a id="__codelineno-0-129" name="__codelineno-0-129"></a>
<a id="__codelineno-0-130" name="__codelineno-0-130"></a>        <span class="c1"># Ignore lookup groups which has all its values set to NoObject</span>
<a id="__codelineno-0-131" name="__codelineno-0-131"></a>        <span class="c1"># These lookups fields do not exists</span>
<a id="__codelineno-0-132" name="__codelineno-0-132"></a>        <span class="n">data_without_missing_field_lookups_values</span> <span class="o">=</span> <span class="p">{</span>
<a id="__codelineno-0-133" name="__codelineno-0-133"></a>            <span class="n">lookup</span><span class="p">:</span> <span class="n">lookup_value</span>
<a id="__codelineno-0-134" name="__codelineno-0-134"></a>            <span class="k">for</span> <span class="n">lookup_group</span> <span class="ow">in</span> <span class="n">lookup_grouped_by_field_name</span><span class="o">.</span><span class="n">values</span><span class="p">()</span>
<a id="__codelineno-0-135" name="__codelineno-0-135"></a>            <span class="k">for</span> <span class="n">lookup</span><span class="p">,</span> <span class="n">lookup_value</span> <span class="ow">in</span> <span class="n">lookup_group</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
<a id="__codelineno-0-136" name="__codelineno-0-136"></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_field_lookups_not_empty</span><span class="p">(</span><span class="n">lookup_group</span><span class="p">)</span>
<a id="__codelineno-0-137" name="__codelineno-0-137"></a>        <span class="p">}</span>
<a id="__codelineno-0-138" name="__codelineno-0-138"></a>
<a id="__codelineno-0-139" name="__codelineno-0-139"></a>        <span class="k">return</span> <span class="n">data_without_missing_field_lookups_values</span>
<a id="__codelineno-0-140" name="__codelineno-0-140"></a>
<a id="__codelineno-0-141" name="__codelineno-0-141"></a>    <span class="k">def</span> <span class="nf">row_elements_to_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">counter</span><span class="p">,</span> <span class="n">row</span><span class="p">,</span> <span class="n">serializer</span><span class="p">):</span>
<a id="__codelineno-0-142" name="__codelineno-0-142"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-143" name="__codelineno-0-143"></a><span class="sd">        Parse a single row of CSV data (represented as a dict) into a dict suitable for consumption by the serializer.</span>
<a id="__codelineno-0-144" name="__codelineno-0-144"></a>
<a id="__codelineno-0-145" name="__codelineno-0-145"></a><span class="sd">        TODO: it would be more elegant if our serializer fields knew how to deserialize the CSV data themselves;</span>
<a id="__codelineno-0-146" name="__codelineno-0-146"></a><span class="sd">        could we then literally have the parser just return list(reader) and not need this function at all?</span>
<a id="__codelineno-0-147" name="__codelineno-0-147"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-148" name="__codelineno-0-148"></a>        <span class="n">data</span> <span class="o">=</span> <span class="p">{}</span>
<a id="__codelineno-0-149" name="__codelineno-0-149"></a>        <span class="n">valid_row_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_remove_object_not_found_values</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>
<a id="__codelineno-0-150" name="__codelineno-0-150"></a>        <span class="n">fields_value_mapping</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_group_data_by_field_name</span><span class="p">(</span><span class="n">valid_row_data</span><span class="p">)</span>
<a id="__codelineno-0-151" name="__codelineno-0-151"></a>        <span class="k">for</span> <span class="n">column</span><span class="p">,</span> <span class="n">key</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">fields_value_mapping</span><span class="o">.</span><span class="n">keys</span><span class="p">(),</span> <span class="n">start</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
<a id="__codelineno-0-152" name="__codelineno-0-152"></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">key</span><span class="p">:</span>
<a id="__codelineno-0-153" name="__codelineno-0-153"></a>                <span class="k">raise</span> <span class="n">ParseError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Row </span><span class="si">{</span><span class="n">counter</span><span class="si">}</span><span class="s2">: Column </span><span class="si">{</span><span class="n">column</span><span class="si">}</span><span class="s2">: missing/empty header for this column&quot;</span><span class="p">)</span>
<a id="__codelineno-0-154" name="__codelineno-0-154"></a>
<a id="__codelineno-0-155" name="__codelineno-0-155"></a>            <span class="n">value</span> <span class="o">=</span> <span class="n">fields_value_mapping</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
<a id="__codelineno-0-156" name="__codelineno-0-156"></a>            <span class="k">if</span> <span class="n">key</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;cf_&quot;</span><span class="p">):</span>
<a id="__codelineno-0-157" name="__codelineno-0-157"></a>                <span class="c1"># Custom field</span>
<a id="__codelineno-0-158" name="__codelineno-0-158"></a>                <span class="k">if</span> <span class="n">value</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
<a id="__codelineno-0-159" name="__codelineno-0-159"></a>                    <span class="n">value</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-160" name="__codelineno-0-160"></a>                <span class="n">data</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s2">&quot;custom_fields&quot;</span><span class="p">,</span> <span class="p">{})[</span><span class="n">key</span><span class="p">[</span><span class="mi">3</span><span class="p">:]]</span> <span class="o">=</span> <span class="n">value</span>
<a id="__codelineno-0-161" name="__codelineno-0-161"></a>                <span class="k">continue</span>
<a id="__codelineno-0-162" name="__codelineno-0-162"></a>
<a id="__codelineno-0-163" name="__codelineno-0-163"></a>            <span class="n">serializer_field</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
<a id="__codelineno-0-164" name="__codelineno-0-164"></a>            <span class="k">if</span> <span class="n">serializer_field</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-165" name="__codelineno-0-165"></a>                <span class="c1"># The REST API normally just ignores any columns the serializer doesn&#39;t understand</span>
<a id="__codelineno-0-166" name="__codelineno-0-166"></a>                <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Skipping unknown column &quot;</span><span class="si">%s</span><span class="s1">&quot;&#39;</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span>
<a id="__codelineno-0-167" name="__codelineno-0-167"></a>                <span class="k">continue</span>
<a id="__codelineno-0-168" name="__codelineno-0-168"></a>
<a id="__codelineno-0-169" name="__codelineno-0-169"></a>            <span class="k">if</span> <span class="n">serializer_field</span><span class="o">.</span><span class="n">read_only</span> <span class="ow">and</span> <span class="n">key</span> <span class="o">!=</span> <span class="s2">&quot;id&quot;</span><span class="p">:</span>
<a id="__codelineno-0-170" name="__codelineno-0-170"></a>                <span class="c1"># Deserializing read-only fields is tricky, especially for things like SerializerMethodFields that</span>
<a id="__codelineno-0-171" name="__codelineno-0-171"></a>                <span class="c1"># can potentially render as anything. We don&#39;t strictly need such fields (except &quot;id&quot; for bulk PATCH),</span>
<a id="__codelineno-0-172" name="__codelineno-0-172"></a>                <span class="c1"># so let&#39;s just skip it.</span>
<a id="__codelineno-0-173" name="__codelineno-0-173"></a>                <span class="k">continue</span>
<a id="__codelineno-0-174" name="__codelineno-0-174"></a>
<a id="__codelineno-0-175" name="__codelineno-0-175"></a>            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">serializer_field</span><span class="p">,</span> <span class="n">serializers</span><span class="o">.</span><span class="n">ManyRelatedField</span><span class="p">):</span>
<a id="__codelineno-0-176" name="__codelineno-0-176"></a>                <span class="c1"># A list of related objects, represented as a list of composite-keys</span>
<a id="__codelineno-0-177" name="__codelineno-0-177"></a>                <span class="k">if</span> <span class="n">value</span><span class="p">:</span>
<a id="__codelineno-0-178" name="__codelineno-0-178"></a>                    <span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">)</span>
<a id="__codelineno-0-179" name="__codelineno-0-179"></a>                <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-180" name="__codelineno-0-180"></a>                    <span class="n">value</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-181" name="__codelineno-0-181"></a>            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">serializer_field</span><span class="p">,</span> <span class="n">serializers</span><span class="o">.</span><span class="n">RelatedField</span><span class="p">):</span>
<a id="__codelineno-0-182" name="__codelineno-0-182"></a>                <span class="c1"># A single related object, represented by its composite-key</span>
<a id="__codelineno-0-183" name="__codelineno-0-183"></a>                <span class="k">if</span> <span class="n">value</span><span class="p">:</span>
<a id="__codelineno-0-184" name="__codelineno-0-184"></a>                    <span class="k">pass</span>
<a id="__codelineno-0-185" name="__codelineno-0-185"></a>                <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-186" name="__codelineno-0-186"></a>                    <span class="n">value</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-187" name="__codelineno-0-187"></a>            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">serializer_field</span><span class="p">,</span> <span class="p">(</span><span class="n">serializers</span><span class="o">.</span><span class="n">ListField</span><span class="p">,</span> <span class="n">serializers</span><span class="o">.</span><span class="n">MultipleChoiceField</span><span class="p">)):</span>
<a id="__codelineno-0-188" name="__codelineno-0-188"></a>                <span class="k">if</span> <span class="n">value</span><span class="p">:</span>
<a id="__codelineno-0-189" name="__codelineno-0-189"></a>                    <span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">)</span>
<a id="__codelineno-0-190" name="__codelineno-0-190"></a>                <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-191" name="__codelineno-0-191"></a>                    <span class="n">value</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-192" name="__codelineno-0-192"></a>            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">serializer_field</span><span class="p">,</span> <span class="p">(</span><span class="n">serializers</span><span class="o">.</span><span class="n">DictField</span><span class="p">,</span> <span class="n">serializers</span><span class="o">.</span><span class="n">JSONField</span><span class="p">)):</span>
<a id="__codelineno-0-193" name="__codelineno-0-193"></a>                <span class="c1"># We currently only store lists or dicts in JSONFields, never bare ints/strings.</span>
<a id="__codelineno-0-194" name="__codelineno-0-194"></a>                <span class="c1"># On the CSV write side, we only render dicts to JSON</span>
<a id="__codelineno-0-195" name="__codelineno-0-195"></a>                <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-196" name="__codelineno-0-196"></a>                    <span class="k">if</span> <span class="n">value</span><span class="o">.</span><span class="n">startswith</span><span class="p">((</span><span class="s2">&quot;{&quot;</span><span class="p">,</span> <span class="s2">&quot;[&quot;</span><span class="p">)):</span>
<a id="__codelineno-0-197" name="__codelineno-0-197"></a>                        <span class="n">value</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
<a id="__codelineno-0-198" name="__codelineno-0-198"></a>                    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-199" name="__codelineno-0-199"></a>                        <span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">)</span>
<a id="__codelineno-0-200" name="__codelineno-0-200"></a>                        <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-0-201" name="__codelineno-0-201"></a>                            <span class="c1"># We have some cases where it&#39;s a list of integers, such as in RackReservation.units</span>
<a id="__codelineno-0-202" name="__codelineno-0-202"></a>                            <span class="n">value</span> <span class="o">=</span> <span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">value</span><span class="p">]</span>
<a id="__codelineno-0-203" name="__codelineno-0-203"></a>                        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
<a id="__codelineno-0-204" name="__codelineno-0-204"></a>                            <span class="c1"># Guess not!</span>
<a id="__codelineno-0-205" name="__codelineno-0-205"></a>                            <span class="k">pass</span>
<a id="__codelineno-0-206" name="__codelineno-0-206"></a>
<a id="__codelineno-0-207" name="__codelineno-0-207"></a>            <span class="c1"># CSV doesn&#39;t provide a ready distinction between blank and null, so in this case we have to pick one.</span>
<a id="__codelineno-0-208" name="__codelineno-0-208"></a>            <span class="c1"># This does mean that for a nullable AND blankable field, there&#39;s no way for CSV to set it to blank string.</span>
<a id="__codelineno-0-209" name="__codelineno-0-209"></a>            <span class="c1"># See corresponding logic in NautobotCSVRenderer.</span>
<a id="__codelineno-0-210" name="__codelineno-0-210"></a>            <span class="k">if</span> <span class="n">value</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span> <span class="ow">and</span> <span class="n">serializer_field</span><span class="o">.</span><span class="n">allow_null</span><span class="p">:</span>
<a id="__codelineno-0-211" name="__codelineno-0-211"></a>                <span class="n">value</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-212" name="__codelineno-0-212"></a>
<a id="__codelineno-0-213" name="__codelineno-0-213"></a>            <span class="n">data</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
<a id="__codelineno-0-214" name="__codelineno-0-214"></a>
<a id="__codelineno-0-215" name="__codelineno-0-215"></a>        <span class="k">return</span> <span class="n">data</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">










<div class="doc doc-object doc-function">



<h3 id="nautobot.core.api.parsers.NautobotCSVParser.row_elements_to_data" class="doc doc-heading">
<code class="highlight language-python"><span class="n">row_elements_to_data</span><span class="p">(</span><span class="n">counter</span><span class="p">,</span> <span class="n">row</span><span class="p">,</span> <span class="n">serializer</span><span class="p">)</span></code>

<a href="#nautobot.core.api.parsers.NautobotCSVParser.row_elements_to_data" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Parse a single row of CSV data (represented as a dict) into a dict suitable for consumption by the serializer.</p>
<p>TODO: it would be more elegant if our serializer fields knew how to deserialize the CSV data themselves;
could we then literally have the parser just return list(reader) and not need this function at all?</p>

          <details class="quote">
            <summary>Source code in <code>nautobot/core/api/parsers.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-141">141</a></span>
<span class="normal"><a href="#__codelineno-0-142">142</a></span>
<span class="normal"><a href="#__codelineno-0-143">143</a></span>
<span class="normal"><a href="#__codelineno-0-144">144</a></span>
<span class="normal"><a href="#__codelineno-0-145">145</a></span>
<span class="normal"><a href="#__codelineno-0-146">146</a></span>
<span class="normal"><a href="#__codelineno-0-147">147</a></span>
<span class="normal"><a href="#__codelineno-0-148">148</a></span>
<span class="normal"><a href="#__codelineno-0-149">149</a></span>
<span class="normal"><a href="#__codelineno-0-150">150</a></span>
<span class="normal"><a href="#__codelineno-0-151">151</a></span>
<span class="normal"><a href="#__codelineno-0-152">152</a></span>
<span class="normal"><a href="#__codelineno-0-153">153</a></span>
<span class="normal"><a href="#__codelineno-0-154">154</a></span>
<span class="normal"><a href="#__codelineno-0-155">155</a></span>
<span class="normal"><a href="#__codelineno-0-156">156</a></span>
<span class="normal"><a href="#__codelineno-0-157">157</a></span>
<span class="normal"><a href="#__codelineno-0-158">158</a></span>
<span class="normal"><a href="#__codelineno-0-159">159</a></span>
<span class="normal"><a href="#__codelineno-0-160">160</a></span>
<span class="normal"><a href="#__codelineno-0-161">161</a></span>
<span class="normal"><a href="#__codelineno-0-162">162</a></span>
<span class="normal"><a href="#__codelineno-0-163">163</a></span>
<span class="normal"><a href="#__codelineno-0-164">164</a></span>
<span class="normal"><a href="#__codelineno-0-165">165</a></span>
<span class="normal"><a href="#__codelineno-0-166">166</a></span>
<span class="normal"><a href="#__codelineno-0-167">167</a></span>
<span class="normal"><a href="#__codelineno-0-168">168</a></span>
<span class="normal"><a href="#__codelineno-0-169">169</a></span>
<span class="normal"><a href="#__codelineno-0-170">170</a></span>
<span class="normal"><a href="#__codelineno-0-171">171</a></span>
<span class="normal"><a href="#__codelineno-0-172">172</a></span>
<span class="normal"><a href="#__codelineno-0-173">173</a></span>
<span class="normal"><a href="#__codelineno-0-174">174</a></span>
<span class="normal"><a href="#__codelineno-0-175">175</a></span>
<span class="normal"><a href="#__codelineno-0-176">176</a></span>
<span class="normal"><a href="#__codelineno-0-177">177</a></span>
<span class="normal"><a href="#__codelineno-0-178">178</a></span>
<span class="normal"><a href="#__codelineno-0-179">179</a></span>
<span class="normal"><a href="#__codelineno-0-180">180</a></span>
<span class="normal"><a href="#__codelineno-0-181">181</a></span>
<span class="normal"><a href="#__codelineno-0-182">182</a></span>
<span class="normal"><a href="#__codelineno-0-183">183</a></span>
<span class="normal"><a href="#__codelineno-0-184">184</a></span>
<span class="normal"><a href="#__codelineno-0-185">185</a></span>
<span class="normal"><a href="#__codelineno-0-186">186</a></span>
<span class="normal"><a href="#__codelineno-0-187">187</a></span>
<span class="normal"><a href="#__codelineno-0-188">188</a></span>
<span class="normal"><a href="#__codelineno-0-189">189</a></span>
<span class="normal"><a href="#__codelineno-0-190">190</a></span>
<span class="normal"><a href="#__codelineno-0-191">191</a></span>
<span class="normal"><a href="#__codelineno-0-192">192</a></span>
<span class="normal"><a href="#__codelineno-0-193">193</a></span>
<span class="normal"><a href="#__codelineno-0-194">194</a></span>
<span class="normal"><a href="#__codelineno-0-195">195</a></span>
<span class="normal"><a href="#__codelineno-0-196">196</a></span>
<span class="normal"><a href="#__codelineno-0-197">197</a></span>
<span class="normal"><a href="#__codelineno-0-198">198</a></span>
<span class="normal"><a href="#__codelineno-0-199">199</a></span>
<span class="normal"><a href="#__codelineno-0-200">200</a></span>
<span class="normal"><a href="#__codelineno-0-201">201</a></span>
<span class="normal"><a href="#__codelineno-0-202">202</a></span>
<span class="normal"><a href="#__codelineno-0-203">203</a></span>
<span class="normal"><a href="#__codelineno-0-204">204</a></span>
<span class="normal"><a href="#__codelineno-0-205">205</a></span>
<span class="normal"><a href="#__codelineno-0-206">206</a></span>
<span class="normal"><a href="#__codelineno-0-207">207</a></span>
<span class="normal"><a href="#__codelineno-0-208">208</a></span>
<span class="normal"><a href="#__codelineno-0-209">209</a></span>
<span class="normal"><a href="#__codelineno-0-210">210</a></span>
<span class="normal"><a href="#__codelineno-0-211">211</a></span>
<span class="normal"><a href="#__codelineno-0-212">212</a></span>
<span class="normal"><a href="#__codelineno-0-213">213</a></span>
<span class="normal"><a href="#__codelineno-0-214">214</a></span>
<span class="normal"><a href="#__codelineno-0-215">215</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-141" name="__codelineno-0-141"></a><span class="k">def</span> <span class="nf">row_elements_to_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">counter</span><span class="p">,</span> <span class="n">row</span><span class="p">,</span> <span class="n">serializer</span><span class="p">):</span>
<a id="__codelineno-0-142" name="__codelineno-0-142"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-143" name="__codelineno-0-143"></a><span class="sd">    Parse a single row of CSV data (represented as a dict) into a dict suitable for consumption by the serializer.</span>
<a id="__codelineno-0-144" name="__codelineno-0-144"></a>
<a id="__codelineno-0-145" name="__codelineno-0-145"></a><span class="sd">    TODO: it would be more elegant if our serializer fields knew how to deserialize the CSV data themselves;</span>
<a id="__codelineno-0-146" name="__codelineno-0-146"></a><span class="sd">    could we then literally have the parser just return list(reader) and not need this function at all?</span>
<a id="__codelineno-0-147" name="__codelineno-0-147"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-148" name="__codelineno-0-148"></a>    <span class="n">data</span> <span class="o">=</span> <span class="p">{}</span>
<a id="__codelineno-0-149" name="__codelineno-0-149"></a>    <span class="n">valid_row_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_remove_object_not_found_values</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>
<a id="__codelineno-0-150" name="__codelineno-0-150"></a>    <span class="n">fields_value_mapping</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_group_data_by_field_name</span><span class="p">(</span><span class="n">valid_row_data</span><span class="p">)</span>
<a id="__codelineno-0-151" name="__codelineno-0-151"></a>    <span class="k">for</span> <span class="n">column</span><span class="p">,</span> <span class="n">key</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">fields_value_mapping</span><span class="o">.</span><span class="n">keys</span><span class="p">(),</span> <span class="n">start</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
<a id="__codelineno-0-152" name="__codelineno-0-152"></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">key</span><span class="p">:</span>
<a id="__codelineno-0-153" name="__codelineno-0-153"></a>            <span class="k">raise</span> <span class="n">ParseError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Row </span><span class="si">{</span><span class="n">counter</span><span class="si">}</span><span class="s2">: Column </span><span class="si">{</span><span class="n">column</span><span class="si">}</span><span class="s2">: missing/empty header for this column&quot;</span><span class="p">)</span>
<a id="__codelineno-0-154" name="__codelineno-0-154"></a>
<a id="__codelineno-0-155" name="__codelineno-0-155"></a>        <span class="n">value</span> <span class="o">=</span> <span class="n">fields_value_mapping</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
<a id="__codelineno-0-156" name="__codelineno-0-156"></a>        <span class="k">if</span> <span class="n">key</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;cf_&quot;</span><span class="p">):</span>
<a id="__codelineno-0-157" name="__codelineno-0-157"></a>            <span class="c1"># Custom field</span>
<a id="__codelineno-0-158" name="__codelineno-0-158"></a>            <span class="k">if</span> <span class="n">value</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
<a id="__codelineno-0-159" name="__codelineno-0-159"></a>                <span class="n">value</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-160" name="__codelineno-0-160"></a>            <span class="n">data</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s2">&quot;custom_fields&quot;</span><span class="p">,</span> <span class="p">{})[</span><span class="n">key</span><span class="p">[</span><span class="mi">3</span><span class="p">:]]</span> <span class="o">=</span> <span class="n">value</span>
<a id="__codelineno-0-161" name="__codelineno-0-161"></a>            <span class="k">continue</span>
<a id="__codelineno-0-162" name="__codelineno-0-162"></a>
<a id="__codelineno-0-163" name="__codelineno-0-163"></a>        <span class="n">serializer_field</span> <span class="o">=</span> <span class="n">serializer</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
<a id="__codelineno-0-164" name="__codelineno-0-164"></a>        <span class="k">if</span> <span class="n">serializer_field</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-165" name="__codelineno-0-165"></a>            <span class="c1"># The REST API normally just ignores any columns the serializer doesn&#39;t understand</span>
<a id="__codelineno-0-166" name="__codelineno-0-166"></a>            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Skipping unknown column &quot;</span><span class="si">%s</span><span class="s1">&quot;&#39;</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span>
<a id="__codelineno-0-167" name="__codelineno-0-167"></a>            <span class="k">continue</span>
<a id="__codelineno-0-168" name="__codelineno-0-168"></a>
<a id="__codelineno-0-169" name="__codelineno-0-169"></a>        <span class="k">if</span> <span class="n">serializer_field</span><span class="o">.</span><span class="n">read_only</span> <span class="ow">and</span> <span class="n">key</span> <span class="o">!=</span> <span class="s2">&quot;id&quot;</span><span class="p">:</span>
<a id="__codelineno-0-170" name="__codelineno-0-170"></a>            <span class="c1"># Deserializing read-only fields is tricky, especially for things like SerializerMethodFields that</span>
<a id="__codelineno-0-171" name="__codelineno-0-171"></a>            <span class="c1"># can potentially render as anything. We don&#39;t strictly need such fields (except &quot;id&quot; for bulk PATCH),</span>
<a id="__codelineno-0-172" name="__codelineno-0-172"></a>            <span class="c1"># so let&#39;s just skip it.</span>
<a id="__codelineno-0-173" name="__codelineno-0-173"></a>            <span class="k">continue</span>
<a id="__codelineno-0-174" name="__codelineno-0-174"></a>
<a id="__codelineno-0-175" name="__codelineno-0-175"></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">serializer_field</span><span class="p">,</span> <span class="n">serializers</span><span class="o">.</span><span class="n">ManyRelatedField</span><span class="p">):</span>
<a id="__codelineno-0-176" name="__codelineno-0-176"></a>            <span class="c1"># A list of related objects, represented as a list of composite-keys</span>
<a id="__codelineno-0-177" name="__codelineno-0-177"></a>            <span class="k">if</span> <span class="n">value</span><span class="p">:</span>
<a id="__codelineno-0-178" name="__codelineno-0-178"></a>                <span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">)</span>
<a id="__codelineno-0-179" name="__codelineno-0-179"></a>            <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-180" name="__codelineno-0-180"></a>                <span class="n">value</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-181" name="__codelineno-0-181"></a>        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">serializer_field</span><span class="p">,</span> <span class="n">serializers</span><span class="o">.</span><span class="n">RelatedField</span><span class="p">):</span>
<a id="__codelineno-0-182" name="__codelineno-0-182"></a>            <span class="c1"># A single related object, represented by its composite-key</span>
<a id="__codelineno-0-183" name="__codelineno-0-183"></a>            <span class="k">if</span> <span class="n">value</span><span class="p">:</span>
<a id="__codelineno-0-184" name="__codelineno-0-184"></a>                <span class="k">pass</span>
<a id="__codelineno-0-185" name="__codelineno-0-185"></a>            <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-186" name="__codelineno-0-186"></a>                <span class="n">value</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-187" name="__codelineno-0-187"></a>        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">serializer_field</span><span class="p">,</span> <span class="p">(</span><span class="n">serializers</span><span class="o">.</span><span class="n">ListField</span><span class="p">,</span> <span class="n">serializers</span><span class="o">.</span><span class="n">MultipleChoiceField</span><span class="p">)):</span>
<a id="__codelineno-0-188" name="__codelineno-0-188"></a>            <span class="k">if</span> <span class="n">value</span><span class="p">:</span>
<a id="__codelineno-0-189" name="__codelineno-0-189"></a>                <span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">)</span>
<a id="__codelineno-0-190" name="__codelineno-0-190"></a>            <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-191" name="__codelineno-0-191"></a>                <span class="n">value</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-192" name="__codelineno-0-192"></a>        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">serializer_field</span><span class="p">,</span> <span class="p">(</span><span class="n">serializers</span><span class="o">.</span><span class="n">DictField</span><span class="p">,</span> <span class="n">serializers</span><span class="o">.</span><span class="n">JSONField</span><span class="p">)):</span>
<a id="__codelineno-0-193" name="__codelineno-0-193"></a>            <span class="c1"># We currently only store lists or dicts in JSONFields, never bare ints/strings.</span>
<a id="__codelineno-0-194" name="__codelineno-0-194"></a>            <span class="c1"># On the CSV write side, we only render dicts to JSON</span>
<a id="__codelineno-0-195" name="__codelineno-0-195"></a>            <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-196" name="__codelineno-0-196"></a>                <span class="k">if</span> <span class="n">value</span><span class="o">.</span><span class="n">startswith</span><span class="p">((</span><span class="s2">&quot;{&quot;</span><span class="p">,</span> <span class="s2">&quot;[&quot;</span><span class="p">)):</span>
<a id="__codelineno-0-197" name="__codelineno-0-197"></a>                    <span class="n">value</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
<a id="__codelineno-0-198" name="__codelineno-0-198"></a>                <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-199" name="__codelineno-0-199"></a>                    <span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">)</span>
<a id="__codelineno-0-200" name="__codelineno-0-200"></a>                    <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-0-201" name="__codelineno-0-201"></a>                        <span class="c1"># We have some cases where it&#39;s a list of integers, such as in RackReservation.units</span>
<a id="__codelineno-0-202" name="__codelineno-0-202"></a>                        <span class="n">value</span> <span class="o">=</span> <span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">value</span><span class="p">]</span>
<a id="__codelineno-0-203" name="__codelineno-0-203"></a>                    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
<a id="__codelineno-0-204" name="__codelineno-0-204"></a>                        <span class="c1"># Guess not!</span>
<a id="__codelineno-0-205" name="__codelineno-0-205"></a>                        <span class="k">pass</span>
<a id="__codelineno-0-206" name="__codelineno-0-206"></a>
<a id="__codelineno-0-207" name="__codelineno-0-207"></a>        <span class="c1"># CSV doesn&#39;t provide a ready distinction between blank and null, so in this case we have to pick one.</span>
<a id="__codelineno-0-208" name="__codelineno-0-208"></a>        <span class="c1"># This does mean that for a nullable AND blankable field, there&#39;s no way for CSV to set it to blank string.</span>
<a id="__codelineno-0-209" name="__codelineno-0-209"></a>        <span class="c1"># See corresponding logic in NautobotCSVRenderer.</span>
<a id="__codelineno-0-210" name="__codelineno-0-210"></a>        <span class="k">if</span> <span class="n">value</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span> <span class="ow">and</span> <span class="n">serializer_field</span><span class="o">.</span><span class="n">allow_null</span><span class="p">:</span>
<a id="__codelineno-0-211" name="__codelineno-0-211"></a>            <span class="n">value</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-212" name="__codelineno-0-212"></a>
<a id="__codelineno-0-213" name="__codelineno-0-213"></a>        <span class="n">data</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
<a id="__codelineno-0-214" name="__codelineno-0-214"></a>
<a id="__codelineno-0-215" name="__codelineno-0-215"></a>    <span class="k">return</span> <span class="n">data</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="nautobot.apps.api.NautobotHyperlinkedRelatedField" class="doc doc-heading">
          <code>nautobot.apps.api.NautobotHyperlinkedRelatedField</code>


<a href="#nautobot.apps.api.NautobotHyperlinkedRelatedField" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code><a class="autorefs autorefs-internal" title="nautobot.core.api.mixins.WritableSerializerMixin" href="#nautobot.apps.api.WritableSerializerMixin">WritableSerializerMixin</a></code>, <code><span title="rest_framework.serializers">serializers</span>.<span title="rest_framework.serializers.HyperlinkedRelatedField">HyperlinkedRelatedField</span></code></p>

  
      <p>Extend HyperlinkedRelatedField to include URL namespace-awareness, add 'object_type' field, and read composite-keys.</p>

            <details class="quote">
              <summary>Source code in <code>nautobot/core/api/fields.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-127">127</a></span>
<span class="normal"><a href="#__codelineno-0-128">128</a></span>
<span class="normal"><a href="#__codelineno-0-129">129</a></span>
<span class="normal"><a href="#__codelineno-0-130">130</a></span>
<span class="normal"><a href="#__codelineno-0-131">131</a></span>
<span class="normal"><a href="#__codelineno-0-132">132</a></span>
<span class="normal"><a href="#__codelineno-0-133">133</a></span>
<span class="normal"><a href="#__codelineno-0-134">134</a></span>
<span class="normal"><a href="#__codelineno-0-135">135</a></span>
<span class="normal"><a href="#__codelineno-0-136">136</a></span>
<span class="normal"><a href="#__codelineno-0-137">137</a></span>
<span class="normal"><a href="#__codelineno-0-138">138</a></span>
<span class="normal"><a href="#__codelineno-0-139">139</a></span>
<span class="normal"><a href="#__codelineno-0-140">140</a></span>
<span class="normal"><a href="#__codelineno-0-141">141</a></span>
<span class="normal"><a href="#__codelineno-0-142">142</a></span>
<span class="normal"><a href="#__codelineno-0-143">143</a></span>
<span class="normal"><a href="#__codelineno-0-144">144</a></span>
<span class="normal"><a href="#__codelineno-0-145">145</a></span>
<span class="normal"><a href="#__codelineno-0-146">146</a></span>
<span class="normal"><a href="#__codelineno-0-147">147</a></span>
<span class="normal"><a href="#__codelineno-0-148">148</a></span>
<span class="normal"><a href="#__codelineno-0-149">149</a></span>
<span class="normal"><a href="#__codelineno-0-150">150</a></span>
<span class="normal"><a href="#__codelineno-0-151">151</a></span>
<span class="normal"><a href="#__codelineno-0-152">152</a></span>
<span class="normal"><a href="#__codelineno-0-153">153</a></span>
<span class="normal"><a href="#__codelineno-0-154">154</a></span>
<span class="normal"><a href="#__codelineno-0-155">155</a></span>
<span class="normal"><a href="#__codelineno-0-156">156</a></span>
<span class="normal"><a href="#__codelineno-0-157">157</a></span>
<span class="normal"><a href="#__codelineno-0-158">158</a></span>
<span class="normal"><a href="#__codelineno-0-159">159</a></span>
<span class="normal"><a href="#__codelineno-0-160">160</a></span>
<span class="normal"><a href="#__codelineno-0-161">161</a></span>
<span class="normal"><a href="#__codelineno-0-162">162</a></span>
<span class="normal"><a href="#__codelineno-0-163">163</a></span>
<span class="normal"><a href="#__codelineno-0-164">164</a></span>
<span class="normal"><a href="#__codelineno-0-165">165</a></span>
<span class="normal"><a href="#__codelineno-0-166">166</a></span>
<span class="normal"><a href="#__codelineno-0-167">167</a></span>
<span class="normal"><a href="#__codelineno-0-168">168</a></span>
<span class="normal"><a href="#__codelineno-0-169">169</a></span>
<span class="normal"><a href="#__codelineno-0-170">170</a></span>
<span class="normal"><a href="#__codelineno-0-171">171</a></span>
<span class="normal"><a href="#__codelineno-0-172">172</a></span>
<span class="normal"><a href="#__codelineno-0-173">173</a></span>
<span class="normal"><a href="#__codelineno-0-174">174</a></span>
<span class="normal"><a href="#__codelineno-0-175">175</a></span>
<span class="normal"><a href="#__codelineno-0-176">176</a></span>
<span class="normal"><a href="#__codelineno-0-177">177</a></span>
<span class="normal"><a href="#__codelineno-0-178">178</a></span>
<span class="normal"><a href="#__codelineno-0-179">179</a></span>
<span class="normal"><a href="#__codelineno-0-180">180</a></span>
<span class="normal"><a href="#__codelineno-0-181">181</a></span>
<span class="normal"><a href="#__codelineno-0-182">182</a></span>
<span class="normal"><a href="#__codelineno-0-183">183</a></span>
<span class="normal"><a href="#__codelineno-0-184">184</a></span>
<span class="normal"><a href="#__codelineno-0-185">185</a></span>
<span class="normal"><a href="#__codelineno-0-186">186</a></span>
<span class="normal"><a href="#__codelineno-0-187">187</a></span>
<span class="normal"><a href="#__codelineno-0-188">188</a></span>
<span class="normal"><a href="#__codelineno-0-189">189</a></span>
<span class="normal"><a href="#__codelineno-0-190">190</a></span>
<span class="normal"><a href="#__codelineno-0-191">191</a></span>
<span class="normal"><a href="#__codelineno-0-192">192</a></span>
<span class="normal"><a href="#__codelineno-0-193">193</a></span>
<span class="normal"><a href="#__codelineno-0-194">194</a></span>
<span class="normal"><a href="#__codelineno-0-195">195</a></span>
<span class="normal"><a href="#__codelineno-0-196">196</a></span>
<span class="normal"><a href="#__codelineno-0-197">197</a></span>
<span class="normal"><a href="#__codelineno-0-198">198</a></span>
<span class="normal"><a href="#__codelineno-0-199">199</a></span>
<span class="normal"><a href="#__codelineno-0-200">200</a></span>
<span class="normal"><a href="#__codelineno-0-201">201</a></span>
<span class="normal"><a href="#__codelineno-0-202">202</a></span>
<span class="normal"><a href="#__codelineno-0-203">203</a></span>
<span class="normal"><a href="#__codelineno-0-204">204</a></span>
<span class="normal"><a href="#__codelineno-0-205">205</a></span>
<span class="normal"><a href="#__codelineno-0-206">206</a></span>
<span class="normal"><a href="#__codelineno-0-207">207</a></span>
<span class="normal"><a href="#__codelineno-0-208">208</a></span>
<span class="normal"><a href="#__codelineno-0-209">209</a></span>
<span class="normal"><a href="#__codelineno-0-210">210</a></span>
<span class="normal"><a href="#__codelineno-0-211">211</a></span>
<span class="normal"><a href="#__codelineno-0-212">212</a></span>
<span class="normal"><a href="#__codelineno-0-213">213</a></span>
<span class="normal"><a href="#__codelineno-0-214">214</a></span>
<span class="normal"><a href="#__codelineno-0-215">215</a></span>
<span class="normal"><a href="#__codelineno-0-216">216</a></span>
<span class="normal"><a href="#__codelineno-0-217">217</a></span>
<span class="normal"><a href="#__codelineno-0-218">218</a></span>
<span class="normal"><a href="#__codelineno-0-219">219</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-127" name="__codelineno-0-127"></a><span class="nd">@extend_schema_field</span><span class="p">(</span>
<a id="__codelineno-0-128" name="__codelineno-0-128"></a>    <span class="p">{</span>
<a id="__codelineno-0-129" name="__codelineno-0-129"></a>        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;object&quot;</span><span class="p">,</span>
<a id="__codelineno-0-130" name="__codelineno-0-130"></a>        <span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{</span>
<a id="__codelineno-0-131" name="__codelineno-0-131"></a>            <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="p">{</span>
<a id="__codelineno-0-132" name="__codelineno-0-132"></a>                <span class="s2">&quot;oneOf&quot;</span><span class="p">:</span> <span class="p">[</span>
<a id="__codelineno-0-133" name="__codelineno-0-133"></a>                    <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span> <span class="s2">&quot;format&quot;</span><span class="p">:</span> <span class="s2">&quot;uuid&quot;</span><span class="p">},</span>
<a id="__codelineno-0-134" name="__codelineno-0-134"></a>                    <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;integer&quot;</span><span class="p">},</span>
<a id="__codelineno-0-135" name="__codelineno-0-135"></a>                <span class="p">]</span>
<a id="__codelineno-0-136" name="__codelineno-0-136"></a>            <span class="p">},</span>
<a id="__codelineno-0-137" name="__codelineno-0-137"></a>            <span class="s2">&quot;object_type&quot;</span><span class="p">:</span> <span class="p">{</span>
<a id="__codelineno-0-138" name="__codelineno-0-138"></a>                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span>
<a id="__codelineno-0-139" name="__codelineno-0-139"></a>                <span class="s2">&quot;pattern&quot;</span><span class="p">:</span> <span class="s2">&quot;^[a-z][a-z0-9_]+</span><span class="se">\\</span><span class="s2">.[a-z][a-z0-9_]+$&quot;</span><span class="p">,</span>
<a id="__codelineno-0-140" name="__codelineno-0-140"></a>                <span class="s2">&quot;example&quot;</span><span class="p">:</span> <span class="s2">&quot;app_label.modelname&quot;</span><span class="p">,</span>
<a id="__codelineno-0-141" name="__codelineno-0-141"></a>            <span class="p">},</span>
<a id="__codelineno-0-142" name="__codelineno-0-142"></a>            <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="p">{</span>
<a id="__codelineno-0-143" name="__codelineno-0-143"></a>                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span>
<a id="__codelineno-0-144" name="__codelineno-0-144"></a>                <span class="s2">&quot;format&quot;</span><span class="p">:</span> <span class="s2">&quot;uri&quot;</span><span class="p">,</span>
<a id="__codelineno-0-145" name="__codelineno-0-145"></a>            <span class="p">},</span>
<a id="__codelineno-0-146" name="__codelineno-0-146"></a>        <span class="p">},</span>
<a id="__codelineno-0-147" name="__codelineno-0-147"></a>    <span class="p">}</span>
<a id="__codelineno-0-148" name="__codelineno-0-148"></a><span class="p">)</span>
<a id="__codelineno-0-149" name="__codelineno-0-149"></a><span class="k">class</span> <span class="nc">NautobotHyperlinkedRelatedField</span><span class="p">(</span><span class="n">WritableSerializerMixin</span><span class="p">,</span> <span class="n">serializers</span><span class="o">.</span><span class="n">HyperlinkedRelatedField</span><span class="p">):</span>
<a id="__codelineno-0-150" name="__codelineno-0-150"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-151" name="__codelineno-0-151"></a><span class="sd">    Extend HyperlinkedRelatedField to include URL namespace-awareness, add &#39;object_type&#39; field, and read composite-keys.</span>
<a id="__codelineno-0-152" name="__codelineno-0-152"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-153" name="__codelineno-0-153"></a>
<a id="__codelineno-0-154" name="__codelineno-0-154"></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<a id="__codelineno-0-155" name="__codelineno-0-155"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Override DRF&#39;s namespace-unaware default view_name logic for HyperlinkedRelatedField.</span>
<a id="__codelineno-0-156" name="__codelineno-0-156"></a>
<a id="__codelineno-0-157" name="__codelineno-0-157"></a><span class="sd">        DRF defaults to &#39;{model_name}-detail&#39; instead of &#39;{app_label}:{model_name}-detail&#39;.</span>
<a id="__codelineno-0-158" name="__codelineno-0-158"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-159" name="__codelineno-0-159"></a>        <span class="k">if</span> <span class="s2">&quot;view_name&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span> <span class="ow">or</span> <span class="p">(</span><span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;view_name&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;-detail&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="s2">&quot;:&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;view_name&quot;</span><span class="p">]):</span>
<a id="__codelineno-0-160" name="__codelineno-0-160"></a>            <span class="k">if</span> <span class="s2">&quot;queryset&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
<a id="__codelineno-0-161" name="__codelineno-0-161"></a>                <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
<a id="__codelineno-0-162" name="__codelineno-0-162"></a>                    <span class="s1">&#39;&quot;view_name=</span><span class="si">%r</span><span class="s1">&quot; is probably incorrect for this related API field; &#39;</span>
<a id="__codelineno-0-163" name="__codelineno-0-163"></a>                    <span class="s1">&#39;unable to determine the correct &quot;view_name&quot; as &quot;queryset&quot; wasn</span><span class="se">\&#39;</span><span class="s1">t specified&#39;</span><span class="p">,</span>
<a id="__codelineno-0-164" name="__codelineno-0-164"></a>                    <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;view_name&quot;</span><span class="p">],</span>
<a id="__codelineno-0-165" name="__codelineno-0-165"></a>                <span class="p">)</span>
<a id="__codelineno-0-166" name="__codelineno-0-166"></a>            <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-167" name="__codelineno-0-167"></a>                <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;view_name&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">get_route_for_model</span><span class="p">(</span><span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;queryset&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">model</span><span class="p">,</span> <span class="s2">&quot;detail&quot;</span><span class="p">,</span> <span class="n">api</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-0-168" name="__codelineno-0-168"></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
<a id="__codelineno-0-169" name="__codelineno-0-169"></a>
<a id="__codelineno-0-170" name="__codelineno-0-170"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-171" name="__codelineno-0-171"></a>    <span class="k">def</span> <span class="nf">_related_model</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-172" name="__codelineno-0-172"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;The model class that this field is referencing to.&quot;&quot;&quot;</span>
<a id="__codelineno-0-173" name="__codelineno-0-173"></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">queryset</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-174" name="__codelineno-0-174"></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">queryset</span><span class="o">.</span><span class="n">model</span>
<a id="__codelineno-0-175" name="__codelineno-0-175"></a>        <span class="c1"># Foreign key where the destination is referenced by string rather than by Python class</span>
<a id="__codelineno-0-176" name="__codelineno-0-176"></a>        <span class="k">if</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">Meta</span><span class="o">.</span><span class="n">model</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">source</span><span class="p">,</span> <span class="kc">False</span><span class="p">):</span>
<a id="__codelineno-0-177" name="__codelineno-0-177"></a>            <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">Meta</span><span class="o">.</span><span class="n">model</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">source</span><span class="p">)</span><span class="o">.</span><span class="n">field</span><span class="o">.</span><span class="n">model</span>
<a id="__codelineno-0-178" name="__codelineno-0-178"></a>
<a id="__codelineno-0-179" name="__codelineno-0-179"></a>        <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
<a id="__codelineno-0-180" name="__codelineno-0-180"></a>            <span class="s2">&quot;Unable to determine model for related field </span><span class="si">%r</span><span class="s2">; &quot;</span>
<a id="__codelineno-0-181" name="__codelineno-0-181"></a>            <span class="s2">&quot;ensure that either the field defines a &#39;queryset&#39; or the Meta defines the related &#39;model&#39;.&quot;</span><span class="p">,</span>
<a id="__codelineno-0-182" name="__codelineno-0-182"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">field_name</span><span class="p">,</span>
<a id="__codelineno-0-183" name="__codelineno-0-183"></a>        <span class="p">)</span>
<a id="__codelineno-0-184" name="__codelineno-0-184"></a>        <span class="k">return</span> <span class="kc">None</span>
<a id="__codelineno-0-185" name="__codelineno-0-185"></a>
<a id="__codelineno-0-186" name="__codelineno-0-186"></a>    <span class="k">def</span> <span class="nf">to_internal_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
<a id="__codelineno-0-187" name="__codelineno-0-187"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Convert potentially nested representation to a model instance.&quot;&quot;&quot;</span>
<a id="__codelineno-0-188" name="__codelineno-0-188"></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
<a id="__codelineno-0-189" name="__codelineno-0-189"></a>            <span class="k">if</span> <span class="s2">&quot;url&quot;</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
<a id="__codelineno-0-190" name="__codelineno-0-190"></a>                <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">to_internal_value</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;url&quot;</span><span class="p">])</span>
<a id="__codelineno-0-191" name="__codelineno-0-191"></a>            <span class="k">elif</span> <span class="s2">&quot;id&quot;</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
<a id="__codelineno-0-192" name="__codelineno-0-192"></a>                <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">to_internal_value</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">])</span>
<a id="__codelineno-0-193" name="__codelineno-0-193"></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">is_uuid</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">is_url</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
<a id="__codelineno-0-194" name="__codelineno-0-194"></a>            <span class="c1"># Maybe it&#39;s a composite-key?</span>
<a id="__codelineno-0-195" name="__codelineno-0-195"></a>            <span class="n">related_model</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_related_model</span>
<a id="__codelineno-0-196" name="__codelineno-0-196"></a>            <span class="k">if</span> <span class="n">related_model</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">related_model</span><span class="p">,</span> <span class="s2">&quot;natural_key_args_to_kwargs&quot;</span><span class="p">):</span>
<a id="__codelineno-0-197" name="__codelineno-0-197"></a>                <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-0-198" name="__codelineno-0-198"></a>                    <span class="n">data</span> <span class="o">=</span> <span class="n">related_model</span><span class="o">.</span><span class="n">natural_key_args_to_kwargs</span><span class="p">(</span><span class="n">deconstruct_composite_key</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
<a id="__codelineno-0-199" name="__codelineno-0-199"></a>                <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
<a id="__codelineno-0-200" name="__codelineno-0-200"></a>                    <span class="c1"># Not a correctly constructed composite key?</span>
<a id="__codelineno-0-201" name="__codelineno-0-201"></a>                    <span class="k">raise</span> <span class="n">ValidationError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Related object not found using provided composite-key: </span><span class="si">{</span><span class="n">data</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span> <span class="kn">from</span> <span class="nn">err</span>
<a id="__codelineno-0-202" name="__codelineno-0-202"></a>            <span class="k">elif</span> <span class="n">related_model</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">related_model</span><span class="o">.</span><span class="n">label_lower</span> <span class="o">==</span> <span class="s2">&quot;auth.group&quot;</span><span class="p">:</span>
<a id="__codelineno-0-203" name="__codelineno-0-203"></a>                <span class="c1"># auth.Group is a base Django model and so doesn&#39;t implement our natural_key_args_to_kwargs() method</span>
<a id="__codelineno-0-204" name="__codelineno-0-204"></a>                <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">deconstruct_composite_key</span><span class="p">(</span><span class="n">data</span><span class="p">)}</span>
<a id="__codelineno-0-205" name="__codelineno-0-205"></a>        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">to_internal_value</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<a id="__codelineno-0-206" name="__codelineno-0-206"></a>
<a id="__codelineno-0-207" name="__codelineno-0-207"></a>    <span class="k">def</span> <span class="nf">to_representation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
<a id="__codelineno-0-208" name="__codelineno-0-208"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Convert URL representation to a brief nested representation.&quot;&quot;&quot;</span>
<a id="__codelineno-0-209" name="__codelineno-0-209"></a>        <span class="n">url</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">to_representation</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
<a id="__codelineno-0-210" name="__codelineno-0-210"></a>
<a id="__codelineno-0-211" name="__codelineno-0-211"></a>        <span class="c1"># nested serializer provides an instance</span>
<a id="__codelineno-0-212" name="__codelineno-0-212"></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">Model</span><span class="p">):</span>
<a id="__codelineno-0-213" name="__codelineno-0-213"></a>            <span class="n">model</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
<a id="__codelineno-0-214" name="__codelineno-0-214"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-215" name="__codelineno-0-215"></a>            <span class="n">model</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_related_model</span>
<a id="__codelineno-0-216" name="__codelineno-0-216"></a>
<a id="__codelineno-0-217" name="__codelineno-0-217"></a>        <span class="k">if</span> <span class="n">model</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-218" name="__codelineno-0-218"></a>            <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="n">value</span><span class="o">.</span><span class="n">pk</span><span class="p">,</span> <span class="s2">&quot;object_type&quot;</span><span class="p">:</span> <span class="s2">&quot;unknown.unknown&quot;</span><span class="p">,</span> <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="n">url</span><span class="p">}</span>
<a id="__codelineno-0-219" name="__codelineno-0-219"></a>        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="n">value</span><span class="o">.</span><span class="n">pk</span><span class="p">,</span> <span class="s2">&quot;object_type&quot;</span><span class="p">:</span> <span class="n">model</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">label_lower</span><span class="p">,</span> <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="n">url</span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">










<div class="doc doc-object doc-function">



<h3 id="nautobot.core.api.fields.NautobotHyperlinkedRelatedField.__init__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

<a href="#nautobot.core.api.fields.NautobotHyperlinkedRelatedField.__init__" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Override DRF's namespace-unaware default view_name logic for HyperlinkedRelatedField.</p>
<p>DRF defaults to '{model_name}-detail' instead of '{app_label}:{model_name}-detail'.</p>

          <details class="quote">
            <summary>Source code in <code>nautobot/core/api/fields.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-154">154</a></span>
<span class="normal"><a href="#__codelineno-0-155">155</a></span>
<span class="normal"><a href="#__codelineno-0-156">156</a></span>
<span class="normal"><a href="#__codelineno-0-157">157</a></span>
<span class="normal"><a href="#__codelineno-0-158">158</a></span>
<span class="normal"><a href="#__codelineno-0-159">159</a></span>
<span class="normal"><a href="#__codelineno-0-160">160</a></span>
<span class="normal"><a href="#__codelineno-0-161">161</a></span>
<span class="normal"><a href="#__codelineno-0-162">162</a></span>
<span class="normal"><a href="#__codelineno-0-163">163</a></span>
<span class="normal"><a href="#__codelineno-0-164">164</a></span>
<span class="normal"><a href="#__codelineno-0-165">165</a></span>
<span class="normal"><a href="#__codelineno-0-166">166</a></span>
<span class="normal"><a href="#__codelineno-0-167">167</a></span>
<span class="normal"><a href="#__codelineno-0-168">168</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-154" name="__codelineno-0-154"></a><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<a id="__codelineno-0-155" name="__codelineno-0-155"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Override DRF&#39;s namespace-unaware default view_name logic for HyperlinkedRelatedField.</span>
<a id="__codelineno-0-156" name="__codelineno-0-156"></a>
<a id="__codelineno-0-157" name="__codelineno-0-157"></a><span class="sd">    DRF defaults to &#39;{model_name}-detail&#39; instead of &#39;{app_label}:{model_name}-detail&#39;.</span>
<a id="__codelineno-0-158" name="__codelineno-0-158"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-159" name="__codelineno-0-159"></a>    <span class="k">if</span> <span class="s2">&quot;view_name&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span> <span class="ow">or</span> <span class="p">(</span><span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;view_name&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;-detail&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="s2">&quot;:&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;view_name&quot;</span><span class="p">]):</span>
<a id="__codelineno-0-160" name="__codelineno-0-160"></a>        <span class="k">if</span> <span class="s2">&quot;queryset&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
<a id="__codelineno-0-161" name="__codelineno-0-161"></a>            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
<a id="__codelineno-0-162" name="__codelineno-0-162"></a>                <span class="s1">&#39;&quot;view_name=</span><span class="si">%r</span><span class="s1">&quot; is probably incorrect for this related API field; &#39;</span>
<a id="__codelineno-0-163" name="__codelineno-0-163"></a>                <span class="s1">&#39;unable to determine the correct &quot;view_name&quot; as &quot;queryset&quot; wasn</span><span class="se">\&#39;</span><span class="s1">t specified&#39;</span><span class="p">,</span>
<a id="__codelineno-0-164" name="__codelineno-0-164"></a>                <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;view_name&quot;</span><span class="p">],</span>
<a id="__codelineno-0-165" name="__codelineno-0-165"></a>            <span class="p">)</span>
<a id="__codelineno-0-166" name="__codelineno-0-166"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-167" name="__codelineno-0-167"></a>            <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;view_name&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">get_route_for_model</span><span class="p">(</span><span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;queryset&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">model</span><span class="p">,</span> <span class="s2">&quot;detail&quot;</span><span class="p">,</span> <span class="n">api</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-0-168" name="__codelineno-0-168"></a>    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h3 id="nautobot.core.api.fields.NautobotHyperlinkedRelatedField.to_internal_value" class="doc doc-heading">
<code class="highlight language-python"><span class="n">to_internal_value</span><span class="p">(</span><span class="n">data</span><span class="p">)</span></code>

<a href="#nautobot.core.api.fields.NautobotHyperlinkedRelatedField.to_internal_value" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Convert potentially nested representation to a model instance.</p>

          <details class="quote">
            <summary>Source code in <code>nautobot/core/api/fields.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-186">186</a></span>
<span class="normal"><a href="#__codelineno-0-187">187</a></span>
<span class="normal"><a href="#__codelineno-0-188">188</a></span>
<span class="normal"><a href="#__codelineno-0-189">189</a></span>
<span class="normal"><a href="#__codelineno-0-190">190</a></span>
<span class="normal"><a href="#__codelineno-0-191">191</a></span>
<span class="normal"><a href="#__codelineno-0-192">192</a></span>
<span class="normal"><a href="#__codelineno-0-193">193</a></span>
<span class="normal"><a href="#__codelineno-0-194">194</a></span>
<span class="normal"><a href="#__codelineno-0-195">195</a></span>
<span class="normal"><a href="#__codelineno-0-196">196</a></span>
<span class="normal"><a href="#__codelineno-0-197">197</a></span>
<span class="normal"><a href="#__codelineno-0-198">198</a></span>
<span class="normal"><a href="#__codelineno-0-199">199</a></span>
<span class="normal"><a href="#__codelineno-0-200">200</a></span>
<span class="normal"><a href="#__codelineno-0-201">201</a></span>
<span class="normal"><a href="#__codelineno-0-202">202</a></span>
<span class="normal"><a href="#__codelineno-0-203">203</a></span>
<span class="normal"><a href="#__codelineno-0-204">204</a></span>
<span class="normal"><a href="#__codelineno-0-205">205</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-186" name="__codelineno-0-186"></a><span class="k">def</span> <span class="nf">to_internal_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
<a id="__codelineno-0-187" name="__codelineno-0-187"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Convert potentially nested representation to a model instance.&quot;&quot;&quot;</span>
<a id="__codelineno-0-188" name="__codelineno-0-188"></a>    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
<a id="__codelineno-0-189" name="__codelineno-0-189"></a>        <span class="k">if</span> <span class="s2">&quot;url&quot;</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
<a id="__codelineno-0-190" name="__codelineno-0-190"></a>            <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">to_internal_value</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;url&quot;</span><span class="p">])</span>
<a id="__codelineno-0-191" name="__codelineno-0-191"></a>        <span class="k">elif</span> <span class="s2">&quot;id&quot;</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
<a id="__codelineno-0-192" name="__codelineno-0-192"></a>            <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">to_internal_value</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">])</span>
<a id="__codelineno-0-193" name="__codelineno-0-193"></a>    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">is_uuid</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">is_url</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
<a id="__codelineno-0-194" name="__codelineno-0-194"></a>        <span class="c1"># Maybe it&#39;s a composite-key?</span>
<a id="__codelineno-0-195" name="__codelineno-0-195"></a>        <span class="n">related_model</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_related_model</span>
<a id="__codelineno-0-196" name="__codelineno-0-196"></a>        <span class="k">if</span> <span class="n">related_model</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">related_model</span><span class="p">,</span> <span class="s2">&quot;natural_key_args_to_kwargs&quot;</span><span class="p">):</span>
<a id="__codelineno-0-197" name="__codelineno-0-197"></a>            <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-0-198" name="__codelineno-0-198"></a>                <span class="n">data</span> <span class="o">=</span> <span class="n">related_model</span><span class="o">.</span><span class="n">natural_key_args_to_kwargs</span><span class="p">(</span><span class="n">deconstruct_composite_key</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
<a id="__codelineno-0-199" name="__codelineno-0-199"></a>            <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
<a id="__codelineno-0-200" name="__codelineno-0-200"></a>                <span class="c1"># Not a correctly constructed composite key?</span>
<a id="__codelineno-0-201" name="__codelineno-0-201"></a>                <span class="k">raise</span> <span class="n">ValidationError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Related object not found using provided composite-key: </span><span class="si">{</span><span class="n">data</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span> <span class="kn">from</span> <span class="nn">err</span>
<a id="__codelineno-0-202" name="__codelineno-0-202"></a>        <span class="k">elif</span> <span class="n">related_model</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">related_model</span><span class="o">.</span><span class="n">label_lower</span> <span class="o">==</span> <span class="s2">&quot;auth.group&quot;</span><span class="p">:</span>
<a id="__codelineno-0-203" name="__codelineno-0-203"></a>            <span class="c1"># auth.Group is a base Django model and so doesn&#39;t implement our natural_key_args_to_kwargs() method</span>
<a id="__codelineno-0-204" name="__codelineno-0-204"></a>            <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">deconstruct_composite_key</span><span class="p">(</span><span class="n">data</span><span class="p">)}</span>
<a id="__codelineno-0-205" name="__codelineno-0-205"></a>    <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">to_internal_value</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h3 id="nautobot.core.api.fields.NautobotHyperlinkedRelatedField.to_representation" class="doc doc-heading">
<code class="highlight language-python"><span class="n">to_representation</span><span class="p">(</span><span class="n">value</span><span class="p">)</span></code>

<a href="#nautobot.core.api.fields.NautobotHyperlinkedRelatedField.to_representation" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Convert URL representation to a brief nested representation.</p>

          <details class="quote">
            <summary>Source code in <code>nautobot/core/api/fields.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-207">207</a></span>
<span class="normal"><a href="#__codelineno-0-208">208</a></span>
<span class="normal"><a href="#__codelineno-0-209">209</a></span>
<span class="normal"><a href="#__codelineno-0-210">210</a></span>
<span class="normal"><a href="#__codelineno-0-211">211</a></span>
<span class="normal"><a href="#__codelineno-0-212">212</a></span>
<span class="normal"><a href="#__codelineno-0-213">213</a></span>
<span class="normal"><a href="#__codelineno-0-214">214</a></span>
<span class="normal"><a href="#__codelineno-0-215">215</a></span>
<span class="normal"><a href="#__codelineno-0-216">216</a></span>
<span class="normal"><a href="#__codelineno-0-217">217</a></span>
<span class="normal"><a href="#__codelineno-0-218">218</a></span>
<span class="normal"><a href="#__codelineno-0-219">219</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-207" name="__codelineno-0-207"></a><span class="k">def</span> <span class="nf">to_representation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
<a id="__codelineno-0-208" name="__codelineno-0-208"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Convert URL representation to a brief nested representation.&quot;&quot;&quot;</span>
<a id="__codelineno-0-209" name="__codelineno-0-209"></a>    <span class="n">url</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">to_representation</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
<a id="__codelineno-0-210" name="__codelineno-0-210"></a>
<a id="__codelineno-0-211" name="__codelineno-0-211"></a>    <span class="c1"># nested serializer provides an instance</span>
<a id="__codelineno-0-212" name="__codelineno-0-212"></a>    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">Model</span><span class="p">):</span>
<a id="__codelineno-0-213" name="__codelineno-0-213"></a>        <span class="n">model</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
<a id="__codelineno-0-214" name="__codelineno-0-214"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-215" name="__codelineno-0-215"></a>        <span class="n">model</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_related_model</span>
<a id="__codelineno-0-216" name="__codelineno-0-216"></a>
<a id="__codelineno-0-217" name="__codelineno-0-217"></a>    <span class="k">if</span> <span class="n">model</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-218" name="__codelineno-0-218"></a>        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="n">value</span><span class="o">.</span><span class="n">pk</span><span class="p">,</span> <span class="s2">&quot;object_type&quot;</span><span class="p">:</span> <span class="s2">&quot;unknown.unknown&quot;</span><span class="p">,</span> <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="n">url</span><span class="p">}</span>
<a id="__codelineno-0-219" name="__codelineno-0-219"></a>    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="n">value</span><span class="o">.</span><span class="n">pk</span><span class="p">,</span> <span class="s2">&quot;object_type&quot;</span><span class="p">:</span> <span class="n">model</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">label_lower</span><span class="p">,</span> <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="n">url</span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="nautobot.apps.api.NautobotModelSerializer" class="doc doc-heading">
          <code>nautobot.apps.api.NautobotModelSerializer</code>


<a href="#nautobot.apps.api.NautobotModelSerializer" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code><a class="autorefs autorefs-internal" title="nautobot.core.api.serializers.RelationshipModelSerializerMixin" href="#nautobot.apps.api.RelationshipModelSerializerMixin">RelationshipModelSerializerMixin</a></code>, <code><a class="autorefs autorefs-internal" title="nautobot.core.api.serializers.CustomFieldModelSerializerMixin" href="#nautobot.apps.api.CustomFieldModelSerializerMixin">CustomFieldModelSerializerMixin</a></code>, <code><a class="autorefs autorefs-internal" title="nautobot.core.api.serializers.NotesSerializerMixin" href="#nautobot.apps.api.NotesSerializerMixin">NotesSerializerMixin</a></code>, <code><a class="autorefs autorefs-internal" title="nautobot.core.api.serializers.ValidatedModelSerializer" href="#nautobot.apps.api.ValidatedModelSerializer">ValidatedModelSerializer</a></code></p>

  
      <p>Base class to use for serializers based on OrganizationalModel or PrimaryModel.</p>
<p>Can also be used for models derived from BaseModel, so long as they support custom fields, notes, and relationships.</p>

            <details class="quote">
              <summary>Source code in <code>nautobot/core/api/serializers.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-1081">1081</a></span>
<span class="normal"><a href="#__codelineno-0-1082">1082</a></span>
<span class="normal"><a href="#__codelineno-0-1083">1083</a></span>
<span class="normal"><a href="#__codelineno-0-1084">1084</a></span>
<span class="normal"><a href="#__codelineno-0-1085">1085</a></span>
<span class="normal"><a href="#__codelineno-0-1086">1086</a></span>
<span class="normal"><a href="#__codelineno-0-1087">1087</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-1081" name="__codelineno-0-1081"></a><span class="k">class</span> <span class="nc">NautobotModelSerializer</span><span class="p">(</span>
<a id="__codelineno-0-1082" name="__codelineno-0-1082"></a>    <span class="n">RelationshipModelSerializerMixin</span><span class="p">,</span> <span class="n">CustomFieldModelSerializerMixin</span><span class="p">,</span> <span class="n">NotesSerializerMixin</span><span class="p">,</span> <span class="n">ValidatedModelSerializer</span>
<a id="__codelineno-0-1083" name="__codelineno-0-1083"></a><span class="p">):</span>
<a id="__codelineno-0-1084" name="__codelineno-0-1084"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Base class to use for serializers based on OrganizationalModel or PrimaryModel.</span>
<a id="__codelineno-0-1085" name="__codelineno-0-1085"></a>
<a id="__codelineno-0-1086" name="__codelineno-0-1086"></a><span class="sd">    Can also be used for models derived from BaseModel, so long as they support custom fields, notes, and relationships.</span>
<a id="__codelineno-0-1087" name="__codelineno-0-1087"></a><span class="sd">    &quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
            </details>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="nautobot.apps.api.NautobotModelViewSet" class="doc doc-heading">
          <code>nautobot.apps.api.NautobotModelViewSet</code>


<a href="#nautobot.apps.api.NautobotModelViewSet" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code><a class="autorefs autorefs-internal" title="nautobot.extras.api.views.NotesViewSetMixin" href="#nautobot.apps.api.NotesViewSetMixin">NotesViewSetMixin</a></code>, <code><a class="autorefs autorefs-internal" title="nautobot.extras.api.views.CustomFieldModelViewSet" href="#nautobot.apps.api.CustomFieldModelViewSet">CustomFieldModelViewSet</a></code></p>

  
      <p>Base class to use for API ViewSets based on OrganizationalModel or PrimaryModel.</p>
<p>Can also be used for models derived from BaseModel, so long as they support Notes.</p>

            <details class="quote">
              <summary>Source code in <code>nautobot/extras/api/views.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-251">251</a></span>
<span class="normal"><a href="#__codelineno-0-252">252</a></span>
<span class="normal"><a href="#__codelineno-0-253">253</a></span>
<span class="normal"><a href="#__codelineno-0-254">254</a></span>
<span class="normal"><a href="#__codelineno-0-255">255</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-251" name="__codelineno-0-251"></a><span class="k">class</span> <span class="nc">NautobotModelViewSet</span><span class="p">(</span><span class="n">NotesViewSetMixin</span><span class="p">,</span> <span class="n">CustomFieldModelViewSet</span><span class="p">):</span>
<a id="__codelineno-0-252" name="__codelineno-0-252"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Base class to use for API ViewSets based on OrganizationalModel or PrimaryModel.</span>
<a id="__codelineno-0-253" name="__codelineno-0-253"></a>
<a id="__codelineno-0-254" name="__codelineno-0-254"></a><span class="sd">    Can also be used for models derived from BaseModel, so long as they support Notes.</span>
<a id="__codelineno-0-255" name="__codelineno-0-255"></a><span class="sd">    &quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
            </details>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="nautobot.apps.api.NotesSerializerMixin" class="doc doc-heading">
          <code>nautobot.apps.api.NotesSerializerMixin</code>


<a href="#nautobot.apps.api.NotesSerializerMixin" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code><a class="autorefs autorefs-internal" title="nautobot.core.api.serializers.BaseModelSerializer" href="#nautobot.apps.api.BaseModelSerializer">BaseModelSerializer</a></code></p>

  
      <p>Extend Serializer with a <code>notes</code> field.</p>

            <details class="quote">
              <summary>Source code in <code>nautobot/core/api/serializers.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-1048">1048</a></span>
<span class="normal"><a href="#__codelineno-0-1049">1049</a></span>
<span class="normal"><a href="#__codelineno-0-1050">1050</a></span>
<span class="normal"><a href="#__codelineno-0-1051">1051</a></span>
<span class="normal"><a href="#__codelineno-0-1052">1052</a></span>
<span class="normal"><a href="#__codelineno-0-1053">1053</a></span>
<span class="normal"><a href="#__codelineno-0-1054">1054</a></span>
<span class="normal"><a href="#__codelineno-0-1055">1055</a></span>
<span class="normal"><a href="#__codelineno-0-1056">1056</a></span>
<span class="normal"><a href="#__codelineno-0-1057">1057</a></span>
<span class="normal"><a href="#__codelineno-0-1058">1058</a></span>
<span class="normal"><a href="#__codelineno-0-1059">1059</a></span>
<span class="normal"><a href="#__codelineno-0-1060">1060</a></span>
<span class="normal"><a href="#__codelineno-0-1061">1061</a></span>
<span class="normal"><a href="#__codelineno-0-1062">1062</a></span>
<span class="normal"><a href="#__codelineno-0-1063">1063</a></span>
<span class="normal"><a href="#__codelineno-0-1064">1064</a></span>
<span class="normal"><a href="#__codelineno-0-1065">1065</a></span>
<span class="normal"><a href="#__codelineno-0-1066">1066</a></span>
<span class="normal"><a href="#__codelineno-0-1067">1067</a></span>
<span class="normal"><a href="#__codelineno-0-1068">1068</a></span>
<span class="normal"><a href="#__codelineno-0-1069">1069</a></span>
<span class="normal"><a href="#__codelineno-0-1070">1070</a></span>
<span class="normal"><a href="#__codelineno-0-1071">1071</a></span>
<span class="normal"><a href="#__codelineno-0-1072">1072</a></span>
<span class="normal"><a href="#__codelineno-0-1073">1073</a></span>
<span class="normal"><a href="#__codelineno-0-1074">1074</a></span>
<span class="normal"><a href="#__codelineno-0-1075">1075</a></span>
<span class="normal"><a href="#__codelineno-0-1076">1076</a></span>
<span class="normal"><a href="#__codelineno-0-1077">1077</a></span>
<span class="normal"><a href="#__codelineno-0-1078">1078</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-1048" name="__codelineno-0-1048"></a><span class="k">class</span> <span class="nc">NotesSerializerMixin</span><span class="p">(</span><span class="n">BaseModelSerializer</span><span class="p">):</span>
<a id="__codelineno-0-1049" name="__codelineno-0-1049"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Extend Serializer with a `notes` field.&quot;&quot;&quot;</span>
<a id="__codelineno-0-1050" name="__codelineno-0-1050"></a>
<a id="__codelineno-0-1051" name="__codelineno-0-1051"></a>    <span class="n">notes_url</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">SerializerMethodField</span><span class="p">()</span>
<a id="__codelineno-0-1052" name="__codelineno-0-1052"></a>
<a id="__codelineno-0-1053" name="__codelineno-0-1053"></a>    <span class="k">def</span> <span class="nf">get_field_names</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">declared_fields</span><span class="p">,</span> <span class="n">info</span><span class="p">):</span>
<a id="__codelineno-0-1054" name="__codelineno-0-1054"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Ensure that fields includes &quot;notes_url&quot; field if applicable.&quot;&quot;&quot;</span>
<a id="__codelineno-0-1055" name="__codelineno-0-1055"></a>        <span class="n">fields</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">get_field_names</span><span class="p">(</span><span class="n">declared_fields</span><span class="p">,</span> <span class="n">info</span><span class="p">))</span>
<a id="__codelineno-0-1056" name="__codelineno-0-1056"></a>        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Meta</span><span class="o">.</span><span class="n">model</span><span class="p">,</span> <span class="s2">&quot;notes&quot;</span><span class="p">):</span>
<a id="__codelineno-0-1057" name="__codelineno-0-1057"></a>            <span class="c1"># Make sure the field is at the end of fields, instead of the beginning</span>
<a id="__codelineno-0-1058" name="__codelineno-0-1058"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">extend_field_names</span><span class="p">(</span><span class="n">fields</span><span class="p">,</span> <span class="s2">&quot;notes_url&quot;</span><span class="p">)</span>
<a id="__codelineno-0-1059" name="__codelineno-0-1059"></a>        <span class="k">return</span> <span class="n">fields</span>
<a id="__codelineno-0-1060" name="__codelineno-0-1060"></a>
<a id="__codelineno-0-1061" name="__codelineno-0-1061"></a>    <span class="nd">@extend_schema_field</span><span class="p">(</span><span class="n">serializers</span><span class="o">.</span><span class="n">URLField</span><span class="p">())</span>
<a id="__codelineno-0-1062" name="__codelineno-0-1062"></a>    <span class="k">def</span> <span class="nf">get_notes_url</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">instance</span><span class="p">):</span>
<a id="__codelineno-0-1063" name="__codelineno-0-1063"></a>        <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-0-1064" name="__codelineno-0-1064"></a>            <span class="n">notes_url</span> <span class="o">=</span> <span class="n">get_route_for_model</span><span class="p">(</span><span class="n">instance</span><span class="p">,</span> <span class="s2">&quot;notes&quot;</span><span class="p">,</span> <span class="n">api</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-0-1065" name="__codelineno-0-1065"></a>            <span class="k">return</span> <span class="n">reverse</span><span class="p">(</span><span class="n">notes_url</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">[</span><span class="n">instance</span><span class="o">.</span><span class="n">id</span><span class="p">],</span> <span class="n">request</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">context</span><span class="p">[</span><span class="s2">&quot;request&quot;</span><span class="p">])</span>
<a id="__codelineno-0-1066" name="__codelineno-0-1066"></a>        <span class="k">except</span> <span class="n">NoReverseMatch</span><span class="p">:</span>
<a id="__codelineno-0-1067" name="__codelineno-0-1067"></a>            <span class="n">model_name</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="n">instance</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span>
<a id="__codelineno-0-1068" name="__codelineno-0-1068"></a>            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
<a id="__codelineno-0-1069" name="__codelineno-0-1069"></a>                <span class="p">(</span>
<a id="__codelineno-0-1070" name="__codelineno-0-1070"></a>                    <span class="sa">f</span><span class="s2">&quot;Notes feature is not available for model </span><span class="si">{</span><span class="n">model_name</span><span class="si">}</span><span class="s2">. &quot;</span>
<a id="__codelineno-0-1071" name="__codelineno-0-1071"></a>                    <span class="s2">&quot;Please make sure to: &quot;</span>
<a id="__codelineno-0-1072" name="__codelineno-0-1072"></a>                    <span class="sa">f</span><span class="s2">&quot;1. Include NotesMixin from nautobot.extras.model.mixins in the </span><span class="si">{</span><span class="n">model_name</span><span class="si">}</span><span class="s2"> class definition &quot;</span>
<a id="__codelineno-0-1073" name="__codelineno-0-1073"></a>                    <span class="sa">f</span><span class="s2">&quot;2. Include NotesViewSetMixin from nautobot.extras.api.views in the </span><span class="si">{</span><span class="n">model_name</span><span class="si">}</span><span class="s2">ViewSet &quot;</span>
<a id="__codelineno-0-1074" name="__codelineno-0-1074"></a>                    <span class="s2">&quot;before including NotesSerializerMixin in the model serializer&quot;</span>
<a id="__codelineno-0-1075" name="__codelineno-0-1075"></a>                <span class="p">)</span>
<a id="__codelineno-0-1076" name="__codelineno-0-1076"></a>            <span class="p">)</span>
<a id="__codelineno-0-1077" name="__codelineno-0-1077"></a>
<a id="__codelineno-0-1078" name="__codelineno-0-1078"></a>            <span class="k">return</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">










<div class="doc doc-object doc-function">



<h3 id="nautobot.core.api.serializers.NotesSerializerMixin.get_field_names" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_field_names</span><span class="p">(</span><span class="n">declared_fields</span><span class="p">,</span> <span class="n">info</span><span class="p">)</span></code>

<a href="#nautobot.core.api.serializers.NotesSerializerMixin.get_field_names" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Ensure that fields includes "notes_url" field if applicable.</p>

          <details class="quote">
            <summary>Source code in <code>nautobot/core/api/serializers.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-1053">1053</a></span>
<span class="normal"><a href="#__codelineno-0-1054">1054</a></span>
<span class="normal"><a href="#__codelineno-0-1055">1055</a></span>
<span class="normal"><a href="#__codelineno-0-1056">1056</a></span>
<span class="normal"><a href="#__codelineno-0-1057">1057</a></span>
<span class="normal"><a href="#__codelineno-0-1058">1058</a></span>
<span class="normal"><a href="#__codelineno-0-1059">1059</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-1053" name="__codelineno-0-1053"></a><span class="k">def</span> <span class="nf">get_field_names</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">declared_fields</span><span class="p">,</span> <span class="n">info</span><span class="p">):</span>
<a id="__codelineno-0-1054" name="__codelineno-0-1054"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Ensure that fields includes &quot;notes_url&quot; field if applicable.&quot;&quot;&quot;</span>
<a id="__codelineno-0-1055" name="__codelineno-0-1055"></a>    <span class="n">fields</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">get_field_names</span><span class="p">(</span><span class="n">declared_fields</span><span class="p">,</span> <span class="n">info</span><span class="p">))</span>
<a id="__codelineno-0-1056" name="__codelineno-0-1056"></a>    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Meta</span><span class="o">.</span><span class="n">model</span><span class="p">,</span> <span class="s2">&quot;notes&quot;</span><span class="p">):</span>
<a id="__codelineno-0-1057" name="__codelineno-0-1057"></a>        <span class="c1"># Make sure the field is at the end of fields, instead of the beginning</span>
<a id="__codelineno-0-1058" name="__codelineno-0-1058"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">extend_field_names</span><span class="p">(</span><span class="n">fields</span><span class="p">,</span> <span class="s2">&quot;notes_url&quot;</span><span class="p">)</span>
<a id="__codelineno-0-1059" name="__codelineno-0-1059"></a>    <span class="k">return</span> <span class="n">fields</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="nautobot.apps.api.NotesViewSetMixin" class="doc doc-heading">
          <code>nautobot.apps.api.NotesViewSetMixin</code>


<a href="#nautobot.apps.api.NotesViewSetMixin" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">


            <details class="quote">
              <summary>Source code in <code>nautobot/extras/api/views.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-82"> 82</a></span>
<span class="normal"><a href="#__codelineno-0-83"> 83</a></span>
<span class="normal"><a href="#__codelineno-0-84"> 84</a></span>
<span class="normal"><a href="#__codelineno-0-85"> 85</a></span>
<span class="normal"><a href="#__codelineno-0-86"> 86</a></span>
<span class="normal"><a href="#__codelineno-0-87"> 87</a></span>
<span class="normal"><a href="#__codelineno-0-88"> 88</a></span>
<span class="normal"><a href="#__codelineno-0-89"> 89</a></span>
<span class="normal"><a href="#__codelineno-0-90"> 90</a></span>
<span class="normal"><a href="#__codelineno-0-91"> 91</a></span>
<span class="normal"><a href="#__codelineno-0-92"> 92</a></span>
<span class="normal"><a href="#__codelineno-0-93"> 93</a></span>
<span class="normal"><a href="#__codelineno-0-94"> 94</a></span>
<span class="normal"><a href="#__codelineno-0-95"> 95</a></span>
<span class="normal"><a href="#__codelineno-0-96"> 96</a></span>
<span class="normal"><a href="#__codelineno-0-97"> 97</a></span>
<span class="normal"><a href="#__codelineno-0-98"> 98</a></span>
<span class="normal"><a href="#__codelineno-0-99"> 99</a></span>
<span class="normal"><a href="#__codelineno-0-100">100</a></span>
<span class="normal"><a href="#__codelineno-0-101">101</a></span>
<span class="normal"><a href="#__codelineno-0-102">102</a></span>
<span class="normal"><a href="#__codelineno-0-103">103</a></span>
<span class="normal"><a href="#__codelineno-0-104">104</a></span>
<span class="normal"><a href="#__codelineno-0-105">105</a></span>
<span class="normal"><a href="#__codelineno-0-106">106</a></span>
<span class="normal"><a href="#__codelineno-0-107">107</a></span>
<span class="normal"><a href="#__codelineno-0-108">108</a></span>
<span class="normal"><a href="#__codelineno-0-109">109</a></span>
<span class="normal"><a href="#__codelineno-0-110">110</a></span>
<span class="normal"><a href="#__codelineno-0-111">111</a></span>
<span class="normal"><a href="#__codelineno-0-112">112</a></span>
<span class="normal"><a href="#__codelineno-0-113">113</a></span>
<span class="normal"><a href="#__codelineno-0-114">114</a></span>
<span class="normal"><a href="#__codelineno-0-115">115</a></span>
<span class="normal"><a href="#__codelineno-0-116">116</a></span>
<span class="normal"><a href="#__codelineno-0-117">117</a></span>
<span class="normal"><a href="#__codelineno-0-118">118</a></span>
<span class="normal"><a href="#__codelineno-0-119">119</a></span>
<span class="normal"><a href="#__codelineno-0-120">120</a></span>
<span class="normal"><a href="#__codelineno-0-121">121</a></span>
<span class="normal"><a href="#__codelineno-0-122">122</a></span>
<span class="normal"><a href="#__codelineno-0-123">123</a></span>
<span class="normal"><a href="#__codelineno-0-124">124</a></span>
<span class="normal"><a href="#__codelineno-0-125">125</a></span>
<span class="normal"><a href="#__codelineno-0-126">126</a></span>
<span class="normal"><a href="#__codelineno-0-127">127</a></span>
<span class="normal"><a href="#__codelineno-0-128">128</a></span>
<span class="normal"><a href="#__codelineno-0-129">129</a></span>
<span class="normal"><a href="#__codelineno-0-130">130</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-82" name="__codelineno-0-82"></a><span class="k">class</span> <span class="nc">NotesViewSetMixin</span><span class="p">:</span>
<a id="__codelineno-0-83" name="__codelineno-0-83"></a>    <span class="k">def</span> <span class="nf">restrict_queryset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<a id="__codelineno-0-84" name="__codelineno-0-84"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-85" name="__codelineno-0-85"></a><span class="sd">        Apply &quot;view&quot; permissions on the POST /notes/ endpoint, otherwise as ModelViewSetMixin.</span>
<a id="__codelineno-0-86" name="__codelineno-0-86"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-87" name="__codelineno-0-87"></a>        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">is_authenticated</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">action</span> <span class="o">==</span> <span class="s2">&quot;notes&quot;</span><span class="p">:</span>
<a id="__codelineno-0-88" name="__codelineno-0-88"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">queryset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">queryset</span><span class="o">.</span><span class="n">restrict</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="p">,</span> <span class="s2">&quot;view&quot;</span><span class="p">)</span>
<a id="__codelineno-0-89" name="__codelineno-0-89"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-90" name="__codelineno-0-90"></a>            <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">restrict_queryset</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
<a id="__codelineno-0-91" name="__codelineno-0-91"></a>
<a id="__codelineno-0-92" name="__codelineno-0-92"></a>    <span class="k">class</span> <span class="nc">CreateNotePermissions</span><span class="p">(</span><span class="n">TokenPermissions</span><span class="p">):</span>
<a id="__codelineno-0-93" name="__codelineno-0-93"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;As nautobot.core.api.authentication.TokenPermissions, but enforcing add_note permission.&quot;&quot;&quot;</span>
<a id="__codelineno-0-94" name="__codelineno-0-94"></a>
<a id="__codelineno-0-95" name="__codelineno-0-95"></a>        <span class="n">perms_map</span> <span class="o">=</span> <span class="p">{</span>
<a id="__codelineno-0-96" name="__codelineno-0-96"></a>            <span class="s2">&quot;GET&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;</span><span class="si">%(app_label)s</span><span class="s2">.view_</span><span class="si">%(model_name)s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;extras.view_note&quot;</span><span class="p">],</span>
<a id="__codelineno-0-97" name="__codelineno-0-97"></a>            <span class="s2">&quot;POST&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;</span><span class="si">%(app_label)s</span><span class="s2">.view_</span><span class="si">%(model_name)s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;extras.add_note&quot;</span><span class="p">],</span>
<a id="__codelineno-0-98" name="__codelineno-0-98"></a>        <span class="p">}</span>
<a id="__codelineno-0-99" name="__codelineno-0-99"></a>
<a id="__codelineno-0-100" name="__codelineno-0-100"></a>    <span class="nd">@extend_schema</span><span class="p">(</span><span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;get&quot;</span><span class="p">],</span> <span class="n">filters</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">200</span><span class="p">:</span> <span class="n">serializers</span><span class="o">.</span><span class="n">NoteSerializer</span><span class="p">(</span><span class="n">many</span><span class="o">=</span><span class="kc">True</span><span class="p">)})</span>
<a id="__codelineno-0-101" name="__codelineno-0-101"></a>    <span class="nd">@extend_schema</span><span class="p">(</span>
<a id="__codelineno-0-102" name="__codelineno-0-102"></a>        <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;post&quot;</span><span class="p">],</span>
<a id="__codelineno-0-103" name="__codelineno-0-103"></a>        <span class="n">request</span><span class="o">=</span><span class="n">serializers</span><span class="o">.</span><span class="n">NoteInputSerializer</span><span class="p">,</span>
<a id="__codelineno-0-104" name="__codelineno-0-104"></a>        <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">201</span><span class="p">:</span> <span class="n">serializers</span><span class="o">.</span><span class="n">NoteSerializer</span><span class="p">(</span><span class="n">many</span><span class="o">=</span><span class="kc">False</span><span class="p">)},</span>
<a id="__codelineno-0-105" name="__codelineno-0-105"></a>    <span class="p">)</span>
<a id="__codelineno-0-106" name="__codelineno-0-106"></a>    <span class="nd">@action</span><span class="p">(</span><span class="n">detail</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">url_path</span><span class="o">=</span><span class="s2">&quot;notes&quot;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;get&quot;</span><span class="p">,</span> <span class="s2">&quot;post&quot;</span><span class="p">],</span> <span class="n">permission_classes</span><span class="o">=</span><span class="p">[</span><span class="n">CreateNotePermissions</span><span class="p">])</span>
<a id="__codelineno-0-107" name="__codelineno-0-107"></a>    <span class="k">def</span> <span class="nf">notes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<a id="__codelineno-0-108" name="__codelineno-0-108"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-109" name="__codelineno-0-109"></a><span class="sd">        API methods for returning or creating notes on an object.</span>
<a id="__codelineno-0-110" name="__codelineno-0-110"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-111" name="__codelineno-0-111"></a>        <span class="n">obj</span> <span class="o">=</span> <span class="n">get_object_or_404</span><span class="p">(</span>
<a id="__codelineno-0-112" name="__codelineno-0-112"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">queryset</span><span class="p">,</span> <span class="o">**</span><span class="p">{</span><span class="bp">self</span><span class="o">.</span><span class="n">lookup_field</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">lookup_url_kwarg</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">lookup_field</span><span class="p">]}</span>
<a id="__codelineno-0-113" name="__codelineno-0-113"></a>        <span class="p">)</span>
<a id="__codelineno-0-114" name="__codelineno-0-114"></a>        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="s2">&quot;POST&quot;</span><span class="p">:</span>
<a id="__codelineno-0-115" name="__codelineno-0-115"></a>            <span class="n">content_type</span> <span class="o">=</span> <span class="n">ContentType</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get_for_model</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
<a id="__codelineno-0-116" name="__codelineno-0-116"></a>            <span class="n">data</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">data</span>
<a id="__codelineno-0-117" name="__codelineno-0-117"></a>            <span class="n">data</span><span class="p">[</span><span class="s2">&quot;assigned_object_id&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">pk</span>
<a id="__codelineno-0-118" name="__codelineno-0-118"></a>            <span class="n">data</span><span class="p">[</span><span class="s2">&quot;assigned_object_type&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">content_type</span><span class="o">.</span><span class="n">app_label</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">content_type</span><span class="o">.</span><span class="n">model</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-119" name="__codelineno-0-119"></a>            <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">NoteSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">context</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;request&quot;</span><span class="p">:</span> <span class="n">request</span><span class="p">})</span>
<a id="__codelineno-0-120" name="__codelineno-0-120"></a>
<a id="__codelineno-0-121" name="__codelineno-0-121"></a>            <span class="c1"># Create the new Note.</span>
<a id="__codelineno-0-122" name="__codelineno-0-122"></a>            <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">(</span><span class="n">raise_exception</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-0-123" name="__codelineno-0-123"></a>            <span class="n">serializer</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">user</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="p">)</span>
<a id="__codelineno-0-124" name="__codelineno-0-124"></a>            <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_201_CREATED</span><span class="p">)</span>
<a id="__codelineno-0-125" name="__codelineno-0-125"></a>
<a id="__codelineno-0-126" name="__codelineno-0-126"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-127" name="__codelineno-0-127"></a>            <span class="n">notes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">paginate_queryset</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">notes</span><span class="p">)</span>
<a id="__codelineno-0-128" name="__codelineno-0-128"></a>            <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">NoteSerializer</span><span class="p">(</span><span class="n">notes</span><span class="p">,</span> <span class="n">many</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">context</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;request&quot;</span><span class="p">:</span> <span class="n">request</span><span class="p">})</span>
<a id="__codelineno-0-129" name="__codelineno-0-129"></a>
<a id="__codelineno-0-130" name="__codelineno-0-130"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_paginated_response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="nautobot.extras.api.views.NotesViewSetMixin.CreateNotePermissions" class="doc doc-heading">
          <code>CreateNotePermissions</code>


<a href="#nautobot.extras.api.views.NotesViewSetMixin.CreateNotePermissions" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code><span title="nautobot.core.api.authentication.TokenPermissions">TokenPermissions</span></code></p>

  
      <p>As nautobot.core.api.authentication.TokenPermissions, but enforcing add_note permission.</p>

            <details class="quote">
              <summary>Source code in <code>nautobot/extras/api/views.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-92">92</a></span>
<span class="normal"><a href="#__codelineno-0-93">93</a></span>
<span class="normal"><a href="#__codelineno-0-94">94</a></span>
<span class="normal"><a href="#__codelineno-0-95">95</a></span>
<span class="normal"><a href="#__codelineno-0-96">96</a></span>
<span class="normal"><a href="#__codelineno-0-97">97</a></span>
<span class="normal"><a href="#__codelineno-0-98">98</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-92" name="__codelineno-0-92"></a><span class="k">class</span> <span class="nc">CreateNotePermissions</span><span class="p">(</span><span class="n">TokenPermissions</span><span class="p">):</span>
<a id="__codelineno-0-93" name="__codelineno-0-93"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;As nautobot.core.api.authentication.TokenPermissions, but enforcing add_note permission.&quot;&quot;&quot;</span>
<a id="__codelineno-0-94" name="__codelineno-0-94"></a>
<a id="__codelineno-0-95" name="__codelineno-0-95"></a>    <span class="n">perms_map</span> <span class="o">=</span> <span class="p">{</span>
<a id="__codelineno-0-96" name="__codelineno-0-96"></a>        <span class="s2">&quot;GET&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;</span><span class="si">%(app_label)s</span><span class="s2">.view_</span><span class="si">%(model_name)s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;extras.view_note&quot;</span><span class="p">],</span>
<a id="__codelineno-0-97" name="__codelineno-0-97"></a>        <span class="s2">&quot;POST&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;</span><span class="si">%(app_label)s</span><span class="s2">.view_</span><span class="si">%(model_name)s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;extras.add_note&quot;</span><span class="p">],</span>
<a id="__codelineno-0-98" name="__codelineno-0-98"></a>    <span class="p">}</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">











  </div>

  </div>

</div>



<div class="doc doc-object doc-function">



<h3 id="nautobot.extras.api.views.NotesViewSetMixin.notes" class="doc doc-heading">
<code class="highlight language-python"><span class="n">notes</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

<a href="#nautobot.extras.api.views.NotesViewSetMixin.notes" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>API methods for returning or creating notes on an object.</p>

          <details class="quote">
            <summary>Source code in <code>nautobot/extras/api/views.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-100">100</a></span>
<span class="normal"><a href="#__codelineno-0-101">101</a></span>
<span class="normal"><a href="#__codelineno-0-102">102</a></span>
<span class="normal"><a href="#__codelineno-0-103">103</a></span>
<span class="normal"><a href="#__codelineno-0-104">104</a></span>
<span class="normal"><a href="#__codelineno-0-105">105</a></span>
<span class="normal"><a href="#__codelineno-0-106">106</a></span>
<span class="normal"><a href="#__codelineno-0-107">107</a></span>
<span class="normal"><a href="#__codelineno-0-108">108</a></span>
<span class="normal"><a href="#__codelineno-0-109">109</a></span>
<span class="normal"><a href="#__codelineno-0-110">110</a></span>
<span class="normal"><a href="#__codelineno-0-111">111</a></span>
<span class="normal"><a href="#__codelineno-0-112">112</a></span>
<span class="normal"><a href="#__codelineno-0-113">113</a></span>
<span class="normal"><a href="#__codelineno-0-114">114</a></span>
<span class="normal"><a href="#__codelineno-0-115">115</a></span>
<span class="normal"><a href="#__codelineno-0-116">116</a></span>
<span class="normal"><a href="#__codelineno-0-117">117</a></span>
<span class="normal"><a href="#__codelineno-0-118">118</a></span>
<span class="normal"><a href="#__codelineno-0-119">119</a></span>
<span class="normal"><a href="#__codelineno-0-120">120</a></span>
<span class="normal"><a href="#__codelineno-0-121">121</a></span>
<span class="normal"><a href="#__codelineno-0-122">122</a></span>
<span class="normal"><a href="#__codelineno-0-123">123</a></span>
<span class="normal"><a href="#__codelineno-0-124">124</a></span>
<span class="normal"><a href="#__codelineno-0-125">125</a></span>
<span class="normal"><a href="#__codelineno-0-126">126</a></span>
<span class="normal"><a href="#__codelineno-0-127">127</a></span>
<span class="normal"><a href="#__codelineno-0-128">128</a></span>
<span class="normal"><a href="#__codelineno-0-129">129</a></span>
<span class="normal"><a href="#__codelineno-0-130">130</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-100" name="__codelineno-0-100"></a><span class="nd">@extend_schema</span><span class="p">(</span><span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;get&quot;</span><span class="p">],</span> <span class="n">filters</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">200</span><span class="p">:</span> <span class="n">serializers</span><span class="o">.</span><span class="n">NoteSerializer</span><span class="p">(</span><span class="n">many</span><span class="o">=</span><span class="kc">True</span><span class="p">)})</span>
<a id="__codelineno-0-101" name="__codelineno-0-101"></a><span class="nd">@extend_schema</span><span class="p">(</span>
<a id="__codelineno-0-102" name="__codelineno-0-102"></a>    <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;post&quot;</span><span class="p">],</span>
<a id="__codelineno-0-103" name="__codelineno-0-103"></a>    <span class="n">request</span><span class="o">=</span><span class="n">serializers</span><span class="o">.</span><span class="n">NoteInputSerializer</span><span class="p">,</span>
<a id="__codelineno-0-104" name="__codelineno-0-104"></a>    <span class="n">responses</span><span class="o">=</span><span class="p">{</span><span class="mi">201</span><span class="p">:</span> <span class="n">serializers</span><span class="o">.</span><span class="n">NoteSerializer</span><span class="p">(</span><span class="n">many</span><span class="o">=</span><span class="kc">False</span><span class="p">)},</span>
<a id="__codelineno-0-105" name="__codelineno-0-105"></a><span class="p">)</span>
<a id="__codelineno-0-106" name="__codelineno-0-106"></a><span class="nd">@action</span><span class="p">(</span><span class="n">detail</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">url_path</span><span class="o">=</span><span class="s2">&quot;notes&quot;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;get&quot;</span><span class="p">,</span> <span class="s2">&quot;post&quot;</span><span class="p">],</span> <span class="n">permission_classes</span><span class="o">=</span><span class="p">[</span><span class="n">CreateNotePermissions</span><span class="p">])</span>
<a id="__codelineno-0-107" name="__codelineno-0-107"></a><span class="k">def</span> <span class="nf">notes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<a id="__codelineno-0-108" name="__codelineno-0-108"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-109" name="__codelineno-0-109"></a><span class="sd">    API methods for returning or creating notes on an object.</span>
<a id="__codelineno-0-110" name="__codelineno-0-110"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-111" name="__codelineno-0-111"></a>    <span class="n">obj</span> <span class="o">=</span> <span class="n">get_object_or_404</span><span class="p">(</span>
<a id="__codelineno-0-112" name="__codelineno-0-112"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">queryset</span><span class="p">,</span> <span class="o">**</span><span class="p">{</span><span class="bp">self</span><span class="o">.</span><span class="n">lookup_field</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">lookup_url_kwarg</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">lookup_field</span><span class="p">]}</span>
<a id="__codelineno-0-113" name="__codelineno-0-113"></a>    <span class="p">)</span>
<a id="__codelineno-0-114" name="__codelineno-0-114"></a>    <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="s2">&quot;POST&quot;</span><span class="p">:</span>
<a id="__codelineno-0-115" name="__codelineno-0-115"></a>        <span class="n">content_type</span> <span class="o">=</span> <span class="n">ContentType</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get_for_model</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
<a id="__codelineno-0-116" name="__codelineno-0-116"></a>        <span class="n">data</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">data</span>
<a id="__codelineno-0-117" name="__codelineno-0-117"></a>        <span class="n">data</span><span class="p">[</span><span class="s2">&quot;assigned_object_id&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">pk</span>
<a id="__codelineno-0-118" name="__codelineno-0-118"></a>        <span class="n">data</span><span class="p">[</span><span class="s2">&quot;assigned_object_type&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">content_type</span><span class="o">.</span><span class="n">app_label</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">content_type</span><span class="o">.</span><span class="n">model</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-119" name="__codelineno-0-119"></a>        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">NoteSerializer</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">context</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;request&quot;</span><span class="p">:</span> <span class="n">request</span><span class="p">})</span>
<a id="__codelineno-0-120" name="__codelineno-0-120"></a>
<a id="__codelineno-0-121" name="__codelineno-0-121"></a>        <span class="c1"># Create the new Note.</span>
<a id="__codelineno-0-122" name="__codelineno-0-122"></a>        <span class="n">serializer</span><span class="o">.</span><span class="n">is_valid</span><span class="p">(</span><span class="n">raise_exception</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-0-123" name="__codelineno-0-123"></a>        <span class="n">serializer</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">user</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="p">)</span>
<a id="__codelineno-0-124" name="__codelineno-0-124"></a>        <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_201_CREATED</span><span class="p">)</span>
<a id="__codelineno-0-125" name="__codelineno-0-125"></a>
<a id="__codelineno-0-126" name="__codelineno-0-126"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-127" name="__codelineno-0-127"></a>        <span class="n">notes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">paginate_queryset</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">notes</span><span class="p">)</span>
<a id="__codelineno-0-128" name="__codelineno-0-128"></a>        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">NoteSerializer</span><span class="p">(</span><span class="n">notes</span><span class="p">,</span> <span class="n">many</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">context</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;request&quot;</span><span class="p">:</span> <span class="n">request</span><span class="p">})</span>
<a id="__codelineno-0-129" name="__codelineno-0-129"></a>
<a id="__codelineno-0-130" name="__codelineno-0-130"></a>    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_paginated_response</span><span class="p">(</span><span class="n">serializer</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h3 id="nautobot.extras.api.views.NotesViewSetMixin.restrict_queryset" class="doc doc-heading">
<code class="highlight language-python"><span class="n">restrict_queryset</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

<a href="#nautobot.extras.api.views.NotesViewSetMixin.restrict_queryset" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Apply "view" permissions on the POST /notes/ endpoint, otherwise as ModelViewSetMixin.</p>

          <details class="quote">
            <summary>Source code in <code>nautobot/extras/api/views.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-83">83</a></span>
<span class="normal"><a href="#__codelineno-0-84">84</a></span>
<span class="normal"><a href="#__codelineno-0-85">85</a></span>
<span class="normal"><a href="#__codelineno-0-86">86</a></span>
<span class="normal"><a href="#__codelineno-0-87">87</a></span>
<span class="normal"><a href="#__codelineno-0-88">88</a></span>
<span class="normal"><a href="#__codelineno-0-89">89</a></span>
<span class="normal"><a href="#__codelineno-0-90">90</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-83" name="__codelineno-0-83"></a><span class="k">def</span> <span class="nf">restrict_queryset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<a id="__codelineno-0-84" name="__codelineno-0-84"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-85" name="__codelineno-0-85"></a><span class="sd">    Apply &quot;view&quot; permissions on the POST /notes/ endpoint, otherwise as ModelViewSetMixin.</span>
<a id="__codelineno-0-86" name="__codelineno-0-86"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-87" name="__codelineno-0-87"></a>    <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">is_authenticated</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">action</span> <span class="o">==</span> <span class="s2">&quot;notes&quot;</span><span class="p">:</span>
<a id="__codelineno-0-88" name="__codelineno-0-88"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">queryset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">queryset</span><span class="o">.</span><span class="n">restrict</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="p">,</span> <span class="s2">&quot;view&quot;</span><span class="p">)</span>
<a id="__codelineno-0-89" name="__codelineno-0-89"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-90" name="__codelineno-0-90"></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">restrict_queryset</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="nautobot.apps.api.ObjectTypeField" class="doc doc-heading">
          <code>nautobot.apps.api.ObjectTypeField</code>


<a href="#nautobot.apps.api.ObjectTypeField" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code><span title="rest_framework.serializers">serializers</span>.<span title="rest_framework.serializers.CharField">CharField</span></code></p>

  
      <p>Represent the ContentType of this serializer's model as "<app_label>.<model>".</p>

            <details class="quote">
              <summary>Source code in <code>nautobot/core/api/fields.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-222">222</a></span>
<span class="normal"><a href="#__codelineno-0-223">223</a></span>
<span class="normal"><a href="#__codelineno-0-224">224</a></span>
<span class="normal"><a href="#__codelineno-0-225">225</a></span>
<span class="normal"><a href="#__codelineno-0-226">226</a></span>
<span class="normal"><a href="#__codelineno-0-227">227</a></span>
<span class="normal"><a href="#__codelineno-0-228">228</a></span>
<span class="normal"><a href="#__codelineno-0-229">229</a></span>
<span class="normal"><a href="#__codelineno-0-230">230</a></span>
<span class="normal"><a href="#__codelineno-0-231">231</a></span>
<span class="normal"><a href="#__codelineno-0-232">232</a></span>
<span class="normal"><a href="#__codelineno-0-233">233</a></span>
<span class="normal"><a href="#__codelineno-0-234">234</a></span>
<span class="normal"><a href="#__codelineno-0-235">235</a></span>
<span class="normal"><a href="#__codelineno-0-236">236</a></span>
<span class="normal"><a href="#__codelineno-0-237">237</a></span>
<span class="normal"><a href="#__codelineno-0-238">238</a></span>
<span class="normal"><a href="#__codelineno-0-239">239</a></span>
<span class="normal"><a href="#__codelineno-0-240">240</a></span>
<span class="normal"><a href="#__codelineno-0-241">241</a></span>
<span class="normal"><a href="#__codelineno-0-242">242</a></span>
<span class="normal"><a href="#__codelineno-0-243">243</a></span>
<span class="normal"><a href="#__codelineno-0-244">244</a></span>
<span class="normal"><a href="#__codelineno-0-245">245</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-222" name="__codelineno-0-222"></a><span class="nd">@extend_schema_field</span><span class="p">(</span>
<a id="__codelineno-0-223" name="__codelineno-0-223"></a>    <span class="p">{</span>
<a id="__codelineno-0-224" name="__codelineno-0-224"></a>        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span>
<a id="__codelineno-0-225" name="__codelineno-0-225"></a>        <span class="s2">&quot;pattern&quot;</span><span class="p">:</span> <span class="s2">&quot;^[a-z][a-z0-9_]+</span><span class="se">\\</span><span class="s2">.[a-z][a-z0-9_]+$&quot;</span><span class="p">,</span>
<a id="__codelineno-0-226" name="__codelineno-0-226"></a>        <span class="s2">&quot;example&quot;</span><span class="p">:</span> <span class="s2">&quot;app_label.modelname&quot;</span><span class="p">,</span>
<a id="__codelineno-0-227" name="__codelineno-0-227"></a>    <span class="p">}</span>
<a id="__codelineno-0-228" name="__codelineno-0-228"></a><span class="p">)</span>
<a id="__codelineno-0-229" name="__codelineno-0-229"></a><span class="k">class</span> <span class="nc">ObjectTypeField</span><span class="p">(</span><span class="n">serializers</span><span class="o">.</span><span class="n">CharField</span><span class="p">):</span>
<a id="__codelineno-0-230" name="__codelineno-0-230"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-231" name="__codelineno-0-231"></a><span class="sd">    Represent the ContentType of this serializer&#39;s model as &quot;&lt;app_label&gt;.&lt;model&gt;&quot;.</span>
<a id="__codelineno-0-232" name="__codelineno-0-232"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-233" name="__codelineno-0-233"></a>
<a id="__codelineno-0-234" name="__codelineno-0-234"></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="n">read_only</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="s2">&quot;*&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>  <span class="c1"># pylint: disable=useless-parent-delegation</span>
<a id="__codelineno-0-235" name="__codelineno-0-235"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Default read_only to True as this should never be a writable field.&quot;&quot;&quot;</span>
<a id="__codelineno-0-236" name="__codelineno-0-236"></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="n">read_only</span><span class="o">=</span><span class="n">read_only</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
<a id="__codelineno-0-237" name="__codelineno-0-237"></a>
<a id="__codelineno-0-238" name="__codelineno-0-238"></a>    <span class="k">def</span> <span class="nf">to_representation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_value</span><span class="p">):</span>
<a id="__codelineno-0-239" name="__codelineno-0-239"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-240" name="__codelineno-0-240"></a><span class="sd">        Get the content-type of this serializer&#39;s model.</span>
<a id="__codelineno-0-241" name="__codelineno-0-241"></a>
<a id="__codelineno-0-242" name="__codelineno-0-242"></a><span class="sd">        Implemented this way because `_value` may be None when generating the schema.</span>
<a id="__codelineno-0-243" name="__codelineno-0-243"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-244" name="__codelineno-0-244"></a>        <span class="n">model</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">Meta</span><span class="o">.</span><span class="n">model</span>
<a id="__codelineno-0-245" name="__codelineno-0-245"></a>        <span class="k">return</span> <span class="n">model</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">label_lower</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">










<div class="doc doc-object doc-function">



<h3 id="nautobot.core.api.fields.ObjectTypeField.__init__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="n">read_only</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="s1">&#39;*&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

<a href="#nautobot.core.api.fields.ObjectTypeField.__init__" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Default read_only to True as this should never be a writable field.</p>

          <details class="quote">
            <summary>Source code in <code>nautobot/core/api/fields.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-234">234</a></span>
<span class="normal"><a href="#__codelineno-0-235">235</a></span>
<span class="normal"><a href="#__codelineno-0-236">236</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-234" name="__codelineno-0-234"></a><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="n">read_only</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="s2">&quot;*&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>  <span class="c1"># pylint: disable=useless-parent-delegation</span>
<a id="__codelineno-0-235" name="__codelineno-0-235"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Default read_only to True as this should never be a writable field.&quot;&quot;&quot;</span>
<a id="__codelineno-0-236" name="__codelineno-0-236"></a>    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="n">read_only</span><span class="o">=</span><span class="n">read_only</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h3 id="nautobot.core.api.fields.ObjectTypeField.to_representation" class="doc doc-heading">
<code class="highlight language-python"><span class="n">to_representation</span><span class="p">(</span><span class="n">_value</span><span class="p">)</span></code>

<a href="#nautobot.core.api.fields.ObjectTypeField.to_representation" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Get the content-type of this serializer's model.</p>
<p>Implemented this way because <code>_value</code> may be None when generating the schema.</p>

          <details class="quote">
            <summary>Source code in <code>nautobot/core/api/fields.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-238">238</a></span>
<span class="normal"><a href="#__codelineno-0-239">239</a></span>
<span class="normal"><a href="#__codelineno-0-240">240</a></span>
<span class="normal"><a href="#__codelineno-0-241">241</a></span>
<span class="normal"><a href="#__codelineno-0-242">242</a></span>
<span class="normal"><a href="#__codelineno-0-243">243</a></span>
<span class="normal"><a href="#__codelineno-0-244">244</a></span>
<span class="normal"><a href="#__codelineno-0-245">245</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-238" name="__codelineno-0-238"></a><span class="k">def</span> <span class="nf">to_representation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_value</span><span class="p">):</span>
<a id="__codelineno-0-239" name="__codelineno-0-239"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-240" name="__codelineno-0-240"></a><span class="sd">    Get the content-type of this serializer&#39;s model.</span>
<a id="__codelineno-0-241" name="__codelineno-0-241"></a>
<a id="__codelineno-0-242" name="__codelineno-0-242"></a><span class="sd">    Implemented this way because `_value` may be None when generating the schema.</span>
<a id="__codelineno-0-243" name="__codelineno-0-243"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-244" name="__codelineno-0-244"></a>    <span class="n">model</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">Meta</span><span class="o">.</span><span class="n">model</span>
<a id="__codelineno-0-245" name="__codelineno-0-245"></a>    <span class="k">return</span> <span class="n">model</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">label_lower</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="nautobot.apps.api.OptInFieldsMixin" class="doc doc-heading">
          <code>nautobot.apps.api.OptInFieldsMixin</code>


<a href="#nautobot.apps.api.OptInFieldsMixin" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">

  
      <p>A serializer mixin that takes an additional <code>opt_in_fields</code> argument that controls
which fields should be displayed.</p>

            <details class="quote">
              <summary>Source code in <code>nautobot/core/api/serializers.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-49"> 49</a></span>
<span class="normal"><a href="#__codelineno-0-50"> 50</a></span>
<span class="normal"><a href="#__codelineno-0-51"> 51</a></span>
<span class="normal"><a href="#__codelineno-0-52"> 52</a></span>
<span class="normal"><a href="#__codelineno-0-53"> 53</a></span>
<span class="normal"><a href="#__codelineno-0-54"> 54</a></span>
<span class="normal"><a href="#__codelineno-0-55"> 55</a></span>
<span class="normal"><a href="#__codelineno-0-56"> 56</a></span>
<span class="normal"><a href="#__codelineno-0-57"> 57</a></span>
<span class="normal"><a href="#__codelineno-0-58"> 58</a></span>
<span class="normal"><a href="#__codelineno-0-59"> 59</a></span>
<span class="normal"><a href="#__codelineno-0-60"> 60</a></span>
<span class="normal"><a href="#__codelineno-0-61"> 61</a></span>
<span class="normal"><a href="#__codelineno-0-62"> 62</a></span>
<span class="normal"><a href="#__codelineno-0-63"> 63</a></span>
<span class="normal"><a href="#__codelineno-0-64"> 64</a></span>
<span class="normal"><a href="#__codelineno-0-65"> 65</a></span>
<span class="normal"><a href="#__codelineno-0-66"> 66</a></span>
<span class="normal"><a href="#__codelineno-0-67"> 67</a></span>
<span class="normal"><a href="#__codelineno-0-68"> 68</a></span>
<span class="normal"><a href="#__codelineno-0-69"> 69</a></span>
<span class="normal"><a href="#__codelineno-0-70"> 70</a></span>
<span class="normal"><a href="#__codelineno-0-71"> 71</a></span>
<span class="normal"><a href="#__codelineno-0-72"> 72</a></span>
<span class="normal"><a href="#__codelineno-0-73"> 73</a></span>
<span class="normal"><a href="#__codelineno-0-74"> 74</a></span>
<span class="normal"><a href="#__codelineno-0-75"> 75</a></span>
<span class="normal"><a href="#__codelineno-0-76"> 76</a></span>
<span class="normal"><a href="#__codelineno-0-77"> 77</a></span>
<span class="normal"><a href="#__codelineno-0-78"> 78</a></span>
<span class="normal"><a href="#__codelineno-0-79"> 79</a></span>
<span class="normal"><a href="#__codelineno-0-80"> 80</a></span>
<span class="normal"><a href="#__codelineno-0-81"> 81</a></span>
<span class="normal"><a href="#__codelineno-0-82"> 82</a></span>
<span class="normal"><a href="#__codelineno-0-83"> 83</a></span>
<span class="normal"><a href="#__codelineno-0-84"> 84</a></span>
<span class="normal"><a href="#__codelineno-0-85"> 85</a></span>
<span class="normal"><a href="#__codelineno-0-86"> 86</a></span>
<span class="normal"><a href="#__codelineno-0-87"> 87</a></span>
<span class="normal"><a href="#__codelineno-0-88"> 88</a></span>
<span class="normal"><a href="#__codelineno-0-89"> 89</a></span>
<span class="normal"><a href="#__codelineno-0-90"> 90</a></span>
<span class="normal"><a href="#__codelineno-0-91"> 91</a></span>
<span class="normal"><a href="#__codelineno-0-92"> 92</a></span>
<span class="normal"><a href="#__codelineno-0-93"> 93</a></span>
<span class="normal"><a href="#__codelineno-0-94"> 94</a></span>
<span class="normal"><a href="#__codelineno-0-95"> 95</a></span>
<span class="normal"><a href="#__codelineno-0-96"> 96</a></span>
<span class="normal"><a href="#__codelineno-0-97"> 97</a></span>
<span class="normal"><a href="#__codelineno-0-98"> 98</a></span>
<span class="normal"><a href="#__codelineno-0-99"> 99</a></span>
<span class="normal"><a href="#__codelineno-0-100">100</a></span>
<span class="normal"><a href="#__codelineno-0-101">101</a></span>
<span class="normal"><a href="#__codelineno-0-102">102</a></span>
<span class="normal"><a href="#__codelineno-0-103">103</a></span>
<span class="normal"><a href="#__codelineno-0-104">104</a></span>
<span class="normal"><a href="#__codelineno-0-105">105</a></span>
<span class="normal"><a href="#__codelineno-0-106">106</a></span>
<span class="normal"><a href="#__codelineno-0-107">107</a></span>
<span class="normal"><a href="#__codelineno-0-108">108</a></span>
<span class="normal"><a href="#__codelineno-0-109">109</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-49" name="__codelineno-0-49"></a><span class="k">class</span> <span class="nc">OptInFieldsMixin</span><span class="p">:</span>
<a id="__codelineno-0-50" name="__codelineno-0-50"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-51" name="__codelineno-0-51"></a><span class="sd">    A serializer mixin that takes an additional `opt_in_fields` argument that controls</span>
<a id="__codelineno-0-52" name="__codelineno-0-52"></a><span class="sd">    which fields should be displayed.</span>
<a id="__codelineno-0-53" name="__codelineno-0-53"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-54" name="__codelineno-0-54"></a>
<a id="__codelineno-0-55" name="__codelineno-0-55"></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<a id="__codelineno-0-56" name="__codelineno-0-56"></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
<a id="__codelineno-0-57" name="__codelineno-0-57"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">__pruned_fields</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-58" name="__codelineno-0-58"></a>
<a id="__codelineno-0-59" name="__codelineno-0-59"></a>    <span class="nd">@property</span>
<a id="__codelineno-0-60" name="__codelineno-0-60"></a>    <span class="k">def</span> <span class="nf">fields</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-61" name="__codelineno-0-61"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-62" name="__codelineno-0-62"></a><span class="sd">        Removes all serializer fields specified in a serializers `opt_in_fields` list that aren&#39;t specified in the</span>
<a id="__codelineno-0-63" name="__codelineno-0-63"></a><span class="sd">        `include` query parameter.</span>
<a id="__codelineno-0-64" name="__codelineno-0-64"></a>
<a id="__codelineno-0-65" name="__codelineno-0-65"></a><span class="sd">        As an example, if the serializer specifies that `opt_in_fields = [&quot;computed_fields&quot;]`</span>
<a id="__codelineno-0-66" name="__codelineno-0-66"></a><span class="sd">        but `computed_fields` is not specified in the `?include` query parameter, `computed_fields` will be popped</span>
<a id="__codelineno-0-67" name="__codelineno-0-67"></a><span class="sd">        from the list of fields.</span>
<a id="__codelineno-0-68" name="__codelineno-0-68"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-69" name="__codelineno-0-69"></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__pruned_fields</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-70" name="__codelineno-0-70"></a>            <span class="n">fields</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">fields</span><span class="p">)</span>
<a id="__codelineno-0-71" name="__codelineno-0-71"></a>            <span class="n">serializer_opt_in_fields</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Meta</span><span class="p">,</span> <span class="s2">&quot;opt_in_fields&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
<a id="__codelineno-0-72" name="__codelineno-0-72"></a>
<a id="__codelineno-0-73" name="__codelineno-0-73"></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">serializer_opt_in_fields</span><span class="p">:</span>
<a id="__codelineno-0-74" name="__codelineno-0-74"></a>                <span class="c1"># This serializer has no defined opt_in_fields, so we never need to go further than this</span>
<a id="__codelineno-0-75" name="__codelineno-0-75"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">__pruned_fields</span> <span class="o">=</span> <span class="n">fields</span>
<a id="__codelineno-0-76" name="__codelineno-0-76"></a>                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__pruned_fields</span>
<a id="__codelineno-0-77" name="__codelineno-0-77"></a>
<a id="__codelineno-0-78" name="__codelineno-0-78"></a>            <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_context&quot;</span><span class="p">):</span>
<a id="__codelineno-0-79" name="__codelineno-0-79"></a>                <span class="c1"># We are being called before a request cycle</span>
<a id="__codelineno-0-80" name="__codelineno-0-80"></a>                <span class="k">return</span> <span class="n">fields</span>
<a id="__codelineno-0-81" name="__codelineno-0-81"></a>
<a id="__codelineno-0-82" name="__codelineno-0-82"></a>            <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-0-83" name="__codelineno-0-83"></a>                <span class="n">request</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">context</span><span class="p">[</span><span class="s2">&quot;request&quot;</span><span class="p">]</span>
<a id="__codelineno-0-84" name="__codelineno-0-84"></a>            <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
<a id="__codelineno-0-85" name="__codelineno-0-85"></a>                <span class="c1"># No available request?</span>
<a id="__codelineno-0-86" name="__codelineno-0-86"></a>                <span class="k">return</span> <span class="n">fields</span>
<a id="__codelineno-0-87" name="__codelineno-0-87"></a>
<a id="__codelineno-0-88" name="__codelineno-0-88"></a>            <span class="c1"># opt-in fields only applies on GET requests, for other methods we support these fields regardless</span>
<a id="__codelineno-0-89" name="__codelineno-0-89"></a>            <span class="k">if</span> <span class="n">request</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">!=</span> <span class="s2">&quot;GET&quot;</span><span class="p">:</span>
<a id="__codelineno-0-90" name="__codelineno-0-90"></a>                <span class="k">return</span> <span class="n">fields</span>
<a id="__codelineno-0-91" name="__codelineno-0-91"></a>
<a id="__codelineno-0-92" name="__codelineno-0-92"></a>            <span class="c1"># NOTE: drf test framework builds a request object where the query</span>
<a id="__codelineno-0-93" name="__codelineno-0-93"></a>            <span class="c1"># parameters are found under the GET attribute.</span>
<a id="__codelineno-0-94" name="__codelineno-0-94"></a>            <span class="n">params</span> <span class="o">=</span> <span class="n">normalize_querydict</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s2">&quot;query_params&quot;</span><span class="p">,</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s2">&quot;GET&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)))</span>
<a id="__codelineno-0-95" name="__codelineno-0-95"></a>
<a id="__codelineno-0-96" name="__codelineno-0-96"></a>            <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-0-97" name="__codelineno-0-97"></a>                <span class="n">user_opt_in_fields</span> <span class="o">=</span> <span class="n">params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;include&quot;</span><span class="p">,</span> <span class="p">[])</span>
<a id="__codelineno-0-98" name="__codelineno-0-98"></a>            <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
<a id="__codelineno-0-99" name="__codelineno-0-99"></a>                <span class="c1"># include parameter was not specified</span>
<a id="__codelineno-0-100" name="__codelineno-0-100"></a>                <span class="n">user_opt_in_fields</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-101" name="__codelineno-0-101"></a>
<a id="__codelineno-0-102" name="__codelineno-0-102"></a>            <span class="c1"># Drop any fields that are not specified in the users opt in fields</span>
<a id="__codelineno-0-103" name="__codelineno-0-103"></a>            <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">serializer_opt_in_fields</span><span class="p">:</span>
<a id="__codelineno-0-104" name="__codelineno-0-104"></a>                <span class="k">if</span> <span class="n">field</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">user_opt_in_fields</span><span class="p">:</span>
<a id="__codelineno-0-105" name="__codelineno-0-105"></a>                    <span class="n">fields</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">field</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
<a id="__codelineno-0-106" name="__codelineno-0-106"></a>
<a id="__codelineno-0-107" name="__codelineno-0-107"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">__pruned_fields</span> <span class="o">=</span> <span class="n">fields</span>
<a id="__codelineno-0-108" name="__codelineno-0-108"></a>
<a id="__codelineno-0-109" name="__codelineno-0-109"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__pruned_fields</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="nautobot.core.api.serializers.OptInFieldsMixin.fields" class="doc doc-heading">
<code class="highlight language-python"><span class="n">fields</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#nautobot.core.api.serializers.OptInFieldsMixin.fields" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Removes all serializer fields specified in a serializers <code>opt_in_fields</code> list that aren't specified in the
<code>include</code> query parameter.</p>
<p>As an example, if the serializer specifies that <code>opt_in_fields = ["computed_fields"]</code>
but <code>computed_fields</code> is not specified in the <code>?include</code> query parameter, <code>computed_fields</code> will be popped
from the list of fields.</p>
  </div>

</div>





  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="nautobot.apps.api.OrderedDefaultRouter" class="doc doc-heading">
          <code>nautobot.apps.api.OrderedDefaultRouter</code>


<a href="#nautobot.apps.api.OrderedDefaultRouter" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code><span title="rest_framework.routers.DefaultRouter">DefaultRouter</span></code></p>


            <details class="quote">
              <summary>Source code in <code>nautobot/core/api/routers.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-0-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-0-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-0-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-0-10">10</a></span>
<span class="normal"><a href="#__codelineno-0-11">11</a></span>
<span class="normal"><a href="#__codelineno-0-12">12</a></span>
<span class="normal"><a href="#__codelineno-0-13">13</a></span>
<span class="normal"><a href="#__codelineno-0-14">14</a></span>
<span class="normal"><a href="#__codelineno-0-15">15</a></span>
<span class="normal"><a href="#__codelineno-0-16">16</a></span>
<span class="normal"><a href="#__codelineno-0-17">17</a></span>
<span class="normal"><a href="#__codelineno-0-18">18</a></span>
<span class="normal"><a href="#__codelineno-0-19">19</a></span>
<span class="normal"><a href="#__codelineno-0-20">20</a></span>
<span class="normal"><a href="#__codelineno-0-21">21</a></span>
<span class="normal"><a href="#__codelineno-0-22">22</a></span>
<span class="normal"><a href="#__codelineno-0-23">23</a></span>
<span class="normal"><a href="#__codelineno-0-24">24</a></span>
<span class="normal"><a href="#__codelineno-0-25">25</a></span>
<span class="normal"><a href="#__codelineno-0-26">26</a></span>
<span class="normal"><a href="#__codelineno-0-27">27</a></span>
<span class="normal"><a href="#__codelineno-0-28">28</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-6" name="__codelineno-0-6"></a><span class="k">class</span> <span class="nc">OrderedDefaultRouter</span><span class="p">(</span><span class="n">DefaultRouter</span><span class="p">):</span>
<a id="__codelineno-0-7" name="__codelineno-0-7"></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<a id="__codelineno-0-8" name="__codelineno-0-8"></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
<a id="__codelineno-0-9" name="__codelineno-0-9"></a>
<a id="__codelineno-0-10" name="__codelineno-0-10"></a>        <span class="c1"># Extend the list view mappings to support the DELETE operation</span>
<a id="__codelineno-0-11" name="__codelineno-0-11"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">routes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">mapping</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
<a id="__codelineno-0-12" name="__codelineno-0-12"></a>            <span class="p">{</span>
<a id="__codelineno-0-13" name="__codelineno-0-13"></a>                <span class="s2">&quot;put&quot;</span><span class="p">:</span> <span class="s2">&quot;bulk_update&quot;</span><span class="p">,</span>
<a id="__codelineno-0-14" name="__codelineno-0-14"></a>                <span class="s2">&quot;patch&quot;</span><span class="p">:</span> <span class="s2">&quot;bulk_partial_update&quot;</span><span class="p">,</span>
<a id="__codelineno-0-15" name="__codelineno-0-15"></a>                <span class="s2">&quot;delete&quot;</span><span class="p">:</span> <span class="s2">&quot;bulk_destroy&quot;</span><span class="p">,</span>
<a id="__codelineno-0-16" name="__codelineno-0-16"></a>            <span class="p">}</span>
<a id="__codelineno-0-17" name="__codelineno-0-17"></a>        <span class="p">)</span>
<a id="__codelineno-0-18" name="__codelineno-0-18"></a>
<a id="__codelineno-0-19" name="__codelineno-0-19"></a>    <span class="k">def</span> <span class="nf">get_api_root_view</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">api_urls</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<a id="__codelineno-0-20" name="__codelineno-0-20"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-21" name="__codelineno-0-21"></a><span class="sd">        Wrap DRF&#39;s DefaultRouter to return an alphabetized list of endpoints.</span>
<a id="__codelineno-0-22" name="__codelineno-0-22"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-23" name="__codelineno-0-23"></a>        <span class="n">api_root_dict</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">()</span>
<a id="__codelineno-0-24" name="__codelineno-0-24"></a>        <span class="n">list_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">routes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">name</span>
<a id="__codelineno-0-25" name="__codelineno-0-25"></a>        <span class="k">for</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">_viewset</span><span class="p">,</span> <span class="n">basename</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">registry</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
<a id="__codelineno-0-26" name="__codelineno-0-26"></a>            <span class="n">api_root_dict</span><span class="p">[</span><span class="n">prefix</span><span class="p">]</span> <span class="o">=</span> <span class="n">list_name</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">basename</span><span class="o">=</span><span class="n">basename</span><span class="p">)</span>
<a id="__codelineno-0-27" name="__codelineno-0-27"></a>
<a id="__codelineno-0-28" name="__codelineno-0-28"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">APIRootView</span><span class="o">.</span><span class="n">as_view</span><span class="p">(</span><span class="n">api_root_dict</span><span class="o">=</span><span class="n">api_root_dict</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">










<div class="doc doc-object doc-function">



<h3 id="nautobot.core.api.routers.OrderedDefaultRouter.get_api_root_view" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_api_root_view</span><span class="p">(</span><span class="n">api_urls</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#nautobot.core.api.routers.OrderedDefaultRouter.get_api_root_view" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Wrap DRF's DefaultRouter to return an alphabetized list of endpoints.</p>

          <details class="quote">
            <summary>Source code in <code>nautobot/core/api/routers.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-19">19</a></span>
<span class="normal"><a href="#__codelineno-0-20">20</a></span>
<span class="normal"><a href="#__codelineno-0-21">21</a></span>
<span class="normal"><a href="#__codelineno-0-22">22</a></span>
<span class="normal"><a href="#__codelineno-0-23">23</a></span>
<span class="normal"><a href="#__codelineno-0-24">24</a></span>
<span class="normal"><a href="#__codelineno-0-25">25</a></span>
<span class="normal"><a href="#__codelineno-0-26">26</a></span>
<span class="normal"><a href="#__codelineno-0-27">27</a></span>
<span class="normal"><a href="#__codelineno-0-28">28</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-19" name="__codelineno-0-19"></a><span class="k">def</span> <span class="nf">get_api_root_view</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">api_urls</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<a id="__codelineno-0-20" name="__codelineno-0-20"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-21" name="__codelineno-0-21"></a><span class="sd">    Wrap DRF&#39;s DefaultRouter to return an alphabetized list of endpoints.</span>
<a id="__codelineno-0-22" name="__codelineno-0-22"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-23" name="__codelineno-0-23"></a>    <span class="n">api_root_dict</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">()</span>
<a id="__codelineno-0-24" name="__codelineno-0-24"></a>    <span class="n">list_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">routes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">name</span>
<a id="__codelineno-0-25" name="__codelineno-0-25"></a>    <span class="k">for</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">_viewset</span><span class="p">,</span> <span class="n">basename</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">registry</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
<a id="__codelineno-0-26" name="__codelineno-0-26"></a>        <span class="n">api_root_dict</span><span class="p">[</span><span class="n">prefix</span><span class="p">]</span> <span class="o">=</span> <span class="n">list_name</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">basename</span><span class="o">=</span><span class="n">basename</span><span class="p">)</span>
<a id="__codelineno-0-27" name="__codelineno-0-27"></a>
<a id="__codelineno-0-28" name="__codelineno-0-28"></a>    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">APIRootView</span><span class="o">.</span><span class="n">as_view</span><span class="p">(</span><span class="n">api_root_dict</span><span class="o">=</span><span class="n">api_root_dict</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="nautobot.apps.api.ReadOnlyModelViewSet" class="doc doc-heading">
          <code>nautobot.apps.api.ReadOnlyModelViewSet</code>


<a href="#nautobot.apps.api.ReadOnlyModelViewSet" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code><span title="nautobot.core.api.views.NautobotAPIVersionMixin">NautobotAPIVersionMixin</span></code>, <code><a class="autorefs autorefs-internal" title="nautobot.core.api.views.ModelViewSetMixin" href="#nautobot.apps.api.ModelViewSetMixin">ModelViewSetMixin</a></code>, <code><span title="rest_framework.viewsets.ReadOnlyModelViewSet">ReadOnlyModelViewSet_</span></code></p>

  
      <p>Extend DRF's ReadOnlyModelViewSet to support queryset restriction.</p>

            <details class="quote">
              <summary>Source code in <code>nautobot/core/api/views.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-335">335</a></span>
<span class="normal"><a href="#__codelineno-0-336">336</a></span>
<span class="normal"><a href="#__codelineno-0-337">337</a></span>
<span class="normal"><a href="#__codelineno-0-338">338</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-335" name="__codelineno-0-335"></a><span class="k">class</span> <span class="nc">ReadOnlyModelViewSet</span><span class="p">(</span><span class="n">NautobotAPIVersionMixin</span><span class="p">,</span> <span class="n">ModelViewSetMixin</span><span class="p">,</span> <span class="n">ReadOnlyModelViewSet_</span><span class="p">):</span>
<a id="__codelineno-0-336" name="__codelineno-0-336"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-337" name="__codelineno-0-337"></a><span class="sd">    Extend DRF&#39;s ReadOnlyModelViewSet to support queryset restriction.</span>
<a id="__codelineno-0-338" name="__codelineno-0-338"></a><span class="sd">    &quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
            </details>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="nautobot.apps.api.RelationshipModelSerializerMixin" class="doc doc-heading">
          <code>nautobot.apps.api.RelationshipModelSerializerMixin</code>


<a href="#nautobot.apps.api.RelationshipModelSerializerMixin" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code><a class="autorefs autorefs-internal" title="nautobot.core.api.serializers.ValidatedModelSerializer" href="#nautobot.apps.api.ValidatedModelSerializer">ValidatedModelSerializer</a></code></p>

  
      <p>Extend ValidatedModelSerializer with a <code>relationships</code> field.</p>

            <details class="quote">
              <summary>Source code in <code>nautobot/core/api/serializers.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-920"> 920</a></span>
<span class="normal"><a href="#__codelineno-0-921"> 921</a></span>
<span class="normal"><a href="#__codelineno-0-922"> 922</a></span>
<span class="normal"><a href="#__codelineno-0-923"> 923</a></span>
<span class="normal"><a href="#__codelineno-0-924"> 924</a></span>
<span class="normal"><a href="#__codelineno-0-925"> 925</a></span>
<span class="normal"><a href="#__codelineno-0-926"> 926</a></span>
<span class="normal"><a href="#__codelineno-0-927"> 927</a></span>
<span class="normal"><a href="#__codelineno-0-928"> 928</a></span>
<span class="normal"><a href="#__codelineno-0-929"> 929</a></span>
<span class="normal"><a href="#__codelineno-0-930"> 930</a></span>
<span class="normal"><a href="#__codelineno-0-931"> 931</a></span>
<span class="normal"><a href="#__codelineno-0-932"> 932</a></span>
<span class="normal"><a href="#__codelineno-0-933"> 933</a></span>
<span class="normal"><a href="#__codelineno-0-934"> 934</a></span>
<span class="normal"><a href="#__codelineno-0-935"> 935</a></span>
<span class="normal"><a href="#__codelineno-0-936"> 936</a></span>
<span class="normal"><a href="#__codelineno-0-937"> 937</a></span>
<span class="normal"><a href="#__codelineno-0-938"> 938</a></span>
<span class="normal"><a href="#__codelineno-0-939"> 939</a></span>
<span class="normal"><a href="#__codelineno-0-940"> 940</a></span>
<span class="normal"><a href="#__codelineno-0-941"> 941</a></span>
<span class="normal"><a href="#__codelineno-0-942"> 942</a></span>
<span class="normal"><a href="#__codelineno-0-943"> 943</a></span>
<span class="normal"><a href="#__codelineno-0-944"> 944</a></span>
<span class="normal"><a href="#__codelineno-0-945"> 945</a></span>
<span class="normal"><a href="#__codelineno-0-946"> 946</a></span>
<span class="normal"><a href="#__codelineno-0-947"> 947</a></span>
<span class="normal"><a href="#__codelineno-0-948"> 948</a></span>
<span class="normal"><a href="#__codelineno-0-949"> 949</a></span>
<span class="normal"><a href="#__codelineno-0-950"> 950</a></span>
<span class="normal"><a href="#__codelineno-0-951"> 951</a></span>
<span class="normal"><a href="#__codelineno-0-952"> 952</a></span>
<span class="normal"><a href="#__codelineno-0-953"> 953</a></span>
<span class="normal"><a href="#__codelineno-0-954"> 954</a></span>
<span class="normal"><a href="#__codelineno-0-955"> 955</a></span>
<span class="normal"><a href="#__codelineno-0-956"> 956</a></span>
<span class="normal"><a href="#__codelineno-0-957"> 957</a></span>
<span class="normal"><a href="#__codelineno-0-958"> 958</a></span>
<span class="normal"><a href="#__codelineno-0-959"> 959</a></span>
<span class="normal"><a href="#__codelineno-0-960"> 960</a></span>
<span class="normal"><a href="#__codelineno-0-961"> 961</a></span>
<span class="normal"><a href="#__codelineno-0-962"> 962</a></span>
<span class="normal"><a href="#__codelineno-0-963"> 963</a></span>
<span class="normal"><a href="#__codelineno-0-964"> 964</a></span>
<span class="normal"><a href="#__codelineno-0-965"> 965</a></span>
<span class="normal"><a href="#__codelineno-0-966"> 966</a></span>
<span class="normal"><a href="#__codelineno-0-967"> 967</a></span>
<span class="normal"><a href="#__codelineno-0-968"> 968</a></span>
<span class="normal"><a href="#__codelineno-0-969"> 969</a></span>
<span class="normal"><a href="#__codelineno-0-970"> 970</a></span>
<span class="normal"><a href="#__codelineno-0-971"> 971</a></span>
<span class="normal"><a href="#__codelineno-0-972"> 972</a></span>
<span class="normal"><a href="#__codelineno-0-973"> 973</a></span>
<span class="normal"><a href="#__codelineno-0-974"> 974</a></span>
<span class="normal"><a href="#__codelineno-0-975"> 975</a></span>
<span class="normal"><a href="#__codelineno-0-976"> 976</a></span>
<span class="normal"><a href="#__codelineno-0-977"> 977</a></span>
<span class="normal"><a href="#__codelineno-0-978"> 978</a></span>
<span class="normal"><a href="#__codelineno-0-979"> 979</a></span>
<span class="normal"><a href="#__codelineno-0-980"> 980</a></span>
<span class="normal"><a href="#__codelineno-0-981"> 981</a></span>
<span class="normal"><a href="#__codelineno-0-982"> 982</a></span>
<span class="normal"><a href="#__codelineno-0-983"> 983</a></span>
<span class="normal"><a href="#__codelineno-0-984"> 984</a></span>
<span class="normal"><a href="#__codelineno-0-985"> 985</a></span>
<span class="normal"><a href="#__codelineno-0-986"> 986</a></span>
<span class="normal"><a href="#__codelineno-0-987"> 987</a></span>
<span class="normal"><a href="#__codelineno-0-988"> 988</a></span>
<span class="normal"><a href="#__codelineno-0-989"> 989</a></span>
<span class="normal"><a href="#__codelineno-0-990"> 990</a></span>
<span class="normal"><a href="#__codelineno-0-991"> 991</a></span>
<span class="normal"><a href="#__codelineno-0-992"> 992</a></span>
<span class="normal"><a href="#__codelineno-0-993"> 993</a></span>
<span class="normal"><a href="#__codelineno-0-994"> 994</a></span>
<span class="normal"><a href="#__codelineno-0-995"> 995</a></span>
<span class="normal"><a href="#__codelineno-0-996"> 996</a></span>
<span class="normal"><a href="#__codelineno-0-997"> 997</a></span>
<span class="normal"><a href="#__codelineno-0-998"> 998</a></span>
<span class="normal"><a href="#__codelineno-0-999"> 999</a></span>
<span class="normal"><a href="#__codelineno-0-1000">1000</a></span>
<span class="normal"><a href="#__codelineno-0-1001">1001</a></span>
<span class="normal"><a href="#__codelineno-0-1002">1002</a></span>
<span class="normal"><a href="#__codelineno-0-1003">1003</a></span>
<span class="normal"><a href="#__codelineno-0-1004">1004</a></span>
<span class="normal"><a href="#__codelineno-0-1005">1005</a></span>
<span class="normal"><a href="#__codelineno-0-1006">1006</a></span>
<span class="normal"><a href="#__codelineno-0-1007">1007</a></span>
<span class="normal"><a href="#__codelineno-0-1008">1008</a></span>
<span class="normal"><a href="#__codelineno-0-1009">1009</a></span>
<span class="normal"><a href="#__codelineno-0-1010">1010</a></span>
<span class="normal"><a href="#__codelineno-0-1011">1011</a></span>
<span class="normal"><a href="#__codelineno-0-1012">1012</a></span>
<span class="normal"><a href="#__codelineno-0-1013">1013</a></span>
<span class="normal"><a href="#__codelineno-0-1014">1014</a></span>
<span class="normal"><a href="#__codelineno-0-1015">1015</a></span>
<span class="normal"><a href="#__codelineno-0-1016">1016</a></span>
<span class="normal"><a href="#__codelineno-0-1017">1017</a></span>
<span class="normal"><a href="#__codelineno-0-1018">1018</a></span>
<span class="normal"><a href="#__codelineno-0-1019">1019</a></span>
<span class="normal"><a href="#__codelineno-0-1020">1020</a></span>
<span class="normal"><a href="#__codelineno-0-1021">1021</a></span>
<span class="normal"><a href="#__codelineno-0-1022">1022</a></span>
<span class="normal"><a href="#__codelineno-0-1023">1023</a></span>
<span class="normal"><a href="#__codelineno-0-1024">1024</a></span>
<span class="normal"><a href="#__codelineno-0-1025">1025</a></span>
<span class="normal"><a href="#__codelineno-0-1026">1026</a></span>
<span class="normal"><a href="#__codelineno-0-1027">1027</a></span>
<span class="normal"><a href="#__codelineno-0-1028">1028</a></span>
<span class="normal"><a href="#__codelineno-0-1029">1029</a></span>
<span class="normal"><a href="#__codelineno-0-1030">1030</a></span>
<span class="normal"><a href="#__codelineno-0-1031">1031</a></span>
<span class="normal"><a href="#__codelineno-0-1032">1032</a></span>
<span class="normal"><a href="#__codelineno-0-1033">1033</a></span>
<span class="normal"><a href="#__codelineno-0-1034">1034</a></span>
<span class="normal"><a href="#__codelineno-0-1035">1035</a></span>
<span class="normal"><a href="#__codelineno-0-1036">1036</a></span>
<span class="normal"><a href="#__codelineno-0-1037">1037</a></span>
<span class="normal"><a href="#__codelineno-0-1038">1038</a></span>
<span class="normal"><a href="#__codelineno-0-1039">1039</a></span>
<span class="normal"><a href="#__codelineno-0-1040">1040</a></span>
<span class="normal"><a href="#__codelineno-0-1041">1041</a></span>
<span class="normal"><a href="#__codelineno-0-1042">1042</a></span>
<span class="normal"><a href="#__codelineno-0-1043">1043</a></span>
<span class="normal"><a href="#__codelineno-0-1044">1044</a></span>
<span class="normal"><a href="#__codelineno-0-1045">1045</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-920" name="__codelineno-0-920"></a><span class="k">class</span> <span class="nc">RelationshipModelSerializerMixin</span><span class="p">(</span><span class="n">ValidatedModelSerializer</span><span class="p">):</span>
<a id="__codelineno-0-921" name="__codelineno-0-921"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Extend ValidatedModelSerializer with a `relationships` field.&quot;&quot;&quot;</span>
<a id="__codelineno-0-922" name="__codelineno-0-922"></a>
<a id="__codelineno-0-923" name="__codelineno-0-923"></a>    <span class="c1"># TODO # 3024 need to change this as well to show just pks in depth=0</span>
<a id="__codelineno-0-924" name="__codelineno-0-924"></a>    <span class="n">relationships</span> <span class="o">=</span> <span class="n">RelationshipsDataField</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="s2">&quot;*&quot;</span><span class="p">)</span>
<a id="__codelineno-0-925" name="__codelineno-0-925"></a>
<a id="__codelineno-0-926" name="__codelineno-0-926"></a>    <span class="k">def</span> <span class="nf">create</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">validated_data</span><span class="p">):</span>
<a id="__codelineno-0-927" name="__codelineno-0-927"></a>        <span class="n">relationships_data</span> <span class="o">=</span> <span class="n">validated_data</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;relationships&quot;</span><span class="p">,</span> <span class="p">{})</span>
<a id="__codelineno-0-928" name="__codelineno-0-928"></a>        <span class="n">required_relationships_errors</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Meta</span><span class="p">()</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">required_related_objects_errors</span><span class="p">(</span>
<a id="__codelineno-0-929" name="__codelineno-0-929"></a>            <span class="n">output_for</span><span class="o">=</span><span class="s2">&quot;api&quot;</span><span class="p">,</span> <span class="n">initial_data</span><span class="o">=</span><span class="n">relationships_data</span>
<a id="__codelineno-0-930" name="__codelineno-0-930"></a>        <span class="p">)</span>
<a id="__codelineno-0-931" name="__codelineno-0-931"></a>        <span class="k">if</span> <span class="n">required_relationships_errors</span><span class="p">:</span>
<a id="__codelineno-0-932" name="__codelineno-0-932"></a>            <span class="k">raise</span> <span class="n">ValidationError</span><span class="p">({</span><span class="s2">&quot;relationships&quot;</span><span class="p">:</span> <span class="n">required_relationships_errors</span><span class="p">})</span>
<a id="__codelineno-0-933" name="__codelineno-0-933"></a>        <span class="n">instance</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">validated_data</span><span class="p">)</span>
<a id="__codelineno-0-934" name="__codelineno-0-934"></a>        <span class="k">if</span> <span class="n">relationships_data</span><span class="p">:</span>
<a id="__codelineno-0-935" name="__codelineno-0-935"></a>            <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-0-936" name="__codelineno-0-936"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_save_relationships</span><span class="p">(</span><span class="n">instance</span><span class="p">,</span> <span class="n">relationships_data</span><span class="p">)</span>
<a id="__codelineno-0-937" name="__codelineno-0-937"></a>            <span class="k">except</span> <span class="n">DjangoValidationError</span> <span class="k">as</span> <span class="n">error</span><span class="p">:</span>
<a id="__codelineno-0-938" name="__codelineno-0-938"></a>                <span class="k">raise</span> <span class="n">ValidationError</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">error</span><span class="p">))</span> <span class="kn">from</span> <span class="nn">error</span>
<a id="__codelineno-0-939" name="__codelineno-0-939"></a>        <span class="k">return</span> <span class="n">instance</span>
<a id="__codelineno-0-940" name="__codelineno-0-940"></a>
<a id="__codelineno-0-941" name="__codelineno-0-941"></a>    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">instance</span><span class="p">,</span> <span class="n">validated_data</span><span class="p">):</span>
<a id="__codelineno-0-942" name="__codelineno-0-942"></a>        <span class="n">relationships_key_specified</span> <span class="o">=</span> <span class="s2">&quot;relationships&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">context</span><span class="p">[</span><span class="s2">&quot;request&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">data</span>
<a id="__codelineno-0-943" name="__codelineno-0-943"></a>        <span class="n">relationships_data</span> <span class="o">=</span> <span class="n">validated_data</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;relationships&quot;</span><span class="p">,</span> <span class="p">{})</span>
<a id="__codelineno-0-944" name="__codelineno-0-944"></a>        <span class="n">required_relationships_errors</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Meta</span><span class="p">()</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">required_related_objects_errors</span><span class="p">(</span>
<a id="__codelineno-0-945" name="__codelineno-0-945"></a>            <span class="n">output_for</span><span class="o">=</span><span class="s2">&quot;api&quot;</span><span class="p">,</span>
<a id="__codelineno-0-946" name="__codelineno-0-946"></a>            <span class="n">initial_data</span><span class="o">=</span><span class="n">relationships_data</span><span class="p">,</span>
<a id="__codelineno-0-947" name="__codelineno-0-947"></a>            <span class="n">relationships_key_specified</span><span class="o">=</span><span class="n">relationships_key_specified</span><span class="p">,</span>
<a id="__codelineno-0-948" name="__codelineno-0-948"></a>            <span class="n">instance</span><span class="o">=</span><span class="n">instance</span><span class="p">,</span>
<a id="__codelineno-0-949" name="__codelineno-0-949"></a>        <span class="p">)</span>
<a id="__codelineno-0-950" name="__codelineno-0-950"></a>        <span class="k">if</span> <span class="n">required_relationships_errors</span><span class="p">:</span>
<a id="__codelineno-0-951" name="__codelineno-0-951"></a>            <span class="k">raise</span> <span class="n">ValidationError</span><span class="p">({</span><span class="s2">&quot;relationships&quot;</span><span class="p">:</span> <span class="n">required_relationships_errors</span><span class="p">})</span>
<a id="__codelineno-0-952" name="__codelineno-0-952"></a>
<a id="__codelineno-0-953" name="__codelineno-0-953"></a>        <span class="n">instance</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">instance</span><span class="p">,</span> <span class="n">validated_data</span><span class="p">)</span>
<a id="__codelineno-0-954" name="__codelineno-0-954"></a>        <span class="k">if</span> <span class="n">relationships_data</span><span class="p">:</span>
<a id="__codelineno-0-955" name="__codelineno-0-955"></a>            <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-0-956" name="__codelineno-0-956"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_save_relationships</span><span class="p">(</span><span class="n">instance</span><span class="p">,</span> <span class="n">relationships_data</span><span class="p">)</span>
<a id="__codelineno-0-957" name="__codelineno-0-957"></a>            <span class="k">except</span> <span class="n">DjangoValidationError</span> <span class="k">as</span> <span class="n">error</span><span class="p">:</span>
<a id="__codelineno-0-958" name="__codelineno-0-958"></a>                <span class="k">raise</span> <span class="n">ValidationError</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">error</span><span class="p">))</span> <span class="kn">from</span> <span class="nn">error</span>
<a id="__codelineno-0-959" name="__codelineno-0-959"></a>        <span class="k">return</span> <span class="n">instance</span>
<a id="__codelineno-0-960" name="__codelineno-0-960"></a>
<a id="__codelineno-0-961" name="__codelineno-0-961"></a>    <span class="k">def</span> <span class="nf">_save_relationships</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">instance</span><span class="p">,</span> <span class="n">relationships</span><span class="p">):</span>
<a id="__codelineno-0-962" name="__codelineno-0-962"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Create/update RelationshipAssociations corresponding to a model instance.&quot;&quot;&quot;</span>
<a id="__codelineno-0-963" name="__codelineno-0-963"></a>        <span class="c1"># relationships has already passed RelationshipsDataField.to_internal_value(), so we can skip some try/excepts</span>
<a id="__codelineno-0-964" name="__codelineno-0-964"></a>        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;_save_relationships: </span><span class="si">%s</span><span class="s2"> : </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">instance</span><span class="p">,</span> <span class="n">relationships</span><span class="p">)</span>
<a id="__codelineno-0-965" name="__codelineno-0-965"></a>        <span class="k">for</span> <span class="n">relationship</span><span class="p">,</span> <span class="n">relationship_data</span> <span class="ow">in</span> <span class="n">relationships</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
<a id="__codelineno-0-966" name="__codelineno-0-966"></a>            <span class="k">for</span> <span class="n">other_side</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;source&quot;</span><span class="p">,</span> <span class="s2">&quot;destination&quot;</span><span class="p">,</span> <span class="s2">&quot;peer&quot;</span><span class="p">]:</span>
<a id="__codelineno-0-967" name="__codelineno-0-967"></a>                <span class="k">if</span> <span class="n">other_side</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">relationship_data</span><span class="p">:</span>
<a id="__codelineno-0-968" name="__codelineno-0-968"></a>                    <span class="k">continue</span>
<a id="__codelineno-0-969" name="__codelineno-0-969"></a>
<a id="__codelineno-0-970" name="__codelineno-0-970"></a>                <span class="n">other_type</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">relationship</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">other_side</span><span class="si">}</span><span class="s2">_type&quot;</span><span class="p">)</span>
<a id="__codelineno-0-971" name="__codelineno-0-971"></a>                <span class="n">other_side_model</span> <span class="o">=</span> <span class="n">other_type</span><span class="o">.</span><span class="n">model_class</span><span class="p">()</span>
<a id="__codelineno-0-972" name="__codelineno-0-972"></a>
<a id="__codelineno-0-973" name="__codelineno-0-973"></a>                <span class="n">expected_objects_data</span> <span class="o">=</span> <span class="n">relationship_data</span><span class="p">[</span><span class="n">other_side</span><span class="p">]</span>
<a id="__codelineno-0-974" name="__codelineno-0-974"></a>                <span class="n">expected_objects</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-0-975" name="__codelineno-0-975"></a>                    <span class="n">other_side_model</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="o">**</span><span class="n">object_data</span><span class="p">)</span> <span class="k">for</span> <span class="n">object_data</span> <span class="ow">in</span> <span class="n">expected_objects_data</span>
<a id="__codelineno-0-976" name="__codelineno-0-976"></a>                <span class="p">]</span>
<a id="__codelineno-0-977" name="__codelineno-0-977"></a>
<a id="__codelineno-0-978" name="__codelineno-0-978"></a>                <span class="n">this_side</span> <span class="o">=</span> <span class="n">RelationshipSideChoices</span><span class="o">.</span><span class="n">OPPOSITE</span><span class="p">[</span><span class="n">other_side</span><span class="p">]</span>
<a id="__codelineno-0-979" name="__codelineno-0-979"></a>
<a id="__codelineno-0-980" name="__codelineno-0-980"></a>                <span class="k">if</span> <span class="n">this_side</span> <span class="o">!=</span> <span class="n">RelationshipSideChoices</span><span class="o">.</span><span class="n">SIDE_PEER</span><span class="p">:</span>
<a id="__codelineno-0-981" name="__codelineno-0-981"></a>                    <span class="n">existing_associations</span> <span class="o">=</span> <span class="n">relationship</span><span class="o">.</span><span class="n">relationship_associations</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span>
<a id="__codelineno-0-982" name="__codelineno-0-982"></a>                        <span class="o">**</span><span class="p">{</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">this_side</span><span class="si">}</span><span class="s2">_id&quot;</span><span class="p">:</span> <span class="n">instance</span><span class="o">.</span><span class="n">pk</span><span class="p">}</span>
<a id="__codelineno-0-983" name="__codelineno-0-983"></a>                    <span class="p">)</span>
<a id="__codelineno-0-984" name="__codelineno-0-984"></a>                    <span class="n">existing_objects</span> <span class="o">=</span> <span class="p">[</span><span class="n">assoc</span><span class="o">.</span><span class="n">get_peer</span><span class="p">(</span><span class="n">instance</span><span class="p">)</span> <span class="k">for</span> <span class="n">assoc</span> <span class="ow">in</span> <span class="n">existing_associations</span><span class="p">]</span>
<a id="__codelineno-0-985" name="__codelineno-0-985"></a>                <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-986" name="__codelineno-0-986"></a>                    <span class="n">existing_associations_1</span> <span class="o">=</span> <span class="n">relationship</span><span class="o">.</span><span class="n">relationship_associations</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">source_id</span><span class="o">=</span><span class="n">instance</span><span class="o">.</span><span class="n">pk</span><span class="p">)</span>
<a id="__codelineno-0-987" name="__codelineno-0-987"></a>                    <span class="n">existing_objects_1</span> <span class="o">=</span> <span class="p">[</span><span class="n">assoc</span><span class="o">.</span><span class="n">get_peer</span><span class="p">(</span><span class="n">instance</span><span class="p">)</span> <span class="k">for</span> <span class="n">assoc</span> <span class="ow">in</span> <span class="n">existing_associations_1</span><span class="p">]</span>
<a id="__codelineno-0-988" name="__codelineno-0-988"></a>                    <span class="n">existing_associations_2</span> <span class="o">=</span> <span class="n">relationship</span><span class="o">.</span><span class="n">relationship_associations</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">destination_id</span><span class="o">=</span><span class="n">instance</span><span class="o">.</span><span class="n">pk</span><span class="p">)</span>
<a id="__codelineno-0-989" name="__codelineno-0-989"></a>                    <span class="n">existing_objects_2</span> <span class="o">=</span> <span class="p">[</span><span class="n">assoc</span><span class="o">.</span><span class="n">get_peer</span><span class="p">(</span><span class="n">instance</span><span class="p">)</span> <span class="k">for</span> <span class="n">assoc</span> <span class="ow">in</span> <span class="n">existing_associations_2</span><span class="p">]</span>
<a id="__codelineno-0-990" name="__codelineno-0-990"></a>                    <span class="n">existing_associations</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">existing_associations_1</span><span class="p">)</span> <span class="o">+</span> <span class="nb">list</span><span class="p">(</span><span class="n">existing_associations_2</span><span class="p">)</span>
<a id="__codelineno-0-991" name="__codelineno-0-991"></a>                    <span class="n">existing_objects</span> <span class="o">=</span> <span class="n">existing_objects_1</span> <span class="o">+</span> <span class="n">existing_objects_2</span>
<a id="__codelineno-0-992" name="__codelineno-0-992"></a>
<a id="__codelineno-0-993" name="__codelineno-0-993"></a>                <span class="n">add_objects</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-994" name="__codelineno-0-994"></a>                <span class="n">remove_assocs</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-995" name="__codelineno-0-995"></a>
<a id="__codelineno-0-996" name="__codelineno-0-996"></a>                <span class="k">for</span> <span class="n">obj</span><span class="p">,</span> <span class="n">assoc</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">existing_objects</span><span class="p">,</span> <span class="n">existing_associations</span><span class="p">):</span>
<a id="__codelineno-0-997" name="__codelineno-0-997"></a>                    <span class="k">if</span> <span class="n">obj</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">expected_objects</span><span class="p">:</span>
<a id="__codelineno-0-998" name="__codelineno-0-998"></a>                        <span class="n">remove_assocs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">assoc</span><span class="p">)</span>
<a id="__codelineno-0-999" name="__codelineno-0-999"></a>                <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">expected_objects</span><span class="p">:</span>
<a id="__codelineno-0-1000" name="__codelineno-0-1000"></a>                    <span class="k">if</span> <span class="n">obj</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">existing_objects</span><span class="p">:</span>
<a id="__codelineno-0-1001" name="__codelineno-0-1001"></a>                        <span class="n">add_objects</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
<a id="__codelineno-0-1002" name="__codelineno-0-1002"></a>
<a id="__codelineno-0-1003" name="__codelineno-0-1003"></a>                <span class="k">for</span> <span class="n">add_object</span> <span class="ow">in</span> <span class="n">add_objects</span><span class="p">:</span>
<a id="__codelineno-0-1004" name="__codelineno-0-1004"></a>                    <span class="k">if</span> <span class="s2">&quot;request&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">context</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">context</span><span class="p">[</span><span class="s2">&quot;request&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">has_perm</span><span class="p">(</span>
<a id="__codelineno-0-1005" name="__codelineno-0-1005"></a>                        <span class="s2">&quot;extras.add_relationshipassociation&quot;</span>
<a id="__codelineno-0-1006" name="__codelineno-0-1006"></a>                    <span class="p">):</span>
<a id="__codelineno-0-1007" name="__codelineno-0-1007"></a>                        <span class="k">raise</span> <span class="n">PermissionDenied</span><span class="p">(</span><span class="s2">&quot;This user does not have permission to create RelationshipAssociations.&quot;</span><span class="p">)</span>
<a id="__codelineno-0-1008" name="__codelineno-0-1008"></a>                    <span class="k">if</span> <span class="n">other_side</span> <span class="o">!=</span> <span class="n">RelationshipSideChoices</span><span class="o">.</span><span class="n">SIDE_SOURCE</span><span class="p">:</span>
<a id="__codelineno-0-1009" name="__codelineno-0-1009"></a>                        <span class="n">assoc</span> <span class="o">=</span> <span class="n">RelationshipAssociation</span><span class="p">(</span>
<a id="__codelineno-0-1010" name="__codelineno-0-1010"></a>                            <span class="n">relationship</span><span class="o">=</span><span class="n">relationship</span><span class="p">,</span>
<a id="__codelineno-0-1011" name="__codelineno-0-1011"></a>                            <span class="n">source_type</span><span class="o">=</span><span class="n">relationship</span><span class="o">.</span><span class="n">source_type</span><span class="p">,</span>
<a id="__codelineno-0-1012" name="__codelineno-0-1012"></a>                            <span class="n">source_id</span><span class="o">=</span><span class="n">instance</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
<a id="__codelineno-0-1013" name="__codelineno-0-1013"></a>                            <span class="n">destination_type</span><span class="o">=</span><span class="n">relationship</span><span class="o">.</span><span class="n">destination_type</span><span class="p">,</span>
<a id="__codelineno-0-1014" name="__codelineno-0-1014"></a>                            <span class="n">destination_id</span><span class="o">=</span><span class="n">add_object</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
<a id="__codelineno-0-1015" name="__codelineno-0-1015"></a>                        <span class="p">)</span>
<a id="__codelineno-0-1016" name="__codelineno-0-1016"></a>                    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-1017" name="__codelineno-0-1017"></a>                        <span class="n">assoc</span> <span class="o">=</span> <span class="n">RelationshipAssociation</span><span class="p">(</span>
<a id="__codelineno-0-1018" name="__codelineno-0-1018"></a>                            <span class="n">relationship</span><span class="o">=</span><span class="n">relationship</span><span class="p">,</span>
<a id="__codelineno-0-1019" name="__codelineno-0-1019"></a>                            <span class="n">source_type</span><span class="o">=</span><span class="n">relationship</span><span class="o">.</span><span class="n">source_type</span><span class="p">,</span>
<a id="__codelineno-0-1020" name="__codelineno-0-1020"></a>                            <span class="n">source_id</span><span class="o">=</span><span class="n">add_object</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
<a id="__codelineno-0-1021" name="__codelineno-0-1021"></a>                            <span class="n">destination_type</span><span class="o">=</span><span class="n">relationship</span><span class="o">.</span><span class="n">destination_type</span><span class="p">,</span>
<a id="__codelineno-0-1022" name="__codelineno-0-1022"></a>                            <span class="n">destination_id</span><span class="o">=</span><span class="n">instance</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
<a id="__codelineno-0-1023" name="__codelineno-0-1023"></a>                        <span class="p">)</span>
<a id="__codelineno-0-1024" name="__codelineno-0-1024"></a>                    <span class="n">assoc</span><span class="o">.</span><span class="n">validated_save</span><span class="p">()</span>  <span class="c1"># enforce relationship filter logic, etc.</span>
<a id="__codelineno-0-1025" name="__codelineno-0-1025"></a>                    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Created </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">assoc</span><span class="p">)</span>
<a id="__codelineno-0-1026" name="__codelineno-0-1026"></a>
<a id="__codelineno-0-1027" name="__codelineno-0-1027"></a>                <span class="k">for</span> <span class="n">remove_assoc</span> <span class="ow">in</span> <span class="n">remove_assocs</span><span class="p">:</span>
<a id="__codelineno-0-1028" name="__codelineno-0-1028"></a>                    <span class="k">if</span> <span class="s2">&quot;request&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">context</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">context</span><span class="p">[</span><span class="s2">&quot;request&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">has_perm</span><span class="p">(</span>
<a id="__codelineno-0-1029" name="__codelineno-0-1029"></a>                        <span class="s2">&quot;extras.delete_relationshipassociation&quot;</span>
<a id="__codelineno-0-1030" name="__codelineno-0-1030"></a>                    <span class="p">):</span>
<a id="__codelineno-0-1031" name="__codelineno-0-1031"></a>                        <span class="k">raise</span> <span class="n">PermissionDenied</span><span class="p">(</span><span class="s2">&quot;This user does not have permission to delete RelationshipAssociations.&quot;</span><span class="p">)</span>
<a id="__codelineno-0-1032" name="__codelineno-0-1032"></a>                    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Deleting </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">remove_assoc</span><span class="p">)</span>
<a id="__codelineno-0-1033" name="__codelineno-0-1033"></a>                    <span class="n">remove_assoc</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
<a id="__codelineno-0-1034" name="__codelineno-0-1034"></a>
<a id="__codelineno-0-1035" name="__codelineno-0-1035"></a>    <span class="k">def</span> <span class="nf">get_field_names</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">declared_fields</span><span class="p">,</span> <span class="n">info</span><span class="p">):</span>
<a id="__codelineno-0-1036" name="__codelineno-0-1036"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Ensure that &quot;relationships&quot; is included as an opt-in field on root serializers.&quot;&quot;&quot;</span>
<a id="__codelineno-0-1037" name="__codelineno-0-1037"></a>        <span class="n">fields</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">get_field_names</span><span class="p">(</span><span class="n">declared_fields</span><span class="p">,</span> <span class="n">info</span><span class="p">))</span>
<a id="__codelineno-0-1038" name="__codelineno-0-1038"></a>        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_nested</span><span class="p">:</span>
<a id="__codelineno-0-1039" name="__codelineno-0-1039"></a>            <span class="c1"># Only include relationships as opt-in.</span>
<a id="__codelineno-0-1040" name="__codelineno-0-1040"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">extend_field_names</span><span class="p">(</span><span class="n">fields</span><span class="p">,</span> <span class="s2">&quot;relationships&quot;</span><span class="p">,</span> <span class="n">opt_in_only</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-0-1041" name="__codelineno-0-1041"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-1042" name="__codelineno-0-1042"></a>            <span class="c1"># As relationships are expensive, do not include them on nested serializers even if opted in.</span>
<a id="__codelineno-0-1043" name="__codelineno-0-1043"></a>            <span class="k">if</span> <span class="s2">&quot;relationships&quot;</span> <span class="ow">in</span> <span class="n">fields</span><span class="p">:</span>
<a id="__codelineno-0-1044" name="__codelineno-0-1044"></a>                <span class="n">fields</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="s2">&quot;relationships&quot;</span><span class="p">)</span>
<a id="__codelineno-0-1045" name="__codelineno-0-1045"></a>        <span class="k">return</span> <span class="n">fields</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">










<div class="doc doc-object doc-function">



<h3 id="nautobot.core.api.serializers.RelationshipModelSerializerMixin.get_field_names" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_field_names</span><span class="p">(</span><span class="n">declared_fields</span><span class="p">,</span> <span class="n">info</span><span class="p">)</span></code>

<a href="#nautobot.core.api.serializers.RelationshipModelSerializerMixin.get_field_names" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Ensure that "relationships" is included as an opt-in field on root serializers.</p>

          <details class="quote">
            <summary>Source code in <code>nautobot/core/api/serializers.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-1035">1035</a></span>
<span class="normal"><a href="#__codelineno-0-1036">1036</a></span>
<span class="normal"><a href="#__codelineno-0-1037">1037</a></span>
<span class="normal"><a href="#__codelineno-0-1038">1038</a></span>
<span class="normal"><a href="#__codelineno-0-1039">1039</a></span>
<span class="normal"><a href="#__codelineno-0-1040">1040</a></span>
<span class="normal"><a href="#__codelineno-0-1041">1041</a></span>
<span class="normal"><a href="#__codelineno-0-1042">1042</a></span>
<span class="normal"><a href="#__codelineno-0-1043">1043</a></span>
<span class="normal"><a href="#__codelineno-0-1044">1044</a></span>
<span class="normal"><a href="#__codelineno-0-1045">1045</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-1035" name="__codelineno-0-1035"></a><span class="k">def</span> <span class="nf">get_field_names</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">declared_fields</span><span class="p">,</span> <span class="n">info</span><span class="p">):</span>
<a id="__codelineno-0-1036" name="__codelineno-0-1036"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Ensure that &quot;relationships&quot; is included as an opt-in field on root serializers.&quot;&quot;&quot;</span>
<a id="__codelineno-0-1037" name="__codelineno-0-1037"></a>    <span class="n">fields</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">get_field_names</span><span class="p">(</span><span class="n">declared_fields</span><span class="p">,</span> <span class="n">info</span><span class="p">))</span>
<a id="__codelineno-0-1038" name="__codelineno-0-1038"></a>    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_nested</span><span class="p">:</span>
<a id="__codelineno-0-1039" name="__codelineno-0-1039"></a>        <span class="c1"># Only include relationships as opt-in.</span>
<a id="__codelineno-0-1040" name="__codelineno-0-1040"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">extend_field_names</span><span class="p">(</span><span class="n">fields</span><span class="p">,</span> <span class="s2">&quot;relationships&quot;</span><span class="p">,</span> <span class="n">opt_in_only</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-0-1041" name="__codelineno-0-1041"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-1042" name="__codelineno-0-1042"></a>        <span class="c1"># As relationships are expensive, do not include them on nested serializers even if opted in.</span>
<a id="__codelineno-0-1043" name="__codelineno-0-1043"></a>        <span class="k">if</span> <span class="s2">&quot;relationships&quot;</span> <span class="ow">in</span> <span class="n">fields</span><span class="p">:</span>
<a id="__codelineno-0-1044" name="__codelineno-0-1044"></a>            <span class="n">fields</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="s2">&quot;relationships&quot;</span><span class="p">)</span>
<a id="__codelineno-0-1045" name="__codelineno-0-1045"></a>    <span class="k">return</span> <span class="n">fields</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="nautobot.apps.api.SerializedPKRelatedField" class="doc doc-heading">
          <code>nautobot.apps.api.SerializedPKRelatedField</code>


<a href="#nautobot.apps.api.SerializedPKRelatedField" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code><span title="rest_framework.relations.PrimaryKeyRelatedField">PrimaryKeyRelatedField</span></code></p>

  
      <p>Extends PrimaryKeyRelatedField to return a serialized object on read. This is useful for representing related
objects in a ManyToManyField while still allowing a set of primary keys to be written.</p>

            <details class="quote">
              <summary>Source code in <code>nautobot/core/api/fields.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-248">248</a></span>
<span class="normal"><a href="#__codelineno-0-249">249</a></span>
<span class="normal"><a href="#__codelineno-0-250">250</a></span>
<span class="normal"><a href="#__codelineno-0-251">251</a></span>
<span class="normal"><a href="#__codelineno-0-252">252</a></span>
<span class="normal"><a href="#__codelineno-0-253">253</a></span>
<span class="normal"><a href="#__codelineno-0-254">254</a></span>
<span class="normal"><a href="#__codelineno-0-255">255</a></span>
<span class="normal"><a href="#__codelineno-0-256">256</a></span>
<span class="normal"><a href="#__codelineno-0-257">257</a></span>
<span class="normal"><a href="#__codelineno-0-258">258</a></span>
<span class="normal"><a href="#__codelineno-0-259">259</a></span>
<span class="normal"><a href="#__codelineno-0-260">260</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-248" name="__codelineno-0-248"></a><span class="k">class</span> <span class="nc">SerializedPKRelatedField</span><span class="p">(</span><span class="n">PrimaryKeyRelatedField</span><span class="p">):</span>
<a id="__codelineno-0-249" name="__codelineno-0-249"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-250" name="__codelineno-0-250"></a><span class="sd">    Extends PrimaryKeyRelatedField to return a serialized object on read. This is useful for representing related</span>
<a id="__codelineno-0-251" name="__codelineno-0-251"></a><span class="sd">    objects in a ManyToManyField while still allowing a set of primary keys to be written.</span>
<a id="__codelineno-0-252" name="__codelineno-0-252"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-253" name="__codelineno-0-253"></a>
<a id="__codelineno-0-254" name="__codelineno-0-254"></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">serializer</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<a id="__codelineno-0-255" name="__codelineno-0-255"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">serializer</span> <span class="o">=</span> <span class="n">serializer</span>
<a id="__codelineno-0-256" name="__codelineno-0-256"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">pk_field</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;pk_field&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
<a id="__codelineno-0-257" name="__codelineno-0-257"></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
<a id="__codelineno-0-258" name="__codelineno-0-258"></a>
<a id="__codelineno-0-259" name="__codelineno-0-259"></a>    <span class="k">def</span> <span class="nf">to_representation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
<a id="__codelineno-0-260" name="__codelineno-0-260"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">serializer</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">context</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;request&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">context</span><span class="p">[</span><span class="s2">&quot;request&quot;</span><span class="p">]})</span><span class="o">.</span><span class="n">data</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">











  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="nautobot.apps.api.TaggedModelSerializerMixin" class="doc doc-heading">
          <code>nautobot.apps.api.TaggedModelSerializerMixin</code>


<a href="#nautobot.apps.api.TaggedModelSerializerMixin" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code><a class="autorefs autorefs-internal" title="nautobot.core.api.BaseModelSerializer" href="#nautobot.apps.api.BaseModelSerializer">BaseModelSerializer</a></code></p>


            <details class="quote">
              <summary>Source code in <code>nautobot/extras/api/mixins.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-11">11</a></span>
<span class="normal"><a href="#__codelineno-0-12">12</a></span>
<span class="normal"><a href="#__codelineno-0-13">13</a></span>
<span class="normal"><a href="#__codelineno-0-14">14</a></span>
<span class="normal"><a href="#__codelineno-0-15">15</a></span>
<span class="normal"><a href="#__codelineno-0-16">16</a></span>
<span class="normal"><a href="#__codelineno-0-17">17</a></span>
<span class="normal"><a href="#__codelineno-0-18">18</a></span>
<span class="normal"><a href="#__codelineno-0-19">19</a></span>
<span class="normal"><a href="#__codelineno-0-20">20</a></span>
<span class="normal"><a href="#__codelineno-0-21">21</a></span>
<span class="normal"><a href="#__codelineno-0-22">22</a></span>
<span class="normal"><a href="#__codelineno-0-23">23</a></span>
<span class="normal"><a href="#__codelineno-0-24">24</a></span>
<span class="normal"><a href="#__codelineno-0-25">25</a></span>
<span class="normal"><a href="#__codelineno-0-26">26</a></span>
<span class="normal"><a href="#__codelineno-0-27">27</a></span>
<span class="normal"><a href="#__codelineno-0-28">28</a></span>
<span class="normal"><a href="#__codelineno-0-29">29</a></span>
<span class="normal"><a href="#__codelineno-0-30">30</a></span>
<span class="normal"><a href="#__codelineno-0-31">31</a></span>
<span class="normal"><a href="#__codelineno-0-32">32</a></span>
<span class="normal"><a href="#__codelineno-0-33">33</a></span>
<span class="normal"><a href="#__codelineno-0-34">34</a></span>
<span class="normal"><a href="#__codelineno-0-35">35</a></span>
<span class="normal"><a href="#__codelineno-0-36">36</a></span>
<span class="normal"><a href="#__codelineno-0-37">37</a></span>
<span class="normal"><a href="#__codelineno-0-38">38</a></span>
<span class="normal"><a href="#__codelineno-0-39">39</a></span>
<span class="normal"><a href="#__codelineno-0-40">40</a></span>
<span class="normal"><a href="#__codelineno-0-41">41</a></span>
<span class="normal"><a href="#__codelineno-0-42">42</a></span>
<span class="normal"><a href="#__codelineno-0-43">43</a></span>
<span class="normal"><a href="#__codelineno-0-44">44</a></span>
<span class="normal"><a href="#__codelineno-0-45">45</a></span>
<span class="normal"><a href="#__codelineno-0-46">46</a></span>
<span class="normal"><a href="#__codelineno-0-47">47</a></span>
<span class="normal"><a href="#__codelineno-0-48">48</a></span>
<span class="normal"><a href="#__codelineno-0-49">49</a></span>
<span class="normal"><a href="#__codelineno-0-50">50</a></span>
<span class="normal"><a href="#__codelineno-0-51">51</a></span>
<span class="normal"><a href="#__codelineno-0-52">52</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-11" name="__codelineno-0-11"></a><span class="k">class</span> <span class="nc">TaggedModelSerializerMixin</span><span class="p">(</span><span class="n">BaseModelSerializer</span><span class="p">):</span>
<a id="__codelineno-0-12" name="__codelineno-0-12"></a>    <span class="k">def</span> <span class="nf">get_field_names</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">declared_fields</span><span class="p">,</span> <span class="n">info</span><span class="p">):</span>
<a id="__codelineno-0-13" name="__codelineno-0-13"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Ensure that &#39;tags&#39; field is always present except on nested serializers.&quot;&quot;&quot;</span>
<a id="__codelineno-0-14" name="__codelineno-0-14"></a>        <span class="n">fields</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">get_field_names</span><span class="p">(</span><span class="n">declared_fields</span><span class="p">,</span> <span class="n">info</span><span class="p">))</span>
<a id="__codelineno-0-15" name="__codelineno-0-15"></a>        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_nested</span><span class="p">:</span>
<a id="__codelineno-0-16" name="__codelineno-0-16"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">extend_field_names</span><span class="p">(</span><span class="n">fields</span><span class="p">,</span> <span class="s2">&quot;tags&quot;</span><span class="p">)</span>
<a id="__codelineno-0-17" name="__codelineno-0-17"></a>        <span class="k">return</span> <span class="n">fields</span>
<a id="__codelineno-0-18" name="__codelineno-0-18"></a>
<a id="__codelineno-0-19" name="__codelineno-0-19"></a>    <span class="k">def</span> <span class="nf">create</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">validated_data</span><span class="p">):</span>
<a id="__codelineno-0-20" name="__codelineno-0-20"></a>        <span class="n">tags</span> <span class="o">=</span> <span class="n">validated_data</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;tags&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
<a id="__codelineno-0-21" name="__codelineno-0-21"></a>        <span class="n">instance</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">validated_data</span><span class="p">)</span>
<a id="__codelineno-0-22" name="__codelineno-0-22"></a>
<a id="__codelineno-0-23" name="__codelineno-0-23"></a>        <span class="k">if</span> <span class="n">tags</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-24" name="__codelineno-0-24"></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_save_tags</span><span class="p">(</span><span class="n">instance</span><span class="p">,</span> <span class="n">tags</span><span class="p">)</span>
<a id="__codelineno-0-25" name="__codelineno-0-25"></a>        <span class="k">return</span> <span class="n">instance</span>
<a id="__codelineno-0-26" name="__codelineno-0-26"></a>
<a id="__codelineno-0-27" name="__codelineno-0-27"></a>    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">instance</span><span class="p">,</span> <span class="n">validated_data</span><span class="p">):</span>
<a id="__codelineno-0-28" name="__codelineno-0-28"></a>        <span class="n">tags</span> <span class="o">=</span> <span class="n">validated_data</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;tags&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
<a id="__codelineno-0-29" name="__codelineno-0-29"></a>
<a id="__codelineno-0-30" name="__codelineno-0-30"></a>        <span class="c1"># Cache tags on instance for change logging</span>
<a id="__codelineno-0-31" name="__codelineno-0-31"></a>        <span class="n">instance</span><span class="o">.</span><span class="n">_tags</span> <span class="o">=</span> <span class="n">tags</span> <span class="ow">or</span> <span class="p">[]</span>
<a id="__codelineno-0-32" name="__codelineno-0-32"></a>
<a id="__codelineno-0-33" name="__codelineno-0-33"></a>        <span class="n">instance</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">instance</span><span class="p">,</span> <span class="n">validated_data</span><span class="p">)</span>
<a id="__codelineno-0-34" name="__codelineno-0-34"></a>
<a id="__codelineno-0-35" name="__codelineno-0-35"></a>        <span class="k">if</span> <span class="n">tags</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-36" name="__codelineno-0-36"></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_save_tags</span><span class="p">(</span><span class="n">instance</span><span class="p">,</span> <span class="n">tags</span><span class="p">)</span>
<a id="__codelineno-0-37" name="__codelineno-0-37"></a>        <span class="k">return</span> <span class="n">instance</span>
<a id="__codelineno-0-38" name="__codelineno-0-38"></a>
<a id="__codelineno-0-39" name="__codelineno-0-39"></a>    <span class="k">def</span> <span class="nf">_save_tags</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">instance</span><span class="p">,</span> <span class="n">tags</span><span class="p">):</span>
<a id="__codelineno-0-40" name="__codelineno-0-40"></a>        <span class="k">if</span> <span class="n">tags</span><span class="p">:</span>
<a id="__codelineno-0-41" name="__codelineno-0-41"></a>            <span class="n">instance</span><span class="o">.</span><span class="n">tags</span><span class="o">.</span><span class="n">set</span><span class="p">([</span><span class="n">t</span><span class="o">.</span><span class="n">name</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">tags</span><span class="p">])</span>
<a id="__codelineno-0-42" name="__codelineno-0-42"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-43" name="__codelineno-0-43"></a>            <span class="n">instance</span><span class="o">.</span><span class="n">tags</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
<a id="__codelineno-0-44" name="__codelineno-0-44"></a>
<a id="__codelineno-0-45" name="__codelineno-0-45"></a>        <span class="k">return</span> <span class="n">instance</span>
<a id="__codelineno-0-46" name="__codelineno-0-46"></a>
<a id="__codelineno-0-47" name="__codelineno-0-47"></a>    <span class="k">def</span> <span class="nf">to_representation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">instance</span><span class="p">):</span>
<a id="__codelineno-0-48" name="__codelineno-0-48"></a>        <span class="n">data</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">to_representation</span><span class="p">(</span><span class="n">instance</span><span class="p">)</span>
<a id="__codelineno-0-49" name="__codelineno-0-49"></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_csv_request</span><span class="p">()</span> <span class="ow">and</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;tags&quot;</span><span class="p">):</span>
<a id="__codelineno-0-50" name="__codelineno-0-50"></a>            <span class="c1"># Export tag names for CSV</span>
<a id="__codelineno-0-51" name="__codelineno-0-51"></a>            <span class="n">data</span><span class="p">[</span><span class="s2">&quot;tags&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">instance</span><span class="o">.</span><span class="n">tags</span><span class="o">.</span><span class="n">values_list</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="n">flat</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
<a id="__codelineno-0-52" name="__codelineno-0-52"></a>        <span class="k">return</span> <span class="n">data</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">










<div class="doc doc-object doc-function">



<h3 id="nautobot.extras.api.mixins.TaggedModelSerializerMixin.get_field_names" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_field_names</span><span class="p">(</span><span class="n">declared_fields</span><span class="p">,</span> <span class="n">info</span><span class="p">)</span></code>

<a href="#nautobot.extras.api.mixins.TaggedModelSerializerMixin.get_field_names" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Ensure that 'tags' field is always present except on nested serializers.</p>

          <details class="quote">
            <summary>Source code in <code>nautobot/extras/api/mixins.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-12">12</a></span>
<span class="normal"><a href="#__codelineno-0-13">13</a></span>
<span class="normal"><a href="#__codelineno-0-14">14</a></span>
<span class="normal"><a href="#__codelineno-0-15">15</a></span>
<span class="normal"><a href="#__codelineno-0-16">16</a></span>
<span class="normal"><a href="#__codelineno-0-17">17</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-12" name="__codelineno-0-12"></a><span class="k">def</span> <span class="nf">get_field_names</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">declared_fields</span><span class="p">,</span> <span class="n">info</span><span class="p">):</span>
<a id="__codelineno-0-13" name="__codelineno-0-13"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Ensure that &#39;tags&#39; field is always present except on nested serializers.&quot;&quot;&quot;</span>
<a id="__codelineno-0-14" name="__codelineno-0-14"></a>    <span class="n">fields</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">get_field_names</span><span class="p">(</span><span class="n">declared_fields</span><span class="p">,</span> <span class="n">info</span><span class="p">))</span>
<a id="__codelineno-0-15" name="__codelineno-0-15"></a>    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_nested</span><span class="p">:</span>
<a id="__codelineno-0-16" name="__codelineno-0-16"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">extend_field_names</span><span class="p">(</span><span class="n">fields</span><span class="p">,</span> <span class="s2">&quot;tags&quot;</span><span class="p">)</span>
<a id="__codelineno-0-17" name="__codelineno-0-17"></a>    <span class="k">return</span> <span class="n">fields</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="nautobot.apps.api.TimeZoneSerializerField" class="doc doc-heading">
          <code>nautobot.apps.api.TimeZoneSerializerField</code>


<a href="#nautobot.apps.api.TimeZoneSerializerField" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code><span title="timezone_field.rest_framework.TimeZoneSerializerField">TimeZoneSerializerField_</span></code></p>

  
      <p>Represents a time zone as a string.</p>

            <details class="quote">
              <summary>Source code in <code>nautobot/core/api/fields.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-263">263</a></span>
<span class="normal"><a href="#__codelineno-0-264">264</a></span>
<span class="normal"><a href="#__codelineno-0-265">265</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-263" name="__codelineno-0-263"></a><span class="nd">@extend_schema_field</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span>
<a id="__codelineno-0-264" name="__codelineno-0-264"></a><span class="k">class</span> <span class="nc">TimeZoneSerializerField</span><span class="p">(</span><span class="n">TimeZoneSerializerField_</span><span class="p">):</span>
<a id="__codelineno-0-265" name="__codelineno-0-265"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Represents a time zone as a string.&quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
            </details>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="nautobot.apps.api.TreeModelSerializerMixin" class="doc doc-heading">
          <code>nautobot.apps.api.TreeModelSerializerMixin</code>


<a href="#nautobot.apps.api.TreeModelSerializerMixin" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code><a class="autorefs autorefs-internal" title="nautobot.core.api.serializers.BaseModelSerializer" href="#nautobot.apps.api.BaseModelSerializer">BaseModelSerializer</a></code></p>

  
      <p>Add a <code>tree_depth</code> field to non-nested model serializers based on django-tree-queries.</p>

            <details class="quote">
              <summary>Source code in <code>nautobot/core/api/serializers.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-717">717</a></span>
<span class="normal"><a href="#__codelineno-0-718">718</a></span>
<span class="normal"><a href="#__codelineno-0-719">719</a></span>
<span class="normal"><a href="#__codelineno-0-720">720</a></span>
<span class="normal"><a href="#__codelineno-0-721">721</a></span>
<span class="normal"><a href="#__codelineno-0-722">722</a></span>
<span class="normal"><a href="#__codelineno-0-723">723</a></span>
<span class="normal"><a href="#__codelineno-0-724">724</a></span>
<span class="normal"><a href="#__codelineno-0-725">725</a></span>
<span class="normal"><a href="#__codelineno-0-726">726</a></span>
<span class="normal"><a href="#__codelineno-0-727">727</a></span>
<span class="normal"><a href="#__codelineno-0-728">728</a></span>
<span class="normal"><a href="#__codelineno-0-729">729</a></span>
<span class="normal"><a href="#__codelineno-0-730">730</a></span>
<span class="normal"><a href="#__codelineno-0-731">731</a></span>
<span class="normal"><a href="#__codelineno-0-732">732</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-717" name="__codelineno-0-717"></a><span class="k">class</span> <span class="nc">TreeModelSerializerMixin</span><span class="p">(</span><span class="n">BaseModelSerializer</span><span class="p">):</span>
<a id="__codelineno-0-718" name="__codelineno-0-718"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Add a `tree_depth` field to non-nested model serializers based on django-tree-queries.&quot;&quot;&quot;</span>
<a id="__codelineno-0-719" name="__codelineno-0-719"></a>
<a id="__codelineno-0-720" name="__codelineno-0-720"></a>    <span class="n">tree_depth</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">SerializerMethodField</span><span class="p">(</span><span class="n">read_only</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-0-721" name="__codelineno-0-721"></a>
<a id="__codelineno-0-722" name="__codelineno-0-722"></a>    <span class="nd">@extend_schema_field</span><span class="p">(</span><span class="n">serializers</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">(</span><span class="n">allow_null</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
<a id="__codelineno-0-723" name="__codelineno-0-723"></a>    <span class="k">def</span> <span class="nf">get_tree_depth</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
<a id="__codelineno-0-724" name="__codelineno-0-724"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;The `tree_depth` is not a database field, but an annotation automatically added by django-tree-queries.&quot;&quot;&quot;</span>
<a id="__codelineno-0-725" name="__codelineno-0-725"></a>        <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="s2">&quot;tree_depth&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
<a id="__codelineno-0-726" name="__codelineno-0-726"></a>
<a id="__codelineno-0-727" name="__codelineno-0-727"></a>    <span class="k">def</span> <span class="nf">get_field_names</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">declared_fields</span><span class="p">,</span> <span class="n">info</span><span class="p">):</span>
<a id="__codelineno-0-728" name="__codelineno-0-728"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Ensure that &quot;tree_depth&quot; is included on root serializers only, as nested objects are not annotated.&quot;&quot;&quot;</span>
<a id="__codelineno-0-729" name="__codelineno-0-729"></a>        <span class="n">fields</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">get_field_names</span><span class="p">(</span><span class="n">declared_fields</span><span class="p">,</span> <span class="n">info</span><span class="p">))</span>
<a id="__codelineno-0-730" name="__codelineno-0-730"></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_nested</span> <span class="ow">and</span> <span class="s2">&quot;tree_depth&quot;</span> <span class="ow">in</span> <span class="n">fields</span><span class="p">:</span>
<a id="__codelineno-0-731" name="__codelineno-0-731"></a>            <span class="n">fields</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="s2">&quot;tree_depth&quot;</span><span class="p">)</span>
<a id="__codelineno-0-732" name="__codelineno-0-732"></a>        <span class="k">return</span> <span class="n">fields</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">










<div class="doc doc-object doc-function">



<h3 id="nautobot.core.api.serializers.TreeModelSerializerMixin.get_field_names" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_field_names</span><span class="p">(</span><span class="n">declared_fields</span><span class="p">,</span> <span class="n">info</span><span class="p">)</span></code>

<a href="#nautobot.core.api.serializers.TreeModelSerializerMixin.get_field_names" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Ensure that "tree_depth" is included on root serializers only, as nested objects are not annotated.</p>

          <details class="quote">
            <summary>Source code in <code>nautobot/core/api/serializers.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-727">727</a></span>
<span class="normal"><a href="#__codelineno-0-728">728</a></span>
<span class="normal"><a href="#__codelineno-0-729">729</a></span>
<span class="normal"><a href="#__codelineno-0-730">730</a></span>
<span class="normal"><a href="#__codelineno-0-731">731</a></span>
<span class="normal"><a href="#__codelineno-0-732">732</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-727" name="__codelineno-0-727"></a><span class="k">def</span> <span class="nf">get_field_names</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">declared_fields</span><span class="p">,</span> <span class="n">info</span><span class="p">):</span>
<a id="__codelineno-0-728" name="__codelineno-0-728"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Ensure that &quot;tree_depth&quot; is included on root serializers only, as nested objects are not annotated.&quot;&quot;&quot;</span>
<a id="__codelineno-0-729" name="__codelineno-0-729"></a>    <span class="n">fields</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">get_field_names</span><span class="p">(</span><span class="n">declared_fields</span><span class="p">,</span> <span class="n">info</span><span class="p">))</span>
<a id="__codelineno-0-730" name="__codelineno-0-730"></a>    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_nested</span> <span class="ow">and</span> <span class="s2">&quot;tree_depth&quot;</span> <span class="ow">in</span> <span class="n">fields</span><span class="p">:</span>
<a id="__codelineno-0-731" name="__codelineno-0-731"></a>        <span class="n">fields</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="s2">&quot;tree_depth&quot;</span><span class="p">)</span>
<a id="__codelineno-0-732" name="__codelineno-0-732"></a>    <span class="k">return</span> <span class="n">fields</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h3 id="nautobot.core.api.serializers.TreeModelSerializerMixin.get_tree_depth" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_tree_depth</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span></code>

<a href="#nautobot.core.api.serializers.TreeModelSerializerMixin.get_tree_depth" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>The <code>tree_depth</code> is not a database field, but an annotation automatically added by django-tree-queries.</p>

          <details class="quote">
            <summary>Source code in <code>nautobot/core/api/serializers.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-722">722</a></span>
<span class="normal"><a href="#__codelineno-0-723">723</a></span>
<span class="normal"><a href="#__codelineno-0-724">724</a></span>
<span class="normal"><a href="#__codelineno-0-725">725</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-722" name="__codelineno-0-722"></a><span class="nd">@extend_schema_field</span><span class="p">(</span><span class="n">serializers</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">(</span><span class="n">allow_null</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
<a id="__codelineno-0-723" name="__codelineno-0-723"></a><span class="k">def</span> <span class="nf">get_tree_depth</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
<a id="__codelineno-0-724" name="__codelineno-0-724"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;The `tree_depth` is not a database field, but an annotation automatically added by django-tree-queries.&quot;&quot;&quot;</span>
<a id="__codelineno-0-725" name="__codelineno-0-725"></a>    <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="s2">&quot;tree_depth&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="nautobot.apps.api.ValidatedModelSerializer" class="doc doc-heading">
          <code>nautobot.apps.api.ValidatedModelSerializer</code>


<a href="#nautobot.apps.api.ValidatedModelSerializer" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code><a class="autorefs autorefs-internal" title="nautobot.core.api.serializers.BaseModelSerializer" href="#nautobot.apps.api.BaseModelSerializer">BaseModelSerializer</a></code></p>

  
      <p>Extends the built-in ModelSerializer to enforce calling full_clean() on a copy of the associated instance during
validation. (DRF does not do this by default; see https://github.com/encode/django-rest-framework/issues/3144)</p>

            <details class="quote">
              <summary>Source code in <code>nautobot/core/api/serializers.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-735">735</a></span>
<span class="normal"><a href="#__codelineno-0-736">736</a></span>
<span class="normal"><a href="#__codelineno-0-737">737</a></span>
<span class="normal"><a href="#__codelineno-0-738">738</a></span>
<span class="normal"><a href="#__codelineno-0-739">739</a></span>
<span class="normal"><a href="#__codelineno-0-740">740</a></span>
<span class="normal"><a href="#__codelineno-0-741">741</a></span>
<span class="normal"><a href="#__codelineno-0-742">742</a></span>
<span class="normal"><a href="#__codelineno-0-743">743</a></span>
<span class="normal"><a href="#__codelineno-0-744">744</a></span>
<span class="normal"><a href="#__codelineno-0-745">745</a></span>
<span class="normal"><a href="#__codelineno-0-746">746</a></span>
<span class="normal"><a href="#__codelineno-0-747">747</a></span>
<span class="normal"><a href="#__codelineno-0-748">748</a></span>
<span class="normal"><a href="#__codelineno-0-749">749</a></span>
<span class="normal"><a href="#__codelineno-0-750">750</a></span>
<span class="normal"><a href="#__codelineno-0-751">751</a></span>
<span class="normal"><a href="#__codelineno-0-752">752</a></span>
<span class="normal"><a href="#__codelineno-0-753">753</a></span>
<span class="normal"><a href="#__codelineno-0-754">754</a></span>
<span class="normal"><a href="#__codelineno-0-755">755</a></span>
<span class="normal"><a href="#__codelineno-0-756">756</a></span>
<span class="normal"><a href="#__codelineno-0-757">757</a></span>
<span class="normal"><a href="#__codelineno-0-758">758</a></span>
<span class="normal"><a href="#__codelineno-0-759">759</a></span>
<span class="normal"><a href="#__codelineno-0-760">760</a></span>
<span class="normal"><a href="#__codelineno-0-761">761</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-735" name="__codelineno-0-735"></a><span class="k">class</span> <span class="nc">ValidatedModelSerializer</span><span class="p">(</span><span class="n">BaseModelSerializer</span><span class="p">):</span>
<a id="__codelineno-0-736" name="__codelineno-0-736"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-737" name="__codelineno-0-737"></a><span class="sd">    Extends the built-in ModelSerializer to enforce calling full_clean() on a copy of the associated instance during</span>
<a id="__codelineno-0-738" name="__codelineno-0-738"></a><span class="sd">    validation. (DRF does not do this by default; see https://github.com/encode/django-rest-framework/issues/3144)</span>
<a id="__codelineno-0-739" name="__codelineno-0-739"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-740" name="__codelineno-0-740"></a>
<a id="__codelineno-0-741" name="__codelineno-0-741"></a>    <span class="k">def</span> <span class="nf">validate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
<a id="__codelineno-0-742" name="__codelineno-0-742"></a>        <span class="c1"># Remove custom fields data and tags (if any) prior to model validation</span>
<a id="__codelineno-0-743" name="__codelineno-0-743"></a>        <span class="n">attrs</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<a id="__codelineno-0-744" name="__codelineno-0-744"></a>        <span class="n">attrs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;custom_fields&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
<a id="__codelineno-0-745" name="__codelineno-0-745"></a>        <span class="n">attrs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;relationships&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
<a id="__codelineno-0-746" name="__codelineno-0-746"></a>        <span class="n">attrs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;tags&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
<a id="__codelineno-0-747" name="__codelineno-0-747"></a>
<a id="__codelineno-0-748" name="__codelineno-0-748"></a>        <span class="c1"># Skip ManyToManyFields</span>
<a id="__codelineno-0-749" name="__codelineno-0-749"></a>        <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">Meta</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">get_fields</span><span class="p">():</span>
<a id="__codelineno-0-750" name="__codelineno-0-750"></a>            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">field</span><span class="p">,</span> <span class="n">models</span><span class="o">.</span><span class="n">ManyToManyField</span><span class="p">):</span>
<a id="__codelineno-0-751" name="__codelineno-0-751"></a>                <span class="n">attrs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
<a id="__codelineno-0-752" name="__codelineno-0-752"></a>
<a id="__codelineno-0-753" name="__codelineno-0-753"></a>        <span class="c1"># Run clean() on an instance of the model</span>
<a id="__codelineno-0-754" name="__codelineno-0-754"></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">instance</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-755" name="__codelineno-0-755"></a>            <span class="n">instance</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Meta</span><span class="o">.</span><span class="n">model</span><span class="p">(</span><span class="o">**</span><span class="n">attrs</span><span class="p">)</span>
<a id="__codelineno-0-756" name="__codelineno-0-756"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-757" name="__codelineno-0-757"></a>            <span class="n">instance</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">instance</span>
<a id="__codelineno-0-758" name="__codelineno-0-758"></a>            <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">attrs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
<a id="__codelineno-0-759" name="__codelineno-0-759"></a>                <span class="nb">setattr</span><span class="p">(</span><span class="n">instance</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span>
<a id="__codelineno-0-760" name="__codelineno-0-760"></a>        <span class="n">instance</span><span class="o">.</span><span class="n">full_clean</span><span class="p">()</span>
<a id="__codelineno-0-761" name="__codelineno-0-761"></a>        <span class="k">return</span> <span class="n">data</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">











  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="nautobot.apps.api.WritableNestedSerializer" class="doc doc-heading">
          <code>nautobot.apps.api.WritableNestedSerializer</code>


<a href="#nautobot.apps.api.WritableNestedSerializer" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code><a class="autorefs autorefs-internal" title="nautobot.core.api.serializers.BaseModelSerializer" href="#nautobot.apps.api.BaseModelSerializer">BaseModelSerializer</a></code></p>

  
      <p>Returns a nested representation of an object on read, but accepts either the nested representation or the
primary key value on write operations.</p>
<p>Note that subclasses will always have a read-only <code>object_type</code> field, which represents the content-type of this
serializer's associated model (e.g. "dcim.device"). This is required as the OpenAPI schema, using the
PolymorphicProxySerializer class defined below, relies upon this field as a way to identify to the client
which of several possible nested serializers are in use for a given attribute.</p>

            <details class="quote">
              <summary>Source code in <code>nautobot/core/api/serializers.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-764">764</a></span>
<span class="normal"><a href="#__codelineno-0-765">765</a></span>
<span class="normal"><a href="#__codelineno-0-766">766</a></span>
<span class="normal"><a href="#__codelineno-0-767">767</a></span>
<span class="normal"><a href="#__codelineno-0-768">768</a></span>
<span class="normal"><a href="#__codelineno-0-769">769</a></span>
<span class="normal"><a href="#__codelineno-0-770">770</a></span>
<span class="normal"><a href="#__codelineno-0-771">771</a></span>
<span class="normal"><a href="#__codelineno-0-772">772</a></span>
<span class="normal"><a href="#__codelineno-0-773">773</a></span>
<span class="normal"><a href="#__codelineno-0-774">774</a></span>
<span class="normal"><a href="#__codelineno-0-775">775</a></span>
<span class="normal"><a href="#__codelineno-0-776">776</a></span>
<span class="normal"><a href="#__codelineno-0-777">777</a></span>
<span class="normal"><a href="#__codelineno-0-778">778</a></span>
<span class="normal"><a href="#__codelineno-0-779">779</a></span>
<span class="normal"><a href="#__codelineno-0-780">780</a></span>
<span class="normal"><a href="#__codelineno-0-781">781</a></span>
<span class="normal"><a href="#__codelineno-0-782">782</a></span>
<span class="normal"><a href="#__codelineno-0-783">783</a></span>
<span class="normal"><a href="#__codelineno-0-784">784</a></span>
<span class="normal"><a href="#__codelineno-0-785">785</a></span>
<span class="normal"><a href="#__codelineno-0-786">786</a></span>
<span class="normal"><a href="#__codelineno-0-787">787</a></span>
<span class="normal"><a href="#__codelineno-0-788">788</a></span>
<span class="normal"><a href="#__codelineno-0-789">789</a></span>
<span class="normal"><a href="#__codelineno-0-790">790</a></span>
<span class="normal"><a href="#__codelineno-0-791">791</a></span>
<span class="normal"><a href="#__codelineno-0-792">792</a></span>
<span class="normal"><a href="#__codelineno-0-793">793</a></span>
<span class="normal"><a href="#__codelineno-0-794">794</a></span>
<span class="normal"><a href="#__codelineno-0-795">795</a></span>
<span class="normal"><a href="#__codelineno-0-796">796</a></span>
<span class="normal"><a href="#__codelineno-0-797">797</a></span>
<span class="normal"><a href="#__codelineno-0-798">798</a></span>
<span class="normal"><a href="#__codelineno-0-799">799</a></span>
<span class="normal"><a href="#__codelineno-0-800">800</a></span>
<span class="normal"><a href="#__codelineno-0-801">801</a></span>
<span class="normal"><a href="#__codelineno-0-802">802</a></span>
<span class="normal"><a href="#__codelineno-0-803">803</a></span>
<span class="normal"><a href="#__codelineno-0-804">804</a></span>
<span class="normal"><a href="#__codelineno-0-805">805</a></span>
<span class="normal"><a href="#__codelineno-0-806">806</a></span>
<span class="normal"><a href="#__codelineno-0-807">807</a></span>
<span class="normal"><a href="#__codelineno-0-808">808</a></span>
<span class="normal"><a href="#__codelineno-0-809">809</a></span>
<span class="normal"><a href="#__codelineno-0-810">810</a></span>
<span class="normal"><a href="#__codelineno-0-811">811</a></span>
<span class="normal"><a href="#__codelineno-0-812">812</a></span>
<span class="normal"><a href="#__codelineno-0-813">813</a></span>
<span class="normal"><a href="#__codelineno-0-814">814</a></span>
<span class="normal"><a href="#__codelineno-0-815">815</a></span>
<span class="normal"><a href="#__codelineno-0-816">816</a></span>
<span class="normal"><a href="#__codelineno-0-817">817</a></span>
<span class="normal"><a href="#__codelineno-0-818">818</a></span>
<span class="normal"><a href="#__codelineno-0-819">819</a></span>
<span class="normal"><a href="#__codelineno-0-820">820</a></span>
<span class="normal"><a href="#__codelineno-0-821">821</a></span>
<span class="normal"><a href="#__codelineno-0-822">822</a></span>
<span class="normal"><a href="#__codelineno-0-823">823</a></span>
<span class="normal"><a href="#__codelineno-0-824">824</a></span>
<span class="normal"><a href="#__codelineno-0-825">825</a></span>
<span class="normal"><a href="#__codelineno-0-826">826</a></span>
<span class="normal"><a href="#__codelineno-0-827">827</a></span>
<span class="normal"><a href="#__codelineno-0-828">828</a></span>
<span class="normal"><a href="#__codelineno-0-829">829</a></span>
<span class="normal"><a href="#__codelineno-0-830">830</a></span>
<span class="normal"><a href="#__codelineno-0-831">831</a></span>
<span class="normal"><a href="#__codelineno-0-832">832</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-764" name="__codelineno-0-764"></a><span class="k">class</span> <span class="nc">WritableNestedSerializer</span><span class="p">(</span><span class="n">BaseModelSerializer</span><span class="p">):</span>
<a id="__codelineno-0-765" name="__codelineno-0-765"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-766" name="__codelineno-0-766"></a><span class="sd">    Returns a nested representation of an object on read, but accepts either the nested representation or the</span>
<a id="__codelineno-0-767" name="__codelineno-0-767"></a><span class="sd">    primary key value on write operations.</span>
<a id="__codelineno-0-768" name="__codelineno-0-768"></a>
<a id="__codelineno-0-769" name="__codelineno-0-769"></a><span class="sd">    Note that subclasses will always have a read-only `object_type` field, which represents the content-type of this</span>
<a id="__codelineno-0-770" name="__codelineno-0-770"></a><span class="sd">    serializer&#39;s associated model (e.g. &quot;dcim.device&quot;). This is required as the OpenAPI schema, using the</span>
<a id="__codelineno-0-771" name="__codelineno-0-771"></a><span class="sd">    PolymorphicProxySerializer class defined below, relies upon this field as a way to identify to the client</span>
<a id="__codelineno-0-772" name="__codelineno-0-772"></a><span class="sd">    which of several possible nested serializers are in use for a given attribute.</span>
<a id="__codelineno-0-773" name="__codelineno-0-773"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-774" name="__codelineno-0-774"></a>
<a id="__codelineno-0-775" name="__codelineno-0-775"></a>    <span class="k">def</span> <span class="nf">get_queryset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-776" name="__codelineno-0-776"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">Meta</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">objects</span>
<a id="__codelineno-0-777" name="__codelineno-0-777"></a>
<a id="__codelineno-0-778" name="__codelineno-0-778"></a>    <span class="k">def</span> <span class="nf">to_internal_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
<a id="__codelineno-0-779" name="__codelineno-0-779"></a>        <span class="k">if</span> <span class="n">data</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-780" name="__codelineno-0-780"></a>            <span class="k">return</span> <span class="kc">None</span>
<a id="__codelineno-0-781" name="__codelineno-0-781"></a>
<a id="__codelineno-0-782" name="__codelineno-0-782"></a>        <span class="c1"># Dictionary of related object attributes</span>
<a id="__codelineno-0-783" name="__codelineno-0-783"></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
<a id="__codelineno-0-784" name="__codelineno-0-784"></a>            <span class="n">params</span> <span class="o">=</span> <span class="n">dict_to_filter_params</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<a id="__codelineno-0-785" name="__codelineno-0-785"></a>
<a id="__codelineno-0-786" name="__codelineno-0-786"></a>            <span class="c1"># Make output from a WritableNestedSerializer &quot;round-trip&quot; capable by automatically stripping from the</span>
<a id="__codelineno-0-787" name="__codelineno-0-787"></a>            <span class="c1"># data any serializer fields that do not correspond to a specific model field</span>
<a id="__codelineno-0-788" name="__codelineno-0-788"></a>            <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">field_instance</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
<a id="__codelineno-0-789" name="__codelineno-0-789"></a>                <span class="k">if</span> <span class="n">field_name</span> <span class="ow">in</span> <span class="n">params</span> <span class="ow">and</span> <span class="n">field_instance</span><span class="o">.</span><span class="n">source</span> <span class="o">==</span> <span class="s2">&quot;*&quot;</span><span class="p">:</span>
<a id="__codelineno-0-790" name="__codelineno-0-790"></a>                    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Discarding non-database field </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">field_name</span><span class="p">)</span>
<a id="__codelineno-0-791" name="__codelineno-0-791"></a>                    <span class="k">del</span> <span class="n">params</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span>
<a id="__codelineno-0-792" name="__codelineno-0-792"></a>
<a id="__codelineno-0-793" name="__codelineno-0-793"></a>            <span class="n">queryset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_queryset</span><span class="p">()</span>
<a id="__codelineno-0-794" name="__codelineno-0-794"></a>            <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-0-795" name="__codelineno-0-795"></a>                <span class="k">return</span> <span class="n">queryset</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="o">**</span><span class="n">params</span><span class="p">)</span>
<a id="__codelineno-0-796" name="__codelineno-0-796"></a>            <span class="k">except</span> <span class="n">ObjectDoesNotExist</span><span class="p">:</span>
<a id="__codelineno-0-797" name="__codelineno-0-797"></a>                <span class="k">raise</span> <span class="n">ValidationError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Related object not found using the provided attributes: </span><span class="si">{</span><span class="n">params</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-798" name="__codelineno-0-798"></a>            <span class="k">except</span> <span class="n">MultipleObjectsReturned</span><span class="p">:</span>
<a id="__codelineno-0-799" name="__codelineno-0-799"></a>                <span class="k">raise</span> <span class="n">ValidationError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Multiple objects match the provided attributes: </span><span class="si">{</span><span class="n">params</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-800" name="__codelineno-0-800"></a>            <span class="k">except</span> <span class="n">FieldError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
<a id="__codelineno-0-801" name="__codelineno-0-801"></a>                <span class="k">raise</span> <span class="n">ValidationError</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
<a id="__codelineno-0-802" name="__codelineno-0-802"></a>
<a id="__codelineno-0-803" name="__codelineno-0-803"></a>        <span class="n">queryset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_queryset</span><span class="p">()</span>
<a id="__codelineno-0-804" name="__codelineno-0-804"></a>        <span class="n">pk</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-805" name="__codelineno-0-805"></a>
<a id="__codelineno-0-806" name="__codelineno-0-806"></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Meta</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">pk</span><span class="p">,</span> <span class="n">models</span><span class="o">.</span><span class="n">AutoField</span><span class="p">):</span>
<a id="__codelineno-0-807" name="__codelineno-0-807"></a>            <span class="c1"># PK is an int for this model. This is usually the User model</span>
<a id="__codelineno-0-808" name="__codelineno-0-808"></a>            <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-0-809" name="__codelineno-0-809"></a>                <span class="n">pk</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<a id="__codelineno-0-810" name="__codelineno-0-810"></a>            <span class="k">except</span> <span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="ne">ValueError</span><span class="p">):</span>
<a id="__codelineno-0-811" name="__codelineno-0-811"></a>                <span class="k">raise</span> <span class="n">ValidationError</span><span class="p">(</span>
<a id="__codelineno-0-812" name="__codelineno-0-812"></a>                    <span class="s2">&quot;Related objects must be referenced by ID or by dictionary of attributes. Received an &quot;</span>
<a id="__codelineno-0-813" name="__codelineno-0-813"></a>                    <span class="sa">f</span><span class="s2">&quot;unrecognized value: </span><span class="si">{</span><span class="n">data</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-814" name="__codelineno-0-814"></a>                <span class="p">)</span>
<a id="__codelineno-0-815" name="__codelineno-0-815"></a>
<a id="__codelineno-0-816" name="__codelineno-0-816"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-817" name="__codelineno-0-817"></a>            <span class="c1"># We assume a type of UUIDField for all other models</span>
<a id="__codelineno-0-818" name="__codelineno-0-818"></a>
<a id="__codelineno-0-819" name="__codelineno-0-819"></a>            <span class="c1"># PK of related object</span>
<a id="__codelineno-0-820" name="__codelineno-0-820"></a>            <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-0-821" name="__codelineno-0-821"></a>                <span class="c1"># Ensure the pk is a valid UUID</span>
<a id="__codelineno-0-822" name="__codelineno-0-822"></a>                <span class="n">pk</span> <span class="o">=</span> <span class="n">uuid</span><span class="o">.</span><span class="n">UUID</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
<a id="__codelineno-0-823" name="__codelineno-0-823"></a>            <span class="k">except</span> <span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="ne">ValueError</span><span class="p">):</span>
<a id="__codelineno-0-824" name="__codelineno-0-824"></a>                <span class="k">raise</span> <span class="n">ValidationError</span><span class="p">(</span>
<a id="__codelineno-0-825" name="__codelineno-0-825"></a>                    <span class="s2">&quot;Related objects must be referenced by ID or by dictionary of attributes. Received an &quot;</span>
<a id="__codelineno-0-826" name="__codelineno-0-826"></a>                    <span class="sa">f</span><span class="s2">&quot;unrecognized value: </span><span class="si">{</span><span class="n">data</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-827" name="__codelineno-0-827"></a>                <span class="p">)</span>
<a id="__codelineno-0-828" name="__codelineno-0-828"></a>
<a id="__codelineno-0-829" name="__codelineno-0-829"></a>        <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-0-830" name="__codelineno-0-830"></a>            <span class="k">return</span> <span class="n">queryset</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">pk</span><span class="o">=</span><span class="n">pk</span><span class="p">)</span>
<a id="__codelineno-0-831" name="__codelineno-0-831"></a>        <span class="k">except</span> <span class="n">ObjectDoesNotExist</span><span class="p">:</span>
<a id="__codelineno-0-832" name="__codelineno-0-832"></a>            <span class="k">raise</span> <span class="n">ValidationError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Related object not found using the provided ID: </span><span class="si">{</span><span class="n">pk</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">











  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="nautobot.apps.api.WritableSerializerMixin" class="doc doc-heading">
          <code>nautobot.apps.api.WritableSerializerMixin</code>


<a href="#nautobot.apps.api.WritableSerializerMixin" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">

  
      <p>WritableSerializerMixin provides the to_internal_value() function.
The function provides the ability to write API requests that identify unique objects based on
combinations of fields other than the primary key.
e.g:
"parent": { "location_type__parent": {"name": "Campus"}, "parent__name": "Campus-29" }
vs
"parent": "10dff139-7333-46b0-bef6-f6a5a7b5497c"</p>

            <details class="quote">
              <summary>Source code in <code>nautobot/core/api/mixins.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-34"> 34</a></span>
<span class="normal"><a href="#__codelineno-0-35"> 35</a></span>
<span class="normal"><a href="#__codelineno-0-36"> 36</a></span>
<span class="normal"><a href="#__codelineno-0-37"> 37</a></span>
<span class="normal"><a href="#__codelineno-0-38"> 38</a></span>
<span class="normal"><a href="#__codelineno-0-39"> 39</a></span>
<span class="normal"><a href="#__codelineno-0-40"> 40</a></span>
<span class="normal"><a href="#__codelineno-0-41"> 41</a></span>
<span class="normal"><a href="#__codelineno-0-42"> 42</a></span>
<span class="normal"><a href="#__codelineno-0-43"> 43</a></span>
<span class="normal"><a href="#__codelineno-0-44"> 44</a></span>
<span class="normal"><a href="#__codelineno-0-45"> 45</a></span>
<span class="normal"><a href="#__codelineno-0-46"> 46</a></span>
<span class="normal"><a href="#__codelineno-0-47"> 47</a></span>
<span class="normal"><a href="#__codelineno-0-48"> 48</a></span>
<span class="normal"><a href="#__codelineno-0-49"> 49</a></span>
<span class="normal"><a href="#__codelineno-0-50"> 50</a></span>
<span class="normal"><a href="#__codelineno-0-51"> 51</a></span>
<span class="normal"><a href="#__codelineno-0-52"> 52</a></span>
<span class="normal"><a href="#__codelineno-0-53"> 53</a></span>
<span class="normal"><a href="#__codelineno-0-54"> 54</a></span>
<span class="normal"><a href="#__codelineno-0-55"> 55</a></span>
<span class="normal"><a href="#__codelineno-0-56"> 56</a></span>
<span class="normal"><a href="#__codelineno-0-57"> 57</a></span>
<span class="normal"><a href="#__codelineno-0-58"> 58</a></span>
<span class="normal"><a href="#__codelineno-0-59"> 59</a></span>
<span class="normal"><a href="#__codelineno-0-60"> 60</a></span>
<span class="normal"><a href="#__codelineno-0-61"> 61</a></span>
<span class="normal"><a href="#__codelineno-0-62"> 62</a></span>
<span class="normal"><a href="#__codelineno-0-63"> 63</a></span>
<span class="normal"><a href="#__codelineno-0-64"> 64</a></span>
<span class="normal"><a href="#__codelineno-0-65"> 65</a></span>
<span class="normal"><a href="#__codelineno-0-66"> 66</a></span>
<span class="normal"><a href="#__codelineno-0-67"> 67</a></span>
<span class="normal"><a href="#__codelineno-0-68"> 68</a></span>
<span class="normal"><a href="#__codelineno-0-69"> 69</a></span>
<span class="normal"><a href="#__codelineno-0-70"> 70</a></span>
<span class="normal"><a href="#__codelineno-0-71"> 71</a></span>
<span class="normal"><a href="#__codelineno-0-72"> 72</a></span>
<span class="normal"><a href="#__codelineno-0-73"> 73</a></span>
<span class="normal"><a href="#__codelineno-0-74"> 74</a></span>
<span class="normal"><a href="#__codelineno-0-75"> 75</a></span>
<span class="normal"><a href="#__codelineno-0-76"> 76</a></span>
<span class="normal"><a href="#__codelineno-0-77"> 77</a></span>
<span class="normal"><a href="#__codelineno-0-78"> 78</a></span>
<span class="normal"><a href="#__codelineno-0-79"> 79</a></span>
<span class="normal"><a href="#__codelineno-0-80"> 80</a></span>
<span class="normal"><a href="#__codelineno-0-81"> 81</a></span>
<span class="normal"><a href="#__codelineno-0-82"> 82</a></span>
<span class="normal"><a href="#__codelineno-0-83"> 83</a></span>
<span class="normal"><a href="#__codelineno-0-84"> 84</a></span>
<span class="normal"><a href="#__codelineno-0-85"> 85</a></span>
<span class="normal"><a href="#__codelineno-0-86"> 86</a></span>
<span class="normal"><a href="#__codelineno-0-87"> 87</a></span>
<span class="normal"><a href="#__codelineno-0-88"> 88</a></span>
<span class="normal"><a href="#__codelineno-0-89"> 89</a></span>
<span class="normal"><a href="#__codelineno-0-90"> 90</a></span>
<span class="normal"><a href="#__codelineno-0-91"> 91</a></span>
<span class="normal"><a href="#__codelineno-0-92"> 92</a></span>
<span class="normal"><a href="#__codelineno-0-93"> 93</a></span>
<span class="normal"><a href="#__codelineno-0-94"> 94</a></span>
<span class="normal"><a href="#__codelineno-0-95"> 95</a></span>
<span class="normal"><a href="#__codelineno-0-96"> 96</a></span>
<span class="normal"><a href="#__codelineno-0-97"> 97</a></span>
<span class="normal"><a href="#__codelineno-0-98"> 98</a></span>
<span class="normal"><a href="#__codelineno-0-99"> 99</a></span>
<span class="normal"><a href="#__codelineno-0-100">100</a></span>
<span class="normal"><a href="#__codelineno-0-101">101</a></span>
<span class="normal"><a href="#__codelineno-0-102">102</a></span>
<span class="normal"><a href="#__codelineno-0-103">103</a></span>
<span class="normal"><a href="#__codelineno-0-104">104</a></span>
<span class="normal"><a href="#__codelineno-0-105">105</a></span>
<span class="normal"><a href="#__codelineno-0-106">106</a></span>
<span class="normal"><a href="#__codelineno-0-107">107</a></span>
<span class="normal"><a href="#__codelineno-0-108">108</a></span>
<span class="normal"><a href="#__codelineno-0-109">109</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-34" name="__codelineno-0-34"></a><span class="k">class</span> <span class="nc">WritableSerializerMixin</span><span class="p">:</span>
<a id="__codelineno-0-35" name="__codelineno-0-35"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-36" name="__codelineno-0-36"></a><span class="sd">    WritableSerializerMixin provides the to_internal_value() function.</span>
<a id="__codelineno-0-37" name="__codelineno-0-37"></a><span class="sd">    The function provides the ability to write API requests that identify unique objects based on</span>
<a id="__codelineno-0-38" name="__codelineno-0-38"></a><span class="sd">    combinations of fields other than the primary key.</span>
<a id="__codelineno-0-39" name="__codelineno-0-39"></a><span class="sd">    e.g:</span>
<a id="__codelineno-0-40" name="__codelineno-0-40"></a><span class="sd">    &quot;parent&quot;: { &quot;location_type__parent&quot;: {&quot;name&quot;: &quot;Campus&quot;}, &quot;parent__name&quot;: &quot;Campus-29&quot; }</span>
<a id="__codelineno-0-41" name="__codelineno-0-41"></a><span class="sd">    vs</span>
<a id="__codelineno-0-42" name="__codelineno-0-42"></a><span class="sd">    &quot;parent&quot;: &quot;10dff139-7333-46b0-bef6-f6a5a7b5497c&quot;</span>
<a id="__codelineno-0-43" name="__codelineno-0-43"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-44" name="__codelineno-0-44"></a>
<a id="__codelineno-0-45" name="__codelineno-0-45"></a>    <span class="k">def</span> <span class="nf">remove_non_filter_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filter_params</span><span class="p">):</span>
<a id="__codelineno-0-46" name="__codelineno-0-46"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-47" name="__codelineno-0-47"></a><span class="sd">        Make output from a WritableSerializer &quot;round-trip&quot; capable by automatically stripping from the</span>
<a id="__codelineno-0-48" name="__codelineno-0-48"></a><span class="sd">        data any serializer fields that do not correspond to a specific model field</span>
<a id="__codelineno-0-49" name="__codelineno-0-49"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-50" name="__codelineno-0-50"></a>        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;fields&quot;</span><span class="p">):</span>
<a id="__codelineno-0-51" name="__codelineno-0-51"></a>            <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">field_instance</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
<a id="__codelineno-0-52" name="__codelineno-0-52"></a>                <span class="k">if</span> <span class="n">field_name</span> <span class="ow">in</span> <span class="n">filter_params</span> <span class="ow">and</span> <span class="n">field_instance</span><span class="o">.</span><span class="n">source</span> <span class="o">==</span> <span class="s2">&quot;*&quot;</span><span class="p">:</span>
<a id="__codelineno-0-53" name="__codelineno-0-53"></a>                    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Discarding non-filter field </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">field_name</span><span class="p">)</span>
<a id="__codelineno-0-54" name="__codelineno-0-54"></a>                    <span class="k">del</span> <span class="n">filter_params</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span>
<a id="__codelineno-0-55" name="__codelineno-0-55"></a>        <span class="k">return</span> <span class="n">filter_params</span>
<a id="__codelineno-0-56" name="__codelineno-0-56"></a>
<a id="__codelineno-0-57" name="__codelineno-0-57"></a>    <span class="k">def</span> <span class="nf">get_queryset_filter_params</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">queryset</span><span class="p">):</span>
<a id="__codelineno-0-58" name="__codelineno-0-58"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-59" name="__codelineno-0-59"></a><span class="sd">        Data could be a dictionary and an int (for the User model) or a str that represents the primary key.</span>
<a id="__codelineno-0-60" name="__codelineno-0-60"></a><span class="sd">        If it is a dictionary, we return it after remove non-filter fields.</span>
<a id="__codelineno-0-61" name="__codelineno-0-61"></a><span class="sd">        If it is a primary key, we return a dictionary object formatted like this {&quot;pk&quot;: pk}</span>
<a id="__codelineno-0-62" name="__codelineno-0-62"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-63" name="__codelineno-0-63"></a>
<a id="__codelineno-0-64" name="__codelineno-0-64"></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
<a id="__codelineno-0-65" name="__codelineno-0-65"></a>            <span class="n">params</span> <span class="o">=</span> <span class="n">dict_to_filter_params</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<a id="__codelineno-0-66" name="__codelineno-0-66"></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">remove_non_filter_fields</span><span class="p">(</span><span class="n">params</span><span class="p">)</span>
<a id="__codelineno-0-67" name="__codelineno-0-67"></a>
<a id="__codelineno-0-68" name="__codelineno-0-68"></a>        <span class="c1"># Account for the fact that HyperlinkedIdentityFields might pass in URLs.</span>
<a id="__codelineno-0-69" name="__codelineno-0-69"></a>        <span class="k">if</span> <span class="n">is_url</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
<a id="__codelineno-0-70" name="__codelineno-0-70"></a>            <span class="c1"># Strip the trailing slash and split on slashes, taking the last value as the PK.</span>
<a id="__codelineno-0-71" name="__codelineno-0-71"></a>            <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">rstrip</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<a id="__codelineno-0-72" name="__codelineno-0-72"></a>
<a id="__codelineno-0-73" name="__codelineno-0-73"></a>        <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-0-74" name="__codelineno-0-74"></a>            <span class="c1"># The int case here is taking into account for the User model we inherit from django</span>
<a id="__codelineno-0-75" name="__codelineno-0-75"></a>            <span class="n">pk</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">queryset</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">pk</span><span class="p">,</span> <span class="n">AutoField</span><span class="p">)</span> <span class="k">else</span> <span class="n">uuid</span><span class="o">.</span><span class="n">UUID</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
<a id="__codelineno-0-76" name="__codelineno-0-76"></a>        <span class="k">except</span> <span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="ne">ValueError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
<a id="__codelineno-0-77" name="__codelineno-0-77"></a>            <span class="k">raise</span> <span class="n">ValidationError</span><span class="p">(</span>
<a id="__codelineno-0-78" name="__codelineno-0-78"></a>                <span class="s2">&quot;Related objects must be referenced by ID or by dictionary of attributes. Received an &quot;</span>
<a id="__codelineno-0-79" name="__codelineno-0-79"></a>                <span class="sa">f</span><span class="s2">&quot;unrecognized value: </span><span class="si">{</span><span class="n">data</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-80" name="__codelineno-0-80"></a>            <span class="p">)</span> <span class="kn">from</span> <span class="nn">e</span>
<a id="__codelineno-0-81" name="__codelineno-0-81"></a>        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;pk&quot;</span><span class="p">:</span> <span class="n">pk</span><span class="p">}</span>
<a id="__codelineno-0-82" name="__codelineno-0-82"></a>
<a id="__codelineno-0-83" name="__codelineno-0-83"></a>    <span class="k">def</span> <span class="nf">get_object</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">queryset</span><span class="p">):</span>
<a id="__codelineno-0-84" name="__codelineno-0-84"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-85" name="__codelineno-0-85"></a><span class="sd">        Retrieve an unique object based on a dictionary of data attributes and raise errors accordingly if the object is not found.</span>
<a id="__codelineno-0-86" name="__codelineno-0-86"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-87" name="__codelineno-0-87"></a>        <span class="n">filter_params</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_queryset_filter_params</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">queryset</span><span class="o">=</span><span class="n">queryset</span><span class="p">)</span>
<a id="__codelineno-0-88" name="__codelineno-0-88"></a>        <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-0-89" name="__codelineno-0-89"></a>            <span class="k">return</span> <span class="n">queryset</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="o">**</span><span class="n">filter_params</span><span class="p">)</span>
<a id="__codelineno-0-90" name="__codelineno-0-90"></a>        <span class="k">except</span> <span class="n">ObjectDoesNotExist</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
<a id="__codelineno-0-91" name="__codelineno-0-91"></a>            <span class="k">raise</span> <span class="n">ValidationError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Related object not found using the provided attributes: </span><span class="si">{</span><span class="n">filter_params</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span> <span class="kn">from</span> <span class="nn">e</span>
<a id="__codelineno-0-92" name="__codelineno-0-92"></a>        <span class="k">except</span> <span class="n">MultipleObjectsReturned</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
<a id="__codelineno-0-93" name="__codelineno-0-93"></a>            <span class="k">raise</span> <span class="n">ValidationError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Multiple objects match the provided attributes: </span><span class="si">{</span><span class="n">filter_params</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span> <span class="kn">from</span> <span class="nn">e</span>
<a id="__codelineno-0-94" name="__codelineno-0-94"></a>        <span class="k">except</span> <span class="n">FieldError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
<a id="__codelineno-0-95" name="__codelineno-0-95"></a>            <span class="k">raise</span> <span class="n">ValidationError</span><span class="p">(</span><span class="n">e</span><span class="p">)</span> <span class="kn">from</span> <span class="nn">e</span>
<a id="__codelineno-0-96" name="__codelineno-0-96"></a>
<a id="__codelineno-0-97" name="__codelineno-0-97"></a>    <span class="k">def</span> <span class="nf">to_internal_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
<a id="__codelineno-0-98" name="__codelineno-0-98"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-99" name="__codelineno-0-99"></a><span class="sd">        Return an object or a list of objects based on a dictionary of data attributes or an UUID.</span>
<a id="__codelineno-0-100" name="__codelineno-0-100"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-101" name="__codelineno-0-101"></a>        <span class="k">if</span> <span class="n">data</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-102" name="__codelineno-0-102"></a>            <span class="k">return</span> <span class="kc">None</span>
<a id="__codelineno-0-103" name="__codelineno-0-103"></a>        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;queryset&quot;</span><span class="p">):</span>
<a id="__codelineno-0-104" name="__codelineno-0-104"></a>            <span class="n">queryset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">queryset</span>
<a id="__codelineno-0-105" name="__codelineno-0-105"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-106" name="__codelineno-0-106"></a>            <span class="n">queryset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Meta</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">objects</span>
<a id="__codelineno-0-107" name="__codelineno-0-107"></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
<a id="__codelineno-0-108" name="__codelineno-0-108"></a>            <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">get_object</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">entry</span><span class="p">,</span> <span class="n">queryset</span><span class="o">=</span><span class="n">queryset</span><span class="p">)</span> <span class="k">for</span> <span class="n">entry</span> <span class="ow">in</span> <span class="n">data</span><span class="p">]</span>
<a id="__codelineno-0-109" name="__codelineno-0-109"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_object</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">queryset</span><span class="o">=</span><span class="n">queryset</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">










<div class="doc doc-object doc-function">



<h3 id="nautobot.core.api.mixins.WritableSerializerMixin.get_object" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_object</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">queryset</span><span class="p">)</span></code>

<a href="#nautobot.core.api.mixins.WritableSerializerMixin.get_object" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Retrieve an unique object based on a dictionary of data attributes and raise errors accordingly if the object is not found.</p>

          <details class="quote">
            <summary>Source code in <code>nautobot/core/api/mixins.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-83">83</a></span>
<span class="normal"><a href="#__codelineno-0-84">84</a></span>
<span class="normal"><a href="#__codelineno-0-85">85</a></span>
<span class="normal"><a href="#__codelineno-0-86">86</a></span>
<span class="normal"><a href="#__codelineno-0-87">87</a></span>
<span class="normal"><a href="#__codelineno-0-88">88</a></span>
<span class="normal"><a href="#__codelineno-0-89">89</a></span>
<span class="normal"><a href="#__codelineno-0-90">90</a></span>
<span class="normal"><a href="#__codelineno-0-91">91</a></span>
<span class="normal"><a href="#__codelineno-0-92">92</a></span>
<span class="normal"><a href="#__codelineno-0-93">93</a></span>
<span class="normal"><a href="#__codelineno-0-94">94</a></span>
<span class="normal"><a href="#__codelineno-0-95">95</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-83" name="__codelineno-0-83"></a><span class="k">def</span> <span class="nf">get_object</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">queryset</span><span class="p">):</span>
<a id="__codelineno-0-84" name="__codelineno-0-84"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-85" name="__codelineno-0-85"></a><span class="sd">    Retrieve an unique object based on a dictionary of data attributes and raise errors accordingly if the object is not found.</span>
<a id="__codelineno-0-86" name="__codelineno-0-86"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-87" name="__codelineno-0-87"></a>    <span class="n">filter_params</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_queryset_filter_params</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">queryset</span><span class="o">=</span><span class="n">queryset</span><span class="p">)</span>
<a id="__codelineno-0-88" name="__codelineno-0-88"></a>    <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-0-89" name="__codelineno-0-89"></a>        <span class="k">return</span> <span class="n">queryset</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="o">**</span><span class="n">filter_params</span><span class="p">)</span>
<a id="__codelineno-0-90" name="__codelineno-0-90"></a>    <span class="k">except</span> <span class="n">ObjectDoesNotExist</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
<a id="__codelineno-0-91" name="__codelineno-0-91"></a>        <span class="k">raise</span> <span class="n">ValidationError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Related object not found using the provided attributes: </span><span class="si">{</span><span class="n">filter_params</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span> <span class="kn">from</span> <span class="nn">e</span>
<a id="__codelineno-0-92" name="__codelineno-0-92"></a>    <span class="k">except</span> <span class="n">MultipleObjectsReturned</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
<a id="__codelineno-0-93" name="__codelineno-0-93"></a>        <span class="k">raise</span> <span class="n">ValidationError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Multiple objects match the provided attributes: </span><span class="si">{</span><span class="n">filter_params</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span> <span class="kn">from</span> <span class="nn">e</span>
<a id="__codelineno-0-94" name="__codelineno-0-94"></a>    <span class="k">except</span> <span class="n">FieldError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
<a id="__codelineno-0-95" name="__codelineno-0-95"></a>        <span class="k">raise</span> <span class="n">ValidationError</span><span class="p">(</span><span class="n">e</span><span class="p">)</span> <span class="kn">from</span> <span class="nn">e</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h3 id="nautobot.core.api.mixins.WritableSerializerMixin.get_queryset_filter_params" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_queryset_filter_params</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">queryset</span><span class="p">)</span></code>

<a href="#nautobot.core.api.mixins.WritableSerializerMixin.get_queryset_filter_params" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Data could be a dictionary and an int (for the User model) or a str that represents the primary key.
If it is a dictionary, we return it after remove non-filter fields.
If it is a primary key, we return a dictionary object formatted like this {"pk": pk}</p>

          <details class="quote">
            <summary>Source code in <code>nautobot/core/api/mixins.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-57">57</a></span>
<span class="normal"><a href="#__codelineno-0-58">58</a></span>
<span class="normal"><a href="#__codelineno-0-59">59</a></span>
<span class="normal"><a href="#__codelineno-0-60">60</a></span>
<span class="normal"><a href="#__codelineno-0-61">61</a></span>
<span class="normal"><a href="#__codelineno-0-62">62</a></span>
<span class="normal"><a href="#__codelineno-0-63">63</a></span>
<span class="normal"><a href="#__codelineno-0-64">64</a></span>
<span class="normal"><a href="#__codelineno-0-65">65</a></span>
<span class="normal"><a href="#__codelineno-0-66">66</a></span>
<span class="normal"><a href="#__codelineno-0-67">67</a></span>
<span class="normal"><a href="#__codelineno-0-68">68</a></span>
<span class="normal"><a href="#__codelineno-0-69">69</a></span>
<span class="normal"><a href="#__codelineno-0-70">70</a></span>
<span class="normal"><a href="#__codelineno-0-71">71</a></span>
<span class="normal"><a href="#__codelineno-0-72">72</a></span>
<span class="normal"><a href="#__codelineno-0-73">73</a></span>
<span class="normal"><a href="#__codelineno-0-74">74</a></span>
<span class="normal"><a href="#__codelineno-0-75">75</a></span>
<span class="normal"><a href="#__codelineno-0-76">76</a></span>
<span class="normal"><a href="#__codelineno-0-77">77</a></span>
<span class="normal"><a href="#__codelineno-0-78">78</a></span>
<span class="normal"><a href="#__codelineno-0-79">79</a></span>
<span class="normal"><a href="#__codelineno-0-80">80</a></span>
<span class="normal"><a href="#__codelineno-0-81">81</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-57" name="__codelineno-0-57"></a><span class="k">def</span> <span class="nf">get_queryset_filter_params</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">queryset</span><span class="p">):</span>
<a id="__codelineno-0-58" name="__codelineno-0-58"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-59" name="__codelineno-0-59"></a><span class="sd">    Data could be a dictionary and an int (for the User model) or a str that represents the primary key.</span>
<a id="__codelineno-0-60" name="__codelineno-0-60"></a><span class="sd">    If it is a dictionary, we return it after remove non-filter fields.</span>
<a id="__codelineno-0-61" name="__codelineno-0-61"></a><span class="sd">    If it is a primary key, we return a dictionary object formatted like this {&quot;pk&quot;: pk}</span>
<a id="__codelineno-0-62" name="__codelineno-0-62"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-63" name="__codelineno-0-63"></a>
<a id="__codelineno-0-64" name="__codelineno-0-64"></a>    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
<a id="__codelineno-0-65" name="__codelineno-0-65"></a>        <span class="n">params</span> <span class="o">=</span> <span class="n">dict_to_filter_params</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<a id="__codelineno-0-66" name="__codelineno-0-66"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">remove_non_filter_fields</span><span class="p">(</span><span class="n">params</span><span class="p">)</span>
<a id="__codelineno-0-67" name="__codelineno-0-67"></a>
<a id="__codelineno-0-68" name="__codelineno-0-68"></a>    <span class="c1"># Account for the fact that HyperlinkedIdentityFields might pass in URLs.</span>
<a id="__codelineno-0-69" name="__codelineno-0-69"></a>    <span class="k">if</span> <span class="n">is_url</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
<a id="__codelineno-0-70" name="__codelineno-0-70"></a>        <span class="c1"># Strip the trailing slash and split on slashes, taking the last value as the PK.</span>
<a id="__codelineno-0-71" name="__codelineno-0-71"></a>        <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">rstrip</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<a id="__codelineno-0-72" name="__codelineno-0-72"></a>
<a id="__codelineno-0-73" name="__codelineno-0-73"></a>    <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-0-74" name="__codelineno-0-74"></a>        <span class="c1"># The int case here is taking into account for the User model we inherit from django</span>
<a id="__codelineno-0-75" name="__codelineno-0-75"></a>        <span class="n">pk</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">queryset</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">pk</span><span class="p">,</span> <span class="n">AutoField</span><span class="p">)</span> <span class="k">else</span> <span class="n">uuid</span><span class="o">.</span><span class="n">UUID</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
<a id="__codelineno-0-76" name="__codelineno-0-76"></a>    <span class="k">except</span> <span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="ne">ValueError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
<a id="__codelineno-0-77" name="__codelineno-0-77"></a>        <span class="k">raise</span> <span class="n">ValidationError</span><span class="p">(</span>
<a id="__codelineno-0-78" name="__codelineno-0-78"></a>            <span class="s2">&quot;Related objects must be referenced by ID or by dictionary of attributes. Received an &quot;</span>
<a id="__codelineno-0-79" name="__codelineno-0-79"></a>            <span class="sa">f</span><span class="s2">&quot;unrecognized value: </span><span class="si">{</span><span class="n">data</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-80" name="__codelineno-0-80"></a>        <span class="p">)</span> <span class="kn">from</span> <span class="nn">e</span>
<a id="__codelineno-0-81" name="__codelineno-0-81"></a>    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;pk&quot;</span><span class="p">:</span> <span class="n">pk</span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h3 id="nautobot.core.api.mixins.WritableSerializerMixin.remove_non_filter_fields" class="doc doc-heading">
<code class="highlight language-python"><span class="n">remove_non_filter_fields</span><span class="p">(</span><span class="n">filter_params</span><span class="p">)</span></code>

<a href="#nautobot.core.api.mixins.WritableSerializerMixin.remove_non_filter_fields" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Make output from a WritableSerializer "round-trip" capable by automatically stripping from the
data any serializer fields that do not correspond to a specific model field</p>

          <details class="quote">
            <summary>Source code in <code>nautobot/core/api/mixins.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-45">45</a></span>
<span class="normal"><a href="#__codelineno-0-46">46</a></span>
<span class="normal"><a href="#__codelineno-0-47">47</a></span>
<span class="normal"><a href="#__codelineno-0-48">48</a></span>
<span class="normal"><a href="#__codelineno-0-49">49</a></span>
<span class="normal"><a href="#__codelineno-0-50">50</a></span>
<span class="normal"><a href="#__codelineno-0-51">51</a></span>
<span class="normal"><a href="#__codelineno-0-52">52</a></span>
<span class="normal"><a href="#__codelineno-0-53">53</a></span>
<span class="normal"><a href="#__codelineno-0-54">54</a></span>
<span class="normal"><a href="#__codelineno-0-55">55</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-45" name="__codelineno-0-45"></a><span class="k">def</span> <span class="nf">remove_non_filter_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filter_params</span><span class="p">):</span>
<a id="__codelineno-0-46" name="__codelineno-0-46"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-47" name="__codelineno-0-47"></a><span class="sd">    Make output from a WritableSerializer &quot;round-trip&quot; capable by automatically stripping from the</span>
<a id="__codelineno-0-48" name="__codelineno-0-48"></a><span class="sd">    data any serializer fields that do not correspond to a specific model field</span>
<a id="__codelineno-0-49" name="__codelineno-0-49"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-50" name="__codelineno-0-50"></a>    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;fields&quot;</span><span class="p">):</span>
<a id="__codelineno-0-51" name="__codelineno-0-51"></a>        <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">field_instance</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
<a id="__codelineno-0-52" name="__codelineno-0-52"></a>            <span class="k">if</span> <span class="n">field_name</span> <span class="ow">in</span> <span class="n">filter_params</span> <span class="ow">and</span> <span class="n">field_instance</span><span class="o">.</span><span class="n">source</span> <span class="o">==</span> <span class="s2">&quot;*&quot;</span><span class="p">:</span>
<a id="__codelineno-0-53" name="__codelineno-0-53"></a>                <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Discarding non-filter field </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">field_name</span><span class="p">)</span>
<a id="__codelineno-0-54" name="__codelineno-0-54"></a>                <span class="k">del</span> <span class="n">filter_params</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span>
<a id="__codelineno-0-55" name="__codelineno-0-55"></a>    <span class="k">return</span> <span class="n">filter_params</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h3 id="nautobot.core.api.mixins.WritableSerializerMixin.to_internal_value" class="doc doc-heading">
<code class="highlight language-python"><span class="n">to_internal_value</span><span class="p">(</span><span class="n">data</span><span class="p">)</span></code>

<a href="#nautobot.core.api.mixins.WritableSerializerMixin.to_internal_value" class="headerlink" title="Permanent link">&para;</a></h3>


  <div class="doc doc-contents ">
  
      <p>Return an object or a list of objects based on a dictionary of data attributes or an UUID.</p>

          <details class="quote">
            <summary>Source code in <code>nautobot/core/api/mixins.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-97"> 97</a></span>
<span class="normal"><a href="#__codelineno-0-98"> 98</a></span>
<span class="normal"><a href="#__codelineno-0-99"> 99</a></span>
<span class="normal"><a href="#__codelineno-0-100">100</a></span>
<span class="normal"><a href="#__codelineno-0-101">101</a></span>
<span class="normal"><a href="#__codelineno-0-102">102</a></span>
<span class="normal"><a href="#__codelineno-0-103">103</a></span>
<span class="normal"><a href="#__codelineno-0-104">104</a></span>
<span class="normal"><a href="#__codelineno-0-105">105</a></span>
<span class="normal"><a href="#__codelineno-0-106">106</a></span>
<span class="normal"><a href="#__codelineno-0-107">107</a></span>
<span class="normal"><a href="#__codelineno-0-108">108</a></span>
<span class="normal"><a href="#__codelineno-0-109">109</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-97" name="__codelineno-0-97"></a><span class="k">def</span> <span class="nf">to_internal_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
<a id="__codelineno-0-98" name="__codelineno-0-98"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-99" name="__codelineno-0-99"></a><span class="sd">    Return an object or a list of objects based on a dictionary of data attributes or an UUID.</span>
<a id="__codelineno-0-100" name="__codelineno-0-100"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-101" name="__codelineno-0-101"></a>    <span class="k">if</span> <span class="n">data</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-102" name="__codelineno-0-102"></a>        <span class="k">return</span> <span class="kc">None</span>
<a id="__codelineno-0-103" name="__codelineno-0-103"></a>    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;queryset&quot;</span><span class="p">):</span>
<a id="__codelineno-0-104" name="__codelineno-0-104"></a>        <span class="n">queryset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">queryset</span>
<a id="__codelineno-0-105" name="__codelineno-0-105"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-106" name="__codelineno-0-106"></a>        <span class="n">queryset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Meta</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">objects</span>
<a id="__codelineno-0-107" name="__codelineno-0-107"></a>    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
<a id="__codelineno-0-108" name="__codelineno-0-108"></a>        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">get_object</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">entry</span><span class="p">,</span> <span class="n">queryset</span><span class="o">=</span><span class="n">queryset</span><span class="p">)</span> <span class="k">for</span> <span class="n">entry</span> <span class="ow">in</span> <span class="n">data</span><span class="p">]</span>
<a id="__codelineno-0-109" name="__codelineno-0-109"></a>    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_object</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">queryset</span><span class="o">=</span><span class="n">queryset</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>

</div>



<div class="doc doc-object doc-function">



<h2 id="nautobot.apps.api.dict_to_filter_params" class="doc doc-heading">
<code class="highlight language-python"><span class="n">nautobot</span><span class="o">.</span><span class="n">apps</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">dict_to_filter_params</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">prefix</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span></code>

<a href="#nautobot.apps.api.dict_to_filter_params" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
  
      <p>Translate a dictionary of attributes to a nested set of parameters suitable for QuerySet filtering. For example:</p>
<div class="highlight"><pre><span></span><code>{
    &quot;name&quot;: &quot;Foo&quot;,
    &quot;rack&quot;: {
        &quot;facility_id&quot;: &quot;R101&quot;
    }
}
</code></pre></div>

<details class="becomes" open>
  <summary>Becomes</summary>
  <p>{
    "name": "Foo",
    "rack__facility_id": "R101"
}</p>
</details>
<details class="and-can-be-employed-as-filter-parameters" open>
  <summary>And can be employed as filter parameters</summary>
  <p>Device.objects.filter(**dict_to_filter(attrs_dict))</p>
</details>
          <details class="quote">
            <summary>Source code in <code>nautobot/core/api/utils.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-20">20</a></span>
<span class="normal"><a href="#__codelineno-0-21">21</a></span>
<span class="normal"><a href="#__codelineno-0-22">22</a></span>
<span class="normal"><a href="#__codelineno-0-23">23</a></span>
<span class="normal"><a href="#__codelineno-0-24">24</a></span>
<span class="normal"><a href="#__codelineno-0-25">25</a></span>
<span class="normal"><a href="#__codelineno-0-26">26</a></span>
<span class="normal"><a href="#__codelineno-0-27">27</a></span>
<span class="normal"><a href="#__codelineno-0-28">28</a></span>
<span class="normal"><a href="#__codelineno-0-29">29</a></span>
<span class="normal"><a href="#__codelineno-0-30">30</a></span>
<span class="normal"><a href="#__codelineno-0-31">31</a></span>
<span class="normal"><a href="#__codelineno-0-32">32</a></span>
<span class="normal"><a href="#__codelineno-0-33">33</a></span>
<span class="normal"><a href="#__codelineno-0-34">34</a></span>
<span class="normal"><a href="#__codelineno-0-35">35</a></span>
<span class="normal"><a href="#__codelineno-0-36">36</a></span>
<span class="normal"><a href="#__codelineno-0-37">37</a></span>
<span class="normal"><a href="#__codelineno-0-38">38</a></span>
<span class="normal"><a href="#__codelineno-0-39">39</a></span>
<span class="normal"><a href="#__codelineno-0-40">40</a></span>
<span class="normal"><a href="#__codelineno-0-41">41</a></span>
<span class="normal"><a href="#__codelineno-0-42">42</a></span>
<span class="normal"><a href="#__codelineno-0-43">43</a></span>
<span class="normal"><a href="#__codelineno-0-44">44</a></span>
<span class="normal"><a href="#__codelineno-0-45">45</a></span>
<span class="normal"><a href="#__codelineno-0-46">46</a></span>
<span class="normal"><a href="#__codelineno-0-47">47</a></span>
<span class="normal"><a href="#__codelineno-0-48">48</a></span>
<span class="normal"><a href="#__codelineno-0-49">49</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-20" name="__codelineno-0-20"></a><span class="k">def</span> <span class="nf">dict_to_filter_params</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">prefix</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">):</span>
<a id="__codelineno-0-21" name="__codelineno-0-21"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-22" name="__codelineno-0-22"></a><span class="sd">    Translate a dictionary of attributes to a nested set of parameters suitable for QuerySet filtering. For example:</span>
<a id="__codelineno-0-23" name="__codelineno-0-23"></a>
<a id="__codelineno-0-24" name="__codelineno-0-24"></a><span class="sd">        {</span>
<a id="__codelineno-0-25" name="__codelineno-0-25"></a><span class="sd">            &quot;name&quot;: &quot;Foo&quot;,</span>
<a id="__codelineno-0-26" name="__codelineno-0-26"></a><span class="sd">            &quot;rack&quot;: {</span>
<a id="__codelineno-0-27" name="__codelineno-0-27"></a><span class="sd">                &quot;facility_id&quot;: &quot;R101&quot;</span>
<a id="__codelineno-0-28" name="__codelineno-0-28"></a><span class="sd">            }</span>
<a id="__codelineno-0-29" name="__codelineno-0-29"></a><span class="sd">        }</span>
<a id="__codelineno-0-30" name="__codelineno-0-30"></a>
<a id="__codelineno-0-31" name="__codelineno-0-31"></a><span class="sd">    Becomes:</span>
<a id="__codelineno-0-32" name="__codelineno-0-32"></a>
<a id="__codelineno-0-33" name="__codelineno-0-33"></a><span class="sd">        {</span>
<a id="__codelineno-0-34" name="__codelineno-0-34"></a><span class="sd">            &quot;name&quot;: &quot;Foo&quot;,</span>
<a id="__codelineno-0-35" name="__codelineno-0-35"></a><span class="sd">            &quot;rack__facility_id&quot;: &quot;R101&quot;</span>
<a id="__codelineno-0-36" name="__codelineno-0-36"></a><span class="sd">        }</span>
<a id="__codelineno-0-37" name="__codelineno-0-37"></a>
<a id="__codelineno-0-38" name="__codelineno-0-38"></a><span class="sd">    And can be employed as filter parameters:</span>
<a id="__codelineno-0-39" name="__codelineno-0-39"></a>
<a id="__codelineno-0-40" name="__codelineno-0-40"></a><span class="sd">        Device.objects.filter(**dict_to_filter(attrs_dict))</span>
<a id="__codelineno-0-41" name="__codelineno-0-41"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-42" name="__codelineno-0-42"></a>    <span class="n">params</span> <span class="o">=</span> <span class="p">{}</span>
<a id="__codelineno-0-43" name="__codelineno-0-43"></a>    <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">d</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
<a id="__codelineno-0-44" name="__codelineno-0-44"></a>        <span class="n">k</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="n">key</span>
<a id="__codelineno-0-45" name="__codelineno-0-45"></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
<a id="__codelineno-0-46" name="__codelineno-0-46"></a>            <span class="n">params</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">dict_to_filter_params</span><span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="n">k</span> <span class="o">+</span> <span class="s2">&quot;__&quot;</span><span class="p">))</span>
<a id="__codelineno-0-47" name="__codelineno-0-47"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-48" name="__codelineno-0-48"></a>            <span class="n">params</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span>
<a id="__codelineno-0-49" name="__codelineno-0-49"></a>    <span class="k">return</span> <span class="n">params</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h2 id="nautobot.apps.api.dynamic_import" class="doc doc-heading">
<code class="highlight language-python"><span class="n">nautobot</span><span class="o">.</span><span class="n">apps</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">dynamic_import</span><span class="p">(</span><span class="n">name</span><span class="p">)</span></code>

<a href="#nautobot.apps.api.dynamic_import" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
  
      <p>Dynamically import a class from an absolute path string</p>

          <details class="quote">
            <summary>Source code in <code>nautobot/core/api/utils.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-52">52</a></span>
<span class="normal"><a href="#__codelineno-0-53">53</a></span>
<span class="normal"><a href="#__codelineno-0-54">54</a></span>
<span class="normal"><a href="#__codelineno-0-55">55</a></span>
<span class="normal"><a href="#__codelineno-0-56">56</a></span>
<span class="normal"><a href="#__codelineno-0-57">57</a></span>
<span class="normal"><a href="#__codelineno-0-58">58</a></span>
<span class="normal"><a href="#__codelineno-0-59">59</a></span>
<span class="normal"><a href="#__codelineno-0-60">60</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-52" name="__codelineno-0-52"></a><span class="k">def</span> <span class="nf">dynamic_import</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
<a id="__codelineno-0-53" name="__codelineno-0-53"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-54" name="__codelineno-0-54"></a><span class="sd">    Dynamically import a class from an absolute path string</span>
<a id="__codelineno-0-55" name="__codelineno-0-55"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-56" name="__codelineno-0-56"></a>    <span class="n">components</span> <span class="o">=</span> <span class="n">name</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)</span>
<a id="__codelineno-0-57" name="__codelineno-0-57"></a>    <span class="n">mod</span> <span class="o">=</span> <span class="nb">__import__</span><span class="p">(</span><span class="n">components</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<a id="__codelineno-0-58" name="__codelineno-0-58"></a>    <span class="k">for</span> <span class="n">comp</span> <span class="ow">in</span> <span class="n">components</span><span class="p">[</span><span class="mi">1</span><span class="p">:]:</span>
<a id="__codelineno-0-59" name="__codelineno-0-59"></a>        <span class="n">mod</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">mod</span><span class="p">,</span> <span class="n">comp</span><span class="p">)</span>
<a id="__codelineno-0-60" name="__codelineno-0-60"></a>    <span class="k">return</span> <span class="n">mod</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h2 id="nautobot.apps.api.get_api_version_serializer" class="doc doc-heading">
<code class="highlight language-python"><span class="n">nautobot</span><span class="o">.</span><span class="n">apps</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">get_api_version_serializer</span><span class="p">(</span><span class="n">serializer_choices</span><span class="p">,</span> <span class="n">api_version</span><span class="p">)</span></code>

<a href="#nautobot.apps.api.get_api_version_serializer" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
  
      <p>Returns the serializer of an api_version</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>serializer_choices</code></td>
          <td>
                <code>tuple</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>list of SerializerVersions</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>api_version</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Request API version</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>Serializer</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>the serializer for the api_version if found in serializer_choices else None</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>nautobot/core/api/utils.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-67">67</a></span>
<span class="normal"><a href="#__codelineno-0-68">68</a></span>
<span class="normal"><a href="#__codelineno-0-69">69</a></span>
<span class="normal"><a href="#__codelineno-0-70">70</a></span>
<span class="normal"><a href="#__codelineno-0-71">71</a></span>
<span class="normal"><a href="#__codelineno-0-72">72</a></span>
<span class="normal"><a href="#__codelineno-0-73">73</a></span>
<span class="normal"><a href="#__codelineno-0-74">74</a></span>
<span class="normal"><a href="#__codelineno-0-75">75</a></span>
<span class="normal"><a href="#__codelineno-0-76">76</a></span>
<span class="normal"><a href="#__codelineno-0-77">77</a></span>
<span class="normal"><a href="#__codelineno-0-78">78</a></span>
<span class="normal"><a href="#__codelineno-0-79">79</a></span>
<span class="normal"><a href="#__codelineno-0-80">80</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-67" name="__codelineno-0-67"></a><span class="k">def</span> <span class="nf">get_api_version_serializer</span><span class="p">(</span><span class="n">serializer_choices</span><span class="p">,</span> <span class="n">api_version</span><span class="p">):</span>
<a id="__codelineno-0-68" name="__codelineno-0-68"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns the serializer of an api_version</span>
<a id="__codelineno-0-69" name="__codelineno-0-69"></a>
<a id="__codelineno-0-70" name="__codelineno-0-70"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-71" name="__codelineno-0-71"></a><span class="sd">        serializer_choices (tuple): list of SerializerVersions</span>
<a id="__codelineno-0-72" name="__codelineno-0-72"></a><span class="sd">        api_version (str): Request API version</span>
<a id="__codelineno-0-73" name="__codelineno-0-73"></a>
<a id="__codelineno-0-74" name="__codelineno-0-74"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-75" name="__codelineno-0-75"></a><span class="sd">        (Serializer): the serializer for the api_version if found in serializer_choices else None</span>
<a id="__codelineno-0-76" name="__codelineno-0-76"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-77" name="__codelineno-0-77"></a>    <span class="k">for</span> <span class="n">versions</span><span class="p">,</span> <span class="n">serializer</span> <span class="ow">in</span> <span class="n">serializer_choices</span><span class="p">:</span>
<a id="__codelineno-0-78" name="__codelineno-0-78"></a>        <span class="k">if</span> <span class="n">api_version</span> <span class="ow">in</span> <span class="n">versions</span><span class="p">:</span>
<a id="__codelineno-0-79" name="__codelineno-0-79"></a>            <span class="k">return</span> <span class="n">serializer</span>
<a id="__codelineno-0-80" name="__codelineno-0-80"></a>    <span class="k">return</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h2 id="nautobot.apps.api.get_serializer_for_model" class="doc doc-heading">
<code class="highlight language-python"><span class="n">nautobot</span><span class="o">.</span><span class="n">apps</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">get_serializer_for_model</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">prefix</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span></code>

<a href="#nautobot.apps.api.get_serializer_for_model" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
  
      <p>Dynamically resolve and return the appropriate serializer for a model.</p>



  <p><strong>Raises:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>SerializerNotFound</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>if the requested serializer cannot be located.</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>nautobot/core/api/utils.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-99"> 99</a></span>
<span class="normal"><a href="#__codelineno-0-100">100</a></span>
<span class="normal"><a href="#__codelineno-0-101">101</a></span>
<span class="normal"><a href="#__codelineno-0-102">102</a></span>
<span class="normal"><a href="#__codelineno-0-103">103</a></span>
<span class="normal"><a href="#__codelineno-0-104">104</a></span>
<span class="normal"><a href="#__codelineno-0-105">105</a></span>
<span class="normal"><a href="#__codelineno-0-106">106</a></span>
<span class="normal"><a href="#__codelineno-0-107">107</a></span>
<span class="normal"><a href="#__codelineno-0-108">108</a></span>
<span class="normal"><a href="#__codelineno-0-109">109</a></span>
<span class="normal"><a href="#__codelineno-0-110">110</a></span>
<span class="normal"><a href="#__codelineno-0-111">111</a></span>
<span class="normal"><a href="#__codelineno-0-112">112</a></span>
<span class="normal"><a href="#__codelineno-0-113">113</a></span>
<span class="normal"><a href="#__codelineno-0-114">114</a></span>
<span class="normal"><a href="#__codelineno-0-115">115</a></span>
<span class="normal"><a href="#__codelineno-0-116">116</a></span>
<span class="normal"><a href="#__codelineno-0-117">117</a></span>
<span class="normal"><a href="#__codelineno-0-118">118</a></span>
<span class="normal"><a href="#__codelineno-0-119">119</a></span>
<span class="normal"><a href="#__codelineno-0-120">120</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-99" name="__codelineno-0-99"></a><span class="k">def</span> <span class="nf">get_serializer_for_model</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">prefix</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">):</span>
<a id="__codelineno-0-100" name="__codelineno-0-100"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-101" name="__codelineno-0-101"></a><span class="sd">    Dynamically resolve and return the appropriate serializer for a model.</span>
<a id="__codelineno-0-102" name="__codelineno-0-102"></a>
<a id="__codelineno-0-103" name="__codelineno-0-103"></a><span class="sd">    Raises:</span>
<a id="__codelineno-0-104" name="__codelineno-0-104"></a><span class="sd">        SerializerNotFound: if the requested serializer cannot be located.</span>
<a id="__codelineno-0-105" name="__codelineno-0-105"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-106" name="__codelineno-0-106"></a>    <span class="n">app_name</span><span class="p">,</span> <span class="n">model_name</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">label</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)</span>
<a id="__codelineno-0-107" name="__codelineno-0-107"></a>    <span class="k">if</span> <span class="n">app_name</span> <span class="o">==</span> <span class="s2">&quot;contenttypes&quot;</span> <span class="ow">and</span> <span class="n">model_name</span> <span class="o">==</span> <span class="s2">&quot;ContentType&quot;</span><span class="p">:</span>
<a id="__codelineno-0-108" name="__codelineno-0-108"></a>        <span class="n">app_name</span> <span class="o">=</span> <span class="s2">&quot;extras&quot;</span>
<a id="__codelineno-0-109" name="__codelineno-0-109"></a>    <span class="c1"># Serializers for Django&#39;s auth models are in the users app</span>
<a id="__codelineno-0-110" name="__codelineno-0-110"></a>    <span class="k">if</span> <span class="n">app_name</span> <span class="o">==</span> <span class="s2">&quot;auth&quot;</span><span class="p">:</span>
<a id="__codelineno-0-111" name="__codelineno-0-111"></a>        <span class="n">app_name</span> <span class="o">=</span> <span class="s2">&quot;users&quot;</span>
<a id="__codelineno-0-112" name="__codelineno-0-112"></a>    <span class="n">serializer_name</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">app_name</span><span class="si">}</span><span class="s2">.api.serializers.</span><span class="si">{</span><span class="n">prefix</span><span class="si">}{</span><span class="n">model_name</span><span class="si">}</span><span class="s2">Serializer&quot;</span>
<a id="__codelineno-0-113" name="__codelineno-0-113"></a>    <span class="k">if</span> <span class="n">app_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">settings</span><span class="o">.</span><span class="n">PLUGINS</span><span class="p">:</span>
<a id="__codelineno-0-114" name="__codelineno-0-114"></a>        <span class="n">serializer_name</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;nautobot.</span><span class="si">{</span><span class="n">serializer_name</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-115" name="__codelineno-0-115"></a>    <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-0-116" name="__codelineno-0-116"></a>        <span class="k">return</span> <span class="n">dynamic_import</span><span class="p">(</span><span class="n">serializer_name</span><span class="p">)</span>
<a id="__codelineno-0-117" name="__codelineno-0-117"></a>    <span class="k">except</span> <span class="ne">AttributeError</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
<a id="__codelineno-0-118" name="__codelineno-0-118"></a>        <span class="k">raise</span> <span class="n">exceptions</span><span class="o">.</span><span class="n">SerializerNotFound</span><span class="p">(</span>
<a id="__codelineno-0-119" name="__codelineno-0-119"></a>            <span class="sa">f</span><span class="s2">&quot;Could not determine serializer for </span><span class="si">{</span><span class="n">app_name</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">model_name</span><span class="si">}</span><span class="s2"> with prefix &#39;</span><span class="si">{</span><span class="n">prefix</span><span class="si">}</span><span class="s2">&#39;&quot;</span>
<a id="__codelineno-0-120" name="__codelineno-0-120"></a>        <span class="p">)</span> <span class="kn">from</span> <span class="nn">exc</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h2 id="nautobot.apps.api.get_view_name" class="doc doc-heading">
<code class="highlight language-python"><span class="n">nautobot</span><span class="o">.</span><span class="n">apps</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">get_view_name</span><span class="p">(</span><span class="n">view</span><span class="p">,</span> <span class="n">suffix</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#nautobot.apps.api.get_view_name" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
  
      <p>Derive the view name from its associated model, if it has one. Fall back to DRF's built-in <code>get_view_name</code>.</p>

          <details class="quote">
            <summary>Source code in <code>nautobot/core/api/utils.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-170">170</a></span>
<span class="normal"><a href="#__codelineno-0-171">171</a></span>
<span class="normal"><a href="#__codelineno-0-172">172</a></span>
<span class="normal"><a href="#__codelineno-0-173">173</a></span>
<span class="normal"><a href="#__codelineno-0-174">174</a></span>
<span class="normal"><a href="#__codelineno-0-175">175</a></span>
<span class="normal"><a href="#__codelineno-0-176">176</a></span>
<span class="normal"><a href="#__codelineno-0-177">177</a></span>
<span class="normal"><a href="#__codelineno-0-178">178</a></span>
<span class="normal"><a href="#__codelineno-0-179">179</a></span>
<span class="normal"><a href="#__codelineno-0-180">180</a></span>
<span class="normal"><a href="#__codelineno-0-181">181</a></span>
<span class="normal"><a href="#__codelineno-0-182">182</a></span>
<span class="normal"><a href="#__codelineno-0-183">183</a></span>
<span class="normal"><a href="#__codelineno-0-184">184</a></span>
<span class="normal"><a href="#__codelineno-0-185">185</a></span>
<span class="normal"><a href="#__codelineno-0-186">186</a></span>
<span class="normal"><a href="#__codelineno-0-187">187</a></span>
<span class="normal"><a href="#__codelineno-0-188">188</a></span>
<span class="normal"><a href="#__codelineno-0-189">189</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-170" name="__codelineno-0-170"></a><span class="k">def</span> <span class="nf">get_view_name</span><span class="p">(</span><span class="n">view</span><span class="p">,</span> <span class="n">suffix</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<a id="__codelineno-0-171" name="__codelineno-0-171"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-172" name="__codelineno-0-172"></a><span class="sd">    Derive the view name from its associated model, if it has one. Fall back to DRF&#39;s built-in `get_view_name`.</span>
<a id="__codelineno-0-173" name="__codelineno-0-173"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-174" name="__codelineno-0-174"></a>    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">view</span><span class="p">,</span> <span class="s2">&quot;queryset&quot;</span><span class="p">):</span>
<a id="__codelineno-0-175" name="__codelineno-0-175"></a>        <span class="c1"># Determine the model name from the queryset.</span>
<a id="__codelineno-0-176" name="__codelineno-0-176"></a>        <span class="n">name</span> <span class="o">=</span> <span class="n">view</span><span class="o">.</span><span class="n">queryset</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">verbose_name</span>
<a id="__codelineno-0-177" name="__codelineno-0-177"></a>        <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">w</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="o">+</span> <span class="n">w</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span> <span class="k">for</span> <span class="n">w</span> <span class="ow">in</span> <span class="n">name</span><span class="o">.</span><span class="n">split</span><span class="p">()])</span>  <span class="c1"># Capitalize each word</span>
<a id="__codelineno-0-178" name="__codelineno-0-178"></a>
<a id="__codelineno-0-179" name="__codelineno-0-179"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-180" name="__codelineno-0-180"></a>        <span class="c1"># Replicate DRF&#39;s built-in behavior.</span>
<a id="__codelineno-0-181" name="__codelineno-0-181"></a>        <span class="n">name</span> <span class="o">=</span> <span class="n">view</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span>
<a id="__codelineno-0-182" name="__codelineno-0-182"></a>        <span class="n">name</span> <span class="o">=</span> <span class="n">formatting</span><span class="o">.</span><span class="n">remove_trailing_string</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="s2">&quot;View&quot;</span><span class="p">)</span>
<a id="__codelineno-0-183" name="__codelineno-0-183"></a>        <span class="n">name</span> <span class="o">=</span> <span class="n">formatting</span><span class="o">.</span><span class="n">remove_trailing_string</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="s2">&quot;ViewSet&quot;</span><span class="p">)</span>
<a id="__codelineno-0-184" name="__codelineno-0-184"></a>        <span class="n">name</span> <span class="o">=</span> <span class="n">formatting</span><span class="o">.</span><span class="n">camelcase_to_spaces</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
<a id="__codelineno-0-185" name="__codelineno-0-185"></a>
<a id="__codelineno-0-186" name="__codelineno-0-186"></a>    <span class="k">if</span> <span class="n">suffix</span><span class="p">:</span>
<a id="__codelineno-0-187" name="__codelineno-0-187"></a>        <span class="n">name</span> <span class="o">+=</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="n">suffix</span>
<a id="__codelineno-0-188" name="__codelineno-0-188"></a>
<a id="__codelineno-0-189" name="__codelineno-0-189"></a>    <span class="k">return</span> <span class="n">name</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h2 id="nautobot.apps.api.is_api_request" class="doc doc-heading">
<code class="highlight language-python"><span class="n">nautobot</span><span class="o">.</span><span class="n">apps</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">is_api_request</span><span class="p">(</span><span class="n">request</span><span class="p">)</span></code>

<a href="#nautobot.apps.api.is_api_request" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
  
      <p>Return True of the request is being made via the REST API.</p>

          <details class="quote">
            <summary>Source code in <code>nautobot/core/api/utils.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-162">162</a></span>
<span class="normal"><a href="#__codelineno-0-163">163</a></span>
<span class="normal"><a href="#__codelineno-0-164">164</a></span>
<span class="normal"><a href="#__codelineno-0-165">165</a></span>
<span class="normal"><a href="#__codelineno-0-166">166</a></span>
<span class="normal"><a href="#__codelineno-0-167">167</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-162" name="__codelineno-0-162"></a><span class="k">def</span> <span class="nf">is_api_request</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
<a id="__codelineno-0-163" name="__codelineno-0-163"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-164" name="__codelineno-0-164"></a><span class="sd">    Return True of the request is being made via the REST API.</span>
<a id="__codelineno-0-165" name="__codelineno-0-165"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-166" name="__codelineno-0-166"></a>    <span class="n">api_path</span> <span class="o">=</span> <span class="n">reverse</span><span class="p">(</span><span class="s2">&quot;api-root&quot;</span><span class="p">)</span>
<a id="__codelineno-0-167" name="__codelineno-0-167"></a>    <span class="k">return</span> <span class="n">request</span><span class="o">.</span><span class="n">path_info</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">api_path</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h2 id="nautobot.apps.api.rest_api_server_error" class="doc doc-heading">
<code class="highlight language-python"><span class="n">nautobot</span><span class="o">.</span><span class="n">apps</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">rest_api_server_error</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

<a href="#nautobot.apps.api.rest_api_server_error" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
  
      <p>Handle exceptions and return a useful error message for REST API requests.</p>

          <details class="quote">
            <summary>Source code in <code>nautobot/core/api/utils.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-192">192</a></span>
<span class="normal"><a href="#__codelineno-0-193">193</a></span>
<span class="normal"><a href="#__codelineno-0-194">194</a></span>
<span class="normal"><a href="#__codelineno-0-195">195</a></span>
<span class="normal"><a href="#__codelineno-0-196">196</a></span>
<span class="normal"><a href="#__codelineno-0-197">197</a></span>
<span class="normal"><a href="#__codelineno-0-198">198</a></span>
<span class="normal"><a href="#__codelineno-0-199">199</a></span>
<span class="normal"><a href="#__codelineno-0-200">200</a></span>
<span class="normal"><a href="#__codelineno-0-201">201</a></span>
<span class="normal"><a href="#__codelineno-0-202">202</a></span>
<span class="normal"><a href="#__codelineno-0-203">203</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-192" name="__codelineno-0-192"></a><span class="k">def</span> <span class="nf">rest_api_server_error</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<a id="__codelineno-0-193" name="__codelineno-0-193"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-194" name="__codelineno-0-194"></a><span class="sd">    Handle exceptions and return a useful error message for REST API requests.</span>
<a id="__codelineno-0-195" name="__codelineno-0-195"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-196" name="__codelineno-0-196"></a>    <span class="n">type_</span><span class="p">,</span> <span class="n">error</span><span class="p">,</span> <span class="n">_traceback</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">exc_info</span><span class="p">()</span>
<a id="__codelineno-0-197" name="__codelineno-0-197"></a>    <span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
<a id="__codelineno-0-198" name="__codelineno-0-198"></a>        <span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">error</span><span class="p">),</span>
<a id="__codelineno-0-199" name="__codelineno-0-199"></a>        <span class="s2">&quot;exception&quot;</span><span class="p">:</span> <span class="n">type_</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span>
<a id="__codelineno-0-200" name="__codelineno-0-200"></a>        <span class="s2">&quot;nautobot_version&quot;</span><span class="p">:</span> <span class="n">settings</span><span class="o">.</span><span class="n">VERSION</span><span class="p">,</span>
<a id="__codelineno-0-201" name="__codelineno-0-201"></a>        <span class="s2">&quot;python_version&quot;</span><span class="p">:</span> <span class="n">platform</span><span class="o">.</span><span class="n">python_version</span><span class="p">(),</span>
<a id="__codelineno-0-202" name="__codelineno-0-202"></a>    <span class="p">}</span>
<a id="__codelineno-0-203" name="__codelineno-0-203"></a>    <span class="k">return</span> <span class="n">JsonResponse</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="n">status</span><span class="o">.</span><span class="n">HTTP_500_INTERNAL_SERVER_ERROR</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">



<h2 id="nautobot.apps.api.versioned_serializer_selector" class="doc doc-heading">
<code class="highlight language-python"><span class="n">nautobot</span><span class="o">.</span><span class="n">apps</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">versioned_serializer_selector</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">serializer_choices</span><span class="p">,</span> <span class="n">default_serializer</span><span class="p">)</span></code>

<a href="#nautobot.apps.api.versioned_serializer_selector" class="headerlink" title="Permanent link">&para;</a></h2>


  <div class="doc doc-contents ">
  
      <p>Returns appropriate serializer class depending on request api_version, and swagger_fake_view</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>obj</code></td>
          <td>
                <code>ViewSet instance</code>
          </td>
          <td>
            <div class="doc-md-description">
              
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>serializer_choices</code></td>
          <td>
                <code>tuple</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Tuple of SerializerVersions</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>default_serializer</code></td>
          <td>
                <code>Serializer</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Default Serializer class</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>nautobot/core/api/utils.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-83">83</a></span>
<span class="normal"><a href="#__codelineno-0-84">84</a></span>
<span class="normal"><a href="#__codelineno-0-85">85</a></span>
<span class="normal"><a href="#__codelineno-0-86">86</a></span>
<span class="normal"><a href="#__codelineno-0-87">87</a></span>
<span class="normal"><a href="#__codelineno-0-88">88</a></span>
<span class="normal"><a href="#__codelineno-0-89">89</a></span>
<span class="normal"><a href="#__codelineno-0-90">90</a></span>
<span class="normal"><a href="#__codelineno-0-91">91</a></span>
<span class="normal"><a href="#__codelineno-0-92">92</a></span>
<span class="normal"><a href="#__codelineno-0-93">93</a></span>
<span class="normal"><a href="#__codelineno-0-94">94</a></span>
<span class="normal"><a href="#__codelineno-0-95">95</a></span>
<span class="normal"><a href="#__codelineno-0-96">96</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-83" name="__codelineno-0-83"></a><span class="k">def</span> <span class="nf">versioned_serializer_selector</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">serializer_choices</span><span class="p">,</span> <span class="n">default_serializer</span><span class="p">):</span>
<a id="__codelineno-0-84" name="__codelineno-0-84"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns appropriate serializer class depending on request api_version, and swagger_fake_view</span>
<a id="__codelineno-0-85" name="__codelineno-0-85"></a>
<a id="__codelineno-0-86" name="__codelineno-0-86"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-87" name="__codelineno-0-87"></a><span class="sd">        obj (ViewSet instance):</span>
<a id="__codelineno-0-88" name="__codelineno-0-88"></a><span class="sd">        serializer_choices (tuple): Tuple of SerializerVersions</span>
<a id="__codelineno-0-89" name="__codelineno-0-89"></a><span class="sd">        default_serializer (Serializer): Default Serializer class</span>
<a id="__codelineno-0-90" name="__codelineno-0-90"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-91" name="__codelineno-0-91"></a>    <span class="k">if</span> <span class="ow">not</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="s2">&quot;swagger_fake_view&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="s2">&quot;major_version&quot;</span><span class="p">):</span>
<a id="__codelineno-0-92" name="__codelineno-0-92"></a>        <span class="n">api_version</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">obj</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">major_version</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">obj</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">minor_version</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-93" name="__codelineno-0-93"></a>        <span class="n">serializer</span> <span class="o">=</span> <span class="n">get_api_version_serializer</span><span class="p">(</span><span class="n">serializer_choices</span><span class="p">,</span> <span class="n">api_version</span><span class="p">)</span>
<a id="__codelineno-0-94" name="__codelineno-0-94"></a>        <span class="k">if</span> <span class="n">serializer</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-95" name="__codelineno-0-95"></a>            <span class="k">return</span> <span class="n">serializer</span>
<a id="__codelineno-0-96" name="__codelineno-0-96"></a>    <span class="k">return</span> <span class="n">default_serializer</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>

</div>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="admin.html" class="md-footer__link md-footer__link--prev" aria-label="Previous: nautobot.apps.admin" rel="prev">
            <div class="md-footer__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                nautobot.apps.admin
              </div>
            </div>
          </a>
        
        
          
          <a href="change_logging.html" class="md-footer__link md-footer__link--next" aria-label="Next: nautobot.apps.change_logging" rel="next">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                nautobot.apps.change_logging
              </div>
            </div>
            <div class="md-footer__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
    
    <div class="md-copyright__highlight">
        Copyright &copy; The Authors
    </div>
    <a href="https://github.com/nautobot/nautobot/blob/main/LICENSE.txt">Apache-2.0 LICENSE</a>
    
</div>

<div class="md-copyright">
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">Made with Material for MkDocs</a>
    | <a href="https://www.networktocode.com/community/" target="_blank" rel="noopener">Join Nautobot Slack</a>
    
    | <a href="https://networktocode.com" target="_blank" rel="noopener">Sponsored by <img
            src=../../../assets/networktocode_bw.png class="copyright-logo"></a>
    
</div>

<!-- RTD version flyout injected on live site -->
<div id="readthedocs-embed-flyout"></div>
      
        <div class="md-social">
  
    
    
    
    
    <a href="https://blog.networktocode.com/blog/tags/nautobot" target="_blank" rel="noopener" title="Network to Code Blog" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M0 64c0-17.7 14.3-32 32-32 229.8 0 416 186.2 416 416 0 17.7-14.3 32-32 32s-32-14.3-32-32C384 253.6 226.4 96 32 96 14.3 96 0 81.7 0 64zm0 352a64 64 0 1 1 128 0 64 64 0 1 1-128 0zm32-256c159.1 0 288 128.9 288 288 0 17.7-14.3 32-32 32s-32-14.3-32-32c0-123.7-100.3-224-224-224-17.7 0-32-14.3-32-32s14.3-32 32-32z"/></svg>
    </a>
  
    
    
    
    
    <a href="https://www.youtube.com/playlist?list=PLjA0bhxgryJ2Ts4GJMDA-tPzVWEncv4pb" target="_blank" rel="noopener" title="Nautobot Videos" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"/></svg>
    </a>
  
    
    
    
    
    <a href="https://www.networktocode.com/community/" target="_blank" rel="noopener" title="Network to Code Community" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M94.12 315.1c0 25.9-21.16 47.06-47.06 47.06S0 341 0 315.1c0-25.9 21.16-47.06 47.06-47.06h47.06v47.06zm23.72 0c0-25.9 21.16-47.06 47.06-47.06s47.06 21.16 47.06 47.06v117.84c0 25.9-21.16 47.06-47.06 47.06s-47.06-21.16-47.06-47.06V315.1zm47.06-188.98c-25.9 0-47.06-21.16-47.06-47.06S139 32 164.9 32s47.06 21.16 47.06 47.06v47.06H164.9zm0 23.72c25.9 0 47.06 21.16 47.06 47.06s-21.16 47.06-47.06 47.06H47.06C21.16 243.96 0 222.8 0 196.9s21.16-47.06 47.06-47.06H164.9zm188.98 47.06c0-25.9 21.16-47.06 47.06-47.06 25.9 0 47.06 21.16 47.06 47.06s-21.16 47.06-47.06 47.06h-47.06V196.9zm-23.72 0c0 25.9-21.16 47.06-47.06 47.06-25.9 0-47.06-21.16-47.06-47.06V79.06c0-25.9 21.16-47.06 47.06-47.06 25.9 0 47.06 21.16 47.06 47.06V196.9zM283.1 385.88c25.9 0 47.06 21.16 47.06 47.06 0 25.9-21.16 47.06-47.06 47.06-25.9 0-47.06-21.16-47.06-47.06v-47.06h47.06zm0-23.72c-25.9 0-47.06-21.16-47.06-47.06 0-25.9 21.16-47.06 47.06-47.06h117.84c25.9 0 47.06 21.16 47.06 47.06 0 25.9-21.16 47.06-47.06 47.06H283.1z"/></svg>
    </a>
  
    
    
    
    
    <a href="https://github.com/nautobot/nautobot" target="_blank" rel="noopener" title="GitHub Repo" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
    
    
    
    
    <a href="https://twitter.com/networktocode" target="_blank" rel="noopener" title="Network to Code Twitter" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["content.code.copy", "navigation.footer", "navigation.tabs", "navigation.tabs.sticky", "navigation.tracking", "search.highlight", "search.share", "search.suggest"], "search": "../../../assets/javascripts/workers/search.74e28a9f.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.220ee61c.min.js"></script>
      
        
          <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
        
      
    
  </body>
</html>